cscope 15 /playpen/workspace/newuoa/Correspondence_Oct7/Pablo2_Oct7/lib/vtksrep/Correspondence               0000498771
	@alignsrep.cpp

12 
	~"®ign¤•.h
"

13 
	~<io¡»am
>

14 
	~"visu®iz©iÚ.h
"

16 
usšg
 
Çme¥aû
 
	g¡d
;

19 
	g®ign¤•
::
	$®ign¤•
()

21 
	}
}

30 
®ign¤•
::
	$®ign¤•
(cÚ¡ * 
f’ame
 ,
š‹½Ş©iÚLev–
 ){

31 
this
->
quadFig
 = 
s
.
	`G‘QuadFigu»
(
f’ame
);

32 
this
->
rowNums
 =his->
quadFig
->
	`g‘RowCouÁ
();

33 
this
->
cŞNums
 =his->
quadFig
->
	`g‘CŞumnCouÁ
();

34 
this
->
quadNum
 = (this->
rowNums
-1)*Ñhis->
cŞNums
-1);

35 
this
->
üe¡AtomNums
 = (this->
rowNums
-2)*2 +his->
cŞNums
*2;

36 
this
->
üe¡QuadNum
 = (this->
rowNums
-1)*2 + (this->
cŞNums
-1)*2;

37 
this
->
tÙ®AtomNums
 =his->
rowNums
 *his->
cŞNums
;

38 
this
->
š‹riÜAtomNums
 =his->
tÙ®AtomNums
 -his->
üe¡AtomNums
;

39 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

40 
this
->
¡•
 = 
	`pow
(()2, ()
š‹½Ş©iÚLev–
);

41 
this
->
subQuadPoštsNum
 = (
¡•
+1)*(step+1);

47 
this
->
»ad¤•
 = 
vtkSm¬tPoš‹r
<
vtkR—dSR•
>::
	`New
();

48 
»ad¤•
->
	`S‘FeName
(
f’ame
);

49 
»ad¤•
->
	`Upd©e
();

51 
this
->
¤•fig
 = 
»ad¤•
->
	`G‘Ouut
();

52 
	}
}

106 
	g®ign¤•
::
§veM©rix
(
veùÜ
<
VeùÜ3D
> 
pošts
,cÚ¡ * 
f’ame
){

108 
	g¡d
::
of¡»am
 
fout
;

109 
	gfout
.
İ’
(
f’ame
);

111 if(
	gfout
) {

112 
	gi
 =0; i< 
	gpošts
.
size
();i++){

113 
	gfout
<< 
	gpošts
[
i
].
g‘X
()<<" "<<pošts[i].
g‘Y
()<<" "<<pošts[i].
g‘Z
()<<
	g’dl
;

117 
	gcout
<<"SucûssfuÎy saved m©rixo: "<<
	gf’ame
<<
	g’dl
;

120 
	gû¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
	g’dl
;

122 
	gfout
.
şo£
();

139 
	g®ign¤•
::
	$g‘PoštsOnBound¬y
(){

141 
M3DQuadPrim™ive
* 
´im
;

142 
M3DQuadEndPrim™ive
* 
’dPrim
;

143 
VeùÜ3D
 
up_b_pošt
, 
down_b_pošt
, 
up_b_üe¡_pošt
, 
down_b_üe¡_pošt
, 
üe¡_b_pošt
;

146 
u
 =1; u<
this
->
rowNums
-1; u++){

147 
v
 =1; v<
this
->
cŞNums
-1; v++){

148 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
u
,
v
));

150 
up_b_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R0
()*´im->
	`g‘U0
();

151 
this
->
up_b_mid
.
	`push_back
(
up_b_pošt
);

154 
down_b_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R1
()*´im->
	`g‘U1
();

155 
this
->
down_b_mid
.
	`push_back
(
down_b_pošt
);

160 
v
 =0; v<
cŞNums
; v++){

162 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(0,
v
));

163 
up_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R0
()*´im->
	`g‘U0
();

164 
this
->
up_b_üe¡
.
	`push_back
(
up_b_üe¡_pošt
);

167 
down_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R1
()*´im->
	`g‘U1
();

168 
this
->
down_b_üe¡
.
	`push_back
(
down_b_üe¡_pošt
);

171 
’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(0, 
v
));

172 
üe¡_b_pošt
 = 
’dPrim
->
	`g‘X
(è+ƒndPrim->
	`g‘REnd
()*’dPrim->
	`g‘UEnd
();

173 
this
->
medŸl_üe¡
.
	`push_back
(
üe¡_b_pošt
);

175 
u
 =1; u<
rowNums
; u++){

177 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
u
, 
cŞNums
 - 1));

178 
up_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R0
()*´im->
	`g‘U0
();

179 
this
->
up_b_üe¡
.
	`push_back
(
up_b_üe¡_pošt
);

182 
down_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R1
()*´im->
	`g‘U1
();

183 
this
->
down_b_üe¡
.
	`push_back
(
down_b_üe¡_pošt
);

186 
’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
u
, 
cŞNums
 - 1));

187 
üe¡_b_pošt
 = 
’dPrim
->
	`g‘X
(è+ƒndPrim->
	`g‘REnd
()*’dPrim->
	`g‘UEnd
();

188 
this
->
medŸl_üe¡
.
	`push_back
(
üe¡_b_pošt
);

190 
v
 =
cŞNums
-2; v>0; v--){

192 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
rowNums
-1, 
v
));

193 
up_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R0
()*´im->
	`g‘U0
();

194 
this
->
up_b_üe¡
.
	`push_back
(
up_b_üe¡_pošt
);

197 
down_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R1
()*´im->
	`g‘U1
();

198 
this
->
down_b_üe¡
.
	`push_back
(
down_b_üe¡_pošt
);

201 
’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
rowNums
-1, 
v
));

202 
üe¡_b_pošt
 = 
’dPrim
->
	`g‘X
(è+ƒndPrim->
	`g‘REnd
()*’dPrim->
	`g‘UEnd
();

203 
this
->
medŸl_üe¡
.
	`push_back
(
üe¡_b_pošt
);

205 
u
 =
rowNums
-1; u>0; u--){

207 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
u
, 0));

208 
up_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R0
()*´im->
	`g‘U0
();

209 
this
->
up_b_üe¡
.
	`push_back
(
up_b_üe¡_pošt
);

212 
down_b_üe¡_pošt
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R1
()*´im->
	`g‘U1
();

213 
this
->
down_b_üe¡
.
	`push_back
(
down_b_üe¡_pošt
);

216 
’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
u
, 0));

217 
üe¡_b_pošt
 = 
’dPrim
->
	`g‘X
(è+ƒndPrim->
	`g‘REnd
()*’dPrim->
	`g‘UEnd
();

218 
this
->
medŸl_üe¡
.
	`push_back
(
üe¡_b_pošt
);

220 
	}
}

235 
	g®ign¤•
::
	$weightA»aToBound¬yPošts
(){

239 
	`g‘PoštsOnBound¬y
();

244 
	`g‘AÎSubQuadsV”‹xesOnBound¬y
();

247 
up_quads_¬—s
 = 
	`ÿlcuÏ‹A»as_m‘hod2
(
this
->
up_BP
);

248 
down_quads_¬—s
 = 
	`ÿlcuÏ‹A»as_m‘hod2
(
this
->
down_BP
);

253 
	`g‘C»¡QuadsA»a
();

257 
this
->
poštIndex
 = 0;

259 
	`cÜ»PoštAndA»a
(
up_quads_¬—s
, 
this
->
up_b_mid
,his->
up_b_üe¡_¬—s
,his->
up_b_üe¡
);

262 
	`cÜ»PoštAndA»a
(
down_quads_¬—s
, 
this
->
down_b_mid
,his->
down_b_üe¡_¬—s
,his->
down_b_üe¡
);

266 
this
->
bound¬yPošts
.
	`push_back
Ñhis->
medŸl_üe¡
[0]);

267 
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
;

268 
¬—1
 = 
this
->
down_b_üe¡_¬—s
[this->
medŸl_üe¡
.
	`size
()-1];

269 
¬—2
 = 
this
->
down_b_üe¡_¬—s
[0];

270 
¬—3
 = 
this
->
up_b_üe¡_¬—s
[0];

271 
¬—4
 = 
this
->
up_b_üe¡_¬—s
[this->
medŸl_üe¡
.
	`size
()-1];

272 
	`addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

274 
i
 =1; i<
this
->
medŸl_üe¡
.
	`size
();i++){

275 
this
->
bound¬yPošts
.
	`push_back
Ñhis->
medŸl_üe¡
[
i
]);

276 
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
;

277 
¬—1
 = 
this
->
down_b_üe¡_¬—s
[
i
-1];

278 
¬—2
 = 
this
->
down_b_üe¡_¬—s
[
i
];

279 
¬—3
 = 
this
->
up_b_üe¡_¬—s
[
i
];

280 
¬—4
 = 
this
->
up_b_üe¡_¬—s
[
i
-1];

281 
	`addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

311 
	}
}

316 
	g®ign¤•
::
	$addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
){

318 
this
->
bound¬yPoštsA»as
.
	`push_back
(
	`VeùÜSR•F—tu»sTy³
());

320 
this
->
bound¬yPoštsA»as
[this->
poštIndex
].
	`push_back
(
¬—1
);

321 
this
->
bound¬yPoštsA»as
[this->
poštIndex
].
	`push_back
(
¬—2
);

322 
this
->
bound¬yPoštsA»as
[this->
poštIndex
].
	`push_back
(
¬—3
);

323 
this
->
bound¬yPoštsA»as
[this->
poštIndex
].
	`push_back
(
¬—4
);

325 
this
->
poštIndex
++;

326 
	}
}

336 
	g®ign¤•
::
cÜ»PoštAndA»a
(
veùÜ
<> 
quads_¬—s
, veùÜ<
VeùÜ3D
> 
mid_pošts
, veùÜ<> 
üe¡_¬—s
,

337 
veùÜ
<
VeùÜ3D
> 
üe¡_pošts
){

338 
	gquadNumEachRow
 = 
this
->
cŞNums
-1;

339 
	g¬—1
, 
	g¬—2
, 
	g¬—3
, 
	g¬—4
;

341 
	gpšdex
 =0;

342 
	gn
=0;‚<
	gthis
->
	growNums
-2;n++){

343 
	gm
=0; m<
	gthis
->
	gcŞNums
-2; m++){

344 
	gthis
->
	gbound¬yPošts
.
push_back
(
mid_pošts
[
pšdex
]);

346 
	g¬—1
 = 
quads_¬—s
[
quadNumEachRow
*
n
 + 
m
];

347 
	g¬—2
 = 
quads_¬—s
[
quadNumEachRow
*
n
 + 
m
+1];

348 
	g¬—3
 = 
quads_¬—s
[
quadNumEachRow
*
n
 + 
m
+1+quadNumEachRow];

349 
	g¬—4
 = 
quads_¬—s
[
quadNumEachRow
*
n
 + 
m
+quadNumEachRow];

355 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

357 
	gpšdex
++;

362 if(
	gthis
->
	güe¡QuadNum
!=
üe¡_pošts
.
size
(è|| 
this
->
üe¡QuadNum
!ğ
üe¡_¬—s
.size()

363 || 
üe¡_pošts
.
size
()!ğ
üe¡_¬—s
.size()){

364 
cout
<<"Mes§gäom‡lign¤•.ıp:hüe¡ quad‚umb” shouldƒqu® tØthup_b_üe¡_¬— veùÜ' size"<<
’dl
;

368 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[0]);

369 
	g¬—1
 = 
üe¡_¬—s
[
this
->
üe¡QuadNum
 -1];

370 
	g¬—2
 = 
üe¡_¬—s
[0];

371 
	g¬—3
 = 
quads_¬—s
[0];

372 
	g¬—4
 = 0;

373 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

376 
	gk
;

377 
	gk
=1;k<
	gquadNumEachRow
;k++){

378 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[
k
]);

380 
	g¬—1
 = 
üe¡_¬—s
[
k
-1];

381 
	g¬—2
 = 
üe¡_¬—s
[
k
];

382 
	g¬—3
 = 
quads_¬—s
[
k
];

383 
	g¬—4
 = 
quads_¬—s
[
k
-1];

385 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

389 
	gk
 = 
this
->
cŞNums
-1;

390 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[
k
]);

391 
	g¬—1
 = 
üe¡_¬—s
[
k
-1];

392 
	g¬—2
 = 
üe¡_¬—s
[
k
];

393 
	g¬—3
 = 
quads_¬—s
[
k
-1];

394 
	g¬—4
 = 0;

395 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

396 
	gk
++;

399 
	gj
=1; j<
	gthis
->
	growNums
-1;j++){

400 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[
k
]);

402 
	g¬—1
 = 
üe¡_¬—s
[
k
-1];

403 
	g¬—2
 = 
üe¡_¬—s
[
k
];

404 
	g¬—3
 = 
quads_¬—s
[
quadNumEachRow
*
j
+(
this
->
cŞNums
-2)];

405 
	g¬—4
 = 
quads_¬—s
[
quadNumEachRow
*(
j
-1)+(
this
->
cŞNums
-2)];

407 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

408 
	gk
++;

412 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[
k
]);

413 
	g¬—1
 = 
üe¡_¬—s
[
k
-1];

414 
	g¬—2
 = 
üe¡_¬—s
[
k
];

415 
	g¬—3
 = 
quads_¬—s
[
this
->
quadNum
-1];

416 
	g¬—4
 = 0;

417 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

418 
	gk
++;

421 
	gi
 =1; i<
	gquadNumEachRow
;i++){

422 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[
k
]);

424 
	g¬—1
 = 
üe¡_¬—s
[
k
-1];

425 
	g¬—2
 = 
üe¡_¬—s
[
k
];

426 
	g¬—3
 = 
quads_¬—s
[
this
->
quadNum
-1-(
i
-1)];

427 
	g¬—4
 = 
quads_¬—s
[
this
->
quadNum
-1-
i
];

429 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

430 
	gk
++;

434 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[
k
]);

435 
	g¬—1
 = 
üe¡_¬—s
[
k
-1];

436 
	g¬—2
 = 
üe¡_¬—s
[
k
];

437 
	g¬—3
 = 
quads_¬—s
[
this
->
quadNum
-
quadNumEachRow
];

438 
	g¬—4
 = 0;

439 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

440 
	gk
++;

443 
	gi
 =
this
->
rowNums
-2; i>0; i--){

444 
	gthis
->
	gbound¬yPošts
.
push_back
(
üe¡_pošts
[
k
]);

446 
	g¬—1
 = 
üe¡_¬—s
[
k
-1];

447 
	g¬—2
 = 
üe¡_¬—s
[
k
];

448 
	g¬—3
 = 
quads_¬—s
[(
i
-1)*
quadNumEachRow
];

449 
	g¬—4
 = 
quads_¬—s
[
i
*
quadNumEachRow
];

451 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

452 
	gk
++;

461 
	gveùÜ
<
	gVeùÜ3D
> 
	g®ign¤•
::
	$weightPošts
(){

464 
tÙ®A»a
;

465 
veùÜ
<> 
weightA»a
;

466 
veùÜ
<
VeùÜ3D
> 
wigh‹dPošts
;

493  
wigh‹dPošts
;

494 
	}
}

503 
	g®ign¤•
::
	$g‘AÎSubQuadsV”‹xesOnBound¬y
(){

505 
quadIndex
 = 0;

507 
veùÜ
<> 
subquadpošt_v
, 
subquadpošt_u
;

508 
VeùÜQuadPošt
 
quadpošts_u
;

509 
VeùÜQuadPošt
 
quadpošts_v
;

512 
i
 = 0; i < 
this
->
rowNums
 -1; i++){

513 
j
 = 0; j < 
this
->
cŞNums
 -1; j++){

514 
quadpošts_u
.
	`push_back
(
	`VeùÜDoubËPošts
());

515 
quadpošts_v
.
	`push_back
(
	`VeùÜDoubËPošts
());

518 
quadpoštsu
[4], 
quadpoštsv
[4];

520 
quadpoštsu
[0] = 
i
;

521 
quadpoštsv
[0] = 
j
;

523 
quadpoštsu
[1] = 
i
 + 1;

524 
quadpoštsv
[1] = 
j
;

526 
quadpoštsu
[2] = 
i
 + 1;

527 
quadpoštsv
[2] = 
j
 + 1;

529 
quadpoštsu
[3] = 
i
;

530 
quadpoštsv
[3] = 
j
 + 1;

534 
subquadpošt_u
 = 
this
->
s
.
	`¥l™Quad
(
quadpoštsu
[0],quadpoštsu[1],quadpoštsu[2],quadpoštsu[3],his->
¡•
);

537 
subquadpošt_v
 = 
this
->
s
.
	`¥l™Quad
(
quadpoštsv
[0],quadpoštsv[1],quadpoštsv[2],quadpoštsv[3],his->
¡•
);

539 
m
 =0; m<
subquadpošt_u
.
	`size
();m++){

540 
quadpošts_u
[
quadIndex
].
	`push_back
(
subquadpošt_u
[
m
]);

541 
quadpošts_v
[
quadIndex
].
	`push_back
(
subquadpošt_v
[
m
]);

547 
quadIndex
++;

549 
subquadpošt_v
.
	`ş—r
();

550 
subquadpošt_u
.
	`ş—r
();

554 
M3DQuadIÁ”pŞ©”
 *
m
 = 
Ãw
 
	`M3DQuadIÁ”pŞ©”
(
this
->
quadFig
);

557 
VeùÜ3D
 
pošt
;

559 
i
 =0; i< 
this
->
quadNum
; i++){

560 
j
 =0; j< 
this
->
subQuadPoštsNum
; j++){

562 
pošt
 = 
m
->
	`š‹½Ş©eQuadSpoke
(
this
->
quadFig
,
quadpošts_u
[
i
][
j
],
quadpošts_v
[i][j],0)->
	`g‘B
();

564 
up_BP
.
	`push_back
(
pošt
);

567 
pošt
 = 
m
->
	`š‹½Ş©eQuadSpoke
(
this
->
quadFig
,
quadpošts_u
[
i
][
j
],
quadpošts_v
[i][j],1)->
	`g‘B
();

568 
down_BP
.
	`push_back
(
pošt
);

572 
d–‘e
 
m
;

573 
	}
}

579 
	gveùÜ
<> 
	g®ign¤•
::
ÿlcuÏ‹A»as_m‘hod2
(
veùÜ
<
VeùÜ3D
> 
surçûPošts
){

580 
subQuadNum
 = 
¡•
*step;

582 
	gveùÜ
<> 
	gsubquad¬—s
;

584 
	gveùÜ
<> 
	gquad¬—
;

586 
VeùÜ3D
 
	gpošts
[4];

587 
	gsubquad¬—
;

590 
	gn
=0;‚<
	gquadNum
;n++){

592 
	gquad¬—
.
push_back
(0);

595 
	gm
=0; m<
	g¡•
; m++){

596 
	gk
 = 0; k<
	g¡•
; k++){

597 
	gcu¼’ošt
 = 
k
 + 
m
*(
¡•
+1);

599 
	gpošts
[0] = 
surçûPošts
[
n
*
subQuadPoštsNum
+
cu¼’ošt
];

601 
	gpošts
[1] = 
surçûPošts
[
n
*
subQuadPoštsNum
+
cu¼’ošt
+1];

603 
	gpošts
[2] = 
surçûPošts
[
n
*
subQuadPoštsNum
+
cu¼’ošt
+1+
¡•
+1];

605 
	gpošts
[3] = 
surçûPošts
[
n
*
subQuadPoštsNum
+
cu¼’ošt
+
¡•
+1];

608 
	gsubquad¬—
 = 
quadA»a
(
pošts
);

611 
	gsubquad¬—s
.
push_back
(
subquad¬—
);

616 
	gi
 =0; i<
	gsubQuadNum
;i++){

617 
	gquad¬—
[
n
] +ğ
subquad¬—s
[
i
];

621 
	gsubquad¬—s
.
ş—r
();

624  
	gquad¬—
;

636 
	g®ign¤•
::
	$quadA»a
(
VeùÜ3D
 *
pošt
){

638 
dŸgÚ®p0p2
 = 
	`sq¹
(
	`pow
(
pošt
[0].
	`g‘X
()-pošt[2].g‘X(), 2è+…owÕošt[0].
	`g‘Y
()-pošt[2].g‘Y(), 2è+…owÕošt[0].
	`g‘Z
()-point[2].getZ(), 2));

640 
dŸgÚ®p1p3
 = 
	`sq¹
(
	`pow
(
pošt
[1].
	`g‘X
()-pošt[3].g‘X(), 2è+…owÕošt[1].
	`g‘Y
()-pošt[3].g‘Y(), 2è+…owÕošt[1].
	`g‘Z
()-point[3].getZ(), 2));

644 
p0p1
 = 
	`sq¹
(
	`pow
(
pošt
[0].
	`g‘X
()-pošt[1].g‘X(), 2è+…owÕošt[0].
	`g‘Y
()-pošt[1].g‘Y(), 2è+…owÕošt[0].
	`g‘Z
()-point[1].getZ(), 2));

646 
p1p2
 = 
	`sq¹
(
	`pow
(
pošt
[1].
	`g‘X
()-pošt[2].g‘X(), 2è+…owÕošt[1].
	`g‘Y
()-pošt[2].g‘Y(), 2è+…owÕošt[1].
	`g‘Z
()-point[2].getZ(), 2));

648 
p2p3
 = 
	`sq¹
(
	`pow
(
pošt
[2].
	`g‘X
()-pošt[3].g‘X(), 2è+…owÕošt[2].
	`g‘Y
()-pošt[3].g‘Y(), 2è+…owÕošt[2].
	`g‘Z
()-point[3].getZ(), 2));

650 
p0p3
 = 
	`sq¹
(
	`pow
(
pošt
[0].
	`g‘X
()-pošt[3].g‘X(), 2è+…owÕošt[0].
	`g‘Y
()-pošt[3].g‘Y(), 2è+…owÕošt[0].
	`g‘Z
()-point[3].getZ(), 2));

653 
s1
 = (
dŸgÚ®p0p2
 + 
p0p1
 + 
p1p2
)/2;

654 
s2
 = (
dŸgÚ®p0p2
 + 
p0p3
 + 
p2p3
)/2;

655 
s3
 = (
dŸgÚ®p1p3
 + 
p0p1
 + 
p0p3
)/2;

656 
s4
 = (
dŸgÚ®p1p3
 + 
p1p2
 + 
p2p3
)/2;

659 
size1
 = 
	`sq¹
(
	`çbs
(
s1
*(s1-
p0p1
)*(s1-
p1p2
)*(s1-
dŸgÚ®p0p2
)));

660 
size2
 = 
	`sq¹
(
	`çbs
(
s2
*(s2-
p0p3
)*(s2-
p2p3
)*(s2-
dŸgÚ®p0p2
)));

663 
size3
 = 
	`sq¹
(
	`çbs
(
s3
*(s3-
p0p1
)*(s3-
p0p3
)*(s3-
dŸgÚ®p1p3
)));

664 
size4
 = 
	`sq¹
(
	`çbs
(
s4
*(s4-
p1p2
)*(s4-
p2p3
)*(s4-
dŸgÚ®p1p3
)));

667  
	`mš
(
size1
+
size2
, 
size3
+
size4
);

668 
	}
}

672 
	g®ign¤•
::
	$d¿wBound¬y
(){

673 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
 = vtkSm¬tPoš‹r<vtkR’d””>::
	`New
();

674 
»nd””
->
	`S‘Background
(1,1,1);

675 
vtkSm¬tPoš‹r
<
vtkR’d”Wšdow
> 
»nd”Wšdow
 = vtkSm¬tPoš‹r<vtkR’d”Wšdow>::
	`New
();

676 
»nd”Wšdow
->
	`AddR’d””
(
»nd””
);

677 
vtkSm¬tPoš‹r
<
vtkR’d”WšdowIÁ”aùÜ
> 
»nd”WšdowIÁ”aùÜ
 = vtkSm¬tPoš‹r<vtkR’d”WšdowIÁ”aùÜ>::
	`New
();

678 
»nd”WšdowIÁ”aùÜ
->
	`S‘R’d”Wšdow
(
»nd”Wšdow
);

680 
quadNums
 = (
this
->
quadFig
->
	`g‘RowCouÁ
()-1)*Ñhis->quadFig->
	`g‘CŞumnCouÁ
()-1);

681 
boŞ
 
moved
 = 
Œue
;

682 
quadCŞÜ
[3] = {1,0.5,0};

685 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubPos™iÚ_b_u
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

686 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubPos™iÚ_s
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

689 
visu®iz©iÚ
 
	`visu®Objeù_u
(
this
->
quadFig
,his->
š‹½Ş©iÚLev–
, 0, 
moved
, 
quadCŞÜ
, 
»nd””
,0,0,0,0.0);

693 
hubPos™iÚ_b_u
 = 
visu®Objeù_u
.
	`g‘SubQuadsPos™iÚ
(0);

694 
hubPos™iÚ_s
 = 
visu®Objeù_u
.
	`g‘SubQuadsPos™iÚ
(1);

699 
i
 =0;i<
quadNums
;i++){

700 
visu®Objeù_u
.
	`£tCŞÜ
(
quadCŞÜ
);

701 
visu®Objeù_u
.
	`d¿wSpoke
(
hubPos™iÚ_b_u
,
hubPos™iÚ_s
,
i
);

702 
visu®Objeù_u
.
	`d¿wF¿meOfQuadByIndex
(
hubPos™iÚ_b_u
,
i
);

708 
»nd”Wšdow
->
	`R’d”
();

709 
»nd”WšdowIÁ”aùÜ
->
	`S¹
();

710 
	}
}

718 
	g®ign¤•
::
	$d¿wC»¡Spokes
(
š‹½Ş©iÚËv–
){

720 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
 = vtkSm¬tPoš‹r<vtkR’d””>::
	`New
();

721 
»nd””
->
	`S‘Background
(1,1,1);

722 
vtkSm¬tPoš‹r
<
vtkR’d”Wšdow
> 
»nd”Wšdow
 = vtkSm¬tPoš‹r<vtkR’d”Wšdow>::
	`New
();

723 
»nd”Wšdow
->
	`AddR’d””
(
»nd””
);

724 
vtkSm¬tPoš‹r
<
vtkR’d”WšdowIÁ”aùÜ
> 
»nd”WšdowIÁ”aùÜ
 = vtkSm¬tPoš‹r<vtkR’d”WšdowIÁ”aùÜ>::
	`New
();

725 
»nd”WšdowIÁ”aùÜ
->
	`S‘R’d”Wšdow
(
»nd”Wšdow
);

728 
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
š‹½Ş©eüe¡¥okes
 = vtkSm¬tPoš‹r<vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic>::
	`New
();

729 
vtkSm¬tPoš‹r
<
vtkPošts
> 
poštsüe¡¥okes
 = vtkSm¬tPoš‹r<vtkPošts>::
	`New
();

730 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿yüe¡¥okes
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
	`New
();

731 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyüe¡¥okes
 = vtkSm¬tPoš‹r<vtkPŞyD©a>::
	`New
();

733 
š‹½Ş©eüe¡¥okes
->
	`S‘IÅut
(
this
->
¤•fig
);

734 
š‹½Ş©eüe¡¥okes
->
	`S‘IÁ”pŞ©iÚLev–
(
š‹½Ş©iÚËv–
);

735 
š‹½Ş©eüe¡¥okes
->
	`Upd©e
();

739 
vtkSm¬tPoš‹r
<
vtkSR•
> 
¤•üe¡
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘SR•Ouut
();

741 
cout
<<"üe¡QuadNum is: "<<
üe¡QuadNum
<<
’dl
;

744 
i
 = 0; i < 
this
->
üe¡QuadNum
-1; i++){

746 
vtkSR•
::
VNLTy³
 
p0
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edPošt
(
i
,0);

747 
vtkSR•
::
VNLTy³
 
p0s
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,0,0.5);

750 
vtkSR•
::
VNLTy³
 
p1
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edPošt
(
i
+1,0);

751 
vtkSR•
::
VNLTy³
 
p1s
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
+1,0,0.5);

753 
vtkSm¬tPoš‹r
<
vtkLše
> 
üe¡¥ok–še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

754 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p0
[0]+
p0s
[0],…0[1]+p0s[1],…0[2]+p0s[2]));

755 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p1
[0]+
p1s
[0],…1[1]+p1s[1],…1[2]+p1s[2]));

757 
ûÎ¬¿yüe¡¥okes
->
	`In£¹NextC–l
(
üe¡¥ok–še
);

762 
vtkSR•
::
VNLTy³
 
p0
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edPošt
(
this
->
üe¡QuadNum
-1,0);

763 
vtkSR•
::
VNLTy³
 
p0s
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
this
->
üe¡QuadNum
-1,0,0.5);

766 
vtkSR•
::
VNLTy³
 
p1
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edPošt
(0,0);

767 
vtkSR•
::
VNLTy³
 
p1s
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(0,0,0.5);

769 
vtkSm¬tPoš‹r
<
vtkLše
> 
üe¡¥ok–še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

770 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p0
[0]+
p0s
[0],…0[1]+p0s[1],…0[2]+p0s[2]));

771 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p1
[0]+
p1s
[0],…1[1]+p1s[1],…1[2]+p1s[2]));

773 
ûÎ¬¿yüe¡¥okes
->
	`In£¹NextC–l
(
üe¡¥ok–še
);

775 
pŞyüe¡¥okes
->
	`S‘Pošts
(
poštsüe¡¥okes
);

776 
pŞyüe¡¥okes
->
	`S‘Lšes
(
ûÎ¬¿yüe¡¥okes
);

778 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
> 
üe¡¥okesm­³r
 = vtkSm¬tPoš‹r<vtkPŞyD©aM­³r>::
	`New
();

779 
üe¡¥okesm­³r
->
	`S‘IÅut
(
pŞyüe¡¥okes
);

780 
vtkSm¬tPoš‹r
<
vtkAùÜ
> 
¥oke§ùÜ
 = vtkAùÜ::
	`New
();

781 
¥oke§ùÜ
->
	`S‘M­³r
(
üe¡¥okesm­³r
);

782 
¥oke§ùÜ
->
	`G‘Prİ”ty
()->
	`S‘LšeWidth
(1);

783 
¥oke§ùÜ
->
	`G‘Prİ”ty
()->
	`S‘CŞÜ
(0,1,0);

784 
»nd””
->
	`AddAùÜ
(
¥oke§ùÜ
);

800 
»nd”Wšdow
->
	`R’d”
();

801 
»nd”WšdowIÁ”aùÜ
->
	`S¹
();

803 
	}
}

809 
	g®ign¤•
::
	$d¿wC»¡Spokes_m‘hod2
(){

811 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
 = vtkSm¬tPoš‹r<vtkR’d””>::
	`New
();

812 
»nd””
->
	`S‘Background
(1,1,1);

813 
vtkSm¬tPoš‹r
<
vtkR’d”Wšdow
> 
»nd”Wšdow
 = vtkSm¬tPoš‹r<vtkR’d”Wšdow>::
	`New
();

814 
»nd”Wšdow
->
	`AddR’d””
(
»nd””
);

815 
vtkSm¬tPoš‹r
<
vtkR’d”WšdowIÁ”aùÜ
> 
»nd”WšdowIÁ”aùÜ
 = vtkSm¬tPoš‹r<vtkR’d”WšdowIÁ”aùÜ>::
	`New
();

816 
»nd”WšdowIÁ”aùÜ
->
	`S‘R’d”Wšdow
(
»nd”Wšdow
);

819 
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
š‹½Ş©eüe¡¥okes
 = vtkSm¬tPoš‹r<vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic>::
	`New
();

820 
vtkSm¬tPoš‹r
<
vtkPošts
> 
poštsüe¡¥okes
 = vtkSm¬tPoš‹r<vtkPošts>::
	`New
();

821 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿yüe¡¥okes
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
	`New
();

822 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyüe¡¥okes
 = vtkSm¬tPoš‹r<vtkPŞyD©a>::
	`New
();

824 
š‹½Ş©eüe¡¥okes
->
	`S‘IÅut
(
this
->
¤•fig
);

825 
š‹½Ş©eüe¡¥okes
->
	`S‘IÁ”pŞ©iÚLev–
(
this
->
š‹½Ş©iÚLev–
);

826 
š‹½Ş©eüe¡¥okes
->
	`Upd©e
();

828 
veùÜ
<> 
subpošts_i_up
;

829 
veùÜ
<> 
subpošts_i_down
;

830 
veùÜ
<> 
subpošts_a
;

831 
VeùÜ3D
 
pošts
[4];

836 
this
->
s
.
	`¥l™Lše
(0,0.5,this->
¡•
,
subpošts_i_up
);

838 
this
->
s
.
	`¥l™Lše
(0.5,1,this->
¡•
,
subpošts_i_down
);

841 
this
->
s
.
	`¥l™Lše
(0,1,this->
¡•
,
subpošts_a
);

844 
i
 =0; i< 
this
->
üe¡QuadNum
; i++){

845 
m
 =0; m< 
subpošts_a
.
	`size
(); m++){

847 
vtkSR•
::
VNLTy³
 
p0
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edPošt
(
i
,
subpošts_a
[
m
]);

850 
n
=0;‚<
subpošts_i_up
.
	`size
();‚++){

852 
vtkSR•
::
VNLTy³
 
p1
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
],
subpošts_i_up
[
n
]);

854 
vtkSm¬tPoš‹r
<
vtkLše
> 
üe¡¥ok–še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

855 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p0
[0],…0[1],…0[2]));

856 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p0
[0]+
p1
[0],…0[1]+p1[1],…0[2]+p1[2]));

858 
ûÎ¬¿yüe¡¥okes
->
	`In£¹NextC–l
(
üe¡¥ok–še
);

862 
n
=0;‚<
subpošts_i_down
.
	`size
();‚++){

864 
vtkSR•
::
VNLTy³
 
p1
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
],
subpošts_i_down
[
n
]);

866 
vtkSm¬tPoš‹r
<
vtkLše
> 
üe¡¥ok–še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

867 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p0
[0],…0[1],…0[2]));

868 
üe¡¥ok–še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
poštsüe¡¥okes
->
	`In£¹NextPošt
(
p0
[0]+
p1
[0],…0[1]+p1[1],…0[2]+p1[2]));

870 
ûÎ¬¿yüe¡¥okes
->
	`In£¹NextC–l
(
üe¡¥ok–še
);

875 
pŞyüe¡¥okes
->
	`S‘Pošts
(
poštsüe¡¥okes
);

876 
pŞyüe¡¥okes
->
	`S‘Lšes
(
ûÎ¬¿yüe¡¥okes
);

878 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
> 
üe¡¥okesm­³r
 = vtkSm¬tPoš‹r<vtkPŞyD©aM­³r>::
	`New
();

879 
üe¡¥okesm­³r
->
	`S‘IÅut
(
pŞyüe¡¥okes
);

880 
vtkSm¬tPoš‹r
<
vtkAùÜ
> 
¥oke§ùÜ
 = vtkAùÜ::
	`New
();

881 
¥oke§ùÜ
->
	`S‘M­³r
(
üe¡¥okesm­³r
);

882 
¥oke§ùÜ
->
	`G‘Prİ”ty
()->
	`S‘LšeWidth
(1);

883 
¥oke§ùÜ
->
	`G‘Prİ”ty
()->
	`S‘CŞÜ
(0,1,0);

884 
»nd””
->
	`AddAùÜ
(
¥oke§ùÜ
);

887 
»nd”Wšdow
->
	`R’d”
();

888 
»nd”WšdowIÁ”aùÜ
->
	`S¹
();

890 
	}
}

975 
	g®ign¤•
::
	$d¿wSk–‘®C»¡Curve
(
š‹½Ş©iÚËv–
){

976 
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eMedŸlC»¡Curve
> 
curveš‹½Ş©iÚ
 = vtkSm¬tPoš‹r<vtkSR•IÁ”pŞ©eMedŸlC»¡Curve>::
	`New
();

977 
curveš‹½Ş©iÚ
->
	`S‘IÅut
(
this
->
¤•fig
);

978 
curveš‹½Ş©iÚ
->
	`S‘IÁ”pŞ©iÚLev–
(
š‹½Ş©iÚËv–
);

979 
curveš‹½Ş©iÚ
->
	`Upd©e
();

980 
vtkPŞyD©a
* 
medŸlüe¡curve
 = 
curveš‹½Ş©iÚ
->
	`G‘Ouut
();

982 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
> 
medŸlüe¡curvem­³r
 = vtkSm¬tPoš‹r<vtkPŞyD©aM­³r>::
	`New
();

983 
medŸlüe¡curvem­³r
->
	`S‘IÅutCÚÃùiÚ
(
medŸlüe¡curve
->
	`G‘ProduûrPÜt
());

984 
vtkSm¬tPoš‹r
<
vtkAùÜ
> 
medŸlsh“tüe¡curv—ùÜ
 = vtkAùÜ::
	`New
();

985 
medŸlsh“tüe¡curv—ùÜ
->
	`S‘M­³r
(
medŸlüe¡curvem­³r
);

986 
medŸlsh“tüe¡curv—ùÜ
->
	`G‘Prİ”ty
()->
	`S‘LšeWidth
(1);

987 
medŸlsh“tüe¡curv—ùÜ
->
	`G‘Prİ”ty
()->
	`S‘CŞÜ
(1,1,0);

988 
»nd””
->
	`AddAùÜ
(
medŸlsh“tüe¡curv—ùÜ
);

989 
	}
}

1005 
	g®ign¤•
::
	$g‘C»¡QuadsA»a
(){

1007 
üe¡QuadNum
 = (
this
->
rowNums
-1)*2 + (this->
cŞNums
-1)*2;

1008 if(
this
->
up_b_üe¡
.
	`size
(è!ğ
üe¡QuadNum
){

1009 
cout
<<"Mes§gäom:®ign¤•::g‘AÎSubQuadsV”‹xesOnC»¡: som‘hšg wrÚg w™hhup_b_üe¡!"<<
’dl
;

1010 
cout
<<"this->up_b_üe¡.size(èis: "<<
this
->
up_b_üe¡
.
	`size
()<<" whüe¡QuadNum is: "<<
üe¡QuadNum
<<"hey should b§me!"<<
’dl
;

1014 
veùÜ
<> 
subpošts_i_up
;

1015 
veùÜ
<> 
subpošts_i_down
;

1016 
veùÜ
<> 
subpošts_a
;

1017 
VeùÜ3D
 
pošts
[4];

1022 
this
->
s
.
	`¥l™Lše
(0,0.5,this->
¡•
,
subpošts_i_up
);

1024 
this
->
s
.
	`¥l™Lše
(0.5,1,this->
¡•
,
subpošts_i_down
);

1027 
this
->
s
.
	`¥l™Lše
(0,1,this->
¡•
,
subpošts_a
);

1030 
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
š‹½Ş©eüe¡¥okes
 = vtkSm¬tPoš‹r<vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic>::
	`New
();

1031 
š‹½Ş©eüe¡¥okes
->
	`S‘IÅut
(
this
->
¤•fig
);

1032 
š‹½Ş©eüe¡¥okes
->
	`S‘IÁ”pŞ©iÚLev–
(
this
->
š‹½Ş©iÚLev–
);

1033 
š‹½Ş©eüe¡¥okes
->
	`Upd©e
();

1036 
i
 =0; i< 
üe¡QuadNum
; i++){

1037 
this
->
up_b_üe¡_¬—s
.
	`push_back
(0);

1038 
this
->
down_b_üe¡_¬—s
.
	`push_back
(0);

1039 
subquad¬—_up
 =0;

1040 
subquad¬—_down
 =0;

1042 
m
 =0; m< 
subpošts_a
.
	`size
()-1; m++){

1044 
vtkSR•
::
VNLTy³
 
bp_c
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edPošt
(
i
,
subpošts_a
[
m
]);

1047 
vtkSR•
::
VNLTy³
 
bp_c_Ãxt
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edPošt
(
i
,
subpošts_a
[
m
+1]);

1050 
n
=0;‚<
subpošts_i_up
.
	`size
()-1;‚++){

1052 
vtkSR•
::
VNLTy³
 
p0
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
],
subpošts_i_up
[
n
]);

1053 
pošts
[0].
	`£tX
(
bp_c
[0] + 
p0
[0]);

1054 
pošts
[0].
	`£tY
(
bp_c
[1] + 
p0
[1]);

1055 
pošts
[0].
	`£tZ
(
bp_c
[2] + 
p0
[2]);

1056 
vtkSR•
::
VNLTy³
 
p1
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
],
subpošts_i_up
[
n
+1]);

1057 
pošts
[1].
	`£tX
(
bp_c
[0] + 
p1
[0]);

1058 
pošts
[1].
	`£tY
(
bp_c
[1] + 
p1
[1]);

1059 
pošts
[1].
	`£tZ
(
bp_c
[2] + 
p1
[2]);

1060 
vtkSR•
::
VNLTy³
 
p2
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
+1],
subpošts_i_up
[
n
+1]);

1061 
pošts
[2].
	`£tX
(
bp_c_Ãxt
[0] + 
p2
[0]);

1062 
pošts
[2].
	`£tY
(
bp_c_Ãxt
[1] + 
p2
[1]);

1063 
pošts
[2].
	`£tZ
(
bp_c_Ãxt
[2] + 
p2
[2]);

1064 
vtkSR•
::
VNLTy³
 
p3
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
+1],
subpošts_i_up
[
n
]);

1065 
pošts
[3].
	`£tX
(
bp_c_Ãxt
[0] + 
p3
[0]);

1066 
pošts
[3].
	`£tY
(
bp_c_Ãxt
[1] + 
p3
[1]);

1067 
pošts
[3].
	`£tZ
(
bp_c_Ãxt
[2] + 
p3
[2]);

1071 
subquad¬—_up
 +ğ
	`quadA»a
(
pošts
);

1075 
n
=0;‚<
subpošts_i_down
.
	`size
()-1;‚++){

1077 
vtkSR•
::
VNLTy³
 
p0
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
],
subpošts_i_down
[
n
]);

1078 
pošts
[0].
	`£tX
(
bp_c
[0] + 
p0
[0]);

1079 
pošts
[0].
	`£tY
(
bp_c
[1] + 
p0
[1]);

1080 
pošts
[0].
	`£tZ
(
bp_c
[2] + 
p0
[2]);

1081 
vtkSR•
::
VNLTy³
 
p1
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
],
subpošts_i_down
[
n
+1]);

1082 
pošts
[1].
	`£tX
(
bp_c
[0] + 
p1
[0]);

1083 
pošts
[1].
	`£tY
(
bp_c
[1] + 
p1
[1]);

1084 
pošts
[1].
	`£tZ
(
bp_c
[2] + 
p1
[2]);

1085 
vtkSR•
::
VNLTy³
 
p2
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
+1],
subpošts_i_down
[
n
+1]);

1086 
pošts
[2].
	`£tX
(
bp_c_Ãxt
[0] + 
p2
[0]);

1087 
pošts
[2].
	`£tY
(
bp_c_Ãxt
[1] + 
p2
[1]);

1088 
pošts
[2].
	`£tZ
(
bp_c_Ãxt
[2] + 
p2
[2]);

1089 
vtkSR•
::
VNLTy³
 
p3
 = 
š‹½Ş©eüe¡¥okes
->
	`G‘IÁ”pŞ©edSpoke
(
i
,
subpošts_a
[
m
+1],
subpošts_i_down
[
n
]);

1090 
pošts
[3].
	`£tX
(
bp_c_Ãxt
[0] + 
p3
[0]);

1091 
pošts
[3].
	`£tY
(
bp_c_Ãxt
[1] + 
p3
[1]);

1092 
pošts
[3].
	`£tZ
(
bp_c_Ãxt
[2] + 
p3
[2]);

1096 
subquad¬—_down
 +ğ
	`quadA»a
(
pošts
);

1101 
this
->
up_b_üe¡_¬—s
[
i
] = 
subquad¬—_up
;

1103 
this
->
down_b_üe¡_¬—s
[
i
] = 
subquad¬—_down
;

1118 
	}
}

1127 
	g®ign¤•
::
	$g‘C»¡QuadsA»a_IÁeLev–0
(){

1129 
üe¡QuadNum
 = 
this
->
üe¡AtomNums
;

1131 if(
this
->
up_b_üe¡
.
	`size
(è!ğ
üe¡QuadNum
){

1132 
cout
<<"Mes§gäom:®ign¤•::g‘AÎSubQuadsV”‹xesOnC»¡: som‘hšg wrÚg w™hhup_b_üe¡!"<<
’dl
;

1133 
cout
<<"this->up_b_üe¡.size(èis: "<<
this
->
up_b_üe¡
.
	`size
()<<" whüe¡QuadNum is: "<<
üe¡QuadNum
<<"hey should b§me!"<<
’dl
;

1137 
VeùÜ3D
 
pošts
[4];

1140 
i
 =0; i< 
üe¡QuadNum
-1; i++){

1141 
this
->
up_b_üe¡_¬—s
.
	`push_back
(0);

1142 
this
->
down_b_üe¡_¬—s
.
	`push_back
(0);

1145 
pošts
[0] = 
this
->
up_b_üe¡
[
i
];

1146 
pošts
[1] = 
this
->
medŸl_üe¡
[
i
];

1147 
pošts
[2] = 
this
->
medŸl_üe¡
[
i
+1];

1148 
pošts
[3] = 
this
->
up_b_üe¡
[
i
+1];

1152 
this
->
up_b_üe¡_¬—s
[
i
] = 
	`quadA»a
(
pošts
);

1156 
pošts
[0] = 
this
->
medŸl_üe¡
[
i
];

1157 
pošts
[1] = 
this
->
down_b_üe¡
[
i
];

1158 
pošts
[2] = 
this
->
down_b_üe¡
[
i
+1];

1159 
pošts
[3] = 
this
->
medŸl_üe¡
[
i
+1];

1160 
cout
<<"dowÀüe¡: "<<
pošts
[0]<<pošts[1]<<pošts[2]<<pošts[3]<<
’dl
;

1163 
this
->
down_b_üe¡_¬—s
[
i
] = 
	`quadA»a
(
pošts
);

1167 
i
 = 
üe¡QuadNum
-1;

1170 
pošts
[0] = 
this
->
up_b_üe¡
[
i
];

1171 
pošts
[1] = 
this
->
medŸl_üe¡
[
i
];

1172 
pošts
[2] = 
this
->
medŸl_üe¡
[0];

1173 
pošts
[3] = 
this
->
up_b_üe¡
[0];

1176 
this
->
up_b_üe¡_¬—s
[
i
] = 
	`quadA»a
(
pošts
);

1177 
cout
<<"--------this->up_b_üe¡_¬—s["<<
i
<<"] is: "<<
this
->
up_b_üe¡_¬—s
[i]<<
’dl
;

1180 
pošts
[0] = 
this
->
medŸl_üe¡
[
i
];

1181 
pošts
[1] = 
this
->
down_b_üe¡
[
i
];

1182 
pošts
[2] = 
this
->
down_b_üe¡
[0];

1183 
pošts
[3] = 
this
->
medŸl_üe¡
[0];

1186 
this
->
down_b_üe¡_¬—s
[
i
] = 
	`quadA»a
(
pošts
);

1187 
cout
<<"--------this->down_b_üe¡_¬—s["<<
i
<<"] is: "<<
this
->
down_b_üe¡_¬—s
[i]<<
’dl
;

1188 
	}
}

1192 
	gveùÜ
<
	gVeùÜ3D
> 
	g®ign¤•
::
	$g‘Bound¬yPošts
(){

1193  
this
->
bound¬yPošts
;

1194 
	}
}

1199 
	gveùÜ
<> 
	g®ign¤•
::
	$g‘Bound¬yPoštsA»as
(){

1200 
veùÜ
<> 
wA»as
;

1201 
i
 =0; i<
this
->
bound¬yPoštsA»as
.
	`size
(); i++){

1202 
sum¬—
 = 0;

1203 
j
=0; j<
this
->
bound¬yPoštsA»as
[0].
	`size
(); j++){

1204 
sum¬—
 +ğ
this
->
bound¬yPoštsA»as
[
i
][
j
];

1206 
wA»as
.
	`push_back
(
sum¬—
);

1209  
wA»as
;

1210 
	}
}

1215 
	gveùÜ
<
	gVeùÜ3D
> 
	g®ign¤•
::
	$g‘PoštsOnSk–‘®
(){

1217 
M3DQuadPrim™ive
* 
´im
;

1219 
veùÜ
<
VeùÜ3D
> 
sPošts
;

1222 
u
 =0; u<
this
->
quadFig
->
	`g‘RowCouÁ
(); u++){

1223 
v
 =0; v<
this
->
quadFig
->
	`g‘CŞumnCouÁ
(); v++){

1224 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
quadFig
->
	`g‘Prim™ivePŒ
(
u
,
v
));

1226 
sPošts
.
	`push_back
(
´im
->
	`g‘X
());

1234  
sPošts
;

1235 
	}
}

1241 
	gveùÜ
<> 
	g®ign¤•
::
	$g‘C»¡A»as
(
side
){

1243 if(
side
==0){

1244  
this
->
up_b_üe¡_¬—s
;

1247  
this
->
down_b_üe¡_¬—s
;

1248 
	}
}

1251 
	gveùÜ
<> 
	g®ign¤•
::
	$g‘QuadsA»as
(
side
){

1252 if(
side
==0){

1253  
this
->
up_quads_¬—s
;

1256  
this
->
down_quads_¬—s
;

1257 
	}
}

1265 
	gveùÜ
<> 
	g®ign¤•
::
	$g‘OÃsWeight
(
poštsNum
){

1266 
cout
<<"-----------------‡ligÃ¤•…oštsNum is: "<<
poštsNum
<<
’dl
;

1267 
veùÜ
<> 
wA»as
;

1268 
i
 =0; i< 
poštsNum
; i++){

1269 
wA»as
.
	`push_back
(1);

1272  
wA»as
;

1273 
	}
}

1277 
	g®ign¤•
::
	$g‘Rows
(){

1278  
this
->
rowNums
;

1279 
	}
}

1280 
	g®ign¤•
::
	$g‘CŞs
(){

1281  
this
->
cŞNums
;

1282 
	}
}

1283 
	g®ign¤•
::
	$g‘AtomNums
(){

1284  
this
->
tÙ®AtomNums
;

1285 
	}
}

1286 
	g®ign¤•
::
	$g‘IÁ”iÜAtomNums
(){

1287  
this
->
š‹riÜAtomNums
;

1288 
	}
}

1289 
	g®ign¤•
::
	$g‘C»¡AtomNums
(){

1290  
this
->
üe¡AtomNums
;

1291 
	}
}

	@alignsrep.h

11 #iâdeà
ALIGNSREP_H


12 
	#ALIGNSREP_H


	)

14 
	~<™kDeçuÉDyÇmicMeshT¿™s.h
>

15 
	~<™kMesh.h
>

17 
	~"M3DFigu».h
"

18 
	~"toŞsfunc.h
"

19 
	~"™kMesh3DProüu¡esAlignF‹r.h
"

20 
	~<™kT¿nsfÜmMeshF‹r.h
>

21 
	~<™kAffšeT¿nsfÜm.h
>

23 
	~"M3DQuadFigu».h
"

24 
	~"P3DCÚŒŞ.h
"

25 
	~"CÚŒŞP¬ms.h
"

26 
	~<vtk¤•š‹½Ş©eüe¡¥okesqu¬tic.h
>

27 
	~<vtk¤•š‹½Ş©emedŸlüe¡curve.h
>

29 
	~<vtkR’d””.h
>

30 
	~<vtkR’d”WšdowIÁ”aùÜ.h
>

31 
	~<vtkR’d”Wšdow.h
>

33 
	~"vtk»ad¤•.h
"

34 
	~<vtk¤•.h
>

39 şas 
	c®ign¤•


41 
	mpublic
:

42 
®ign¤•
();

44 
®ign¤•
(cÚ¡ * 
f’ame
, 
š‹½Ş©iÚLev–
);

52 
d¿wBound¬y
();

53 
d¿wSk–‘®C»¡Curve
(
š‹½Ş©iÚËv–
);

54 
d¿wC»¡Spokes
(
š‹½Ş©iÚËv–
);

55 
g‘PoštsOnBound¬y
();

56 
g‘AÎSubQuadsV”‹xesOnBound¬y
();

57 
	mveùÜ
<> 
ÿlcuÏ‹A»as_m‘hod2
(
veùÜ
<
VeùÜ3D
> 
surçûPošts
);

58 
quadA»a
(
VeùÜ3D
 *
pošt
);

59 
g‘C»¡QuadsA»a
();

60 
g‘C»¡QuadsA»a_IÁeLev–0
();

61 
weightA»aToBound¬yPošts
();

62 
addBound¬yPoštsA»as
(
¬—1
, 
¬—2
, 
¬—3
, 
¬—4
);

63 
cÜ»PoštAndA»a
(
veùÜ
<> 
quads_¬—s
, veùÜ<
VeùÜ3D
> 
mid_pošts
, veùÜ<> 
üe¡_¬—s
,

64 
veùÜ
<
VeùÜ3D
> 
üe¡_pošts
);

65 
	mveùÜ
<
	mVeùÜ3D
> 
weightPošts
();

66 
§veM©rix
(
veùÜ
<
VeùÜ3D
> 
pošts
,cÚ¡ * 
f’ame
);

68 
	mveùÜ
<
	mVeùÜ3D
> 
g‘Bound¬yPošts
();

69 
	mveùÜ
<> 
g‘Bound¬yPoštsA»as
();

71 
	mveùÜ
<
	mVeùÜ3D
> 
g‘PoštsOnSk–‘®
();

72 
	mveùÜ
<> 
g‘C»¡A»as
(
side
);

73 
d¿wC»¡Spokes_m‘hod2
();

75 
	mveùÜ
<> 
g‘QuadsA»as
(
side
);

77 
	mveùÜ
<> 
g‘OÃsWeight
(
poštsNum
);

80 
g‘Rows
();

81 
g‘CŞs
();

82 
g‘AtomNums
();

83 
g‘IÁ”iÜAtomNums
();

84 
g‘C»¡AtomNums
();

88 
	m´iv©e
:

90 
toŞsfunc
 
s
;

91 
M3DQuadFigu»
* 
	mquadFig
;

92 
	müe¡AtomNums
;

93 
	müe¡QuadNum
;

94 
	mcŞNums
;

95 
	mrowNums
;

96 
	mquadNum
;

97 
	msubQuadPoštsNum
;

98 
	mš‹riÜAtomNums
;

99 
	mtÙ®AtomNums
;

100 
	mš‹½Ş©iÚLev–
;

101 
	m¡•
;

106 
	mvtkSm¬tPoš‹r
<
	mvtkR’d””
> 
	m»nd””
;

107 
	mvtkSm¬tPoš‹r
<
	mvtkSR•
> 
	m¤•fig
;

108 
	mvtkSm¬tPoš‹r
<
	mvtkR—dSR•
> 
	m»ad¤•
;

112 
	mveùÜ
<
	mVeùÜ3D
> 
	mup_b_mid
;

113 
	mveùÜ
<
	mVeùÜ3D
> 
	mdown_b_mid
;

114 
	mveùÜ
<
	mVeùÜ3D
> 
	mup_b_üe¡
;

115 
	mveùÜ
<
	mVeùÜ3D
> 
	mdown_b_üe¡
;

116 
	mveùÜ
<
	mVeùÜ3D
> 
	mmedŸl_üe¡
;

120 
	mveùÜ
<
	mVeùÜ3D
> 
	mup_BP
;

121 
	mveùÜ
<
	mVeùÜ3D
> 
	mdown_BP
;

124 
	mveùÜ
<> 
	mup_b_üe¡_¬—s
, 
	mdown_b_üe¡_¬—s
;

126 
	mveùÜ
<
	mVeùÜ3D
> 
	mbound¬yPošts
;

127 
VeùÜT¿ššgS‘F—tu»sTy³
 
	mbound¬yPoštsA»as
;

128 
	mpoštIndex
;

130 
	mveùÜ
<> 
	mup_quads_¬—s
;

131 
	mveùÜ
<> 
	mdown_quads_¬—s
;

	@calcrestregularityfeatures.cpp

1 
	~"ÿlüe¡»guÏr™yã©u»s.h
"

3 
	gÿlüe¡»guÏr™yã©u»s
::
	$ÿlüe¡»guÏr™yã©u»s
()

5 
	}
}

9 
ÿlüe¡»guÏr™yã©u»s
::
	$ÿlüe¡»guÏr™yã©u»s
(
M3DQuadFigu»
* 
quadfig
, 
DoubËVec
 
subTVs
, 
š‹½Ş©iÚLev–
, 
üe¡AtomNums
) {

10 
this
->
subTVs
 = subTVs;

12 
this
->
quadfig
 = quadfig;

13 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

15 
¡•
 = 
	`pow
(2.0, ()
š‹½Ş©iÚLev–
);

17 
this
->
subQuadV”‹xNum
 = 
	`pow
((
¡•
+1.0), 2.0);

19 
this
->
ex‹riÜAtomNum
 = 
üe¡AtomNums
;

20 
	}
}

30 
	gÿlüe¡»guÏr™yã©u»s
::
g‘SubQuadsPos™iÚOfC»¡RegiÚ
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_s
, vtkSm¬tPoš‹r< vtkPošt > 
pošts_b
){

32 
	gvtkSm¬tPoš‹r
<
	gvtkSR•
> 
	g¤•fig
 = 
g‘S»pFig
(
this
->
quadfig
);

34 
	gvtkSm¬tPoš‹r
<
	gvtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
	gš‹½Ş©eüe¡¥okes
 = 
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
>::
New
();

35 
	gš‹½Ş©eüe¡¥okes
->
S‘IÅut
(
¤•fig
);

36 
	gš‹½Ş©eüe¡¥okes
->
S‘IÁ”pŞ©iÚLev–
(
this
->
š‹½Ş©iÚLev–
);

37 
	gš‹½Ş©eüe¡¥okes
->
Upd©e
();

39 
	glšePosNum
 = 
this
->
subTVs
.
size
();

42 
	gi
 = 0; i < 
	gthis
->
	gex‹riÜAtomNum
; i++){

44 
	gm
 = 0; m < 
	glšePosNum
; m++){

47 
	gvtkSR•
::
VNLTy³
 
s
 = 
š‹½Ş©eüe¡¥okes
->
G‘IÁ”pŞ©edPošt
(
i
, 
this
->
subTVs
[
m
]);

48 
	gpošts_s
->
In£¹NextPošt
(
s
[0], s[1], s[2]);

50 
	gn
 = 0;‚ < 
	glšePosNum
;‚++){

52 
	gvtkSR•
::
VNLTy³
 
b
 = 
š‹½Ş©eüe¡¥okes
->
G‘IÁ”pŞ©edSpoke
(
i
, 
this
->
subTVs
[
m
],his->subTVs[
n
]);

53 
	gpošts_b
->
In£¹NextPošt
(
s
[0] + 
b
[0], s[1] + b[1], s[2] + b[2]);

60 
	gÿlüe¡»guÏr™yã©u»s
::
ÿlcuÏ‹C»¡Edges_2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_s
, vtkSm¬tPoš‹r< vtkPošt > 
pošts_b
,

61 
M©rixTy³
 &
v”EdgeF—tu»s
, M©rixTy³ &
hÜEdgeF—tu»s
){

62 
	gp_c
[3];

63 
	gp_n
[3];

78 
	gi
 = 0; i< 
	gthis
->
	gex‹riÜAtomNum
; i++){

80 
	gv”tiÿlEdge_s
 = 0.0;

81 
	gv”tiÿlEdge_b
 = 0.0;

82 
	ghÜizÚ®edge_b
 =0.0;

84 
	gm
 = 0; m < 
	g¡•
; m++){

85 
	gcu¼Index
 = 
i
*(
¡•
+1è+ 
m
;

87 
	gpošts_s
->
G‘Pošt
(
cu¼Index
, 
p_c
);

88 
	gpošts_s
->
G‘Pošt
(
cu¼Index
+1, 
p_n
);

89 
	gv”tiÿlEdge_s
 +ğ
poštsDi¡ªû
(
p_c
, 
p_n
);

92 
	g‹mpIndex
 = 
i
*
this
->
subQuadV”‹xNum
 + 
¡•
/2 + 
m
*(step+1);

93 
	gpošts_b
->
G‘Pošt
(
‹mpIndex
, 
p_c
);

94 
	gpošts_b
->
G‘Pošt
(
‹mpIndex
+
¡•
+1, 
p_n
);

95 
	gv”tiÿlEdge_b
 +ğ
poštsDi¡ªû
(
p_c
, 
p_n
);

98 
	gcu¼Index
 = 
i
*
this
->
subQuadV”‹xNum
 + 
m
;

99 
	gpošts_b
->
G‘Pošt
(
cu¼Index
, 
p_c
);

100 
	gpošts_b
->
G‘Pošt
(
cu¼Index
+1, 
p_n
);

101 
	ghÜizÚ®edge_b
 +ğ
poštsDi¡ªû
(
p_c
, 
p_n
);

119 
	gv”EdgeF—tu»s
[0][
i
] = 
v”tiÿlEdge_s
;

122 
	gv”EdgeF—tu»s
[1][
i
] = 
v”tiÿlEdge_b
;

124 
	ghÜEdgeF—tu»s
[0][
i
] = 
hÜizÚ®edge_b
;

142 
	gÿlüe¡»guÏr™yã©u»s
::
	$poštsDi¡ªû
(* 
p1
, * 
p2
){

144 
di¡ªû
 = 0.0;

146 
dim
 = 0; dim < 3; dim++){

147 
di¡ªû
 +ğ
	`pow
((
p2
[
dim
] - 
p1
[dim]), 2.0);

150  
	`sq¹
(
di¡ªû
);

151 
	}
}

159 
	gÿlüe¡»guÏr™yã©u»s
::
ÿlcuÏ‹C»¡AngËs_2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_b
, 
M©rixTy³
 &
ªgËF—tu»s
){

161 
	gp0
[3];

162 
	gp1
[3];

163 
	gp2
[3];

164 
	gp3
[3];

166 
toŞsfunc
 
	gtoŞs
;

169 
	gn
 = 0;‚ < 
	gthis
->
	gex‹riÜAtomNum
;‚++){

170 
	gsubAngË_tİLeá
 = 0.0;

171 
	gsubAngË_bÙRight
 = 0.0;

173 
	gšdex
 = 
n
*
this
->
subQuadV”‹xNum
;

175 
	gm
 = 0; m < 
	g¡•
; m++){

176 
	gk
 = 0; k < 
	g¡•
; k++){

177 
	gcu¼’ošt
 = 
k
 + 
m
*(
¡•
+1);

180 
	gpošts_b
->
G‘Pošt
(
šdex
+
cu¼’ošt
,
p0
);

182 
	gpošts_b
->
G‘Pošt
(
šdex
+
cu¼’ošt
+1,
p1
);

184 
	gpošts_b
->
G‘Pošt
(
šdex
+
cu¼’ošt
+1+
¡•
+1,
p2
);

186 
	gpošts_b
->
G‘Pošt
(
šdex
+
cu¼’ošt
+
¡•
+1,
p3
);

188 
	gsubAngË_tİLeá
 +ğ
toŞs
.
dÙProduùAngË
(
p0
, 
p3
, 
p1
);

189 
	gsubAngË_bÙRight
 +ğ
toŞs
.
dÙProduùAngË
(
p2
, 
p1
, 
p3
);

194 
	gpošts_b
->
G‘Pošt
(
šdex
,
p0
);

195 
	gpošts_b
->
G‘Pošt
(
šdex
+(
¡•
+1),
p3
);

196 
	gpošts_b
->
G‘Pošt
(
šdex
+1,
p1
);

197 
VeùÜ3D
 
	gnÜm®_
 = 
toŞs
.
ŒªguÏrNÜm®_doubËPÙ
(
p0
, 
p3
, 
p1
);

200 
	gp1_šdex
 = 
šdex
 + (
¡•
+1)*step - 1;

201 
	gpošts_b
->
G‘Pošt
(
p1_šdex
+
¡•
+1,
p2
);

202 
	gpošts_b
->
G‘Pošt
(
p1_šdex
,
p1
);

203 
	gpošts_b
->
G‘Pošt
(
p1_šdex
+
¡•
,
p3
);

204 
VeùÜ3D
 
	gnÜm®_br
 = 
toŞs
.
ŒªguÏrNÜm®_doubËPÙ
(
p2
, 
p1
, 
p3
);

206 
	gnÜm®_
.
nÜm®ize
();

207 
	gnÜm®_br
.
nÜm®ize
();

209 
	gsubQuadNum
 = 
this
->
¡•
 *his->step;

212 
	gªgËF—tu»s
[0][
n
] = 
subAngË_tİLeá
/
subQuadNum
;

215 
	gªgËF—tu»s
[1][
n
] = 
subAngË_bÙRight
/
subQuadNum
;

218 
	gªgËF—tu»s
[2][
n
] = 
nÜm®_
 * 
nÜm®_br
;

225 
	gvtkSm¬tPoš‹r
<
	gvtkSR•
> 
	gÿlüe¡»guÏr™yã©u»s
::
	$g‘S»pFig
(
M3DQuadFigu»
* 
quadfig
){

226 
vtkSm¬tPoš‹r
<
vtkSR•
> 
m_S»p
 = vtkSm¬tPoš‹r<vtkSR•>::
	`New
();

228 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

229 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿y
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
	`New
();

231 
vtkSR•
::
VeùÜSR•IdsTy³
 
poštsIds
;

233 
vtkSR•
::
RadiusVeùÜTy³
 
®Ìadius
;

234 
vtkSR•
::
SpokesVeùÜTy³
 
®l¥okes
;

236 if(
quadfig
){

238 
u
 = 0; u < 
quadfig
->
	`g‘RowCouÁ
(); u++){

239 
poštsIds
.
	`push_back
(
vtkSR•
::
	`VeùÜIdsTy³
());

240 
v
 = 0; v < 
quadfig
->
	`g‘CŞumnCouÁ
(); v++){

242 
M3DQuadPrim™ive
* 
´im0
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadfig
->
	`g‘Prim™ivePŒ
(
u
, 
v
));

244 
VeùÜ3D
 
x
 = 
´im0
->
	`g‘X
();

245 
VeùÜ3D
 
u0
 = 
´im0
->
	`g‘U0
();

246 
VeùÜ3D
 
u1
 = 
´im0
->
	`g‘U1
();

248 
vtkSR•
::
VeùÜVNLTy³
 
vÆ¥okes
;

249 
vtkSR•
::
VNLTy³
 
	`s
(3);

250 
s
[0] = 
u0
.
	`g‘X
();

251 
s
[1] = 
u0
.
	`g‘Y
();

252 
s
[2] = 
u0
.
	`g‘Z
();

253 
s
 = s.
	`nÜm®ize
();

254 
vÆ¥okes
.
	`push_back
(
s
);

256 
s
[0] = 
u1
.
	`g‘X
();

257 
s
[1] = 
u1
.
	`g‘Y
();

258 
s
[2] = 
u1
.
	`g‘Z
();

259 
s
 = s.
	`nÜm®ize
();

260 
vÆ¥okes
.
	`push_back
(
s
);

262 
vtkSR•
::
VeùÜDoubËTy³
 
¿dius
;

263 
¿dius
.
	`push_back
(
´im0
->
	`g‘R0
());

264 
¿dius
.
	`push_back
(
´im0
->
	`g‘R1
());

266 if(
u
 =ğ0 || u =ğ
quadfig
->
	`g‘RowCouÁ
(è- 1 || 
v
 =ğ0 || v =ğquadfig->
	`g‘CŞumnCouÁ
() - 1){

268 
M3DQuadEndPrim™ive
* 
´im0
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
quadfig
->
	`g‘Prim™ivePŒ
(
u
, 
v
));

269 
VeùÜ3D
 
u’d
 = 
´im0
->
	`g‘UEnd
();

271 
s
[0] = 
u’d
.
	`g‘X
();

272 
s
[1] = 
u’d
.
	`g‘Y
();

273 
s
[2] = 
u’d
.
	`g‘Z
();

274 
s
 = s.
	`nÜm®ize
();

275 
vÆ¥okes
.
	`push_back
(
s
);

277 
¿dius
.
	`push_back
(
´im0
->
	`g‘REnd
());

281 
vtkIdTy³
 
id
 = 
hubpos
->
	`In£¹NextPošt
(
x
.
	`g‘X
(), x.
	`g‘Y
(), x.
	`g‘Z
());

283 
poštsIds
[
u
].
	`push_back
(
id
);

285 
®l¥okes
.
	`push_back
(
vÆ¥okes
);

286 
®Ìadius
.
	`push_back
(
¿dius
);

290 
i
 = 0; i < 
poštsIds
.
	`size
() - 1; i++){

291 
j
 = 0; j < 
poštsIds
[
i
].
	`size
() - 1; j++){

293 
vtkSm¬tPoš‹r
<
vtkQuad
> 
quad
 = vtkSm¬tPoš‹r<vtkQuad>::
	`New
();

294 
quad
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
poštsIds
[
i
][
j
]);

295 
quad
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
poštsIds
[
i
+1][
j
]);

296 
quad
->
	`G‘PoštIds
()->
	`S‘Id
(2, 
poštsIds
[
i
+1][
j
+1]);

297 
quad
->
	`G‘PoštIds
()->
	`S‘Id
(3, 
poštsIds
[
i
][
j
+1]);

301 
ûÎ¬¿y
->
	`In£¹NextC–l
(
quad
);

305 
m_S»p
->
	`S‘Pošts
(
hubpos
);

306 
m_S»p
->
	`S‘PŞys
(
ûÎ¬¿y
);

307 
m_S»p
->
	`S‘AÎSpokes
(
®l¥okes
);

308 
m_S»p
->
	`S‘AÎRadius
(
®Ìadius
);

313 
®l¥okes
.
	`ş—r
();

314 
®Ìadius
.
	`ş—r
();

315 
poštsIds
.
	`ş—r
();

318  
m_S»p
;

319 
	}
}

	@calcrestregularityfeatures.h

1 #iâdeà
CALCRESTREGULARITYFEATURES_H


2 
	#CALCRESTREGULARITYFEATURES_H


	)

5 
	~"toŞsfunc.h
"

6 
	~<vtk¤•š‹½Ş©eüe¡¥okesqu¬tic.h
>

7 
	~<vtk¤•š‹½Ş©emedŸlüe¡curve.h
>

8 
	~"vtk»ad¤•.h
"

9 
	~<vtk¤•.h
>

11 
	~"ÿÌeguÏr™yã©u»s.h
"

13 
	~"time.h
"

15 
	~"uvm­.h
"

19 şas 
	cÿlüe¡»guÏr™yã©u»s


21 
	mpublic
:

22 
ÿlüe¡»guÏr™yã©u»s
();

23 
ÿlüe¡»guÏr™yã©u»s
(
M3DQuadFigu»
* 
quadfig
, 
DoubËVec
 
subTVs
, 
š‹½Ş©iÚLev–
, 
üe¡AtomNums
);

25 
	mvtkSm¬tPoš‹r
<
	mvtkSR•
> 
g‘S»pFig
(
M3DQuadFigu»
* 
quadfig
);

27 
g‘SubQuadsPos™iÚOfC»¡RegiÚ
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_s
, vtkSm¬tPoš‹r< vtkPošt > 
pošts_b
);

29 
ÿlcuÏ‹C»¡Edges_2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_s
, vtkSm¬tPoš‹r< vtkPošt > 
pošts_b
,

30 
M©rixTy³
 &
v”EdgeF—tu»s
, M©rixTy³ &
hÜEdgeF—tu»s
);

31 
poštsDi¡ªû
(* 
p1
, * 
p2
);

32 
ÿlcuÏ‹C»¡AngËs_2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_b
, 
M©rixTy³
 &
ªgËF—tu»s
);

36 
	m´iv©e
:

38 
DoubËVec
 
subTVs
;

40 
	msubQuadV”‹xNum
;

41 
	m¡•
;

42 
	mex‹riÜAtomNum
;

44 
M3DQuadFigu»
* 
	mquadfig
;

45 
	mš‹½Ş©iÚLev–
;

	@calregularityfeatures.cpp

1 
	~<io¡»am
>

2 
	~"M3DQuadIÁ”pŞ©”.h
"

3 
	~"ÿÌeguÏr™yã©u»s.h
"

4 
	~"toŞsfunc.h
"

5 
	~<m©h.h
>

6 
	~"visu®iz©iÚ.h
"

10 
usšg
 
Çme¥aû
 
	g¡d
;

12 
	gÿÌeguÏr™yã©u»s
::
	$ÿÌeguÏr™yã©u»s
()

14 
	}
}

17 
ÿÌeguÏr™yã©u»s
::
	$ÿÌeguÏr™yã©u»s
(
M3DQuadFigu»
 *
quadFig
, 
š‹½Ş©iÚLev–
, 
side
, 
DoubËVec
 
subUVs
) {

19 
this
->
side
 = side;

21 
this
->
subUVs
 = subUVs;

23 
this
->
curQuadFig
 = 
quadFig
;

24 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

26 
this
->
quadNum
 = (
quadFig
->
	`g‘RowCouÁ
()-1)*(quadFig->
	`g‘CŞumnCouÁ
()-1);

28 
this
->
¡•
 = 
	`pow
(2.0, ()
š‹½Ş©iÚLev–
);

30 
this
->
subQuadV‘exNum
 = 
	`pow
((
¡•
+1.0), 2.0);

33 
	}
}

37 
	gÿÌeguÏr™yã©u»s
::~
	$ÿÌeguÏr™yã©u»s
()

39 
	}
}

49 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
ÿÌeguÏr™yã©u»s
::
	$g‘SubQuadsPos™iÚ
(
quadty³
){

51 
DoubËVecVec
 
subUs
;

52 
DoubËVecVec
 
subVs
;

54 
uvm­
 
mp
;

55 
mp
.
	`g‘SubUVCoÜdš©eFÜSndSide
(
subUs
, 
subVs
, 
this
->
curQuadFig
->
	`g‘RowCouÁ
(),his->curQuadFig->
	`g‘CŞumnCouÁ
(),his->
¡•
);

57 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

59 
M3DQuadIÁ”pŞ©”
 
¡ªdsideš
;

62 
VeùÜ3D
 
pošt
;

64 
i
 = 0; i < 
this
->
quadNum
; i++){

66 
j
 =0; j < 
this
->
subQuadV‘exNum
;j++){

67 
M3DSpoke
 
Ãw¥oke
 = 
¡ªdsideš
.
	`š‹½Ş©eQuadSpoke2
(
this
->
curQuadFig
, 
subUs
[
i
][
j
], 
subVs
[i][j], 
side
);

68 
¡d
::
cout
<<"----subUs["<<
i
<<"]["<<
j
<<"] is: "<<
subUs
[i][j]<<" subVs["<<i<<"]["<<j<<"] is: "<<
subVs
[i][j]<<¡d::
’dl
;

70 if(
quadty³
==0){

71 
pošt
 = 
Ãw¥oke
.
	`g‘B
();

75 
pošt
 = 
Ãw¥oke
.
	`g‘X
();

78 
hubpos
->
	`In£¹NextPošt
(
pošt
.
	`g‘X
(),pošt.
	`g‘Y
(),pošt.
	`g‘Z
());

82  
hubpos
;

83 
	}
}

88 
	gÿÌeguÏr™yã©u»s
::
	$Ëngthoãdges
(
VeùÜ3D
 
pošt
[2]){

89 
x0
 = 
pošt
[0].
	`g‘X
();

90 
y0
 = 
pošt
[0].
	`g‘Y
();

91 
z0
 = 
pošt
[0].
	`g‘Z
();

94 
x1
 = 
pošt
[1].
	`g‘X
();

95 
y1
 = 
pošt
[1].
	`g‘Y
();

96 
z1
 = 
pošt
[1].
	`g‘Z
();

99 
di¡ªû
 = 
	`sq¹
(
	`pow
(
x1
-
x0
, 2è+…ow(
y1
-
y0
, 2è+…ow(
z1
-
z0
, 2));

103  
di¡ªû
;

104 
	}
}

115 
	gÿÌeguÏr™yã©u»s
::
	$poštsDi¡ªû
(* 
p1
, * 
p2
){

117 
di¡ªû
 = 0.0;

119 
dim
 = 0; dim < 3; dim++){

120 
di¡ªû
 +ğ
	`pow
((
p2
[
dim
] - 
p1
[dim]), 2.0);

123  
	`sq¹
(
di¡ªû
);

124 
	}
}

129 
	gÿÌeguÏr™yã©u»s
::
ÿlcuÏ‹Edges_m‘hod3
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
M©rixTy³
 &
hÜEdgeF—tu»M©rix
,

130 
M©rixTy³
 &
v”EdgeF—tu»M©rix
, 
quadTy³
){

131 
	gcŞNum
 = 
this
->
curQuadFig
->
g‘CŞumnCouÁ
();

133 
	gp1
[3];

134 
	gp2
[3];

136 
	ghÜEdgeNum
 = 0;

138 
	gm
=0; m<
	gthis
->
	gquadNum
; m++){

139 
	gsumOfSubLšes
 = 0;

141 
	gn
=0;‚<
	gthis
->
	g¡•
;n++){

142 
	gcu¼Index
 = 
m
*
this
->
subQuadV‘exNum
+
n
;

144 
	ghubpos
->
G‘Pošt
(
cu¼Index
, 
p1
);

145 
	ghubpos
->
G‘Pošt
(
cu¼Index
+1, 
p2
);

147 
	gsumOfSubLšes
 +ğ
poštsDi¡ªû
(
p1
, 
p2
);

149 
	ghÜEdgeF—tu»M©rix
[
quadTy³
][
hÜEdgeNum
] =
sumOfSubLšes
;

150 
	ghÜEdgeNum
++;

154 
	gm
=0; m<
	gthis
->
	gquadNum
; m++){

155 if((
	gm
+1)%(
	gcŞNum
-1)==0){

156 
sumOfSubLšes
 = 0;

157 
	gn
=
this
->
subQuadV‘exNum
-Ñhis->
¡•
+1);‚<
	gthis
->
	gsubQuadV‘exNum
-1;n++){

158 
	gcu¼Index
 = 
m
*
this
->
subQuadV‘exNum
+
n
;

160 
	ghubpos
->
G‘Pošt
(
cu¼Index
, 
p1
);

161 
	ghubpos
->
G‘Pošt
(
cu¼Index
+1, 
p2
);

163 
	gsumOfSubLšes
 +ğ
poštsDi¡ªû
(
p1
, 
p2
);

165 
	ghÜEdgeF—tu»M©rix
[
quadTy³
][
hÜEdgeNum
] =
sumOfSubLšes
;

166 
	ghÜEdgeNum
++;

171 
	gv”EdgeNum
 = 0;

173 
	gm
=0; m<
	gthis
->
	gquadNum
;m++){

174 
	gsumOfSubLšes
 = 0;

175 
	gk
 = 0; k < 
	gthis
->
	g¡•
; k++){

176 
	gcu¼Index
 = 
m
*
this
->
subQuadV‘exNum
 + 
k
*Ñhis->
¡•
+1);

177 
	gÃxtIndex
 = 
cu¼Index
 + (
this
->
¡•
+1);

179 
	ghubpos
->
G‘Pošt
(
cu¼Index
, 
p1
);

180 
	ghubpos
->
G‘Pošt
(
ÃxtIndex
, 
p2
);

182 
	gsumOfSubLšes
 +ğ
poštsDi¡ªû
(
p1
, 
p2
);

184 
	gv”EdgeF—tu»M©rix
[
quadTy³
][
v”EdgeNum
] = 
sumOfSubLšes
;

185 
	gv”EdgeNum
++;

189 
	gm
=
this
->
quadNum
-(
cŞNum
-1); m<
	gthis
->
	gquadNum
;m++){

190 
	gsumOfSubLšes
 = 0;

191 
	gk
 = 0; k<
	gthis
->
	g¡•
;k++){

192 
	gcu¼Index
 = 
m
*
this
->
subQuadV‘exNum
+this->
¡•
 + 
k
*(this->step+1);

193 
	gÃxtIndex
 = 
cu¼Index
 + (
this
->
¡•
+1);

195 
	ghubpos
->
G‘Pošt
(
cu¼Index
, 
p1
);

196 
	ghubpos
->
G‘Pošt
(
ÃxtIndex
, 
p2
);

198 
	gsumOfSubLšes
 +ğ
poštsDi¡ªû
(
p1
, 
p2
);

200 
	gv”EdgeF—tu»M©rix
[
quadTy³
][
v”EdgeNum
] = 
sumOfSubLšes
;

201 
	gv”EdgeNum
++;

212 
	gÿÌeguÏr™yã©u»s
::
ÿlcuÏ‹AngËsFÜSnd¬dSide
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
M©rixTy³
 &
ªgËF—tu»M©rix
, 
quadTy³
) {

214 
	gp0
[3];

215 
	gp1
[3];

216 
	gp2
[3];

217 
	gp3
[3];

219 
toŞsfunc
 
	gtoŞs
;

222 
	gn
 = 0;‚ < 
	gthis
->
	gquadNum
;‚++){

223 
	gªgË_subQuads_
 = 0.0;

224 
	gªgË_subQuads_br
 = 0.0;

227 
	gm
=0; m<
	gthis
->
	g¡•
;m++){

228 
	gk
 = 0; k<
	gthis
->
	g¡•
;k++){

229 
	gcu¼’ošt
 = 
k
 + 
m
*(
this
->
¡•
+1);

231 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+
cu¼’ošt
,
p0
);

233 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+
cu¼’ošt
+1,
p1
);

235 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+
cu¼’ošt
+1+this->
¡•
+1,
p2
);

237 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+
cu¼’ošt
+this->
¡•
+1,
p3
);

239 
	gªgË_subQuads_
 +ğ
toŞs
.
dÙProduùAngË
(
p0
, 
p3
, 
p1
);

240 
	gªgË_subQuads_br
 +ğ
toŞs
.
dÙProduùAngË
(
p2
, 
p1
, 
p3
);

245 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
,
p0
);

246 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+Ñhis->
¡•
+1),
p3
);

247 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+1,
p1
);

248 
VeùÜ3D
 
	gnÜm®_
 = 
toŞs
.
ŒªguÏrNÜm®_doubËPÙ
(
p0
, 
p3
, 
p1
);

251 
	gp1_šdex
 = (
this
->
¡•
+1)*this->step - 1;

252 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+
p1_šdex
+this->
¡•
+1,
p2
);

253 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+
p1_šdex
,
p1
);

254 
	ghubpos
->
G‘Pošt
(
n
*
this
->
subQuadV‘exNum
+
p1_šdex
+this->
¡•
,
p3
);

255 
VeùÜ3D
 
	gnÜm®_br
 = 
toŞs
.
ŒªguÏrNÜm®_doubËPÙ
(
p2
, 
p1
, 
p3
);

257 
	gnÜm®_
.
nÜm®ize
();

258 
	gnÜm®_br
.
nÜm®ize
();

260 
	gsubQuadNum
 = 
this
->
¡•
 *his->step;

262 if(
	gquadTy³
 == 0){

264 
ªgËF—tu»M©rix
[0][
n
] = 
ªgË_subQuads_
/
subQuadNum
;

267 
	gªgËF—tu»M©rix
[1][
n
] = 
ªgË_subQuads_br
/
subQuadNum
;

270 
	gªgËF—tu»M©rix
[2][
n
] = 
nÜm®_
 * 
nÜm®_br
;

274 
	gªgËF—tu»M©rix
[3][
n
] = 
ªgË_subQuads_
/
subQuadNum
;

277 
	gªgËF—tu»M©rix
[4][
n
] = 
ªgË_subQuads_br
/
subQuadNum
;

280 
	gªgËF—tu»M©rix
[5][
n
] = 
nÜm®_
 * 
nÜm®_br
;

290 
	gÿÌeguÏr™yã©u»s
::
g‘SubQuadV”‹xesPos™iÚ
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bPošts
, vtkSm¬tPoš‹r< vtkPošt > 
sPošts
){

292 
M3DQuadIÁ”pŞ©”
 
	g¡ªdsideš
;

295 
VeùÜ3D
 
	gpošt
;

297 
	glšePosNum
 = 
this
->
subUVs
.
size
();

299 
	gu
 = 0; u < 
	gcurQuadFig
->
g‘RowCouÁ
() -1; u++){

300 
	gv
 = 0; v < 
	gcurQuadFig
->
g‘CŞumnCouÁ
() -1; v++){

301 
	gm
 = 0; m < 
	glšePosNum
; m++){

302 
	gsubV
 = 
v
 + 
this
->
subUVs
[
m
];

303 
	gn
 = 0;‚ < 
	glšePosNum
;‚++){

304 
	gsubU
 = 
u
 + 
this
->
subUVs
[
n
];

306 
M3DSpoke
 
	gÃw¥oke
 = 
¡ªdsideš
.
š‹½Ş©eQuadSpoke2
(
this
->
curQuadFig
, 
subU
, 
subV
, 
side
);

310 
	gpošt
 = 
Ãw¥oke
.
g‘B
();

311 
	gbPošts
->
In£¹NextPošt
(
pošt
.
g‘X
(),pošt.
g‘Y
(),pošt.
g‘Z
());

314 
	gpošt
 = 
Ãw¥oke
.
g‘X
();

315 
	gsPošts
->
In£¹NextPošt
(
pošt
.
g‘X
(),pošt.
g‘Y
(),pošt.
g‘Z
());

	@calregularityfeatures.h

1 #iâdeà
CALREGULARITYFEATURES_H


2 
	#CALREGULARITYFEATURES_H


	)

5 
	~<io¡»am
>

7 
	~<vtkSm¬tPoš‹r.h
>

9 
	~<vtkC–lA¼ay.h
>

10 
	~<vtkQuad.h
>

11 
	~<vtkLše.h
>

12 
	~<vtkLšeSourû.h
>

14 
	~<vtkPŞyD©aM­³r.h
>

15 
	~<vtkAùÜ.h
>

16 
	~<vtkPrİ”ty.h
>

18 
	~<vtkR’d””.h
>

19 
	~<vtkR’d”WšdowIÁ”aùÜ.h
>

20 
	~<vtkR’d”Wšdow.h
>

22 
	~"P3DCÚŒŞ.h
"

23 
	~"CÚŒŞP¬ms.h
"

25 
	~"VeùÜ3D.h
"

27 
	~"toŞsfunc.h
"

29 
	~"uvm­.h
"

30 
	~"quadfig©ŒibutiÚ.h
"

32 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

34 şas 
	cÿÌeguÏr™yã©u»s


36 
	mpublic
:

37 
ÿÌeguÏr™yã©u»s
();

39 
ÿÌeguÏr™yã©u»s
(
M3DQuadFigu»
 *
quadFig
,
š‹½Ş©iÚLev–
, 
side
, 
DoubËVec
 
subTVs
);

41 ~
ÿÌeguÏr™yã©u»s
();

43 
Ëngthoãdges
(
VeùÜ3D
 
pošt
[2]);

47 
	mvtkSm¬tPoš‹r
< 
	mvtkPošts
 > 
g‘SubQuadsPos™iÚ
(
quadty³
);

48 
g‘SubQuadV”‹xesPos™iÚ
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bPošts
, vtkSm¬tPoš‹r< vtkPošt > 
sPošts
);

51 
ÿlcuÏ‹AngËsFÜSnd¬dSide
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
M©rixTy³
 &
ªgËF—tu»M©rix
, 
quadTy³
);

52 
ÿlcuÏ‹Edges_m‘hod3
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
M©rixTy³
 &
hÜEdgeF—tu»M©rix
,

53 
M©rixTy³
 &
v”EdgeF—tu»M©rix
, 
quadTy³
);

55 
poštsDi¡ªû
(* 
p1
, * 
p2
);

57 
ÿlcuÏ‹EdgesL’gth_3
(
veùÜ
<
vtkSm¬tPoš‹r
< 
vtkPošts
 > > 
hubpos™iÚ
, 
M©rixTy³
 &
hÜEdgeF—tu»M©rix
,

58 
M©rixTy³
 &
v”EdgeF—tu»M©rix
, 
quadTy³
);

61 
	m´iv©e
:

63 
side
;

65 
DoubËVec
 
	msubUVs
;

67 
	mš‹½Ş©iÚLev–
;

68 
M3DQuadFigu»
 *
	mcurQuadFig
;

70 
	mquadNum
;

71 
	msubQuadV‘exNum
;

72 
	m¡•
;

	@correspondenceevaluation.cpp

6 
	~"cÜ»¥Úd’ûev®u©iÚ.h
"

8 
	gcÜ»¥Úd’ûev®u©iÚ
::
	$cÜ»¥Úd’ûev®u©iÚ
()

11 
	}
}

	@correspondenceevaluation.h

1 #iâdeà
CORRESPONDENCEEVALUATION_H


2 
	#CORRESPONDENCEEVALUATION_H


	)

5 
	~"§m¶e¤•pošts.h
"

9 şas 
	ccÜ»¥Úd’ûev®u©iÚ


11 
	mpublic
:

12 
cÜ»¥Úd’ûev®u©iÚ
();

14 
	m´iv©e
:

15 
toŞsfunc
 
s
;

	@cost_function.cpp

1 
	~"co¡_funùiÚ.h
"

4 
	gco¡_funùiÚ
::
	$co¡_funùiÚ
()

6 
this
->
™”©iÚCouÁ”
 = 0;

7 
	}
}

11 
boŞ
 
	gco¡_funùiÚ
::
	$cÜ»ùMove
(*
¬g
, 
Ëngth
, 
moveDis
){

13 
i
 = 0; i < 
Ëngth
; i++){

14 if(
¬g
[
i
] > 
moveDis
 ||‡rg[i] < -moveDis){

15 
¡d
::
cout
 << "S‹°bigg”hª 0.5,hrow‡way!" << std::
’dl
;

16  
çl£
;

19  
Œue
;

20 
	}
}

	@cost_function.h

1 #iâdeà
COST_FUNCTION_H


2 
	#COST_FUNCTION_H


	)

4 
	~"İtimiz©iÚusšgÃwuß.h
"

6 şas 
	cco¡_funùiÚ


8 
	mpublic
:

9 
co¡_funùiÚ
();

11 
	$co¡_funùiÚ
(
İtimiz©iÚusšgÃwuß
 *
š¡ªû
, 
tÙ®V¬s
){

12 
m_š¡ªû
 = 
š¡ªû
;

14 
this
->
™”©iÚCouÁ”
 = 0;

16 
this
->
¬gL’gth
 = 
tÙ®V¬s
;

19 
boŞ
 
	`cÜ»ùMove
(*
¬g
, 
Ëngth
, 
moveDis
);

21 
	$İ”©Ü
 (è(*
¬g
){

22 
this
->
™”©iÚCouÁ”
++;

23 
¡d
::
cout
<<"Th"<<
this
->
™”©iÚCouÁ”
<<"th i‹¿tiÚ. "<<¡d::
’dl
;

25 
co¡
 = 0.0;

26 if(
	`cÜ»ùMove
(
¬g
, 
this
->
¬gL’gth
, 1)){

28 
co¡
 = 
m_š¡ªû
->
	`co¡
(
¬g
);

31 
co¡
 = 10000.1;

35 if(
this
->
™”©iÚCouÁ”
%500 == 0){

36 
¡d
::
cout
<<"Variables: ";

37 
i
 = 0; i < 
this
->
¬gL’gth
; i++){

38 
¡d
::
cout
 << 
¬g
[
i
] << " ";

41 
¡d
::
cout
 << std::
’dl
;

43  
co¡
;

44 
	}
}

47 
	g´iv©e
:

48 
İtimiz©iÚusšgÃwuß
 *
m_š¡ªû
;

50 
	g™”©iÚCouÁ”
;

51 
	g¬gL’gth
;

	@itkCorrespondenceEvaluator.h

1 #iâdeà
_™kCÜ»¥Úd’ûEv®u©Ü_h


2 
	#_™kCÜ»¥Úd’ûEv®u©Ü_h


	)

4 
	~"™kObjeù.h
"

5 
	~"vÆ/vÆ_m©rix.h
"

7 
Çme¥aû
 
	g™k


9 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

10 şas 
	cCÜ»¥Úd’ûEv®u©Ü
 : 
public
 
Objeù


13 
public
:

16 
CÜ»¥Úd’ûEv®u©Ü
 
	tS–f
;

17 
Objeù
 
	tSu³rşass
;

18 
	gSm¬tPoš‹r
<
	tS–f
> 
	tPoš‹r
;

19 
	gSm¬tPoš‹r
<cÚ¡ 
	tS–f
> 
	tCÚ¡Poš‹r
;

22 
TOuutMeshTy³
 
	tMeshTy³
;

23 
ty³Çme
 
	tMeshTy³
::
	tPoš‹r
 
	tMeshPoš‹r
;

24 
	g¡d
::
	tveùÜ
 < 
	tMeshPoš‹r
 > 
	tMeshPoš‹rA¼ay
;

25 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

28 
™kNewMaüo
(
S–f
);

31 
™kTy³Maüo
(
CÜ»¥Úd’ûEv®u©Ü
, 
Objeù
);

33 
G‘G’”®iz©iÚ
(
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
) ;

34 
G‘S³cific™y
(
N
, 
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
) ;

37 
S‘Numb”OfIÅuts
Ğ
numb”
 );

40 
™kG‘CÚ¡Maüo
Ğ
Numb”OfIÅuts
, );

43 
™kG‘CÚ¡Maüo
Ğ
MaxModes
, );

46 
S‘IÅut
Ğ
idx
, 
MeshPoš‹r
 
šput
 );

51 
S‘Di¡ributiÚ
 ( 
boŞ
 
gaussŸn
 )

53 
	ggaussŸnDi¡ributiÚ
 = 
gaussŸn
 ;

56 
G‘Com·ùÃss
(
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
, 
¡d
::
veùÜ
 < > 
eigV®ues
);

57 
	g¡d
::
veùÜ
 < > 
G‘Mod–V¬Ÿnû
();

60 
	g´Ùeùed
:

62 
CÜ»¥Úd’ûEv®u©Ü
();

63 ~
CÜ»¥Úd’ûEv®u©Ü
();

65 
MeshPoš‹rA¼ay
 
	gm_Meshes
 ;

66 
	gm_Numb”OfIÅuts
 ;

67 
	gm_MaxModes
 ;

68 
boŞ
 
	ggaussŸnDi¡ributiÚ
 ;

70 
Compu‹G’”®iz©iÚE¼Ü
 ( 
i
, 
M
 ) ;

71 
G’”©eUnifÜmRªdomNumb”
 () ;

72 
G’”©eGaussŸnRªdomNumb”
 () ;

74 
SurçûDi¡ªû
 ( 
M©rixTy³
 *
äom
, M©rixTy³ *
to
, 
nPošts
 ) ;

75 
Wr™eSurçûFÜDebug
 (
M©rixTy³
 *
surçû
, 
nPošts
, 
¡d
::
¡ršg
 
f’ame
) ;

76 
BršgIÅutToOrigš
 (
id
) ;

83 #iâdeà
ITK_MANUAL_INSTANTIATION


84 
	~"™kCÜ»¥Úd’ûEv®u©Ü.txx
"

	@itkMesh3DProcrustesAlignFilter.h

1 #iâdeà
_™kMesh3DProüu¡esAlignF‹r_h


2 
	#_™kMesh3DProüu¡esAlignF‹r_h


	)

4 
	~"™kProûssObjeù.h
"

5 
	~"™kAffšeT¿nsfÜm.h
"

6 
	~"™kT¿nsfÜmMeshF‹r.h
"

8 
	~<f¡»am
>

10 #ià!
defšed
(
M_PI
)

11 
	#M_PI
 3.14159265358979323846264338327950288

	)

14 
Çme¥aû
 
	g™k


41 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

42 şas 
	cMesh3DProüu¡esAlignF‹r
 : 
public
 
ProûssObjeù


45 
public
:

48 
Mesh3DProüu¡esAlignF‹r
 
	tS–f
;

49 
ProûssObjeù
 
	tSu³rşass
;

50 
	gSm¬tPoš‹r
<
	tS–f
> 
	tPoš‹r
;

51 
	gSm¬tPoš‹r
<cÚ¡ 
	tS–f
> 
	tCÚ¡Poš‹r
;

54 
TIÅutMesh
 
	tIÅutMeshTy³
;

55 
TOuutMesh
 
	tOuutMeshTy³
;

56 
ty³Çme
 
	tIÅutMeshTy³
::
	tPoš‹r
 
	tIÅutMeshPoš‹r
;

57 
ty³Çme
 
	tOuutMeshTy³
::
	tPoš‹r
 
	tOuutMeshPoš‹r
;

58 
ty³Çme
 
	tIÅutMeshTy³
::
	tPoštTy³
 
	tIÅutPoštTy³
;

59 
ty³Çme
 
	tOuutMeshTy³
::
	tPoštTy³
 
	tOuutPoštTy³
;

60 
ty³Çme
 
	tOuutMeshTy³
::
	tPoštsCÚš”
 
	tOuutPoštsCÚš”
;

61 
ty³Çme
 
	tOuutMeshTy³
::
	tPoštsCÚš”Poš‹r
 
	tOuutPoštsCÚš”Poš‹r
;

62 
	gD©aObjeù
::
	tPoš‹r
 
	tD©aObjeùPoš‹r
;

63 
ty³Çme
 
	tOuutMeshTy³
::
	tCoÜdR•Ty³
 CoordRepType;

64 
	gvÆ_m©rix
<
	tCoÜdR•Ty³
> 
	tM©rixTy³
;

65 
	gAffšeT¿nsfÜm
<
	tCoÜdR•Ty³
, 3> 
	tT¿nsfÜmTy³
;

66 
ty³Çme
 
	tT¿nsfÜmTy³
::
	tPoš‹r
 
	tT¿nsfÜmPoš‹r
;

67 
	gT¿nsfÜmMeshF‹r
<
	tOuutMeshTy³
, OuutMeshTy³, 
	tT¿nsfÜmTy³
> 
	tT¿nsfÜmMeshTy³
;

68 
ty³Çme
 
	tT¿nsfÜmMeshTy³
::
	tPoš‹r
 
	tT¿nsfÜmMeshPoš‹r
;

69 
	g¡d
::
	tveùÜ
<
	tT¿nsfÜmMeshPoš‹r
> 
	tT¿nsfÜmMeshA¼ay
;

70 
ty³Çme
 
	tT¿nsfÜmTy³
::
	tOff£tTy³
 
	tT¿n¦©iÚTy³
;

71 
ty³Çme
 
	tT¿nsfÜmTy³
::
	tM©rixTy³
 
	tRÙ©iÚTy³
;

74 
™kNewMaüo
(
S–f
);

77 
™kTy³Maüo
(
Mesh3DProüu¡esAlignF‹r
, 
ProûssObjeù
);

82 
S‘Numb”OfIÅuts
Ğ
num
 );

89 
S‘IÅut
Ğ
idx
, 
IÅutMeshPoš‹r
 
mesh
 );

92 
IÅutMeshTy³
 * 
G‘IÅut
Ğ
idx
 )

94  
	g¡©ic_ÿ¡
<
	gIÅutMeshTy³
 *>(
	gthis
->
	gProûssObjeù
::
G‘IÅut
Ğ
idx
 ) );

98 
OuutMeshTy³
 * 
G‘Ouut
(
idx
);

101 
™kG‘CÚ¡ObjeùMaüo
Ğ
M—n
, 
OuutMeshTy³
 );

104 
T¿nsfÜmTy³
 * 
G‘T¿nsfÜm
Ğ
idx
 )

106  
	gm_MeshT¿nsfÜm
[
idx
]->
G‘T¿nsfÜm
();

110 
T¿n¦©iÚTy³
 
G‘RÙ©iÚDeg»es
Ğ
T¿nsfÜmTy³
* 
ŒªsfÜm
 )

112 
T¿n¦©iÚTy³
 
	grÙ©iÚXYZ
 = 
ŒªsfÜm
->
G‘T¿n¦©iÚ
();

113 
RÙ©iÚTy³
 
	grÙ©iÚ
 = 
ŒªsfÜm
->
G‘M©rix
();

114 
	grÙX
, 
	gcosY
, 
	grÙY
, 
	grÙZ
;

116 
	grÙY
 = (-1è* (
asš
(
rÙ©iÚ
(0, 2) ) );

117 
	grÙY
 = 
rÙY
 * ( 180.0 / 
M_PI
 );

118 
	gcosY
 = 
cos
(
rÙY
 * 
M_PI
 / 180.0);

119 
	grÙX
 = 
acos
Ğ(
rÙ©iÚ
(2, 2èè/ 
cosY
);

120 
	grÙX
 = 
rÙX
 * ( 180.0 / 
M_PI
 );

121 
	grÙZ
 = 
acos
Ğ(
rÙ©iÚ
(0, 0èè/ 
cosY
);

122 
	grÙZ
 = 
rÙZ
 * ( 180.0 / 
M_PI
 );

127 
	grÙ©iÚXYZ
.
S‘EËm’t
(0, 
rÙX
);

128 
	grÙ©iÚXYZ
.
S‘EËm’t
(1, 
rÙY
);

129 
	grÙ©iÚXYZ
.
S‘EËm’t
(2, 
rÙZ
);

131  
	grÙ©iÚXYZ
;

135 
PrštT¿nsfÜm
Ğ
T¿nsfÜmTy³
* 
ŒªsfÜm
 )

137 
T¿n¦©iÚTy³
 
	gŒªs
 = 
ŒªsfÜm
->
G‘T¿n¦©iÚ
();

138 
T¿n¦©iÚTy³
 
	grÙs
 = 
G‘RÙ©iÚDeg»es
(
ŒªsfÜm
);

139 
RÙ©iÚTy³
 
	grÙ©iÚ
 = 
ŒªsfÜm
->
G‘M©rix
();

141 
	g¡d
::
of¡»am
 
ouut
;

143 
	gouut
.
İ’
("/NIRAL/wÜk/Éu/WÜkS·û/d©a_·blo/Pablo2/lib/vtk¤•/CÜ»¥Úd’û/T¿nsfÜm.šfo", 
¡d
::
ios
::
out
);

144 
	gouut
 << "ROTATION MATRIX" << 
	g¡d
::
’dl
;

145  
	gdim1
 = 0; dim1 < 3; dim1++ )

147  
	gdim2
 = 0; dim2 < 3; dim2++ )

149 
	gouut
 << "Pos™iÚ " << 
	gdim1
 << " " << 
	gdim2
 << " : " << 
rÙ©iÚ
(
dim1
, 
dim2
è<< 
	g¡d
::
’dl
;

153 
	gouut
 << "TRANSLATION VECTOR" << 
	g¡d
::
’dl
;

154  
	gdim1
 = 0; dim1 < 3; dim1++ )

156 
	gouut
 << "Pos™iÚ " << 
	gdim1
 << " : " << 
	gŒªs
.
G‘EËm’t
(
dim1
è<< 
	g¡d
::
’dl
;

159 
	gouut
 << "ROTATION VECTOR" << 
	g¡d
::
’dl
;

160  
	gdim1
 = 0; dim1 < 3; dim1++ )

162 
	gouut
 << "Pos™iÚ " << 
	gdim1
 << " : " << 
	grÙs
.
G‘EËm’t
(
dim1
è<< 
	g¡d
::
’dl
;

165 
	gouut
.
şo£
();

174 
™kG‘CÚ¡Maüo
Ğ
CÚv”g’û
, );

175 
™kS‘Maüo
(
CÚv”g’û
, );

180 
vœtu®
 
D©aObjeùPoš‹r
 
MakeOuut
(
™k
::
ProûssObjeù
::
D©aObjeùPoš‹rA¼aySizeTy³
 
idx
);

184 
S‘U£SÿlšgOn
()

186 
	gthis
->
S‘U£Sÿlšg
(
Œue
);

190 
S‘U£SÿlšgOff
()

192 
	gthis
->
S‘U£Sÿlšg
(
çl£
);

196 
™kS‘Maüo
(
U£Sÿlšg
, 
boŞ
);

197 
™kG‘Maüo
(
U£Sÿlšg
, 
boŞ
);

200 
S‘U£In™ŸlAv”ageOn
()

202 
	gthis
->
S‘U£In™ŸlAv”age
(
Œue
);

206 
S‘U£In™ŸlAv”ageOff
()

208 
	gthis
->
S‘U£In™ŸlAv”age
(
çl£
);

212 
™kS‘Maüo
(
U£In™ŸlAv”age
, 
boŞ
);

213 
™kG‘Maüo
(
U£In™ŸlAv”age
, 
boŞ
);

216 
S‘U£NÜm®iz©iÚOn
()

218 
	gthis
->
S‘U£NÜm®iz©iÚ
(
Œue
);

221 
S‘U£NÜm®iz©iÚOff
()

223 
	gthis
->
S‘U£NÜm®iz©iÚ
(
çl£
);

226 
™kS‘Maüo
(
U£NÜm®iz©iÚ
, 
boŞ
);

227 
™kG‘Maüo
(
U£NÜm®iz©iÚ
, 
boŞ
);

230 
S‘U£SšgËI‹¿tiÚOn
()

232 
	gthis
->
S‘U£SšgËI‹¿tiÚ
(
Œue
);

236 
S‘U£SšgËI‹¿tiÚOff
()

238 
	gthis
->
S‘U£SšgËI‹¿tiÚ
(
çl£
);

242 
™kS‘Maüo
(
U£SšgËI‹¿tiÚ
, 
boŞ
);

243 
™kG‘Maüo
(
U£SšgËI‹¿tiÚ
, 
boŞ
);

246 
S‘AlignRÙ©iÚOn
()

248 
	gthis
->
S‘AlignRÙ©iÚ
(
Œue
);

251 
S‘AlignRÙ©iÚOff
()

253 
	gthis
->
S‘AlignRÙ©iÚ
(
çl£
);

256 
™kS‘Maüo
(
AlignRÙ©iÚ
, 
boŞ
 );

257 
™kG‘Maüo
(
AlignRÙ©iÚ
, 
boŞ
 );

258 
	g´Ùeùed
:

261 
Mesh3DProüu¡esAlignF‹r
();

264 ~
Mesh3DProüu¡esAlignF‹r
();

267 
vœtu®
 
G’”©eD©a
();

270 
T¿n¦©iÚTy³
 
G‘MeshC’‹r
Ğ
idx
 );

273 
C®cuÏ‹M—n
();

276 
In™ŸlM—n
();

282 
T¿nsfÜmPoš‹r
 
G‘Proüu¡esM©ch
Ğ
idx
, 
OuutMeshPoš‹r
 
rg‘Mesh
, 
T¿n¦©iÚTy³
 
rg‘C’‹r
);

284 
	g´iv©e
:

288 
m_CÚv”g’û
;

290 
T¿nsfÜmMeshA¼ay
 
	gm_MeshT¿nsfÜm
;

292 
	g¡d
::
veùÜ
<
T¿n¦©iÚTy³
> 
m_C’‹r
;

294 
OuutMeshPoš‹r
 
	gm_M—n
;

295 
T¿n¦©iÚTy³
 
	gm_M—nC’‹r
;

297 
OuutMeshPoš‹r
 
	gm_OldM—n
;

300 
boŞ
 
	gm_U£Sÿlšg
;

303 
boŞ
 
	gm_U£NÜm®iz©iÚ
;

306 
boŞ
 
	gm_U£In™ŸlAv”age
;

309 
boŞ
 
	gm_U£SšgËI‹¿tiÚ
;

312 
boŞ
 
	gm_AlignRÙ©iÚ
;

324 #iâdeà
ITK_MANUAL_INSTANTIATION


325 
	~"™kMesh3DProüu¡esAlignF‹r.txx
"

	@macro_const_values.h

1 #iâdeà
MACRO_CONST_VALUES_H


2 
	#MACRO_CONST_VALUES_H


	)

	@matlabengine.cpp

1 
	~"m©Ïb’gše.h
"

3 
	gm©ÏbEngše
::
	$m©ÏbEngše
()

5 
	}
}

9 
m©ÏbEngše
::
	$’gdemo
() {

133  
EXIT_SUCCESS
;

134 
	}
}

	@matlabengine.h

1 #iâdeà
MATLABENGINE_H


2 
	#MATLABENGINE_H


	)

4 
	~<¡dlib.h
>

5 
	~<¡dio.h
>

6 
	~<¡ršg.h
>

9 
	#BUFSIZE
 256

	)

13 şas 
	cm©ÏbEngše


15 
	mpublic
:

16 
m©ÏbEngše
();

18 
’gdemo
();

	@movespokes.cpp

7 
	~"move¥okes.h
"

12 
	gmove¥okes
::
	$move¥okes
()

14 
	}
}

16 
move¥okes
::~
	$move¥okes
()

18 
	}
}

21 
move¥okes
::
	$move¥okes
(
¡ršg
 
roÙDœ
, 
¥okeNum
, 
¤•Num
, 
side
, 
š‹½Ş©iÚLev–
) {

22 
this
->
roÙDœ
 =„ootDir;

23 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

25 
toŞsfunc
 
toŞs
;

27 
toŞs
.
	`d–‘eFes
ÑoŞs.
	`cÚÃùSŒ
(
roÙDœ
, "/temp_data/"));

29 
this
->
side
 = side;

31 
this
->
pM©rix
.
	`£t_size
(
¥okeNum
*3, 
¤•Num
);

32 
this
->
uM©rix
.
	`£t_size
(
¥okeNum
*3, 
¤•Num
);

33 
this
->
rM©rix
.
	`£t_size
(
¥okeNum
, 
¤•Num
);

35 
	}
}

50 
	gmove¥okes
::
ÿlcuÏ‹RegEÁrİy
(cÚ¡ * 
cÛff
, 
M3DQuadFigu»
* 
shiášgQuadFig
, 
DoubËVec
 
subVs
,

51 
v¬sNum
, 
veùÜ
<
M3DQuadFigu»
 *> 
quadFigLi¡
, veùÜ<
vtkSm¬tPoš‹r
<
vtkSR•
> > 
¤•figLi¡
){

52 *
	gcÛff_this
 = 
Ãw
 [
v¬sNum
];

53 
	g»gEÁrİy
 = 0.0;

56 
	gq
 = 0; q < 
	gquadFigLi¡
.
size
(); q++){

59 
cİyS»pFig
(
quadFigLi¡
[
q
], 
shiášgQuadFig
);

62 
	gj
=0; j<
	gv¬sNum
; j++){

63 
	gcÛff_this
[
j
] = 
cÛff
[
q
*
v¬sNum
 + j];

66 
	g’Œİy
 = 0.0;

68 if(
	gside
 == 2) {

70 
¦ideüe¡¥okes
 
mC»¡Spoke
(
š‹½Ş©iÚLev–
);

71 
	g’Œİy
 = 
mC»¡Spoke
.
moveC»¡Spokes
(
shiášgQuadFig
, 
¤•figLi¡
[
q
], 
cÛff_this
, 
subVs
);

74 
¦ide¡ªd¬d¥okes
 
mSnd¬dSpoke
(
side
, 
š‹½Ş©iÚLev–
);

75 
	g’Œİy
 = 
mSnd¬dSpoke
.
moveSnd¬dSpokes
(
shiášgQuadFig
, 
cÛff_this
, 
subVs
);

79 
	g»gEÁrİy
 +ğ
’Œİy
;

81 
¡ÜeSpokesToM©rix
(
q
, 
shiášgQuadFig
);

87 
toŞsfunc
 
	gtoŞs
;

89 
¡ršg
 
	ggeoFeName
 = 
toŞs
.
cÚÃùSŒ
(
roÙDœ
,"/temp_data/GEO_input.txt");

90 
§veGEO_IÅut_M©rix
(
geoFeName
);

93 
	gd–‘e
 [] 
	gcÛff_this
;

96 
	g¡d
::
cout
<<"----»gEÁrİy: "<<
»gEÁrİy
<<
¡d
::
’dl
;

98  
	g»gEÁrİy
;

110 
	gmove¥okes
::
	$¡ÜeSpokesToM©rix
(
¤•Index
, 
M3DQuadFigu»
* 
quadFig
){

111 
šdex
 = 0;

113 
this
->
side
){

117 
i
=0; i< 
quadFig
->
	`g‘RowCouÁ
(); i++){

118 
j
=0; j< 
quadFig
->
	`g‘CŞumnCouÁ
(); j++){

119 
M3DQuadPrim™ive
* 
´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
));

121 if(!
´im
){

122 
¡d
::
cout
<<"Mes§gäom: move¥okes::§veSndSpokesToM©rix::h´im…oš‹¸pošˆi NULL!! EXIT_FAILURE!!"<<¡d::
’dl
;

123 
	`ex™
(1);

126 
pIndex
 = 
šdex
 * 3;

127 
this
->
	`pM©rix
(
pIndex
,
¤•Index
èğ
´im
->
	`g‘X
().getX();

128 
this
->
	`pM©rix
(
pIndex
+1,
¤•Index
èğ
´im
->
	`g‘X
().
	`g‘Y
();

129 
this
->
	`pM©rix
(
pIndex
+2,
¤•Index
èğ
´im
->
	`g‘X
().
	`g‘Z
();

132 if(
this
->
side
 == 0) {

133 
this
->
	`uM©rix
(
pIndex
,
¤•Index
èğ
´im
->
	`g‘U0
().
	`g‘X
();

134 
this
->
	`uM©rix
(
pIndex
+1,
¤•Index
èğ
´im
->
	`g‘U0
().
	`g‘Y
();

135 
this
->
	`uM©rix
(
pIndex
+2,
¤•Index
èğ
´im
->
	`g‘U0
().
	`g‘Z
();

137 
this
->
	`rM©rix
(
šdex
,
¤•Index
èğ
´im
->
	`g‘R0
();

142 
this
->
	`uM©rix
(
pIndex
,
¤•Index
èğ
´im
->
	`g‘U1
().
	`g‘X
();

143 
this
->
	`uM©rix
(
pIndex
+1,
¤•Index
èğ
´im
->
	`g‘U1
().
	`g‘Y
();

144 
this
->
	`uM©rix
(
pIndex
+2,
¤•Index
èğ
´im
->
	`g‘U1
().
	`g‘Z
();

146 
this
->
	`rM©rix
(
šdex
,
¤•Index
èğ
´im
->
	`g‘R1
();

149 
šdex
++;

154 
u
=0; u< 
quadFig
->
	`g‘RowCouÁ
(); u++){

155 
v
=0; v< 
quadFig
->
	`g‘CŞumnCouÁ
(); v++){

157 if(
u
==0 || u==(
quadFig
->
	`g‘RowCouÁ
()-1è|| 
v
==0 || v==(quadFig->
	`g‘CŞumnCouÁ
()-1)){

159 
M3DQuadEndPrim™ive
* 
´imEnd
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
quadFig
->
	`g‘Prim™ivePŒ
(
u
,
v
));

161 if(!
´imEnd
){

162 
¡d
::
cout
<<"Mes§gäom: move¥okes::§veSpokesToM©rix::h´imEnd…oš‹¸pošˆi NULL!! EXIT_FAILURE!!"<<¡d::
’dl
;

163 
	`ex™
(1);

166 
pIndex
 = 
šdex
 * 3;

168 
this
->
	`pM©rix
(
pIndex
,
¤•Index
èğ
´imEnd
->
	`g‘X
().getX();

169 
this
->
	`pM©rix
(
pIndex
+1,
¤•Index
èğ
´imEnd
->
	`g‘X
().
	`g‘Y
();

170 
this
->
	`pM©rix
(
pIndex
+2,
¤•Index
èğ
´imEnd
->
	`g‘X
().
	`g‘Z
();

172 
this
->
	`uM©rix
(
pIndex
,
¤•Index
èğ
´imEnd
->
	`g‘UEnd
().
	`g‘X
();

173 
this
->
	`uM©rix
(
pIndex
+1,
¤•Index
èğ
´imEnd
->
	`g‘UEnd
().
	`g‘Y
();

174 
this
->
	`uM©rix
(
pIndex
+2,
¤•Index
èğ
´imEnd
->
	`g‘UEnd
().
	`g‘Z
();

176 
this
->
	`rM©rix
(
šdex
,
¤•Index
èğ
´imEnd
->
	`g‘REnd
();

178 
šdex
++;

184 
	}
}

189 
	gmove¥okes
::
	$§veGEO_IÅut_M©rix
(
¡ršg
 
geoFeName
){

190 
¡d
::
of¡»am
 
fout
;

191 
fout
.
	`İ’
(
geoFeName
.
	`c_¡r
());

194 if(
fout
) {

195 
i
 =0; i< 
this
->
pM©rix
.
	`rows
();i++){

196 
j
=0; j< 
this
->
pM©rix
.
	`cŞumns
(); j++){

197 
fout
<< 
this
->
pM©rix
[
i
][
j
]<<" ";

199 
fout
<<
¡d
::
’dl
;

202 
i
 =0; i< 
this
->
rM©rix
.
	`rows
();i++){

203 
j
=0; j< 
this
->
rM©rix
.
	`cŞumns
(); j++){

204 
fout
<< 
this
->
rM©rix
[
i
][
j
]<<" ";

206 
fout
<<
¡d
::
’dl
;

209 
i
 =0; i< 
this
->
uM©rix
.
	`rows
();i++){

210 
j
=0; j< 
this
->
uM©rix
.
	`cŞumns
(); j++){

211 
fout
<< 
this
->
uM©rix
[
i
][
j
]<<" ";

213 
fout
<<
¡d
::
’dl
;

219 
¡d
::
û¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
geoFeName
<<¡d::
’dl
;

221 
fout
.
	`şo£
();

222 
	}
}

228 
	gmove¥okes
::
	$§veShiáedS»p
(
M3DQuadFigu»
* 
quadFig
, 
¡ršg
 
f•©h
, sŒšg 
roÙDœ
){

229 
Regi¡ry
 *
»gi¡ry
 = 
Ãw
 
	`Regi¡ry
();

230 
»gi¡ry
->
	`»adFromFe
(
f•©h
.
	`c_¡r
(), 
çl£
);

232 
toŞsfunc
 
toŞs
;

234 
¡ršg
 
bn
 = 
toŞs
.
	`g‘Ba£FeName
(
f•©h
);

237 
¡ršg
 
movedS»pP©h
 = 
roÙDœ
 + 
	`¡ršg
("/moved_¤•s/"è+ 
bn
 + ".m3d";

239 
	`wr™eSpokeInfoToFe
(
movedS»pP©h
.
	`c_¡r
(), *
»gi¡ry
, 
quadFig
);

240 
	}
}

248 
	gmove¥okes
::
	$cİyS»pFig
(
M3DQuadFigu»
* 
quadFig
, M3DQuadFigu»* 
shiášgFig
){

250 
i
 = 0; i < 
quadFig
->
	`g‘RowCouÁ
(); i++){

251 
j
 = 0; j < 
quadFig
->
	`g‘CŞumnCouÁ
(); j++){

252 
M3DQuadPrim™ive
* 
´im_cu¼
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
));

253 
VeùÜ3D
 
hubpos
 = 
´im_cu¼
->
	`g‘X
();

256 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
shiášgFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tX
(
hubpos
.
	`g‘X
(), hubpos.
	`g‘Y
(), hubpos.
	`g‘Z
());

259 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
shiášgFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tR0
(
´im_cu¼
->
	`g‘R0
());

260 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
shiášgFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tR1
(
´im_cu¼
->
	`g‘R1
());

263 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
shiášgFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tU0
(
´im_cu¼
->
	`g‘U0
());

264 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
shiášgFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tU1
(
´im_cu¼
->
	`g‘U1
());

267 if(
i
==0 || i==(
quadFig
->
	`g‘RowCouÁ
()-1è|| 
j
==0 || j==(quadFig->
	`g‘CŞumnCouÁ
()-1)){

268 
rEnd
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`g‘REnd
();

269 
VeùÜ3D
 
uEnd
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`g‘UEnd
();

271 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
shiášgFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tREnd
(
rEnd
);

272 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
shiášgFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tUEnd
(
uEnd
);

276 
	}
}

297 
	gmove¥okes
::
	$§veMovedMod–
(
¡ršg
 
roÙDœ
, 
couÁ
, 
Regi¡ry
 * 
qRegi¡ry
, sŒšg 
quadFeName
, 
M3DQuadFigu»
* 
quadFig
){

300 
¡ršg
 
movedS»pP©h
 = 
roÙDœ
 + 
	`¡ršg
("/moved_¤•s/"è+ 
quadFeName
;

302 
	`wr™eSpokeInfoToFe
(
movedS»pP©h
.
	`c_¡r
(), *
qRegi¡ry
, 
quadFig
);

314 
	}
}

323 
	gmove¥okes
::
	$wr™eSpokeInfoToFe
(cÚ¡ * 
ouutP©h
, 
Regi¡ry
 &
»gi¡ry
, 
M3DQuadFigu»
* 
quadFig
){

324 
¡d
::
cout
<<"----wr™to: "<<
ouutP©h
<<¡d::
’dl
;

325 
figu»SŒ
[1024];

327 
	`¥rštf
(
figu»SŒ
, "model.figure[%d]", 0);

329 
quadFig
->
	`wr™eFigu»
(
figu»SŒ
,
»gi¡ry
);

332 
»gi¡ry
.
	`wr™eToFe
(
ouutP©h
);

333 
¡d
::
cout
<<"----fšished! "<<¡d::
’dl
;

334 
	}
}

	@movespokes.h

1 #iâdeà
MOVESPOKES_H


2 
	#MOVESPOKES_H


	)

5 
	~"toŞsfunc.h
"

6 
	~"M3DQuadIÁ”pŞ©”.h
"

7 
	~"ÿÌeguÏr™yã©u»s.h
"

10 
	~<™kVeùÜ.h
>

12 
	~"»guÏr™y’Œİy.h
"

13 
	~"¦ide¡ªd¬d¥okes.h
"

14 
	~"¦ideüe¡¥okes.h
"

51 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

54 şas 
	cmove¥okes


56 
	mpublic
:

58 
™k
::
	tPošt
< , 3 > 
	tPoštTy³
;

59 
	mveùÜ
< 
	tPoštTy³
 > 
	tVeùÜPoštTy³
;

60 
	mveùÜ
< 
	tVeùÜPoštTy³
 > 
	tS»pVeùÜPoštTy³
;

62 
	mveùÜ
< > 
	tdoubËVeùÜ
;

63 
	mveùÜ
< 
	tdoubËVeùÜ
 > 
	tS»pDoubËVeùÜTy³
;

65 
move¥okes
();

66 ~
move¥okes
();

68 
move¥okes
(
¡ršg
 
roÙDœ
, 
¥okeNum
, 
¤•Num
, 
side
, 
š‹½Ş©iÚLev–
);

70 
ÿlcuÏ‹RegEÁrİy
(cÚ¡ * 
cÛff
, 
M3DQuadFigu»
* 
quadFig
, 
DoubËVec
 
subVs
,

71 
v¬sNum
, 
veùÜ
<
M3DQuadFigu»
 *> 
quadFigLi¡
, veùÜ<
vtkSm¬tPoš‹r
<
vtkSR•
> > 
¤•figLi¡
);

73 
§veMovedMod–
(
¡ršg
 
roÙDœ
, 
couÁ
, 
Regi¡ry
 * 
qRegi¡ry
, sŒšg 
feName
, 
M3DQuadFigu»
* 
quadFig
);

74 
wr™eSpokeInfoToFe
(cÚ¡ * 
ouutP©h
, 
Regi¡ry
 &
»gi¡ry
, 
M3DQuadFigu»
* 
quadFig
);

76 
cİyS»pFig
(
M3DQuadFigu»
* 
quadFig
, M3DQuadFigu»* 
shiášgFig
);

78 
§veShiáedS»p
(
M3DQuadFigu»
* 
quadFig
, 
¡ršg
 
f•©h
, sŒšg 
roÙDœ
);

80 
§veGEO_IÅut_M©rix
(
¡ršg
 
geoFeName
);

81 
¡ÜeSpokesToM©rix
(
¤•Index
, 
M3DQuadFigu»
* 
quadFig
);

83 
	m´iv©e
:

85 
¡ršg
 
roÙDœ
;

87 
	mside
;

88 
	mš‹½Ş©iÚLev–
;

91 
M©rixTy³
 
	mpM©rix
;

92 
M©rixTy³
 
	muM©rix
;

93 
M©rixTy³
 
	mrM©rix
;

	@newuoa.h

45 #iâdeà
AC_NEWUOA_HH_


46 
	#AC_NEWUOA_HH_


	)

47 
	~<m©h.h
>

48 
	~<®gÜ™hm
>

49 
	#M_PI
 3.14159265358979323846

	)

51 
usšg
 
Çme¥aû
 
	g¡d
;

53 
	g‹m¶©e
<
şass
 
	gTYPE
, cÏs 
	gFunc
>

54 
TYPE
 
mš_Ãwuß
(
n
, TYPE *
x
, 
Func
 &
func
, TYPE 
r_¡¬t
=1e7, TYPE 
tŞ
=1e-8, 
max_™”
=5000);

56 
	g‹m¶©e
<
şass
 
	gTYPE
, cÏs 
	gFunc
>

57 
	$bigÏg_
(
n
, 
Åt
, 
TYPE
 *
xİt
, TYPE *
x±
, TYPE *
bm©
, TYPE *
zm©
, *
idz
,

58 *
ndim
, *
kÃw
, 
TYPE
 *
d–
, TYPE *
d__
, TYPE *
®pha
, TYPE *
hcŞ
, TYPE *
gc
,

59 
TYPE
 *
gd
, TYPE *
s
, TYPE *
w
, 
Func
 &
func
)

76 
x±_dim1
, 
x±_off£t
, 
bm©_dim1
, 
bm©_off£t
, 
zm©_dim1
, 
zm©_off£t
,

77 
i__1
, 
i__2
, 
i__
, 
j
, 
k
, 
iu
, 
Åtm
, 
™”c
, 
i§ve
;

78 
TYPE
 
¥
, 
ss
, 
cf1
, 
cf2
, 
cf3
, 
cf4
, 
cf5
, 
dhd
, 
ùh
, 
u
, 
¡h
, 
sum
, 
‹mp
, 
¡•
,

79 
ªgË
, 
sÿË
, 
d’om
, 
d–sq
, 
‹m·
, 
‹mpb
, 
twİi
, 
ubeg
, 
uŞd
, 
umax
,

80 
d__1
, 
dd
, 
gg
;

83 
‹m·
 = 
‹mpb
 = 0.0;

84 
zm©_dim1
 = 
Åt
;

85 
zm©_off£t
 = 1 + 
zm©_dim1
;

86 
zm©
 -ğ
zm©_off£t
;

87 
x±_dim1
 = 
Åt
;

88 
x±_off£t
 = 1 + 
x±_dim1
;

89 
x±
 -ğ
x±_off£t
;

90 --
xİt
;

91 
bm©_dim1
 = *
ndim
;

92 
bm©_off£t
 = 1 + 
bm©_dim1
;

93 
bm©
 -ğ
bm©_off£t
;

94 --
d__
; --
hcŞ
; --
gc
; --
gd
; --
s
; --
w
;

96 
twİi
 = 2.0 * 
M_PI
;

97 
d–sq
 = *
d–
 * *delta;

98 
Åtm
 = 
Åt
 - 
n
 - 1;

101 
™”c
 = 0;

102 
i__1
 = 
Åt
;

103 
k
 = 1; k <ğ
i__1
; ++kè
hcŞ
[k] = 0;

104 
i__1
 = 
Åtm
;

105 
j
 = 1; j <ğ
i__1
; ++j) {

106 
‹mp
 = 
zm©
[*
kÃw
 + 
j
 * 
zm©_dim1
];

107 ià(
j
 < *
idz
è
‹mp
 = -temp;

108 
i__2
 = 
Åt
;

109 
k
 = 1; k <ğ
i__2
; ++k)

110 
hcŞ
[
k
] +ğ
‹mp
 * 
zm©
[k + 
j
 * 
zm©_dim1
];

112 *
®pha
 = 
hcŞ
[*
kÃw
];

116 
dd
 = 0;

117 
i__2
 = 
n
;

118 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

119 
d__
[
i__
] = 
x±
[*
kÃw
 + i__ * 
x±_dim1
] - 
xİt
[i__];

120 
gc
[
i__
] = 
bm©
[*
kÃw
 + i__ * 
bm©_dim1
];

121 
gd
[
i__
] = 0;

123 
d__1
 = 
d__
[
i__
];

124 
dd
 +ğ
d__1
 * d__1;

126 
i__2
 = 
Åt
;

127 
k
 = 1; k <ğ
i__2
; ++k) {

128 
‹mp
 = 0;

129 
sum
 = 0;

130 
i__1
 = 
n
;

131 
j
 = 1; j <ğ
i__1
; ++j) {

132 
‹mp
 +ğ
x±
[
k
 + 
j
 * 
x±_dim1
] * 
xİt
[j];

133 
sum
 +ğ
x±
[
k
 + 
j
 * 
x±_dim1
] * 
d__
[j];

135 
‹mp
 = 
hcŞ
[
k
] *emp;

136 
sum
 = 
hcŞ
[
k
] * sum;

137 
i__1
 = 
n
;

138 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

139 
gc
[
i__
] +ğ
‹mp
 * 
x±
[
k
 + i__ * 
x±_dim1
];

140 
gd
[
i__
] +ğ
sum
 * 
x±
[
k
 + i__ * 
x±_dim1
];

145 
gg
 = 
¥
 = 
dhd
 = 0;

146 
i__1
 = 
n
;

147 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

149 
d__1
 = 
gc
[
i__
];

150 
gg
 +ğ
d__1
 * d__1;

151 
¥
 +ğ
d__
[
i__
] * 
gc
[i__];

152 
dhd
 +ğ
d__
[
i__
] * 
gd
[i__];

154 
sÿË
 = *
d–
 / 
	`sq¹
(
dd
);

155 ià(
¥
 * 
dhd
 < 0è
sÿË
 = -scale;

156 
‹mp
 = 0;

157 ià(
¥
 * s°> 
dd
 * .99 * 
gg
è
‹mp
 = 1.0;

158 
u
 = 
sÿË
 * (
	`çbs
(
¥
è+ 0.5 * sÿË * fabs(
dhd
));

159 ià(
gg
 * 
d–sq
 < 
u
 * .01 *auè
‹mp
 = 1.0;

160 
i__1
 = 
n
;

161 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

162 
d__
[
i__
] = 
sÿË
 * d__[i__];

163 
gd
[
i__
] = 
sÿË
 * gd[i__];

164 
s
[
i__
] = 
gc
[i__] + 
‹mp
 * 
gd
[i__];

169 
™”c
 = 0; i‹rø!ğ
n
; ++iterc) {

170 
dd
 = 
¥
 = 
ss
 = 0;

171 
i__1
 = 
n
;

172 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

174 
d__1
 = 
d__
[
i__
];

175 
dd
 +ğ
d__1
 * d__1;

176 
¥
 +ğ
d__
[
i__
] * 
s
[i__];

178 
d__1
 = 
s
[
i__
];

179 
ss
 +ğ
d__1
 * d__1;

181 
‹mp
 = 
dd
 * 
ss
 - 
¥
 * sp;

182 ià(
‹mp
 <ğ
dd
 * 1e-8 * 
ss
)  0;

183 
d’om
 = 
	`sq¹
(
‹mp
);

184 
i__1
 = 
n
;

185 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

186 
s
[
i__
] = (
dd
 * s[i__] - 
¥
 * 
d__
[i__]è/ 
d’om
;

187 
w
[
i__
] = 0;

192 
i__1
 = 
Åt
;

193 
k
 = 1; k <ğ
i__1
; ++k) {

194 
sum
 = 0;

195 
i__2
 = 
n
;

196 
j
 = 1; j <ğ
i__2
; ++j)

197 
sum
 +ğ
x±
[
k
 + 
j
 * 
x±_dim1
] * 
s
[j];

198 
sum
 = 
hcŞ
[
k
] * sum;

199 
i__2
 = 
n
;

200 
i__
 = 1; i__ <ğ
i__2
; ++i__)

201 
w
[
i__
] +ğ
sum
 * 
x±
[
k
 + i__ * 
x±_dim1
];

203 
cf1
 = 
cf2
 = 
cf3
 = 
cf4
 = 
cf5
 = 0;

204 
i__2
 = 
n
;

205 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

206 
cf1
 +ğ
s
[
i__
] * 
w
[i__];

207 
cf2
 +ğ
d__
[
i__
] * 
gc
[i__];

208 
cf3
 +ğ
s
[
i__
] * 
gc
[i__];

209 
cf4
 +ğ
d__
[
i__
] * 
gd
[i__];

210 
cf5
 +ğ
s
[
i__
] * 
gd
[i__];

212 
cf1
 = 0.5 * cf1;

213 
cf4
 = 0.5 * cf4 - 
cf1
;

215 
ubeg
 = 
cf1
 + 
cf2
 + 
cf4
;

216 
umax
 = 
uŞd
 = 
ubeg
;

217 
i§ve
 = 0;

218 
iu
 = 49;

219 
‹mp
 = 
twİi
 / (
TYPE
è(
iu
 + 1);

220 
i__2
 = 
iu
;

221 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

222 
ªgË
 = (
TYPE
è
i__
 *
‹mp
;

223 
ùh
 = 
	`cos
(
ªgË
);

224 
¡h
 = 
	`sš
(
ªgË
);

225 
u
 = 
cf1
 + (
cf2
 + 
cf4
 * 
ùh
è* cth + (
cf3
 + 
cf5
 * cthè* 
¡h
;

226 ià(
	`çbs
(
u
è> fabs(
umax
)) {

227 
umax
 = 
u
;

228 
i§ve
 = 
i__
;

229 
‹m·
 = 
uŞd
;

230 } ià(
i__
 =ğ
i§ve
 + 1è
‹mpb
 = 
u
;

231 
uŞd
 = 
u
;

233 ià(
i§ve
 =ğ0è
‹m·
 = 
u
;

234 ià(
i§ve
 =ğ
iu
è
‹mpb
 = 
ubeg
;

235 
¡•
 = 0;

236 ià(
‹m·
 !ğ
‹mpb
) {

237 
‹m·
 -ğ
umax
;

238 
‹mpb
 -ğ
umax
;

239 
¡•
 = 0.5 * (
‹m·
 - 
‹mpb
) / (tempa +empb);

241 
ªgË
 = 
‹mp
 * ((
TYPE
è
i§ve
 + 
¡•
);

243 
ùh
 = 
	`cos
(
ªgË
);

244 
¡h
 = 
	`sš
(
ªgË
);

245 
u
 = 
cf1
 + (
cf2
 + 
cf4
 * 
ùh
è* cth + (
cf3
 + 
cf5
 * cthè* 
¡h
;

246 
i__2
 = 
n
;

247 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

248 
d__
[
i__
] = 
ùh
 * d__[i__] + 
¡h
 * 
s
[i__];

249 
gd
[
i__
] = 
ùh
 * gd[i__] + 
¡h
 * 
w
[i__];

250 
s
[
i__
] = 
gc
[i__] + 
gd
[i__];

252 ià(
	`çbs
(
u
è<ğçbs(
ubeg
) * 1.1)  0;

255 
	}
}

257 
	g‹m¶©e
<
şass
 
	gTYPE
>

258 
	$bigd’_
(
n
, 
Åt
, 
TYPE
 *
xİt
, TYPE *
x±
, TYPE *
bm©
, TYPE *
zm©
, *
idz
,

259 *
ndim
, *
kİt
, *
kÃw
, 
TYPE
 *
d__
, TYPE *
w
, TYPE *
vÏg
, TYPE *
b‘a
,

260 
TYPE
 *
s
, TYPE *
wvec
, TYPE *
´od
)

288 
x±_dim1
, 
x±_off£t
, 
bm©_dim1
, 
bm©_off£t
, 
zm©_dim1
, 
zm©_off£t
,

289 
wvec_dim1
, 
wvec_off£t
, 
´od_dim1
, 
´od_off£t
, 
i__1
, 
i__2
, 
i__
, 
j
, 
k
,

290 
i§ve
, 
™”c
, 
jc
, 

, 
iu
, 
nw
, 
k§v
, 
Åtm
;

291 
TYPE
 
dd
, 
d__1
, 
ds
, 
ss
, 
d’
[9], 
·r
[9], 
u
, 
sum
, 
diff
, 
‹mp
, 
¡•
,

292 
®pha
, 
ªgË
, 
d’ex
[9], 
‹m·
, 
‹mpb
, 
‹mpc
, 
ssd’
, 
d‹¡
, 
xİtd
,

293 
twİi
, 
xİts
, 
d’Şd
, 
d’max
, 
d’§v
, 
d¡emp
, 
sumŞd
, 
s¡emp
, 
xİtsq
;

296 
zm©_dim1
 = 
Åt
;

297 
zm©_off£t
 = 1 + 
zm©_dim1
;

298 
zm©
 -ğ
zm©_off£t
;

299 
x±_dim1
 = 
Åt
;

300 
x±_off£t
 = 1 + 
x±_dim1
;

301 
x±
 -ğ
x±_off£t
;

302 --
xİt
;

303 
´od_dim1
 = *
ndim
;

304 
´od_off£t
 = 1 + 
´od_dim1
;

305 
´od
 -ğ
´od_off£t
;

306 
wvec_dim1
 = *
ndim
;

307 
wvec_off£t
 = 1 + 
wvec_dim1
;

308 
wvec
 -ğ
wvec_off£t
;

309 
bm©_dim1
 = *
ndim
;

310 
bm©_off£t
 = 1 + 
bm©_dim1
;

311 
bm©
 -ğ
bm©_off£t
;

312 --
d__
; --
w
; --
vÏg
; --
s
;

314 
twİi
 = 
	`©ª
(1.0) * 8.;

315 
Åtm
 = 
Åt
 - 
n
 - 1;

318 
i__1
 = 
Åt
;

319 
k
 = 1; k <ğ
i__1
; ++kè
w
[
n
 + k] = 0;

320 
i__1
 = 
Åtm
;

321 
j
 = 1; j <ğ
i__1
; ++j) {

322 
‹mp
 = 
zm©
[*
kÃw
 + 
j
 * 
zm©_dim1
];

323 ià(
j
 < *
idz
è
‹mp
 = -temp;

324 
i__2
 = 
Åt
;

325 
k
 = 1; k <ğ
i__2
; ++k)

326 
w
[
n
 + 
k
] +ğ
‹mp
 * 
zm©
[k + 
j
 * 
zm©_dim1
];

328 
®pha
 = 
w
[
n
 + *
kÃw
];

334 
dd
 = 
ds
 = 
ss
 = 
xİtsq
 = 0;

335 
i__2
 = 
n
;

336 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

338 
d__1
 = 
d__
[
i__
];

339 
dd
 +ğ
d__1
 * d__1;

340 
s
[
i__
] = 
x±
[*
kÃw
 + i__ * 
x±_dim1
] - 
xİt
[i__];

341 
ds
 +ğ
d__
[
i__
] * 
s
[i__];

343 
d__1
 = 
s
[
i__
];

344 
ss
 +ğ
d__1
 * d__1;

346 
d__1
 = 
xİt
[
i__
];

347 
xİtsq
 +ğ
d__1
 * d__1;

349 ià(
ds
 * d > 
dd
 * .99 * 
ss
) {

350 
k§v
 = *
kÃw
;

351 
d‹¡
 = 
ds
 * d / 
ss
;

352 
i__2
 = 
Åt
;

353 
k
 = 1; k <ğ
i__2
; ++k) {

354 ià(
k
 !ğ*
kİt
) {

355 
d¡emp
 = 0;

356 
s¡emp
 = 0;

357 
i__1
 = 
n
;

358 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

359 
diff
 = 
x±
[
k
 + 
i__
 * 
x±_dim1
] - 
xİt
[i__];

360 
d¡emp
 +ğ
d__
[
i__
] * 
diff
;

361 
s¡emp
 +ğ
diff
 * diff;

363 ià(
d¡emp
 * d¡em°/ 
s¡emp
 < 
d‹¡
) {

364 
k§v
 = 
k
;

365 
d‹¡
 = 
d¡emp
 * d¡em°/ 
s¡emp
;

366 
ds
 = 
d¡emp
;

367 
ss
 = 
s¡emp
;

371 
i__2
 = 
n
;

372 
i__
 = 1; i__ <ğ
i__2
; ++i__)

373 
s
[
i__
] = 
x±
[
k§v
 + i__ * 
x±_dim1
] - 
xİt
[i__];

375 
ssd’
 = 
dd
 * 
ss
 - 
ds
 * ds;

376 
™”c
 = 0;

377 
d’§v
 = 0;

380 
BDL70
:

381 ++
™”c
;

382 
‹mp
 = 1.0 / 
	`sq¹
(
ssd’
);

383 
xİtd
 = 
xİts
 = 0;

384 
i__2
 = 
n
;

385 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

386 
s
[
i__
] = 
‹mp
 * (
dd
 * s[i__] - 
ds
 * 
d__
[i__]);

387 
xİtd
 +ğ
xİt
[
i__
] * 
d__
[i__];

388 
xİts
 +ğ
xİt
[
i__
] * 
s
[i__];

391 
‹m·
 = 0.5 * 
xİtd
 * xoptd;

392 
‹mpb
 = 0.5 * 
xİts
 * xopts;

393 
d’
[0] = 
dd
 * (
xİtsq
 + 0.5 * ddè+ 
‹m·
 + 
‹mpb
;

394 
d’
[1] = 2.0 * 
xİtd
 * 
dd
;

395 
d’
[2] = 2.0 * 
xİts
 * 
dd
;

396 
d’
[3] = 
‹m·
 - 
‹mpb
;

397 
d’
[4] = 
xİtd
 * 
xİts
;

398 
i__
 = 6; i__ <ğ9; ++i__è
d’
[i__ - 1] = 0;

400 
i__2
 = 
Åt
;

401 
k
 = 1; k <ğ
i__2
; ++k) {

402 
‹m·
 = 
‹mpb
 = 
‹mpc
 = 0;

403 
i__1
 = 
n
;

404 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

405 
‹m·
 +ğ
x±
[
k
 + 
i__
 * 
x±_dim1
] * 
d__
[i__];

406 
‹mpb
 +ğ
x±
[
k
 + 
i__
 * 
x±_dim1
] * 
s
[i__];

407 
‹mpc
 +ğ
x±
[
k
 + 
i__
 * 
x±_dim1
] * 
xİt
[i__];

409 
wvec
[
k
 + 
wvec_dim1
] = 0.25 * (
‹m·
 *em· + 
‹mpb
 *empb);

410 
wvec
[
k
 + (
wvec_dim1
 << 1)] = 
‹m·
 * 
‹mpc
;

411 
wvec
[
k
 + 
wvec_dim1
 * 3] = 
‹mpb
 * 
‹mpc
;

412 
wvec
[
k
 + (
wvec_dim1
 << 2)] = 0.25 * (
‹m·
 *em· - 
‹mpb
 *empb);

413 
wvec
[
k
 + 
wvec_dim1
 * 5] = 0.5 * 
‹m·
 * 
‹mpb
;

415 
i__2
 = 
n
;

416 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

417 

 = 
i__
 + 
Åt
;

418 
wvec
[

 + 
wvec_dim1
] = 0;

419 
wvec
[

 + (
wvec_dim1
 << 1)] = 
d__
[
i__
];

420 
wvec
[

 + 
wvec_dim1
 * 3] = 
s
[
i__
];

421 
wvec
[

 + (
wvec_dim1
 << 2)] = 0;

422 
wvec
[

 + 
wvec_dim1
 * 5] = 0;

425 
jc
 = 1; jc <= 5; ++jc) {

426 
nw
 = 
Åt
;

427 ià(
jc
 =ğ2 || jø=ğ3è
nw
 = *
ndim
;

428 
i__2
 = 
Åt
;

429 
k
 = 1; k <ğ
i__2
; ++kè
´od
[k + 
jc
 * 
´od_dim1
] = 0;

430 
i__2
 = 
Åtm
;

431 
j
 = 1; j <ğ
i__2
; ++j) {

432 
sum
 = 0;

433 
i__1
 = 
Åt
;

434 
k
 = 1; k <ğ
i__1
; ++kè
sum
 +ğ
zm©
[k + 
j
 * 
zm©_dim1
] * 
wvec
[k + 
jc
 * 
wvec_dim1
];

435 ià(
j
 < *
idz
è
sum
 = -sum;

436 
i__1
 = 
Åt
;

437 
k
 = 1; k <ğ
i__1
; ++k)

438 
´od
[
k
 + 
jc
 * 
´od_dim1
] +ğ
sum
 * 
zm©
[k + 
j
 * 
zm©_dim1
];

440 ià(
nw
 =ğ*
ndim
) {

441 
i__1
 = 
Åt
;

442 
k
 = 1; k <ğ
i__1
; ++k) {

443 
sum
 = 0;

444 
i__2
 = 
n
;

445 
j
 = 1; j <ğ
i__2
; ++j)

446 
sum
 +ğ
bm©
[
k
 + 
j
 * 
bm©_dim1
] * 
wvec
[
Åt
 + j + 
jc
 * 
wvec_dim1
];

447 
´od
[
k
 + 
jc
 * 
´od_dim1
] +ğ
sum
;

450 
i__1
 = 
n
;

451 
j
 = 1; j <ğ
i__1
; ++j) {

452 
sum
 = 0;

453 
i__2
 = 
nw
;

454 
i__
 = 1; i__ <ğ
i__2
; ++i__)

455 
sum
 +ğ
bm©
[
i__
 + 
j
 * 
bm©_dim1
] * 
wvec
[i__ + 
jc
 * 
wvec_dim1
];

456 
´od
[
Åt
 + 
j
 + 
jc
 * 
´od_dim1
] = 
sum
;

460 
i__1
 = *
ndim
;

461 
k
 = 1; k <ğ
i__1
; ++k) {

462 
sum
 = 0;

463 
i__
 = 1; i__ <= 5; ++i__) {

464 
·r
[
i__
 - 1] = 0.5 * 
´od
[
k
 + i__ * 
´od_dim1
] * 
wvec
[k + i__ * 
wvec_dim1
];

465 
sum
 +ğ
·r
[
i__
 - 1];

467 
d’
[0] = d’[0] - 
·r
[0] - 
sum
;

468 
‹m·
 = 
´od
[
k
 + 
´od_dim1
] * 
wvec
[k + (
wvec_dim1
 << 1)] +…rod[k + (

469 
´od_dim1
 << 1)] * 
wvec
[
k
 + 
wvec_dim1
];

470 
‹mpb
 = 
´od
[
k
 + (
´od_dim1
 << 1)] * 
wvec
[k + (
wvec_dim1
 << 2)] +

471 
´od
[
k
 + (
´od_dim1
 << 2)] * 
wvec
[k + (
wvec_dim1
 << 1)];

472 
‹mpc
 = 
´od
[
k
 + 
´od_dim1
 * 3] * 
wvec
[k + 
wvec_dim1
 * 5] +…rod[k +

473 
´od_dim1
 * 5] * 
wvec
[
k
 + 
wvec_dim1
 * 3];

474 
d’
[1] = d’[1] - 
‹m·
 - 0.5 * (
‹mpb
 + 
‹mpc
);

475 
d’
[5] -ğ0.5 * (
‹mpb
 - 
‹mpc
);

476 
‹m·
 = 
´od
[
k
 + 
´od_dim1
] * 
wvec
[k + 
wvec_dim1
 * 3] +…rod[k +

477 
´od_dim1
 * 3] * 
wvec
[
k
 + 
wvec_dim1
];

478 
‹mpb
 = 
´od
[
k
 + (
´od_dim1
 << 1)] * 
wvec
[k + 
wvec_dim1
 * 5] +…rod[k

479 + 
´od_dim1
 * 5] * 
wvec
[
k
 + (
wvec_dim1
 << 1)];

480 
‹mpc
 = 
´od
[
k
 + 
´od_dim1
 * 3] * 
wvec
[k + (
wvec_dim1
 << 2)] +…rod[k

481 + (
´od_dim1
 << 2)] * 
wvec
[
k
 + 
wvec_dim1
 * 3];

482 
d’
[2] = d’[2] - 
‹m·
 - 0.5 * (
‹mpb
 - 
‹mpc
);

483 
d’
[6] -ğ0.5 * (
‹mpb
 + 
‹mpc
);

484 
‹m·
 = 
´od
[
k
 + 
´od_dim1
] * 
wvec
[k + (
wvec_dim1
 << 2)] +…rod[k + (

485 
´od_dim1
 << 2)] * 
wvec
[
k
 + 
wvec_dim1
];

486 
d’
[3] = d’[3] - 
‹m·
 - 
·r
[1] +…ar[2];

487 
‹m·
 = 
´od
[
k
 + 
´od_dim1
] * 
wvec
[k + 
wvec_dim1
 * 5] +…rod[k +

488 
´od_dim1
 * 5] * 
wvec
[
k
 + 
wvec_dim1
];

489 
‹mpb
 = 
´od
[
k
 + (
´od_dim1
 << 1)] * 
wvec
[k + 
wvec_dim1
 * 3] +…rod[k

490 + 
´od_dim1
 * 3] * 
wvec
[
k
 + (
wvec_dim1
 << 1)];

491 
d’
[4] = d’[4] - 
‹m·
 - 0.5 * 
‹mpb
;

492 
d’
[7] = d’[7] - 
·r
[3] +…ar[4];

493 
‹m·
 = 
´od
[
k
 + (
´od_dim1
 << 2)] * 
wvec
[k + 
wvec_dim1
 * 5] +…rod[k

494 + 
´od_dim1
 * 5] * 
wvec
[
k
 + (
wvec_dim1
 << 2)];

495 
d’
[8] -ğ0.5 * 
‹m·
;

498 
sum
 = 0;

499 
i__
 = 1; i__ <= 5; ++i__) {

501 
d__1
 = 
´od
[*
kÃw
 + 
i__
 * 
´od_dim1
];

502 
·r
[
i__
 - 1] = 0.5 * (
d__1
 * d__1);

503 
sum
 +ğ
·r
[
i__
 - 1];

505 
d’ex
[0] = 
®pha
 * 
d’
[0] + 
·r
[0] + 
sum
;

506 
‹m·
 = 2.0 * 
´od
[*
kÃw
 + 
´od_dim1
] *…rod[*knew + (prod_dim1 << 1)];

507 
‹mpb
 = 
´od
[*
kÃw
 + (
´od_dim1
 << 1)] *…rod[*knew + (prod_dim1 << 2)];

508 
‹mpc
 = 
´od
[*
kÃw
 + 
´od_dim1
 * 3] *…rod[*knew +…rod_dim1 * 5];

509 
d’ex
[1] = 
®pha
 * 
d’
[1] + 
‹m·
 + 
‹mpb
 + 
‹mpc
;

510 
d’ex
[5] = 
®pha
 * 
d’
[5] + 
‹mpb
 - 
‹mpc
;

511 
‹m·
 = 2.0 * 
´od
[*
kÃw
 + 
´od_dim1
] *…rod[*knew +…rod_dim1 * 3];

512 
‹mpb
 = 
´od
[*
kÃw
 + (
´od_dim1
 << 1)] *…rod[*knew +…rod_dim1 * 5];

513 
‹mpc
 = 
´od
[*
kÃw
 + 
´od_dim1
 * 3] *…rod[*knew + (prod_dim1 << 2)];

514 
d’ex
[2] = 
®pha
 * 
d’
[2] + 
‹m·
 + 
‹mpb
 - 
‹mpc
;

515 
d’ex
[6] = 
®pha
 * 
d’
[6] + 
‹mpb
 + 
‹mpc
;

516 
‹m·
 = 2.0 * 
´od
[*
kÃw
 + 
´od_dim1
] *…rod[*knew + (prod_dim1 << 2)];

517 
d’ex
[3] = 
®pha
 * 
d’
[3] + 
‹m·
 + 
·r
[1] -…ar[2];

518 
‹m·
 = 2.0 * 
´od
[*
kÃw
 + 
´od_dim1
] *…rod[*knew +…rod_dim1 * 5];

519 
d’ex
[4] = 
®pha
 * 
d’
[4] + 
‹m·
 + 
´od
[*
kÃw
 + (
´od_dim1
 << 1)] *…rod[

520 *
kÃw
 + 
´od_dim1
 * 3];

521 
d’ex
[7] = 
®pha
 * 
d’
[7] + 
·r
[3] -…ar[4];

522 
d’ex
[8] = 
®pha
 * 
d’
[8] + 
´od
[*
kÃw
 + (
´od_dim1
 << 2)] *…rod[*knew +

523 
´od_dim1
 * 5];

525 
sum
 = 
d’ex
[0] + denex[1] + denex[3] + denex[5] + denex[7];

526 
d’Şd
 = 
d’max
 = 
sum
;

527 
i§ve
 = 0;

528 
iu
 = 49;

529 
‹mp
 = 
twİi
 / (
TYPE
è(
iu
 + 1);

530 
·r
[0] = 1.0;

531 
i__1
 = 
iu
;

532 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

533 
ªgË
 = (
TYPE
è
i__
 *
‹mp
;

534 
·r
[1] = 
	`cos
(
ªgË
);

535 
·r
[2] = 
	`sš
(
ªgË
);

536 
j
 = 4; j <= 8; j += 2) {

537 
·r
[
j
 - 1] =…ar[1] *…ar[j - 3] -…ar[2] *…ar[j - 2];

538 
·r
[
j
] =…ar[1] *…ar[j - 2] +…ar[2] *…ar[j - 3];

540 
sumŞd
 = 
sum
;

541 
sum
 = 0;

542 
j
 = 1; j <= 9; ++j)

543 
sum
 +ğ
d’ex
[
j
 - 1] * 
·r
[j - 1];

544 ià(
	`çbs
(
sum
è> fabs(
d’max
)) {

545 
d’max
 = 
sum
;

546 
i§ve
 = 
i__
;

547 
‹m·
 = 
sumŞd
;

548 } ià(
i__
 =ğ
i§ve
 + 1) {

549 
‹mpb
 = 
sum
;

552 ià(
i§ve
 =ğ0è
‹m·
 = 
sum
;

553 ià(
i§ve
 =ğ
iu
è
‹mpb
 = 
d’Şd
;

554 
¡•
 = 0;

555 ià(
‹m·
 !ğ
‹mpb
) {

556 
‹m·
 -ğ
d’max
;

557 
‹mpb
 -ğ
d’max
;

558 
¡•
 = 0.5 * (
‹m·
 - 
‹mpb
) / (tempa +empb);

560 
ªgË
 = 
‹mp
 * ((
TYPE
è
i§ve
 + 
¡•
);

563 
·r
[1] = 
	`cos
(
ªgË
);

564 
·r
[2] = 
	`sš
(
ªgË
);

565 
j
 = 4; j <= 8; j += 2) {

566 
·r
[
j
 - 1] =…ar[1] *…ar[j - 3] -…ar[2] *…ar[j - 2];

567 
·r
[
j
] =…ar[1] *…ar[j - 2] +…ar[2] *…ar[j - 3];

569 *
b‘a
 = 0;

570 
d’max
 = 0;

571 
j
 = 1; j <= 9; ++j) {

572 *
b‘a
 +ğ
d’
[
j
 - 1] * 
·r
[j - 1];

573 
d’max
 +ğ
d’ex
[
j
 - 1] * 
·r
[j - 1];

575 
i__1
 = *
ndim
;

576 
k
 = 1; k <ğ
i__1
; ++k) {

577 
vÏg
[
k
] = 0;

578 
j
 = 1; j <= 5; ++j)

579 
vÏg
[
k
] +ğ
´od
[k + 
j
 * 
´od_dim1
] * 
·r
[j - 1];

581 
u
 = 
vÏg
[*
kÃw
];

582 
dd
 = 
‹m·
 = 
‹mpb
 = 0;

583 
i__1
 = 
n
;

584 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

585 
d__
[
i__
] = 
·r
[1] * d__[i__] +…¬[2] * 
s
[i__];

586 
w
[
i__
] = 
xİt
[i__] + 
d__
[i__];

588 
d__1
 = 
d__
[
i__
];

589 
dd
 +ğ
d__1
 * d__1;

590 
‹m·
 +ğ
d__
[
i__
] * 
w
[i__];

591 
‹mpb
 +ğ
w
[
i__
] * w[i__];

593 ià(
™”c
 >ğ
n
è
BDL340
;

594 ià(
™”c
 > 1è
d’§v
 = 
¡d
::
	`max
(d’§v, 
d’Şd
);

595 ià(
	`çbs
(
d’max
è<ğçbs(
d’§v
è* 1.1è
BDL340
;

596 
d’§v
 = 
d’max
;

599 
i__1
 = 
n
;

600 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

601 
‹mp
 = 
‹m·
 * 
xİt
[
i__
] + 
‹mpb
 * 
d__
[i__] - 
vÏg
[
Åt
 + i__];

602 
s
[
i__
] = 
u
 * 
bm©
[*
kÃw
 + i__ * 
bm©_dim1
] + 
®pha
 * 
‹mp
;

604 
i__1
 = 
Åt
;

605 
k
 = 1; k <ğ
i__1
; ++k) {

606 
sum
 = 0;

607 
i__2
 = 
n
;

608 
j
 = 1; j <ğ
i__2
; ++j)

609 
sum
 +ğ
x±
[
k
 + 
j
 * 
x±_dim1
] * 
w
[j];

610 
‹mp
 = (
u
 * 
w
[
n
 + 
k
] - 
®pha
 * 
vÏg
[k]è* 
sum
;

611 
i__2
 = 
n
;

612 
i__
 = 1; i__ <ğ
i__2
; ++i__)

613 
s
[
i__
] +ğ
‹mp
 * 
x±
[
k
 + i__ * 
x±_dim1
];

615 
ss
 = 0;

616 
ds
 = 0;

617 
i__2
 = 
n
;

618 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

620 
d__1
 = 
s
[
i__
];

621 
ss
 +ğ
d__1
 * d__1;

622 
ds
 +ğ
d__
[
i__
] * 
s
[i__];

624 
ssd’
 = 
dd
 * 
ss
 - 
ds
 * ds;

625 ià(
ssd’
 >ğ
dd
 * 1e-8 * 
ss
è
BDL70
;

627 
BDL340
:

628 
i__2
 = *
ndim
;

629 
k
 = 1; k <ğ
i__2
; ++k) {

630 
w
[
k
] = 0;

631 
j
 = 1; j <ğ5; ++jè
w
[
k
] +ğ
wvec
[k + j * 
wvec_dim1
] * 
·r
[j - 1];

633 
vÏg
[*
kİt
] += 1.0;

635 
	}
}

637 
	g‹m¶©e
<
şass
 
	gTYPE
>

638 
	$Œ§µ_
(
n
, 
Åt
, 
TYPE
 * 
xİt
, TYPE * 
x±
, TYPE * 
gq
, TYPE * 
hq
, TYPE * 
pq
,

639 
TYPE
 * 
d–
, TYPE * 
¡•
, TYPE * 
d__
, TYPE * 
g
, TYPE * 
hd
, TYPE * 
hs
, TYPE * 
üvmš
)

655 
x±_dim1
, 
x±_off£t
, 
i__1
, 
i__2
, 
i__
, 
j
, 
k
, 
ih
, 
iu
, 
™”c
,

656 
i§ve
, 
™”sw
, 
™”max
;

657 
TYPE
 
d__1
, 
d__2
, 
dd
, 
cf
, 
dg
, 
gg
, 
ds
, 
sg
, 
ss
, 
dhd
, 
dhs
,

658 
ùh
, 
sgk
, 
shs
, 
¡h
, 
qadd
, 
qbeg
, 
q»d
, 
qmš
, 
‹mp
,

659 
q§v
, 
qÃw
, 
ggbeg
, 
®pha
, 
ªgË
, 
»duc
, 
gg§v
, 
d–sq
,

660 
‹m·
, 
‹mpb
, 
b¡•
, 
¿tio
, 
twİi
, 
ªg‹¡
;

663 
‹m·
 = 
‹mpb
 = 
shs
 = 
sg
 = 
b¡•
 = 
ggbeg
 = 
gg
 = 
q»d
 = 
dd
 = 0.0;

664 
x±_dim1
 = 
Åt
;

665 
x±_off£t
 = 1 + 
x±_dim1
;

666 
x±
 -ğ
x±_off£t
;

667 --
xİt
; --
gq
; --
hq
; --
pq
; --
¡•
; --
d__
; --
g
; --
hd
; --
hs
;

669 
twİi
 = 2.0 * 
M_PI
;

670 
d–sq
 = *
d–
 * *delta;

671 
™”c
 = 0;

672 
™”max
 = 
n
;

673 
™”sw
 = 
™”max
;

674 
i__1
 = 
n
;

675 
i__
 = 1; i__ <ğ
i__1
; ++i__è
d__
[i__] = 
xİt
[i__];

676 
TRL170
;

678 
TRL20
:

679 
q»d
 = 
dd
 = 0;

680 
i__1
 = 
n
;

681 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

682 
¡•
[
i__
] = 0;

683 
hs
[
i__
] = 0;

684 
g
[
i__
] = 
gq
[i__] + 
hd
[i__];

685 
d__
[
i__
] = -
g
[i__];

687 
d__1
 = 
d__
[
i__
];

688 
dd
 +ğ
d__1
 * d__1;

690 *
üvmš
 = 0;

691 ià(
dd
 =ğ0è
TRL160
;

692 
ds
 = 
ss
 = 0;

693 
gg
 = 
dd
;

694 
ggbeg
 = 
gg
;

697 
TRL40
:

698 ++
™”c
;

699 
‹mp
 = 
d–sq
 - 
ss
;

700 
b¡•
 = 
‹mp
 / (
ds
 + 
	`sq¹
(d * d + 
dd
 *emp));

701 
TRL170
;

702 
TRL50
:

703 
dhd
 = 0;

704 
i__1
 = 
n
;

705 
j
 = 1; j <ğ
i__1
; ++jè
dhd
 +ğ
d__
[j] * 
hd
[j];

707 
®pha
 = 
b¡•
;

708 ià(
dhd
 > 0) {

709 
‹mp
 = 
dhd
 / 
dd
;

710 ià(
™”c
 =ğ1è*
üvmš
 = 
‹mp
;

711 *
üvmš
 = 
	`mš
(*üvmš, 
‹mp
);

713 
d__1
 = 
®pha
, 
d__2
 = 
gg
 / 
dhd
;

714 
®pha
 = 
	`mš
(
d__1
, 
d__2
);

716 
qadd
 = 
®pha
 * (
gg
 - 0.5 *‡Íh¨* 
dhd
);

717 
q»d
 +ğ
qadd
;

719 
gg§v
 = 
gg
;

720 
gg
 = 0;

721 
i__1
 = 
n
;

722 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

723 
¡•
[
i__
] +ğ
®pha
 * 
d__
[i__];

724 
hs
[
i__
] +ğ
®pha
 * 
hd
[i__];

726 
d__1
 = 
g
[
i__
] + 
hs
[i__];

727 
gg
 +ğ
d__1
 * d__1;

730 ià(
®pha
 < 
b¡•
) {

731 ià(
qadd
 <ğ
q»d
 * .01 || 
gg
 <ğ
ggbeg
 * 1e-4 || 
™”c
 =ğ
™”max
è
TRL160
;

732 
‹mp
 = 
gg
 / 
gg§v
;

733 
dd
 = 
ds
 = 
ss
 = 0;

734 
i__1
 = 
n
;

735 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

736 
d__
[
i__
] = 
‹mp
 * d__[i__] - 
g
[i__] - 
hs
[i__];

738 
d__1
 = 
d__
[
i__
];

739 
dd
 +ğ
d__1
 * d__1;

740 
ds
 +ğ
d__
[
i__
] * 
¡•
[i__];

742 
d__1
 = 
¡•
[
i__
];

743 
ss
 +ğ
d__1
 * d__1;

745 ià(
ds
 <ğ0è
TRL160
;

746 ià(
ss
 < 
d–sq
è
TRL40
;

748 *
üvmš
 = 0;

749 
™”sw
 = 
™”c
;

751 
TRL90
:

752 ià(
gg
 <ğ
ggbeg
 * 1e-4è
TRL160
;

753 
sg
 = 0;

754 
shs
 = 0;

755 
i__1
 = 
n
;

756 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

757 
sg
 +ğ
¡•
[
i__
] * 
g
[i__];

758 
shs
 +ğ
¡•
[
i__
] * 
hs
[i__];

760 
sgk
 = 
sg
 + 
shs
;

761 
ªg‹¡
 = 
sgk
 / 
	`sq¹
(
gg
 * 
d–sq
);

762 ià(
ªg‹¡
 <ğ-.99è
TRL160
;

765 ++
™”c
;

766 
‹mp
 = 
	`sq¹
(
d–sq
 * 
gg
 - 
sgk
 * sgk);

767 
‹m·
 = 
d–sq
 / 
‹mp
;

768 
‹mpb
 = 
sgk
 / 
‹mp
;

769 
i__1
 = 
n
;

770 
i__
 = 1; i__ <ğ
i__1
; ++i__)

771 
d__
[
i__
] = 
‹m·
 * (
g
[i__] + 
hs
[i__]è- 
‹mpb
 * 
¡•
[i__];

772 
TRL170
;

773 
TRL120
:

774 
dg
 = 
dhd
 = 
dhs
 = 0;

775 
i__1
 = 
n
;

776 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

777 
dg
 +ğ
d__
[
i__
] * 
g
[i__];

778 
dhd
 +ğ
hd
[
i__
] * 
d__
[i__];

779 
dhs
 +ğ
hd
[
i__
] * 
¡•
[i__];

782 
cf
 = 0.5 * (
shs
 - 
dhd
);

783 
qbeg
 = 
sg
 + 
cf
;

784 
q§v
 = 
qmš
 = 
qbeg
;

785 
i§ve
 = 0;

786 
iu
 = 49;

787 
‹mp
 = 
twİi
 / (
TYPE
è(
iu
 + 1);

788 
i__1
 = 
iu
;

789 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

790 
ªgË
 = (
TYPE
è
i__
 *
‹mp
;

791 
ùh
 = 
	`cos
(
ªgË
);

792 
¡h
 = 
	`sš
(
ªgË
);

793 
qÃw
 = (
sg
 + 
cf
 * 
ùh
è* cth + (
dg
 + 
dhs
 * cthè* 
¡h
;

794 ià(
qÃw
 < 
qmš
) {

795 
qmš
 = 
qÃw
;

796 
i§ve
 = 
i__
;

797 
‹m·
 = 
q§v
;

798 } ià(
i__
 =ğ
i§ve
 + 1è
‹mpb
 = 
qÃw
;

799 
q§v
 = 
qÃw
;

801 ià((
TYPE
è
i§ve
 =ğ0è
‹m·
 = 
qÃw
;

802 ià(
i§ve
 =ğ
iu
è
‹mpb
 = 
qbeg
;

803 
ªgË
 = 0;

804 ià(
‹m·
 !ğ
‹mpb
) {

805 
‹m·
 -ğ
qmš
;

806 
‹mpb
 -ğ
qmš
;

807 
ªgË
 = 0.5 * (
‹m·
 - 
‹mpb
) / (tempa +empb);

809 
ªgË
 = 
‹mp
 * ((
TYPE
è
i§ve
 +‡ngle);

811 
ùh
 = 
	`cos
(
ªgË
);

812 
¡h
 = 
	`sš
(
ªgË
);

813 
»duc
 = 
qbeg
 - (
sg
 + 
cf
 * 
ùh
è* cth - (
dg
 + 
dhs
 * cthè* 
¡h
;

814 
gg
 = 0;

815 
i__1
 = 
n
;

816 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

817 
¡•
[
i__
] = 
ùh
 * s‹p[i__] + 
¡h
 * 
d__
[i__];

818 
hs
[
i__
] = 
ùh
 * hs[i__] + 
¡h
 * 
hd
[i__];

820 
d__1
 = 
g
[
i__
] + 
hs
[i__];

821 
gg
 +ğ
d__1
 * d__1;

823 
q»d
 +ğ
»duc
;

824 
¿tio
 = 
»duc
 / 
q»d
;

825 ià(
™”c
 < 
™”max
 && 
¿tio
 > .01è
TRL90
;

826 
TRL160
:

832 
TRL170
:

833 
i__1
 = 
n
;

834 
i__
 = 1; i__ <ğ
i__1
; ++i__è
hd
[i__] = 0;

835 
i__1
 = 
Åt
;

836 
k
 = 1; k <ğ
i__1
; ++k) {

837 
‹mp
 = 0;

838 
i__2
 = 
n
;

839 
j
 = 1; j <ğ
i__2
; ++j)

840 
‹mp
 +ğ
x±
[
k
 + 
j
 * 
x±_dim1
] * 
d__
[j];

841 
‹mp
 *ğ
pq
[
k
];

842 
i__2
 = 
n
;

843 
i__
 = 1; i__ <ğ
i__2
; ++i__)

844 
hd
[
i__
] +ğ
‹mp
 * 
x±
[
k
 + i__ * 
x±_dim1
];

846 
ih
 = 0;

847 
i__2
 = 
n
;

848 
j
 = 1; j <ğ
i__2
; ++j) {

849 
i__1
 = 
j
;

850 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

851 ++
ih
;

852 ià(
i__
 < 
j
è
hd
[j] +ğ
hq
[
ih
] * 
d__
[i__];

853 
hd
[
i__
] +ğ
hq
[
ih
] * 
d__
[
j
];

856 ià(
™”c
 =ğ0è
TRL20
;

857 ià(
™”c
 <ğ
™”sw
è
TRL50
;

858 
TRL120
;

859 
	}
}

861 
	g‹m¶©e
<
şass
 
	gTYPE
>

862 
	$upd©e_
(
n
, 
Åt
, 
TYPE
 *
bm©
, TYPE *
zm©
, *
idz
, *
ndim
, TYPE *
vÏg
,

863 
TYPE
 *
b‘a
, *
kÃw
, TYPE *
w
)

872 
bm©_dim1
, 
bm©_off£t
, 
zm©_dim1
, 
zm©_off£t
, 
i__1
, 
i__2
, 
i__
,

873 
j
, 
ja
, 
jb
, 
jl
, 
jp
, 
Åtm
, 
iæag
;

874 
TYPE
 
d__1
, 
d__2
, 
u
, 
‹mp
, 
sÿÏ
, 
sÿlb
, 
®pha
, 
d’om
, 
‹m·
, 
‹mpb
, 
usq
;

877 
‹mpb
 = 0.0;

878 
zm©_dim1
 = 
Åt
;

879 
zm©_off£t
 = 1 + 
zm©_dim1
;

880 
zm©
 -ğ
zm©_off£t
;

881 
bm©_dim1
 = *
ndim
;

882 
bm©_off£t
 = 1 + 
bm©_dim1
;

883 
bm©
 -ğ
bm©_off£t
;

884 --
vÏg
;

885 --
w
;

887 
Åtm
 = 
Åt
 - 
n
 - 1;

889 
jl
 = 1;

890 
i__1
 = 
Åtm
;

891 
j
 = 2; j <ğ
i__1
; ++j) {

892 ià(
j
 =ğ*
idz
) {

893 
jl
 = *
idz
;

894 } ià(
zm©
[*
kÃw
 + 
j
 * 
zm©_dim1
] != 0) {

896 
d__1
 = 
zm©
[*
kÃw
 + 
jl
 * 
zm©_dim1
];

898 
d__2
 = 
zm©
[*
kÃw
 + 
j
 * 
zm©_dim1
];

899 
‹mp
 = 
	`sq¹
(
d__1
 * d__1 + 
d__2
 * d__2);

900 
‹m·
 = 
zm©
[*
kÃw
 + 
jl
 * 
zm©_dim1
] / 
‹mp
;

901 
‹mpb
 = 
zm©
[*
kÃw
 + 
j
 * 
zm©_dim1
] / 
‹mp
;

902 
i__2
 = 
Åt
;

903 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

904 
‹mp
 = 
‹m·
 * 
zm©
[
i__
 + 
jl
 * 
zm©_dim1
] + 
‹mpb
 * zmat[i__

905 + 
j
 * 
zm©_dim1
];

906 
zm©
[
i__
 + 
j
 * 
zm©_dim1
] = 
‹m·
 * zmat[i__ + j * zmat_dim1]

907 - 
‹mpb
 * 
zm©
[
i__
 + 
jl
 * 
zm©_dim1
];

908 
zm©
[
i__
 + 
jl
 * 
zm©_dim1
] = 
‹mp
;

910 
zm©
[*
kÃw
 + 
j
 * 
zm©_dim1
] = 0;

915 
‹m·
 = 
zm©
[*
kÃw
 + 
zm©_dim1
];

916 ià(*
idz
 >ğ2è
‹m·
 = -tempa;

917 ià(
jl
 > 1è
‹mpb
 = 
zm©
[*
kÃw
 + jÈ* 
zm©_dim1
];

918 
i__1
 = 
Åt
;

919 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

920 
w
[
i__
] = 
‹m·
 * 
zm©
[i__ + 
zm©_dim1
];

921 ià(
jl
 > 1è
w
[
i__
] +ğ
‹mpb
 * 
zm©
[i__ + jÈ* 
zm©_dim1
];

923 
®pha
 = 
w
[*
kÃw
];

924 
u
 = 
vÏg
[*
kÃw
];

925 
usq
 = 
u
 *au;

926 
d’om
 = 
®pha
 * *
b‘a
 + 
usq
;

927 
vÏg
[*
kÃw
] -= 1.0;

932 
iæag
 = 0;

933 ià(
jl
 == 1) {

934 
‹mp
 = 
	`sq¹
((
	`çbs
(
d’om
)));

935 
‹mpb
 = 
‹m·
 / 
‹mp
;

936 
‹m·
 = 
u
 / 
‹mp
;

937 
i__1
 = 
Åt
;

938 
i__
 = 1; i__ <ğ
i__1
; ++i__)

939 
zm©
[
i__
 + 
zm©_dim1
] = 
‹m·
 * zm©[i__ + zm©_dim1] - 
‹mpb
 *

940 
vÏg
[
i__
];

941 ià(*
idz
 =ğ1 && 
‹mp
 < 0) *idz = 2;

942 ià(*
idz
 >ğ2 && 
‹mp
 >ğ0è
iæag
 = 1;

945 
ja
 = 1;

946 ià(*
b‘a
 >= 0) {

947 
ja
 = 
jl
;

949 
jb
 = 
jl
 + 1 - 
ja
;

950 
‹mp
 = 
zm©
[*
kÃw
 + 
jb
 * 
zm©_dim1
] / 
d’om
;

951 
‹m·
 = 
‹mp
 * *
b‘a
;

952 
‹mpb
 = 
‹mp
 * 
u
;

953 
‹mp
 = 
zm©
[*
kÃw
 + 
ja
 * 
zm©_dim1
];

954 
sÿÏ
 = 1.0 / 
	`sq¹
(
	`çbs
(*
b‘a
è* 
‹mp
 *em°+ 
usq
);

955 
sÿlb
 = 
sÿÏ
 * 
	`sq¹
((
	`çbs
(
d’om
)));

956 
i__1
 = 
Åt
;

957 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

958 
zm©
[
i__
 + 
ja
 * 
zm©_dim1
] = 
sÿÏ
 * (
u
 * zmat[i__ + ja *

959 
zm©_dim1
] - 
‹mp
 * 
vÏg
[
i__
]);

960 
zm©
[
i__
 + 
jb
 * 
zm©_dim1
] = 
sÿlb
 * (zmat[i__ + jb * zmat_dim1]

961 - 
‹m·
 * 
w
[
i__
] - 
‹mpb
 * 
vÏg
[i__]);

963 ià(
d’om
 <= 0) {

964 ià(*
b‘a
 < 0è++(*
idz
);

965 ià(*
b‘a
 >ğ0è
iæag
 = 1;

970 ià(
iæag
 == 1) {

971 --(*
idz
);

972 
i__1
 = 
Åt
;

973 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

974 
‹mp
 = 
zm©
[
i__
 + 
zm©_dim1
];

975 
zm©
[
i__
 + 
zm©_dim1
] = zm©[i__ + *
idz
 * zmat_dim1];

976 
zm©
[
i__
 + *
idz
 * 
zm©_dim1
] = 
‹mp
;

980 
i__1
 = 
n
;

981 
j
 = 1; j <ğ
i__1
; ++j) {

982 
jp
 = 
Åt
 + 
j
;

983 
w
[
jp
] = 
bm©
[*
kÃw
 + 
j
 * 
bm©_dim1
];

984 
‹m·
 = (
®pha
 * 
vÏg
[
jp
] - 
u
 * 
w
[jp]è/ 
d’om
;

985 
‹mpb
 = (-(*
b‘a
è* 
w
[
jp
] - 
u
 * 
vÏg
[jp]è/ 
d’om
;

986 
i__2
 = 
jp
;

987 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

988 
bm©
[
i__
 + 
j
 * 
bm©_dim1
] = bm©[i__ + j * bm©_dim1] + 
‹m·
 *

989 
vÏg
[
i__
] + 
‹mpb
 * 
w
[i__];

990 ià(
i__
 > 
Åt
) {

991 
bm©
[
jp
 + (
i__
 - 
Åt
è* 
bm©_dim1
] = bm©[i__ + 
j
 *

992 
bm©_dim1
];

997 
	}
}

999 
	g‹m¶©e
<
şass
 
	gTYPE
, cÏs 
	gFunc
>

1000 
TYPE
 
	$Ãwuob_
(
n
, 
Åt
, 
TYPE
 *
x
,

1001 
TYPE
 
rhobeg
, TYPE 
rhÛnd
, *
»t_nf
, 
maxfun
,

1002 
TYPE
 *
xba£
, TYPE *
xİt
, TYPE *
xÃw
,

1003 
TYPE
 *
x±
, TYPE *
fv®
, TYPE *
gq
, TYPE *
hq
,

1004 
TYPE
 *
pq
, TYPE *
bm©
, TYPE *
zm©
, *
ndim
,

1005 
TYPE
 *
d__
, TYPE *
vÏg
, TYPE *
w
, 
Func
 &
func
)

1035 
x±_dim1
, 
x±_off£t
, 
bm©_dim1
, 
bm©_off£t
, 
zm©_dim1
, 
zm©_off£t
,

1036 
i__1
, 
i__2
, 
i__3
, 
i__
, 
j
, 
k
, 
ih
, 
nf
, 
nh
, 

, 
jp
, 
Å
, 
nfm
, 
idz
, 
t
, 
j±
,

1037 
nfmm
, 
kÃw
, 
kİt
, 
Åtm
, 
k§ve
, 
nf§v
, 
™emp
, 
k‹mp
, 
™e¡
, 
náe¡
;

1038 
TYPE
 
d__1
, 
d__2
, 
d__3
, 
f
, 
dx
, 
dsq
, 
rho
, 
sum
, 
fbeg
, 
diff
, 
b‘a
, 
gisq
,

1039 
‹mp
, 
suma
, 
sumb
, 
fİt
, 
bsum
, 
gqsq
, 
xt
, 
xj±
, 
sumz
, 
difç
, 
diffb
,

1040 
diffc
, 
hdŸg
, 
®pha
, 
d–
, 
»c
, 
»ciq
, 
f§ve
, 
dnÜm
, 
¿tio
, 
d¡•
,

1041 
vquad
, 
‹mpq
, 
rhosq
, 
d‘¿t
, 
üvmš
, 
di¡sq
, 
xİtsq
;

1044 
diffc
 = 
¿tio
 = 
dnÜm
 = 
difç
 = 
diffb
 = 
xİtsq
 = 
f
 = 0.0;

1045 
b‘a
 = 0;

1046 
nf§v
 = 0;

1047 
kİt
 = 1;

1048 
rho
 = 
fbeg
 = 
fİt
 = 
xj±
 = 
xt
 = 0.0;

1049 
™e¡
 = 
t
 = 
j±
 = 0;

1050 
®pha
 = 
d¡•
 = 0.0;

1051 
zm©_dim1
 = 
Åt
;

1052 
zm©_off£t
 = 1 + 
zm©_dim1
;

1053 
zm©
 -ğ
zm©_off£t
;

1054 
x±_dim1
 = 
Åt
;

1055 
x±_off£t
 = 1 + 
x±_dim1
;

1056 
x±
 -ğ
x±_off£t
;

1057 --
x
; --
xba£
; --
xİt
; --
xÃw
; --
fv®
; --
gq
; --
hq
; --
pq
;

1058 
bm©_dim1
 = *
ndim
;

1059 
bm©_off£t
 = 1 + 
bm©_dim1
;

1060 
bm©
 -ğ
bm©_off£t
;

1061 --
d__
;

1062 --
vÏg
;

1063 --
w
;

1065 
Å
 = 
n
 + 1;

1066 
nh
 = 
n
 * 
Å
 / 2;

1067 
Åtm
 = 
Åt
 - 
Å
;

1068 
náe¡
 = (
maxfun
 > 1)? maxfun : 1;

1070 
i__1
 = 
n
;

1071 
j
 = 1; j <ğ
i__1
; ++j) {

1072 
xba£
[
j
] = 
x
[j];

1073 
i__2
 = 
Åt
;

1074 
k
 = 1; k <ğ
i__2
; ++k)

1075 
x±
[
k
 + 
j
 * 
x±_dim1
] = 0;

1076 
i__2
 = *
ndim
;

1077 
i__
 = 1; i__ <ğ
i__2
; ++i__)

1078 
bm©
[
i__
 + 
j
 * 
bm©_dim1
] = 0;

1080 
i__2
 = 
nh
;

1081 
ih
 = 1; ih <ğ
i__2
; ++ihè
hq
[ih] = 0;

1082 
i__2
 = 
Åt
;

1083 
k
 = 1; k <ğ
i__2
; ++k) {

1084 
pq
[
k
] = 0;

1085 
i__1
 = 
Åtm
;

1086 
j
 = 1; j <ğ
i__1
; ++j)

1087 
zm©
[
k
 + 
j
 * 
zm©_dim1
] = 0;

1093 
rhosq
 = 
rhobeg
 *„hobeg;

1094 
»c
 = 1.0 / 
rhosq
;

1095 
»ciq
 = 
	`sq¹
(.5è/ 
rhosq
;

1096 
nf
 = 0;

1097 
L50
:

1098 
nfm
 = 
nf
;

1099 
nfmm
 = 
nf
 - 
n
;

1100 ++
nf
;

1101 ià(
nfm
 <ğ
n
 << 1) {

1102 ià(
nfm
 >ğ1 &&‚fm <ğ
n
) {

1103 
x±
[
nf
 + 
nfm
 * 
x±_dim1
] = 
rhobeg
;

1104 } ià(
nfm
 > 
n
) {

1105 
x±
[
nf
 + 
nfmm
 * 
x±_dim1
] = -(
rhobeg
);

1108 
™emp
 = (
nfmm
 - 1è/ 
n
;

1109 
j±
 = 
nfm
 - 
™emp
 * 
n
 -‚;

1110 
t
 = 
j±
 + 
™emp
;

1111 ià(
t
 > 
n
) {

1112 
™emp
 = 
j±
;

1113 
j±
 = 
t
 - 
n
;

1114 
t
 = 
™emp
;

1116 
xt
 = 
rhobeg
;

1117 ià(
fv®
[
t
 + 
Å
] < fv®[ˆ+ 1]è
xt
 = -xipt;

1118 
xj±
 = 
rhobeg
;

1119 ià(
fv®
[
j±
 + 
Å
] < fv®[j± + 1]è
xj±
 = -xjpt;

1120 
x±
[
nf
 + 
t
 * 
x±_dim1
] = 
xt
;

1121 
x±
[
nf
 + 
j±
 * 
x±_dim1
] = 
xj±
;

1126 
i__1
 = 
n
;

1127 
j
 = 1; j <ğ
i__1
; ++j)

1128 
x
[
j
] = 
x±
[
nf
 + j * 
x±_dim1
] + 
xba£
[j];

1129 
L310
;

1130 
L70
:

1131 
fv®
[
nf
] = 
f
;

1132 ià(
nf
 == 1) {

1133 
fbeg
 = 
fİt
 = 
f
;

1134 
kİt
 = 1;

1135 } ià(
f
 < 
fİt
) {

1136 
fİt
 = 
f
;

1137 
kİt
 = 
nf
;

1141 ià(
nfm
 <ğ
n
 << 1) {

1142 ià(
nfm
 >ğ1 &&‚fm <ğ
n
) {

1143 
gq
[
nfm
] = (
f
 - 
fbeg
è/ 
rhobeg
;

1144 ià(
Åt
 < 
nf
 + 
n
) {

1145 
bm©
[
nfm
 * 
bm©_dim1
 + 1] = -1.0 / 
rhobeg
;

1146 
bm©
[
nf
 + 
nfm
 * 
bm©_dim1
] = 1.0 / 
rhobeg
;

1147 
bm©
[
Åt
 + 
nfm
 +‚fm * 
bm©_dim1
] = -.5 * 
rhosq
;

1149 } ià(
nfm
 > 
n
) {

1150 
bm©
[
nf
 - 
n
 + 
nfmm
 * 
bm©_dim1
] = .5 / 
rhobeg
;

1151 
bm©
[
nf
 + 
nfmm
 * 
bm©_dim1
] = -.5 / 
rhobeg
;

1152 
zm©
[
nfmm
 * 
zm©_dim1
 + 1] = -
»ciq
 -„eciq;

1153 
zm©
[
nf
 - 
n
 + 
nfmm
 * 
zm©_dim1
] = 
»ciq
;

1154 
zm©
[
nf
 + 
nfmm
 * 
zm©_dim1
] = 
»ciq
;

1155 
ih
 = 
nfmm
 * (nfmm + 1) / 2;

1156 
‹mp
 = (
fbeg
 - 
f
è/ 
rhobeg
;

1157 
hq
[
ih
] = (
gq
[
nfmm
] - 
‹mp
è/ 
rhobeg
;

1158 
gq
[
nfmm
] = .5 * (gq[nfmm] + 
‹mp
);

1163 
ih
 = 
t
 * (ˆ- 1è/ 2 + 
j±
;

1164 ià(
xt
 < 0è
t
 +ğ
n
;

1165 ià(
xj±
 < 0è
j±
 +ğ
n
;

1166 
zm©
[
nfmm
 * 
zm©_dim1
 + 1] = 
»c
;

1167 
zm©
[
nf
 + 
nfmm
 * 
zm©_dim1
] = 
»c
;

1168 
zm©
[
t
 + 1 + 
nfmm
 * 
zm©_dim1
] = -
»c
;

1169 
zm©
[
j±
 + 1 + 
nfmm
 * 
zm©_dim1
] = -
»c
;

1170 
hq
[
ih
] = (
fbeg
 - 
fv®
[
t
 + 1] - fv®[
j±
 + 1] + 
f
è/ (
xt
 * 
xj±
);

1172 ià(
nf
 < 
Åt
è
L50
;

1175 
rho
 = 
rhobeg
;

1176 
d–
 = 
rho
;

1177 
idz
 = 1;

1178 
difç
 = 
diffb
 = 
™e¡
 = 0;

1179 
xİtsq
 = 0.0;

1180 
i__1
 = 
n
;

1181 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1182 
xİt
[
i__
] = 
x±
[
kİt
 + i__ * 
x±_dim1
];

1184 
d__1
 = 
xİt
[
i__
];

1185 
xİtsq
 +ğ
d__1
 * d__1;

1187 
L90
:

1188 
nf§v
 = 
nf
;

1192 
L100
:

1193 
kÃw
 = 0;

1194 
	`Œ§µ_
(
n
, 
Åt
, &
xİt
[1], &
x±
[
x±_off£t
], &
gq
[1], &
hq
[1], &
pq
[1], &

1195 
d–
, &
d__
[1], &
w
[1], &w[
Å
], &w[Å + 
n
], &w[np + (n << 1)], &

1196 
üvmš
);

1197 
dsq
 = 0;

1198 
i__1
 = 
n
;

1199 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1201 
d__1
 = 
d__
[
i__
];

1202 
dsq
 +ğ
d__1
 * d__1;

1205 
d__1
 = 
d–
, 
d__2
 = 
	`sq¹
(
dsq
);

1206 
dnÜm
 = 
	`mš
(
d__1
, 
d__2
);

1207 ià(
dnÜm
 < .5 * 
rho
) {

1208 
kÃw
 = -1;

1209 
d–
 = 0.1 * delta;

1210 
¿tio
 = -1.;

1211 ià(
d–
 <ğ
rho
 * 1.5) delta =„ho;

1212 ià(
nf
 <ğ
nf§v
 + 2è
L460
;

1213 
‹mp
 = 
üvmš
 * .125 * 
rho
 *„ho;

1215 
d__1
 = 
	`max
(
difç
, 
diffb
);

1216 ià(
‹mp
 <ğ
	`max
(
d__1
, 
diffc
)è
L460
;

1217 
L490
;

1221 
L120
:

1222 ià(
dsq
 <ğ
xİtsq
 * .001) {

1223 
‹mpq
 = 
xİtsq
 * .25;

1224 
i__1
 = 
Åt
;

1225 
k
 = 1; k <ğ
i__1
; ++k) {

1226 
sum
 = 0;

1227 
i__2
 = 
n
;

1228 
i__
 = 1; i__ <ğ
i__2
; ++i__)

1229 
sum
 +ğ
x±
[
k
 + 
i__
 * 
x±_dim1
] * 
xİt
[i__];

1230 
‹mp
 = 
pq
[
k
] * 
sum
;

1231 
sum
 -ğ.5 * 
xİtsq
;

1232 
w
[
Åt
 + 
k
] = 
sum
;

1233 
i__2
 = 
n
;

1234 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

1235 
gq
[
i__
] +ğ
‹mp
 * 
x±
[
k
 + i__ * 
x±_dim1
];

1236 
x±
[
k
 + 
i__
 * 
x±_dim1
] -ğ.5 * 
xİt
[i__];

1237 
vÏg
[
i__
] = 
bm©
[
k
 + i__ * 
bm©_dim1
];

1238 
w
[
i__
] = 
sum
 * 
x±
[
k
 + i__ * 
x±_dim1
] + 
‹mpq
 * 
xİt
[i__];

1239 

 = 
Åt
 + 
i__
;

1240 
i__3
 = 
i__
;

1241 
j
 = 1; j <ğ
i__3
; ++j)

1242 
bm©
[

 + 
j
 * 
bm©_dim1
] = bmat[ip + j * bmat_dim1] +

1243 
vÏg
[
i__
] * 
w
[
j
] + w[i__] * vlag[j];

1248 
i__3
 = 
Åtm
;

1249 
k
 = 1; k <ğ
i__3
; ++k) {

1250 
sumz
 = 0;

1251 
i__2
 = 
Åt
;

1252 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

1253 
sumz
 +ğ
zm©
[
i__
 + 
k
 * 
zm©_dim1
];

1254 
w
[
i__
] = w[
Åt
 + i__] * 
zm©
[i__ + 
k
 * 
zm©_dim1
];

1256 
i__2
 = 
n
;

1257 
j
 = 1; j <ğ
i__2
; ++j) {

1258 
sum
 = 
‹mpq
 * 
sumz
 * 
xİt
[
j
];

1259 
i__1
 = 
Åt
;

1260 
i__
 = 1; i__ <ğ
i__1
; ++i__)

1261 
sum
 +ğ
w
[
i__
] * 
x±
[i__ + 
j
 * 
x±_dim1
];

1262 
vÏg
[
j
] = 
sum
;

1263 ià(
k
 < 
idz
è
sum
 = -sum;

1264 
i__1
 = 
Åt
;

1265 
i__
 = 1; i__ <ğ
i__1
; ++i__)

1266 
bm©
[
i__
 + 
j
 * 
bm©_dim1
] +ğ
sum
 * 
zm©
[i__ + 
k
 * 
zm©_dim1
];

1268 
i__1
 = 
n
;

1269 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1270 

 = 
i__
 + 
Åt
;

1271 
‹mp
 = 
vÏg
[
i__
];

1272 ià(
k
 < 
idz
è
‹mp
 = -temp;

1273 
i__2
 = 
i__
;

1274 
j
 = 1; j <ğ
i__2
; ++j)

1275 
bm©
[

 + 
j
 * 
bm©_dim1
] +ğ
‹mp
 * 
vÏg
[j];

1281 
ih
 = 0;

1282 
i__2
 = 
n
;

1283 
j
 = 1; j <ğ
i__2
; ++j) {

1284 
w
[
j
] = 0;

1285 
i__1
 = 
Åt
;

1286 
k
 = 1; k <ğ
i__1
; ++k) {

1287 
w
[
j
] +ğ
pq
[
k
] * 
x±
[k + j * 
x±_dim1
];

1288 
x±
[
k
 + 
j
 * 
x±_dim1
] -ğ.5 * 
xİt
[j];

1290 
i__1
 = 
j
;

1291 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1292 ++
ih
;

1293 ià(
i__
 < 
j
è
gq
[j] +ğ
hq
[
ih
] * 
xİt
[i__];

1294 
gq
[
i__
] +ğ
hq
[
ih
] * 
xİt
[
j
];

1295 
hq
[
ih
] = hq[ih] + 
w
[
i__
] * 
xİt
[
j
] + xopt[i__] * w[j];

1296 
bm©
[
Åt
 + 
i__
 + 
j
 * 
bm©_dim1
] = bmat[npt + j + i__ *

1297 
bm©_dim1
];

1300 
i__1
 = 
n
;

1301 
j
 = 1; j <ğ
i__1
; ++j) {

1302 
xba£
[
j
] +ğ
xİt
[j];

1303 
xİt
[
j
] = 0;

1305 
xİtsq
 = 0;

1310 ià(
kÃw
 > 0) {

1311 
	`bigÏg_
(
n
, 
Åt
, &
xİt
[1], &
x±
[
x±_off£t
], &
bm©
[
bm©_off£t
], &
zm©
[
zm©_off£t
], &
idz
,

1312 
ndim
, &
kÃw
, &
d¡•
, &
d__
[1], &
®pha
, &
vÏg
[1], &vÏg[
Åt
 + 1], &
w
[1], &w[
Å
], &w[Å + 
n
], 
func
);

1316 
i__1
 = 
Åt
;

1317 
k
 = 1; k <ğ
i__1
; ++k) {

1318 
suma
 = 0;

1319 
sumb
 = 0;

1320 
sum
 = 0;

1321 
i__2
 = 
n
;

1322 
j
 = 1; j <ğ
i__2
; ++j) {

1323 
suma
 +ğ
x±
[
k
 + 
j
 * 
x±_dim1
] * 
d__
[j];

1324 
sumb
 +ğ
x±
[
k
 + 
j
 * 
x±_dim1
] * 
xİt
[j];

1325 
sum
 +ğ
bm©
[
k
 + 
j
 * 
bm©_dim1
] * 
d__
[j];

1327 
w
[
k
] = 
suma
 * (.5 * sum¨+ 
sumb
);

1328 
vÏg
[
k
] = 
sum
;

1330 
b‘a
 = 0;

1331 
i__1
 = 
Åtm
;

1332 
k
 = 1; k <ğ
i__1
; ++k) {

1333 
sum
 = 0;

1334 
i__2
 = 
Åt
;

1335 
i__
 = 1; i__ <ğ
i__2
; ++i__)

1336 
sum
 +ğ
zm©
[
i__
 + 
k
 * 
zm©_dim1
] * 
w
[i__];

1337 ià(
k
 < 
idz
) {

1338 
b‘a
 +ğ
sum
 * sum;

1339 
sum
 = -sum;

1340 } 
b‘a
 -ğ
sum
 * sum;

1341 
i__2
 = 
Åt
;

1342 
i__
 = 1; i__ <ğ
i__2
; ++i__)

1343 
vÏg
[
i__
] +ğ
sum
 * 
zm©
[i__ + 
k
 * 
zm©_dim1
];

1345 
bsum
 = 0;

1346 
dx
 = 0;

1347 
i__2
 = 
n
;

1348 
j
 = 1; j <ğ
i__2
; ++j) {

1349 
sum
 = 0;

1350 
i__1
 = 
Åt
;

1351 
i__
 = 1; i__ <ğ
i__1
; ++i__)

1352 
sum
 +ğ
w
[
i__
] * 
bm©
[i__ + 
j
 * 
bm©_dim1
];

1353 
bsum
 +ğ
sum
 * 
d__
[
j
];

1354 
jp
 = 
Åt
 + 
j
;

1355 
i__1
 = 
n
;

1356 
k
 = 1; k <ğ
i__1
; ++k)

1357 
sum
 +ğ
bm©
[
jp
 + 
k
 * 
bm©_dim1
] * 
d__
[k];

1358 
vÏg
[
jp
] = 
sum
;

1359 
bsum
 +ğ
sum
 * 
d__
[
j
];

1360 
dx
 +ğ
d__
[
j
] * 
xİt
[j];

1362 
b‘a
 = 
dx
 * dx + 
dsq
 * (
xİtsq
 + dx + dx + .5 * dsqè+ b‘¨- 
bsum
;

1363 
vÏg
[
kİt
] += 1.0;

1367 ià(
kÃw
 > 0) {

1369 
d__1
 = 
vÏg
[
kÃw
];

1370 
‹mp
 = 1.0 + 
®pha
 * 
b‘a
 / (
d__1
 * d__1);

1371 ià(
	`çbs
(
‹mp
) <= .8) {

1372 
	`bigd’_
(
n
, 
Åt
, &
xİt
[1], &
x±
[
x±_off£t
], &
bm©
[
bm©_off£t
], &

1373 
zm©
[
zm©_off£t
], &
idz
, 
ndim
, &
kİt
, &
kÃw
, &
d__
[1], &
w
[

1374 1], &
vÏg
[1], &
b‘a
, &
xÃw
[1], &
w
[*
ndim
 + 1], &w[*ndim *

1379 
L290
:

1380 
i__2
 = 
n
;

1381 
i__
 = 1; i__ <ğ
i__2
; ++i__) {

1382 
xÃw
[
i__
] = 
xİt
[i__] + 
d__
[i__];

1383 
x
[
i__
] = 
xba£
[i__] + 
xÃw
[i__];

1385 ++
nf
;

1386 
L310
:

1387 ià(
nf
 > 
náe¡
) {

1388 --
nf
;

1390 
L530
;

1392 
f
 = 
	`func
(&
x
[1]);

1393 ià(
nf
 <ğ
Åt
è
L70
;

1394 ià(
kÃw
 =ğ-1è
L530
;

1397 
vquad
 = 
ih
 = 0;

1398 
i__2
 = 
n
;

1399 
j
 = 1; j <ğ
i__2
; ++j) {

1400 
vquad
 +ğ
d__
[
j
] * 
gq
[j];

1401 
i__1
 = 
j
;

1402 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1403 ++
ih
;

1404 
‹mp
 = 
d__
[
i__
] * 
xÃw
[
j
] + d__[j] * 
xİt
[i__];

1405 ià(
i__
 =ğ
j
è
‹mp
 = .5 *emp;

1406 
vquad
 +ğ
‹mp
 * 
hq
[
ih
];

1409 
i__1
 = 
Åt
;

1410 
k
 = 1; k <ğ
i__1
; ++kè
vquad
 +ğ
pq
[k] * 
w
[k];

1411 
diff
 = 
f
 - 
fİt
 - 
vquad
;

1412 
diffc
 = 
diffb
;

1413 
diffb
 = 
difç
;

1414 
difç
 = 
	`çbs
(
diff
);

1415 ià(
dnÜm
 > 
rho
è
nf§v
 = 
nf
;

1419 
f§ve
 = 
fİt
;

1420 ià(
f
 < 
fİt
) {

1421 
fİt
 = 
f
;

1422 
xİtsq
 = 0;

1423 
i__1
 = 
n
;

1424 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1425 
xİt
[
i__
] = 
xÃw
[i__];

1427 
d__1
 = 
xİt
[
i__
];

1428 
xİtsq
 +ğ
d__1
 * d__1;

1431 
k§ve
 = 
kÃw
;

1432 ià(
kÃw
 > 0è
L410
;

1434 ià(
vquad
 >= 0) {

1436 
L530
;

1438 
¿tio
 = (
f
 - 
f§ve
è/ 
vquad
;

1439 ià(
¿tio
 <= 0.1) {

1440 
d–
 = .5 * 
dnÜm
;

1441 } ià(
¿tio
 <= .7) {

1443 
d__1
 = .5 * 
d–
;

1444 
d–
 = 
	`max
(
d__1
, 
dnÜm
);

1447 
d__1
 = .5 * 
d–
, 
d__2
 = 
dnÜm
 + dnorm;

1448 
d–
 = 
	`max
(
d__1
, 
d__2
);

1450 ià(
d–
 <ğ
rho
 * 1.5) delta =„ho;

1454 
d__2
 = 0.1 * 
d–
;

1456 
d__1
 = 
	`max
(
d__2
, 
rho
);

1457 
rhosq
 = 
d__1
 * d__1;

1458 
k‹mp
 = 0;

1459 
d‘¿t
 = 0.0;

1460 ià(
f
 >ğ
f§ve
) {

1461 
k‹mp
 = 
kİt
;

1462 
d‘¿t
 = 1.0;

1464 
i__1
 = 
Åt
;

1465 
k
 = 1; k <ğ
i__1
; ++k) {

1466 
hdŸg
 = 0;

1467 
i__2
 = 
Åtm
;

1468 
j
 = 1; j <ğ
i__2
; ++j) {

1469 
‹mp
 = 1.0;

1470 ià(
j
 < 
idz
è
‹mp
 = -1.0;

1472 
d__1
 = 
zm©
[
k
 + 
j
 * 
zm©_dim1
];

1473 
hdŸg
 +ğ
‹mp
 * (
d__1
 * d__1);

1476 
d__2
 = 
vÏg
[
k
];

1477 
‹mp
 = (
d__1
 = 
b‘a
 * 
hdŸg
 + 
d__2
 * d__2, 
	`çbs
(d__1));

1478 
di¡sq
 = 0;

1479 
i__2
 = 
n
;

1480 
j
 = 1; j <ğ
i__2
; ++j) {

1482 
d__1
 = 
x±
[
k
 + 
j
 * 
x±_dim1
] - 
xİt
[j];

1483 
di¡sq
 +ğ
d__1
 * d__1;

1485 ià(
di¡sq
 > 
rhosq
) {

1487 
d__1
 = 
di¡sq
 / 
rhosq
;

1488 
‹mp
 *ğ
d__1
 * (d__1 * d__1);

1490 ià(
‹mp
 > 
d‘¿t
 && 
k
 !ğ
k‹mp
) {

1491 
d‘¿t
 = 
‹mp
;

1492 
kÃw
 = 
k
;

1495 ià(
kÃw
 =ğ0è
L460
;

1499 
L410
:

1500 
	`upd©e_
(
n
, 
Åt
, &
bm©
[
bm©_off£t
], &
zm©
[
zm©_off£t
], &
idz
, 
ndim
, &
vÏg
[1], &
b‘a
, &
kÃw
, &
w
[1]);

1501 
fv®
[
kÃw
] = 
f
;

1502 
ih
 = 0;

1503 
i__1
 = 
n
;

1504 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1505 
‹mp
 = 
pq
[
kÃw
] * 
x±
[kÃw + 
i__
 * 
x±_dim1
];

1506 
i__2
 = 
i__
;

1507 
j
 = 1; j <ğ
i__2
; ++j) {

1508 ++
ih
;

1509 
hq
[
ih
] +ğ
‹mp
 * 
x±
[
kÃw
 + 
j
 * 
x±_dim1
];

1512 
pq
[
kÃw
] = 0;

1516 
i__2
 = 
Åtm
;

1517 
j
 = 1; j <ğ
i__2
; ++j) {

1518 
‹mp
 = 
diff
 * 
zm©
[
kÃw
 + 
j
 * 
zm©_dim1
];

1519 ià(
j
 < 
idz
è
‹mp
 = -temp;

1520 
i__1
 = 
Åt
;

1521 
k
 = 1; k <ğ
i__1
; ++k) {

1522 
pq
[
k
] +ğ
‹mp
 * 
zm©
[k + 
j
 * 
zm©_dim1
];

1525 
gqsq
 = 0;

1526 
i__1
 = 
n
;

1527 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1528 
gq
[
i__
] +ğ
diff
 * 
bm©
[
kÃw
 + i__ * 
bm©_dim1
];

1530 
d__1
 = 
gq
[
i__
];

1531 
gqsq
 +ğ
d__1
 * d__1;

1532 
x±
[
kÃw
 + 
i__
 * 
x±_dim1
] = 
xÃw
[i__];

1538 ià(
k§ve
 =ğ0 && 
d–
 =ğ
rho
) {

1539 ià(
	`çbs
(
¿tio
) > .01) {

1540 
™e¡
 = 0;

1542 
i__1
 = 
Åt
;

1543 
k
 = 1; k <ğ
i__1
; ++k)

1544 
vÏg
[
k
] = 
fv®
[k] - fv®[
kİt
];

1545 
gisq
 = 0;

1546 
i__1
 = 
n
;

1547 
i__
 = 1; i__ <ğ
i__1
; ++i__) {

1548 
sum
 = 0;

1549 
i__2
 = 
Åt
;

1550 
k
 = 1; k <ğ
i__2
; ++k)

1551 
sum
 +ğ
bm©
[
k
 + 
i__
 * 
bm©_dim1
] * 
vÏg
[k];

1552 
gisq
 +ğ
sum
 * sum;

1553 
w
[
i__
] = 
sum
;

1558 ++
™e¡
;

1559 ià(
gqsq
 < 
gisq
 * 100.è
™e¡
 = 0;

1560 ià(
™e¡
 >= 3) {

1561 
i__1
 = 
n
;

1562 
i__
 = 1; i__ <ğ
i__1
; ++i__è
gq
[i__] = 
w
[i__];

1563 
i__1
 = 
nh
;

1564 
ih
 = 1; ih <ğ
i__1
; ++ihè
hq
[ih] = 0;

1565 
i__1
 = 
Åtm
;

1566 
j
 = 1; j <ğ
i__1
; ++j) {

1567 
w
[
j
] = 0;

1568 
i__2
 = 
Åt
;

1569 
k
 = 1; k <ğ
i__2
; ++k)

1570 
w
[
j
] +ğ
vÏg
[
k
] * 
zm©
[k + j * 
zm©_dim1
];

1571 ià(
j
 < 
idz
è
w
[j] = -w[j];

1573 
i__1
 = 
Åt
;

1574 
k
 = 1; k <ğ
i__1
; ++k) {

1575 
pq
[
k
] = 0;

1576 
i__2
 = 
Åtm
;

1577 
j
 = 1; j <ğ
i__2
; ++j)

1578 
pq
[
k
] +ğ
zm©
[k + 
j
 * 
zm©_dim1
] * 
w
[j];

1580 
™e¡
 = 0;

1584 ià(
f
 < 
f§ve
è
kİt
 = 
kÃw
;

1589 ià(
f
 <ğ
f§ve
 + 0.1 * 
vquad
è
L100
;

1590 ià(
k§ve
 > 0è
L100
;

1593 
kÃw
 = 0;

1594 
L460
:

1595 
di¡sq
 = 
d–
 * 4. * delta;

1596 
i__2
 = 
Åt
;

1597 
k
 = 1; k <ğ
i__2
; ++k) {

1598 
sum
 = 0;

1599 
i__1
 = 
n
;

1600 
j
 = 1; j <ğ
i__1
; ++j) {

1602 
d__1
 = 
x±
[
k
 + 
j
 * 
x±_dim1
] - 
xİt
[j];

1603 
sum
 +ğ
d__1
 * d__1;

1605 ià(
sum
 > 
di¡sq
) {

1606 
kÃw
 = 
k
;

1607 
di¡sq
 = 
sum
;

1612 ià(
kÃw
 > 0) {

1614 
d__2
 = 0.1 * 
	`sq¹
(
di¡sq
), 
d__3
 = .5 * 
d–
;

1615 
d__1
 = 
	`mš
(
d__2
, 
d__3
);

1616 
d¡•
 = 
	`max
(
d__1
, 
rho
);

1617 
dsq
 = 
d¡•
 * dstep;

1618 
L120
;

1620 ià(
¿tio
 > 0è
L100
;

1621 ià(
	`max
(
d–
, 
dnÜm
è> 
rho
è
L100
;

1624 
L490
:

1625 ià(
rho
 > 
rhÛnd
) {

1626 
d–
 = .5 * 
rho
;

1627 
¿tio
 = 
rho
 / 
rhÛnd
;

1628 ià(
¿tio
 <ğ16.è
rho
 = 
rhÛnd
;

1629 ià(
¿tio
 <ğ250.è
rho
 = 
	`sq¹
Ô©ioè* 
rhÛnd
;

1630 
rho
 = 0.1 *„ho;

1631 
d–
 = 
	`max
(d–, 
rho
);

1632 
L90
;

1636 ià(
kÃw
 =ğ-1è
L290
;

1637 
L530
:

1638 ià(
fİt
 <ğ
f
) {

1639 
i__2
 = 
n
;

1640 
i__
 = 1; i__ <ğ
i__2
; ++i__)

1641 
x
[
i__
] = 
xba£
[i__] + 
xİt
[i__];

1642 
f
 = 
fİt
;

1644 *
»t_nf
 = 
nf
;

1645  
f
;

1646 
	}
}

1648 
	g‹m¶©e
<
şass
 
	gTYPE
, cÏs 
	gFunc
>

1649 
TYPE
 
	$Ãwuß_
(
n
, 
Åt
, 
TYPE
 *
x
, TYPE 
rhobeg
, TYPE 
rhÛnd
, *
»t_nf
, 
maxfun
, TYPE *
w
, 
Func
 &
func
)

1679 
id
, 
Å
, 
iw
, 
igq
, 
ihq
, 
ixb
, 
ifv
, 
q
, 
ivl
, 
ixn
,

1680 
ixo
, 
ixp
, 
ndim
, 
Åtm
, 
ibm©
, 
izm©
;

1683 --
w
; --
x
;

1685 
Å
 = 
n
 + 1;

1686 
Åtm
 = 
Åt
 - 
Å
;

1687 ià(
Åt
 < 
n
 + 2 ||‚± > (À+ 2è* 
Å
 / 2) {

1691 
ndim
 = 
Åt
 + 
n
;

1692 
ixb
 = 1;

1693 
ixo
 = 
ixb
 + 
n
;

1694 
ixn
 = 
ixo
 + 
n
;

1695 
ixp
 = 
ixn
 + 
n
;

1696 
ifv
 = 
ixp
 + 
n
 * 
Åt
;

1697 
igq
 = 
ifv
 + 
Åt
;

1698 
ihq
 = 
igq
 + 
n
;

1699 
q
 = 
ihq
 + 
n
 * 
Å
 / 2;

1700 
ibm©
 = 
q
 + 
Åt
;

1701 
izm©
 = 
ibm©
 + 
ndim
 * 
n
;

1702 
id
 = 
izm©
 + 
Åt
 * 
Åtm
;

1703 
ivl
 = 
id
 + 
n
;

1704 
iw
 = 
ivl
 + 
ndim
;

1709  
	`Ãwuob_
(
n
, 
Åt
, &
x
[1], 
rhobeg
, 
rhÛnd
, 
»t_nf
, 
maxfun
, &
w
[
ixb
], &w[
ixo
], &w[
ixn
],

1710 &
w
[
ixp
], &w[
ifv
], &w[
igq
], &w[
ihq
], &w[
q
], &w[
ibm©
], &w[
izm©
],

1711 &
ndim
, &
w
[
id
], &w[
ivl
], &w[
iw
], 
func
);

1712 
	}
}

1714 
	g‹m¶©e
<
şass
 
	gTYPE
, cÏs 
	gFunc
>

1715 
TYPE
 
	$mš_Ãwuß
(
n
, 
TYPE
 *
x
, 
Func
 &
func
, TYPE 
rb
, TYPE 
tŞ
, 
max_™”
)

1717 
Åt
 = 2 * 
n
 + 1, 
ºf
;

1718 
TYPE
 
»t
;

1719 
TYPE
 *
w
 = (TYPE*)
	`ÿÎoc
((
Åt
+13)*Ò±+
n
) + 3*n*(n+3)/2 + 11, (TYPE));

1720 
»t
 = 
	`Ãwuß_
(
n
, 2*n+1, 
x
, 
rb
, 
tŞ
, &
ºf
, 
max_™”
, 
w
, 
func
);

1721 
	`ä“
(
w
);

1722  
»t
;

1723 
	}
}

	@objectivefunction.cpp

1 
	~"objeùivefunùiÚ.h
"

3 
	gobjeùivefunùiÚ
::
	$objeùivefunùiÚ
()

5 
	}
}

8 
objeùivefunùiÚ
::objeùivefunùiÚ(cÚ¡ * 
roÙDœ
, 
side
, 
v¬sNum
, 
¥okeNum
, 
M3DQuadFigu»
* 
shiášgQuadFig
,

9 
š‹½Ş©iÚLev–
, 
veùÜ
< 
¡d
::
¡ršg
 > 
šputS»ps
){

10 
this
->
v¬sNum
 = varsNum;

11 
	gthis
->
	g¥okeNum
 = 
¥okeNum
;

12 
	gthis
->
	groÙDœ
 = 
roÙDœ
;

13 
	gthis
->
	gš‹½Ş©iÚLev–
 = 
š‹½Ş©iÚLev–
;

14 
	gthis
->
	gside
 = 
side
;

15 
	gthis
->
	gshiášgQuadFig
 = 
shiášgQuadFig
;

17 
toŞsfunc
 
	gtoŞs
;

19 
	gi
 = 0; i < 
	gšputS»ps
.
size
(); i++){

21 
	g¡d
::
cout
<<"---------R—dšg:"<<
šputS»ps
[
i
]<<
¡d
::
’dl
;

22 
M3DQuadFigu»
* 
	gqFig
 = 
toŞs
.
G‘QuadFigu»
(
šputS»ps
[
i
].
c_¡r
());

23 
	gthis
->
	gquadFigLi¡
.
push_back
(
qFig
);

26 
	gvtkSm¬tPoš‹r
<
	gvtkR—dSR•
> 
	g»ad¤•
 = 
vtkSm¬tPoš‹r
<
vtkR—dSR•
>::
New
();

27 
	g»ad¤•
->
S‘FeName
(
šputS»ps
[
i
].
c_¡r
());

28 
	g»ad¤•
->
Upd©e
();

29 
	gvtkSm¬tPoš‹r
<
	gvtkSR•
> 
	g¤•fig
 = 
»ad¤•
->
G‘Ouut
();

30 
	gthis
->
	g¤•figLi¡
.
push_back
(
¤•fig
);

33 
uvm­
 
	gmp
;

35 
	gthis
->
	gsubVs
 = 
mp
.
g‘UVSubdivisiÚ
(
š‹½Ş©iÚLev–
);

42 
	gobjeùivefunùiÚ
::
	$objeùiveFunùiÚ
(cÚ¡ * 
whŞeCÛff
, 
w1
, 
w2
) const{

44 
move¥okes
 
	`mSpokes
(
roÙDœ
, 
¥okeNum
, 
this
->
quadFigLi¡
.
	`size
(), 
side
,his->
š‹½Ş©iÚLev–
);

45 
»gEÁrİy
 = 
mSpokes
.
	`ÿlcuÏ‹RegEÁrİy
(
whŞeCÛff
,
this
->
shiášgQuadFig
, 
subVs
, 
v¬sNum
, 
quadFigLi¡
, 
¤•figLi¡
);

47 
toŞsfunc
 
toŞs
;

51 
¡ršg
 
s
 = 
	`¡ršg
("m©Ïb -nodesktİ -nodi¥Ïy -nojvm -no¥Ïsh -sšgËCompTh»ad -¸"è+ '"' + sŒšg("d©aDœ='"è+ 
toŞs
.
	`cÚÃùSŒ
(
roÙDœ
, "/temp_data/");

53 
¡ršg
 
süt_¡r
;

54 if(
this
->
side
 == 0)

55 
süt_¡r
 = 
s
 + 
	`¡ršg
("';upSide") + '"';

56 if(
this
->
side
 == 1)

57 
süt_¡r
 = 
s
 + 
	`¡ršg
("';downSide") + '"';

59 
süt_¡r
 = 
s
 + 
	`¡ršg
("';crestSide") + '"';

61 
»tuºV®ue1
 = 
	`sy¡em
(
süt_¡r
.
	`c_¡r
());

62 ià(
»tuºV®ue1
 !ğ0 ) 
¡d
::
cout
 << "som‘hšg ha h­³Ãd iÀM©Ïb, fŞlowšg v®u»tuºed: " <<„‘uºV®ue1 << std::
’dl
;

66 
¡ršg
 
geoEÁrİyResuÉP©h
 = 
toŞs
.
	`cÚÃùSŒ
ÑoŞs.cÚÃùSŒ(
roÙDœ
, "/temp_data/"), "geoEntropyResult.txt");

67 
if¡»am
 
	`myfe
(
geoEÁrİyResuÉP©h
.
	`c_¡r
());

68 
¡ršg
 
lše
;

69 
geoEÁrİy
 = 0;

70 ià(
myfe
.
	`is_İ’
()) {

71  
	`g‘lše
 (
myfe
,
lše
) )

73 
geoEÁrİy
 = 
	`©of
(
lše
.
	`c_¡r
());

74 
¡d
::
cout
 <<"----geoEÁrİy: "<<
geoEÁrİy
<<¡d::
’dl
;

76 
myfe
.
	`şo£
();

79 
¡d
::
cout
 << "UÇbËØİ’ fe: " << 
geoEÁrİyResuÉP©h
 << std::
’dl
;

81 
objeùFuc
 = 
w1
*
geoEÁrİy
 - 
w2
*
»gEÁrİy
;

82 
¡d
::
cout
 <<"----objeùivfunùiÚ: "<<
objeùFuc
<<¡d::
’dl
;

84  
objeùFuc
;

85 
	}
}

88 
	gobjeùivefunùiÚ
::
	$g‘I‹¿tiÚCouÁ
(
™eCouÁ”
) const{

90  
™eCouÁ”
+1;

91 
	}
}

	@objectivefunction.h

1 #iâdeà
OBJECTIVEFUNCTION_H


2 
	#OBJECTIVEFUNCTION_H


	)

5 
	~<veùÜ
>

6 
	~"M3DQuadFigu».h
"

7 
	~"P3DCÚŒŞ.h
"

8 
	~"move¥okes.h
"

9 
	~"toŞsfunc.h
"

11 
	~<vtkSm¬tPoš‹r.h
>

14 şas 
	cobjeùivefunùiÚ


16 
	mpublic
:

17 
objeùivefunùiÚ
();

19 
objeùivefunùiÚ
(cÚ¡ * 
roÙDœ
, 
side
, 
v¬sNum
, 
¥okeNum
, 
M3DQuadFigu»
* 
shiášgQuadFig
, 
š‹½Ş©iÚLev–
,

20 
veùÜ
< 
¡d
::
¡ršg
 > 
šputS»ps
);

22 
	$objeùiveFunùiÚ
(cÚ¡ * 
whŞeCÛff
, 
w1
, 
w2
) const;

27 
	$g‘I‹¿tiÚCouÁ
(
™eCouÁ”
) const;

30 
´iv©e
:

31 
v¬sNum
;

33 
veùÜ
<
M3DQuadFigu»
 *> 
quadFigLi¡
;

34 
veùÜ
<
vtkSm¬tPoš‹r
<
vtkSR•
> > 
¤•figLi¡
;

38 
side
;

40 cÚ¡ * 
roÙDœ
;

42 
DoubËVec
 
subVs
;

44 
š‹½Ş©iÚLev–
;

45 
M3DQuadFigu»
* 
shiášgQuadFig
;

47 
¥okeNum
;

	@oneplusonecostfunction.cpp

8 
	~"Ú•lusÚeco¡funùiÚ.h
"

16 
	g™”©iÚCouÁ”
;

19 
	gÚ•lusÚeco¡funùiÚ
::
	$Ú•lusÚeco¡funùiÚ
()

21 
™”©iÚCouÁ”
 = 0;

22 
	}
}

25 
	gÚ•lusÚeco¡funùiÚ
::
Ú•lusÚeco¡funùiÚ
(cÚ¡ * 
roÙDœ
, 
veùÜ
< 
¡d
::
¡ršg
 > 
šputS»ps
, 
š‹½Ş©iÚLev–
, 
side
){

26 
	gthis
->
	groÙDœ
 = 
roÙDœ
;

27 
	gthis
->
	g¤•Num
 = 
šputS»ps
.
size
();

29 
toŞsfunc
 
	gtoŞs
;

30 
M3DQuadFigu»
* 
	gshiášgQuadFig
;

32 
	gshiášgQuadFig
 = 
toŞs
.
G‘QuadFigu»
(
šputS»ps
[0].
c_¡r
());

34 
	growNum
 = 
shiášgQuadFig
->
g‘RowCouÁ
();

35 
	gcŞNum
 = 
shiášgQuadFig
->
g‘CŞumnCouÁ
();

37 
	gex‹riÜAtomNums
 = (
rowNum
+
cŞNum
)*2 - 4;

38 
	gš‹riÜAtomNums
 = 
rowNum
*
cŞNum
 - 
ex‹riÜAtomNums
;

40 
	g¥okeNum
;

42 if(
	gside
==2){

43 
v¬sNum
 = 
ex‹riÜAtomNums
 - 4;

44 
	g¥okeNum
 = 
ex‹riÜAtomNums
;

47 
	gv¬sNum
 = 
ex‹riÜAtomNums
*1 - 4 + 
š‹riÜAtomNums
*2;

48 
	g¥okeNum
 = 
ex‹riÜAtomNums
 + 
š‹riÜAtomNums
;

51 
	g¡d
::
cout
<<"Mes§gäom move¥okes::move¥okes: Ex‹riÜ‡tom‚umb”: "<< 
ex‹riÜAtomNums
<<
¡d
::
’dl
;

52 
	g¡d
::
cout
<<"Mes§gäom move¥okes::move¥okes: IÁ”iÜ‡tom‚umb”: "<< 
š‹riÜAtomNums
<<
¡d
::
’dl
;

53 
	g¡d
::
cout
<<"Mes§gäom move¥okes::move¥okes: V¬ŸbË‚umb”: "<< 
v¬sNum
<<
¡d
::
’dl
;

54 
	g¡d
::
cout
<<"Mes§gäom move¥okes::move¥okes: Thšpuˆ¤•‚umb”: "<< 
šputS»ps
.
size
()<<
¡d
::
’dl
;

56 
	gthis
->
	gtÙ®V¬s
 = 
šputS»ps
.
size
(è* 
v¬sNum
;

58 
objeùivefunùiÚ
 
obj_š¡ªû
(
roÙDœ
, 
side
, 
v¬sNum
, 
¥okeNum
, 
shiášgQuadFig
, 
š‹½Ş©iÚLev–
, 
šputS»ps
);

59 
	gthis
->
	gobjFunc
 = 
obj_š¡ªû
;

61 
	g™”©iÚCouÁ”
 = 0;

69 
	gÚ•lusÚeco¡funùiÚ
::
M—su»Ty³
 
Ú•lusÚeco¡funùiÚ
::
	$G‘V®ue
ĞcÚ¡ 
P¬am‘”sTy³
 & 
·¿m‘”s
 ) const {

70 
™”©iÚCouÁ”
++;

71 
¡d
::
cout
 << "Th" << 
™”©iÚCouÁ”
 << "th i‹¿tiÚ. " << std::
’dl
;

73 *
chªgšgUV
 = 
Ãw
 [
this
->
tÙ®V¬s
];

76 
i
 = 0; i < 
this
->
tÙ®V¬s
; i++){

77 if(
·¿m‘”s
[
i
] > 1 ||…arameters[i] < -1){

78 
¡d
::
cout
<<"Thd– u o¸v shouldn'ˆbigg”hª 1,hi tu¶oàcÛfã w”throw‡way!"<<¡d::
’dl
;

82 
chªgšgUV
[
i
] = 
·¿m‘”s
[i];

87 
¡d
::
cout
<<"Variables: ";

88 
i
 = 0; i < 
this
->
tÙ®V¬s
; i++){

89 
¡d
::
cout
 << 
chªgšgUV
[
i
] << " ";

92 
¡d
::
cout
 << std::
’dl
;

94 
w1
 = 1;

95 
w2
 = 1;

96 
M—su»Ty³
 
m—su»
 = 
this
->
objFunc
.
	`objeùiveFunùiÚ
(
chªgšgUV
, 
w1
, 
w2
);

98 
d–‘e
 
chªgšgUV
;

100  
m—su»
;

101 
	}
}

	@oneplusonecostfunction.h

11 #iâdeà
ONEPLUSONECOSTFUNCTION_H


12 
	#ONEPLUSONECOSTFUNCTION_H


	)

14 
	~"™kOÃPlusOÃEvŞutiÚ¬yO±imiz”.h
"

15 
	~"™kNÜm®V¬Ÿ‹G’”©Ü.h
"

16 
	~<vÆ/vÆ_m©h.h
>

18 
	~"objeùivefunùiÚ.h
"

25 şas 
	cÚ•lusÚeco¡funùiÚ
 : 
public
 
™k
::
SšgËV®uedCo¡FunùiÚ


27 
public
:

29 
Ú•lusÚeco¡funùiÚ
 
	tS–f
;

30 
	m™k
::
	tSšgËV®uedCo¡FunùiÚ
 
	tSu³rşass
;

31 
	m™k
::
	tSm¬tPoš‹r
<
	tS–f
> 
	tPoš‹r
;

32 
	m™k
::
	tSm¬tPoš‹r
<cÚ¡ 
	tS–f
> 
	tCÚ¡Poš‹r
;

33 
™kNewMaüo
Ğ
S–f
 );

34 
™kTy³Maüo
Ğ
Ú•lusÚeco¡funùiÚ
, 
SšgËV®uedCo¡FunùiÚ
 );

38 
	mSu³rşass
::
	tP¬am‘”sTy³
 ParametersType;

39 
	mSu³rşass
::
	tD”iv©iveTy³
 DerivativeType;

40 
	mSu³rşass
::
	tM—su»Ty³
 MeasureType ;

42 
Ú•lusÚeco¡funùiÚ
();

43 
Ú•lusÚeco¡funùiÚ
(cÚ¡ * 
roÙDœ
, 
veùÜ
< 
¡d
::
¡ršg
 > 
šputS»ps
, 
š‹½Ş©iÚLev–
, 
»gEÁTy³
);

46 
	$G‘D”iv©ive
ĞcÚ¡ 
P¬am‘”sTy³
 & , 
D”iv©iveTy³
 & ) const { }

50 
M—su»Ty³
 
	$G‘V®ue
ĞcÚ¡ 
P¬am‘”sTy³
 & 
·¿m‘”s
 ) const;

52 
	$G‘Numb”OfP¬am‘”s
() const {

53  
this
->
tÙ®V¬s
;

54 
	}
}

56 
M—su»Ty³
 
doI‹¿tiÚ
();

62 
	g´iv©e
:

63 
tÙ®V¬s
;

64 cÚ¡ * 
	groÙDœ
;

82 
objeùivefunùiÚ
 
	gobjFunc
;

83 
	g¤•Num
;

84 
	gv¬sNum
;

	@optimizationusingnewuoa.cpp

8 
	~"İtimiz©iÚusšgÃwuß.h
"

9 
	~"co¡_funùiÚ.h
"

10 
	~"Ãwuß.h
"

11 
	~<io¡»am
>

15 
	~<exû±iÚ
>

19 
	gİtimiz©iÚusšgÃwuß
::
	$İtimiz©iÚusšgÃwuß
()

21 
	}
}

29 
İtimiz©iÚusšgÃwuß
::İtimiz©iÚusšgÃwuß(cÚ¡ * 
roÙDœ
, 
veùÜ
< 
¡d
::
¡ršg
 > 
šputS»ps
, 
š‹½Ş©iÚLev–
, 
side
){

30 
	gthis
->
	groÙDœ
 = 
roÙDœ
;

31 
	gthis
->
	g¤•Num
 = 
šputS»ps
.
size
();

33 
toŞsfunc
 
	gtoŞs
;

34 
M3DQuadFigu»
* 
	gshiášgQuadFig
;

36 
	gshiášgQuadFig
 = 
toŞs
.
G‘QuadFigu»
(
šputS»ps
[0].
c_¡r
());

38 
	growNum
 = 
shiášgQuadFig
->
g‘RowCouÁ
();

39 
	gcŞNum
 = 
shiášgQuadFig
->
g‘CŞumnCouÁ
();

41 
	gex‹riÜAtomNums
 = (
rowNum
+
cŞNum
)*2 - 4;

42 
	gš‹riÜAtomNums
 = 
rowNum
*
cŞNum
 - 
ex‹riÜAtomNums
;

44 
	g¥okeNum
;

46 if(
	gside
==2){

47 
v¬sNum
 = 
ex‹riÜAtomNums
 - 4;

48 
	g¥okeNum
 = 
ex‹riÜAtomNums
;

51 
	gv¬sNum
 = 
ex‹riÜAtomNums
*1 - 4 + 
š‹riÜAtomNums
*2;

52 
	g¥okeNum
 = 
ex‹riÜAtomNums
 + 
š‹riÜAtomNums
;

55 
	g¡d
::
cout
<<"Mes§gäom o±imiz©iÚusšgÃwuß: Ex‹riÜ‡tom‚umb”: "<< 
ex‹riÜAtomNums
<<
¡d
::
’dl
;

56 
	g¡d
::
cout
<<"Mes§gäom o±imiz©iÚusšgÃwuß: IÁ”iÜ‡tom‚umb”: "<< 
š‹riÜAtomNums
<<
¡d
::
’dl
;

57 
	g¡d
::
cout
<<"Mes§gäom o±imiz©iÚusšgÃwuß: V¬ŸbË‚umb”: "<< 
v¬sNum
<<
¡d
::
’dl
;

58 
	g¡d
::
cout
<<"Mes§gäom o±imiz©iÚusšgÃwuß: Thšpuˆ¤•‚umb”: "<< 
šputS»ps
.
size
()<<
¡d
::
’dl
;

60 
	gthis
->
	gtÙ®V¬s
 = 
šputS»ps
.
size
(è* 
v¬sNum
;

62 
objeùivefunùiÚ
 
obj_š¡ªû
(
roÙDœ
, 
side
, 
v¬sNum
, 
¥okeNum
, 
shiášgQuadFig
, 
š‹½Ş©iÚLev–
, 
šputS»ps
);

63 
	gthis
->
	gobjFunc
 = 
obj_š¡ªû
;

76 
	gİtimiz©iÚusšgÃwuß
::
	$co¡
(*
cÛff
){

78 
w1
 = 15;

79 
w2
 = 1;

81  
objFunc
.
	`objeùiveFunùiÚ
(
cÛff
, 
w1
, 
w2
);

82 
	}
}

85 
	gİtimiz©iÚusšgÃwuß
::
	$ÿÎNEWUOA
(cÚ¡ * 
logFeName
, 
boŞ
 
š™ŸlO±
){

88 *
chªgšgUV
 = 
Ãw
 [
this
->
tÙ®V¬s
];

91 if(
š™ŸlO±
){

92 
i
 =0;i<
this
->
tÙ®V¬s
;i++){

93 
chªgšgUV
[
i
] = 0.0;

97 
¡ršg
 
v¬FeP©h
 = 
	`¡ršg
(
this
->
roÙDœ
) + string("/vars.txt");

98 
if¡»am
 
	`ss
(
v¬FeP©h
.
	`c_¡r
());

100 ià(! 
ss
.
	`is_İ’
()){

101 
¡d
::
û¼
 << "Msg from o±imiz©iÚusšgÃwuß::ÿÎNEWUOA: UÇbËØİ’hv¬ f\"" << 
v¬FeP©h
 << "\"!" << std::
’dl
;

102 
EXIT_FAILURE
;

105 
¡ršg
 
tok’
;

107 
i
 = 0;

108 
ss
 >> 
tok’
 && 
i
 <
this
->
tÙ®V¬s
) {

109 
chªgšgUV
[
i
] = 
	`©of
(
tok’
.
	`c_¡r
());

110 
i
++;

114 
¡d
::
of¡»am
 
	`out
(
logFeName
, std::
ios_ba£
::
out
 | std::ios_ba£::
­p
);

115 
¡d
::
¡»ambuf
 *
coutbuf
 = std::
cout
.
	`rdbuf
();

116 
¡d
::
cout
.
	`rdbuf
(
out
.rdbuf());

118 
co¡_funùiÚ
 
	`co¡Func
(
this
,his->
tÙ®V¬s
);

119 
	`mš_Ãwuß
(
this
->
tÙ®V¬s
,
chªgšgUV
,
co¡Func
,0.1, 0.000001, 30000);

123 
d–‘e
 
chªgšgUV
;

126 
¡d
::
cout
.
	`rdbuf
(
coutbuf
);

129 
	}
}

	@optimizationusingnewuoa.h

1 #iâdeà
OPTIMIZATIONUSINGNEWUOA_H


2 
	#OPTIMIZATIONUSINGNEWUOA_H


	)

4 
	~"objeùivefunùiÚ.h
"

9 şas 
	cİtimiz©iÚusšgÃwuß


11 
	mpublic
:

12 
İtimiz©iÚusšgÃwuß
();

13 
İtimiz©iÚusšgÃwuß
(cÚ¡ * 
roÙDœ
, 
veùÜ
< 
¡d
::
¡ršg
 > 
šputS»ps
, 
š‹½Ş©iÚLev–
, 
»gEÁTy³
);

15 
co¡
(*
cÛff
);

18 
ÿÎNEWUOA
(cÚ¡ * 
logFeName
, 
boŞ
 
š™ŸlO±
);

21 
	m´iv©e
:

23 
tÙ®V¬s
;

25 cÚ¡ * 
	mroÙDœ
;

27 
objeùivefunùiÚ
 
	mobjFunc
;

29 
	m¤•Num
;

30 
	mv¬sNum
;

	@procrustes.cpp

1 
	~"´oüu¡es.h
"

5 
usšg
 
Çme¥aû
 
	g¡d
;

7 
	g´oüu¡es
::
	$´oüu¡es
()

10 
	}
}

18 
´oüu¡es
::
MeshTy³
::
Poš‹r
…roüu¡es::
	$OPA
(
MeshTy³
::
Poš‹r
 
MX
, MeshTy³::Poš‹¸
MY
){

20 
M©rixTy³
 
X
, 
Y
;

21 
X
.
	`£t_size
(3, 
this
->
poštsNum
);

22 
Y
.
	`£t_size
(3, 
this
->
poštsNum
);

23 
PoštsI‹¿tÜ
 
²tItX
;

24 
i
 =0;

25 
PoštsI‹¿tÜ
 
²tItY
 = 
MY
->
	`G‘Pošts
()->
	`Begš
();

26  
²tItX
 = 
MX
->
	`G‘Pošts
()->
	`Begš
();…ÁItX !ğMX->G‘Pošts()->
	`End
(); ++pntItX ) {

27  
dim
 = 0; dim < 3; dim++ ) {

28 
X
[
dim
][
i
] = 
²tItX
.
	`V®ue
()[dim];

29 
Y
[
dim
][
i
] = 
²tItY
.
	`V®ue
()[dim];

31 
i
++;

32 ++
²tItY
;

36 
M©rixTy³
 
Xm—n
, 
Ym—n
;

37 
Xm—n
 = 
	`g‘C’‹rOfMass
(
X
);

38 
Ym—n
 = 
	`g‘C’‹rOfMass
(
Y
);

40 
cout
<<"------------thC’‹¸oàmas oàYø(sourûèis: "<<
’dl
;

41 
i
 =0; i<
Ym—n
.
	`rows
();i++){

42 
j
=0; j<
Ym—n
.
	`cŞumns
();j++){

43 
cout
<<
Ym—n
[
i
][
j
]<<" ";

45 
cout
<<
’dl
;

47 
cout
<<"------------thC’‹¸oàmas oàXøÑ¬g‘èis: "<<
’dl
;

48 
i
 =0; i<
Xm—n
.
	`rows
();i++){

49 
j
=0; j<
Xm—n
.
	`cŞumns
();j++){

50 
cout
<<
Xm—n
[
i
][
j
]<<" ";

52 
cout
<<
’dl
;

56 
M©rixTy³
 
Xc
 = 
	`ûÁ”ThisS»p
(
X
, 
Xm—n
);

57 
M©rixTy³
 
Yc
 = 
	`ûÁ”ThisS»p
(
Y
, 
Ym—n
);

60 
cout
<<"------------thûÁ”ed Yø(sourûèis: "<<
’dl
;

61 
i
 =0; i<
Yc
.
	`rows
();i++){

62 
j
=0; j<
Yc
.
	`cŞumns
();j++){

63 
cout
<<
Yc
[
i
][
j
]<<" ";

65 
cout
<<
’dl
;

67 
cout
<<"------------thûÁ”ed XøÑ¬g‘èis: "<<
’dl
;

68 
i
 =0; i<
Xc
.
	`rows
();i++){

69 
j
=0; j<
Xc
.
	`cŞumns
();j++){

70 
cout
<<
Xc
[
i
][
j
]<<" ";

72 
cout
<<
’dl
;

76 
M©rixTy³
 
x1
 = 
Yc
 * 
Xc
.
	`Œª¥o£
();

77 
cout
<<"+++++++++++++++++++++++++++++++++++++++++++++thx1 is: "<<
’dl
;

78 
i
=0; i<
x1
.
	`rows
();i++){

79 
j
=0; j<
x1
.
	`cŞumns
();j++){

80 
cout
<<
x1
[
i
][
j
]<<" ";

82 
cout
<<
’dl
;

84 
vÆ_svd
<> 
	`svd
(
x1
);

85 
cout
<<"+++++++++++++++++++++++++++++++++++++++++++++ svd.U(èis: "<<
’dl
;

86 
i
=0; i<
svd
.
	`U
().
	`rows
();i++){

87 
j
=0; j<
svd
.
	`U
().
	`cŞumns
();j++){

88 
cout
<<
svd
.
	`U
()[
i
][
j
]<<" ";

90 
cout
<<
’dl
;

92 
cout
<<"+++++++++++++++++++++++++++++++++++++++++++++ svd.V(èis: "<<
’dl
;

93 
i
=0; i<
svd
.
	`V
().
	`rows
();i++){

94 
j
=0; j<
svd
.
	`V
().
	`cŞumns
();j++){

95 
cout
<<
svd
.
	`V
()[
i
][
j
]<<" ";

97 
cout
<<
’dl
;

99 
this
->
Œªs_R
 = 
svd
.
	`V
(è* svd.
	`U
().
	`Œª¥o£
();

101 
cout
<<"+++++++++++++++++++++++++++++++++++++++++++++his->Œªs_R is: "<<
’dl
;

102 
i
=0; i<
this
->
Œªs_R
.
	`rows
();i++){

103 
j
=0; j<
this
->
Œªs_R
.
	`cŞumns
();j++){

104 
cout
<<
this
->
Œªs_R
[
i
][
j
]<<" ";

106 
cout
<<
’dl
;

109 
M©rixTy³
 
x2
 = 
Xc
.
	`Œª¥o£
(è* 
this
->
Œªs_R
 * 
Yc
;

117 
x2T¿û
 = 0;

118 
i
 = 0; i < 
x2
.
	`rows
(); i++ ) {

119 
x2T¿û
 +ğ
x2
[
i
][i];

121 
M©rixTy³
 
x3
 = 
Yc
.
	`Œª¥o£
() * Yc;

129 
x3T¿û
 = 0;

130  
i
 = 0; i < 
x3
.
	`rows
(); i++ ) {

131 
x3T¿û
 +ğ
x3
[
i
][i];

133 
this
->
Œªs_sÿË
 = 
x2T¿û
 / 
x3T¿û
;

134 
cout
<<"-----------------Œªs_sÿË is: "<<
Œªs_sÿË
<<
’dl
;

137 
this
->
Œªs_T
 = 
Xm—n
 -his->
Œªs_sÿË
 *his->
Œªs_R
 * 
Ym—n
;

138 
cout
<<"------------T¿n¦©iÚhis->Œªs_T is: "<<
’dl
;

139 
i
 =0; i<
this
->
Œªs_T
.
	`rows
();i++){

140 
j
=0; j<
this
->
Œªs_T
.
	`cŞumns
();j++){

141 
cout
<<
this
->
Œªs_T
[
i
][
j
]<<" ";

143 
cout
<<
’dl
;

147 
poštsNum
 = 
X
.
	`cŞumns
();

148 
M©rixTy³
 
Œªs_T_n
;

149 
Œªs_T_n
.
	`£t_size
(3, 
poštsNum
);

150 
i
=0; i<3; i++){

151 
j
=0; j<
poštsNum
; j++){

152 
Œªs_T_n
[
i
][
j
] = 
this
->
Œªs_T
[i][0];

157 
M©rixTy³
 
Yp
 = 
this
->
Œªs_sÿË
 * 
Œªs_R
 * 
Y
 + 
Œªs_T_n
;

160 
MeshTy³
::
Poš‹r
 
Œªs_Y
 = MeshTy³::
	`New
();

161 
PoštTy³
 
pošt
;

162 
cout
<<"----thŒªsfÜmed s»°is: "<<
’dl
;

163 
k
 = 0; k < 
Yp
.
	`cŞumns
(); k++){

164 
dim
 = 0; dim < 3; dim++){

165 
pošt
[
dim
] = 
Yp
[dim][
k
];

166 
cout
<<
Yp
[
dim
][
k
]<<" ";

168 
cout
<<
’dl
;

169 
Œªs_Y
->
	`S‘Pošt
(
k
, 
pošt
);

172  
Œªs_Y
;

173 
	}
}

232 
	g´oüu¡es
::
GPA
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
mesh_x_li¡
){

234 
this
->
¤•Nums
 = 
mesh_x_li¡
.
size
();

235 
	gthis
->
	gpoštsNum
 = 
mesh_x_li¡
[0]->
G‘Numb”OfPošts
();

238 
	gveùÜ
<
	gMeshTy³
::
Poš‹r
> 
mesh_Xp
 = 
ûÁ”S»psToOrigš
(
mesh_x_li¡
);

241 
	gveùÜ
<
	gMeshTy³
::
Poš‹r
> 
mesh_Xo
 = 
mesh_Xp
;

243 
	gGŞd
 = 1e16;

244 
	gG
 = 1e15;

245 
	gtŞ
 = 1e-6;

246 
	gcouÁ”
 =0;

248 
	gGŞd
 = 
G
;

251 
	gMeshTy³
::
Poš‹r
 
mesh_Xpm—n
 = 
ÿlcuÏ‹M—n
(
mesh_Xp
);

254 
	gn
=0;‚< 
	gthis
->
	g¤•Nums
;‚++){

256 
	gmesh_Xp
[
n
] = 
OPA
(
mesh_Xpm—n
, 
mesh_Xo
[n]);

259 
	gcouÁ”
++;

261 
	gG
 = 
g‘G
(
mesh_Xp
);

262 
	gcout
<<"----Th·œwi£ difã»nû is: "<<
	gG
<<
	g’dl
;

263 } 
	gcouÁ”
<3);

268 
	gthis
->
	gmesh_Xp
 = 
mesh_Xp
;

275 
	gveùÜ
<
	g´oüu¡es
::
MeshTy³
::
Poš‹r
> 
´oüu¡es
::
ûÁ”S»psToOrigš
(
veùÜ
<MeshTy³::Poš‹r> 
mesh_x_li¡
){

279 
PoštsCÚš”Poš‹r
 
pos
;

280 
PoštsI‹¿tÜ
 
	g²tIt
;

283 
	gi
 = 0; i< 
	gthis
->
	g¤•Nums
; i++){

284 
	gx
=0;

285 
	gy
=0;

286 
	gz
=0;

288 
	gpos
 = 
mesh_x_li¡
[
i
]->
G‘Pošts
();

289  
	g²tIt
 = 
pos
->
Begš
();…ÁIˆ!ğpos->
End
(); ++pntIt ) {

290 
	gx
 +ğ
²tIt
.
V®ue
()[0];

291 
	gy
 +ğ
²tIt
.
V®ue
()[1];

292 
	gz
 +ğ
²tIt
.
V®ue
()[2];

295 
	gx
 = 
x
/
this
->
poštsNum
;

296 
	gy
 = 
y
/
this
->
poštsNum
;

297 
	gz
 = 
z
/
this
->
poštsNum
;

300  
	g²tIt
 = 
pos
->
Begš
();…ÁIˆ!ğpos->
End
(); ++pntIt ) {

302 
	g²tIt
.
V®ue
()[0] -ğ
x
;

303 
	g²tIt
.
V®ue
()[1] -ğ
y
;

304 
	g²tIt
.
V®ue
()[2] -ğ
z
;

312  
	gmesh_x_li¡
;

325 
	g´oüu¡es
::
g‘G
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
mesh_x_li¡
){

327 
G
 =0;

328 
	gi
=0; i<
	gthis
->
	g¤•Nums
; i++){

329 
	gj
=
i
+1; j<
	gthis
->
	g¤•Nums
; j++){

330 
	gG
 = 
G
 + 
g‘FroDi¡ªû
(
mesh_x_li¡
[
i
], mesh_x_li¡[
j
]);

334 
	gG
 = 
G
/
this
->
¤•Nums
;

336  
	gG
;

342 
	g´oüu¡es
::
	$g‘FroDi¡ªû
(
MeshTy³
::
Poš‹r
 
A
, MeshTy³::Poš‹¸
B
){

344 
PoštsCÚš”Poš‹r
 
aPošts
 = 
A
->
	`G‘Pošts
();

345 
PoštsI‹¿tÜ
 
poštItA
;

347 
PoštsI‹¿tÜ
 
poštItB
 = 
B
->
	`G‘Pošts
()->
	`Begš
();

349 
diff
, 
squ¬edDiff
;

351  
poštItA
 = 
aPošts
->
	`Begš
();…oštItA !ğaPošts->
	`End
(); ++pointItA ) {

352  
dim
 = 0; dim < 3; dim++ ) {

353 
diff
 = 
poštItA
.
	`V®ue
()[
dim
] - 
poštItB
.Value()[dim];

354 
squ¬edDiff
 +ğ
diff
 * diff;

356 ++
poštItB
;

358 
	}
}

363 
	g´oüu¡es
::
M©rixTy³
 
´oüu¡es
::
	$g‘C’‹rOfMass
(
M©rixTy³
 
¤•Pos
){

364 
M©rixTy³
 
ûÁ”
;

365 
ûÁ”
.
	`£t_size
(3,1);

367 
poštsNum
 = 
¤•Pos
.
	`cŞumns
();

369 
dim
=0; dim<3; dim++){

370 
rowSum
 = 0;

371 
j
=0; j<
poštsNum
; j++){

372 
rowSum
 +ğ
¤•Pos
[
dim
][
j
];

374 
ûÁ”
[
dim
][0] = 
rowSum
/
poštsNum
;

377  
ûÁ”
;

378 
	}
}

385 
	g´oüu¡es
::
M©rixTy³
 
´oüu¡es
::
	$ûÁ”ThisS»p
(
M©rixTy³
 
X
, M©rixTy³ 
COM
){

387 
i
=0; i<3; i++){

388 
j
=0; j<
X
.
	`cŞumns
(); j++){

389 
X
[
i
][
j
] = X[i][j] - 
COM
[i][0];

393  
X
;

394 
	}
}

401 
	g´oüu¡es
::
MeshTy³
::
Poš‹r
 
´oüu¡es
::
ÿlcuÏ‹M—n
(
veùÜ
<MeshTy³::Poš‹r> 
mesh_Xp
){

402 
n
 = 
mesh_Xp
.
size
();

403 
	gcout
<<"=============================Th¤•‚umb” u£dØcompu‹ m—Àis: "<<
	gn
<<
	g’dl
;

404 
PoštsCÚš”Poš‹r
 
	gšputS»p
;

405 
PoštsI‹¿tÜ
 
	g²tIt
;

407 
	gMeshTy³
::
Poš‹r
 
Xpm—n
 = 
MeshTy³
::
New
();

434 
M©rixTy³
 
m—n
(3,
this
->
poštsNum
);

441 
	gm—n
.
fl
(0);

444 
	gk
 = 0; k< 
	gn
; k++){

445 
	gšputS»p
 = 
mesh_Xp
[
k
]->
G‘Pošts
();

447 
	gi
 =0;

448 
	gcout
<<"------------------------thpošt u£dØcompu‹ m—Àis: "<<
	g’dl
;

449  
	g²tIt
 = 
šputS»p
->
Begš
();…ÁIˆ!ğšputS»p->
End
(); ++pntIt ) {

450  
	gdim
 = 0; dim < 3; dim++ ) {

451 
	gm—n
[
dim
][
i
] +ğ
²tIt
.
V®ue
()[dim];

453 
	gcout
<<
	g²tIt
.
V®ue
()<<
	g’dl
;

454 
	gi
++;

459 
PoštTy³
 
	gpošt
;

460 
	gj
=0; j<
	gthis
->
	gpoštsNum
; j++) {

461  
	gdim
 = 0; dim < 3; dim++ ) {

462 
	gpošt
[
dim
] = 
m—n
[dim][
j
]/
n
;

464 
	gXpm—n
->
S‘Pošt
(
j
, 
pošt
);

468 
	g¡d
::
cout
 << "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~thm—À¤•…ošt is: " << 
Xpm—n
->
G‘Numb”OfPošts
(è<< 
¡d
::
’dl
;

469 
	g´oüu¡es
::
PoštsI‹¿tÜ
 
poštI‹¿tÜ
 = 
Xpm—n
->
G‘Pošts
()->
Begš
();

472 
	g´oüu¡es
::
PoštsI‹¿tÜ
 
’d
 = 
Xpm—n
->
G‘Pošts
()->
End
();

473  
	gpoštI‹¿tÜ
 !ğ
’d
 ) {

474 
´oüu¡es
::
MeshTy³
::
PoštTy³
 
p
 = 
poštI‹¿tÜ
.
V®ue
();

475 
	g¡d
::
cout
 << 
p
 << 
¡d
::
’dl
;

476 ++
	gpoštI‹¿tÜ
;

479  
	gXpm—n
;

484 
	gveùÜ
<
	g´oüu¡es
::
MeshTy³
::
Poš‹r
> 
´oüu¡es
::
	$g‘T¿ns_X
(){

487 
PoštsI‹¿tÜ
 
²tItX
;

488 
PoštsCÚš”Poš‹r
 
X
;

489 
i
=0; i<
this
->
mesh_Xp
.
	`size
(); i++){

490 
X
 = 
this
->
mesh_Xp
[
i
]->
	`G‘Pošts
();

491 
²tItX
 = 
X
->
	`Begš
();…ÁItX !ğX->
	`End
(); ++pntItX){

492  
dim
 = 0; dim < 3; dim++ ) {

493 
²tItX
.
	`V®ue
()[
dim
] += 0.5;

498  
this
->
mesh_Xp
;

499 
	}
}

501 
	g´oüu¡es
::
M©rixTy³
 
´oüu¡es
::
	$g‘T¿ns_RÙ
(){

502  
this
->
Œªs_R
;

503 
	}
}

505 
	g´oüu¡es
::
	$g‘T¿ns_Sÿ
(){

506  
this
->
Œªs_sÿË
;

507 
	}
}

509 
	g´oüu¡es
::
M©rixTy³
 
´oüu¡es
::
	$g‘T¿ns_T¿
(){

510  
this
->
Œªs_T
;

511 
	}
}

519 
	g´oüu¡es
::
§veMeshVeùÜ
(cÚ¡ * 
f’ame
, 
veùÜ
<
MeshTy³
::
Poš‹r
> 
X
){

521 
¤•Num
 = 
X
.
size
();

522 
	gpoštsNum
 = 
X
[0]->
G‘Numb”OfPošts
();

524 
M©rixTy³
 
	gX_m©rix
;

525 
	gX_m©rix
.
£t_size
(
poštsNum
*3, 
¤•Num
);

527 
PoštsI‹¿tÜ
 
	g²tItX
;

528 
	gk
=0; k< 
	gX
.
size
();k++){

529 
	gpoštIndex
 =0;

530  
	g²tItX
 = 
X
[
k
]->
G‘Pošts
()->
Begš
();…ÁItX !ğX[k]->G‘Pošts()->
End
(); ++pntItX ) {

531  
	gdim
 = 0; dim < 3; dim++ ) {

532 
	gX_m©rix
[
poštIndex
*3 + 
dim
][
k
] = 
²tItX
.
V®ue
()[dim];

534 
	gpoštIndex
++;

539 
	g¡d
::
of¡»am
 
fout
;

540 
	gfout
.
İ’
(
f’ame
);

542 if(
	gfout
) {

543 
	gi
 =0; i< 
	gX_m©rix
.
rows
();i++){

544 
	gj
=0; j< 
	gX_m©rix
.
cŞumns
(); j++){

545 
	gfout
<< 
	gX_m©rix
[
i
][
j
]<<" ";

547 
	gfout
<<
	g’dl
;

550 
	gcout
<<"SucûssfuÎy saved m©rixo: "<<
	gf’ame
<<
	g’dl
;

553 
	gû¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
	g’dl
;

555 
	gfout
.
şo£
();

562 
	g´oüu¡es
::
M©rixTy³
 
´oüu¡es
::
	$g‘Proüu¡esM—n
(){

564 
PoštsCÚš”Poš‹r
 
šputS»p
;

565 
PoštsI‹¿tÜ
 
²tIt
;

567 
M©rixTy³
 
´oüu¡esM—n
;

568 
´oüu¡esM—n
.
	`£t_size
(3,
this
->
poštsNum
);

571 
k
 = 0; k< 
this
->
¤•Nums
; k++){

572 
šputS»p
 = 
this
->
mesh_Xp
[
k
]->
	`G‘Pošts
();

574 
i
 =0;

575  
²tIt
 = 
šputS»p
->
	`Begš
();…ÁIˆ!ğšputS»p->
	`End
(); ++pntIt ) {

576  
dim
 = 0; dim < 3; dim++ ) {

577 
´oüu¡esM—n
[
dim
][
i
] +ğ
²tIt
.
	`V®ue
()[dim];

579 
i
++;

583 
j
=0; j<
this
->
poštsNum
; j++) {

584  
dim
 = 0; dim < 3; dim++ ) {

585 
´oüu¡esM—n
[
dim
][
j
] /ğ
this
->
¤•Nums
;

588 
´oüu¡esM—n
[
dim
][
j
] += 0.5;

592  
´oüu¡esM—n
;

593 
	}
}

	@procrustes.h

1 #iâdeà
PROCRUSTES_H


2 
	#PROCRUSTES_H


	)

4 
	~<veùÜ
>

5 
	~"®ign¤•.h
"

7 şas 
	c´oüu¡es


9 
	mpublic
:

10 
´oüu¡es
();

17 
	m™k
::
	tDeçuÉDyÇmicMeshT¿™s
<, 3, 3, , > 
	tMeshT¿™sTy³
;

18 
	m™k
::
	tMesh
<, 3, 
	tMeshT¿™sTy³
> 
	tMeshTy³
;

21 
	mMeshTy³
::
	tPoštsCÚš”
::
	tI‹¿tÜ
 
	tPoštsI‹¿tÜ
;

24 
	mMeshTy³
::
	tPoštsCÚš”
 
	tPoštsCÚš”Ty³
;

27 
	mMeshTy³
::
	tPoštsCÚš”Poš‹r
 PointsContainerPointer;

30 
	mMeshTy³
::
	tPoštTy³
 PointType;

33 
	mvÆ_m©rix
<> 
	tM©rixTy³
;

35 
	mMeshTy³
::
Poš‹r
 
OPA
(
MeshTy³
::Poš‹¸
MX
, MeshTy³::Poš‹¸
MY
);

36 
GPA
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
mesh_x_li¡
);

38 
M©rixTy³
 
g‘C’‹rOfMass
(M©rixTy³ 
¤•Pos
);

39 
M©rixTy³
 
ûÁ”ThisS»p
(M©rixTy³ 
X
, M©rixTy³ 
COM
);

40 
	mMeshTy³
::
Poš‹r
 
ÿlcuÏ‹M—n
(
veùÜ
<
MeshTy³
::Poš‹r> 
mesh_Xp
);

41 
g‘G
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
mesh_x_li¡
);

42 
g‘FroDi¡ªû
(
MeshTy³
::
Poš‹r
 
A
, MeshTy³::Poš‹¸
B
);

43 
	mveùÜ
<
	mMeshTy³
::
Poš‹r
> 
ûÁ”S»psToOrigš
(
veùÜ
<
MeshTy³
::Poš‹r> 
mesh_x_li¡
);

45 
	mveùÜ
<
	mMeshTy³
::
Poš‹r
> 
g‘T¿ns_X
();

46 
M©rixTy³
 
g‘T¿ns_RÙ
();

47 
g‘T¿ns_Sÿ
();

48 
M©rixTy³
 
g‘T¿ns_T¿
();

49 
§veMeshVeùÜ
(cÚ¡ * 
f’ame
, 
veùÜ
<
MeshTy³
::
Poš‹r
> 
X
);

50 
M©rixTy³
 
g‘Proüu¡esM—n
();

53 
	m´iv©e
:

54 
M©rixTy³
 
Œªs_T
;

55 
	mŒªs_sÿË
;

56 
M©rixTy³
 
	mŒªs_R
;

59 
	mveùÜ
<
	mMeshTy³
::
Poš‹r
> 
mesh_Xp
;

66 
	m¤•Nums
;

67 
	mpoštsNum
;

	@quadfigattribution.cpp

1 
	~"quadfig©ŒibutiÚ.h
"

3 
	gquadfig©ŒibutiÚ
::
	$quadfig©ŒibutiÚ
()

5 
	}
}

19 
quadfig©ŒibutiÚ
::
	$quadfig©ŒibutiÚ
(
M3DQuadFigu»
 *
quadFig
, 
š‹½Ş©iÚLev–
){

20 
this
->
quadFig
 = quadFig;

21 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

22 
	}
}

27 
	gquadfig©ŒibutiÚ
::
	$g‘RowNum
(){

28  
this
->
quadFig
->
	`g‘RowCouÁ
();

29 
	}
}

31 
	gquadfig©ŒibutiÚ
::
	$g‘CŞNum
(){

32  
this
->
quadFig
->
	`g‘CŞumnCouÁ
();

33 
	}
}

35 
	gquadfig©ŒibutiÚ
::
	$g‘Ex‹riÜAtomNum
(){

36  (
	`g‘RowNum
()+
	`g‘CŞNum
())*2 - 4;

37 
	}
}

39 
	gquadfig©ŒibutiÚ
::
	$g‘IÁ”iÜAtomNum
(){

40  
	`g‘RowNum
()*
	`g‘CŞNum
(è- 
	`g‘Ex‹riÜAtomNum
();

41 
	}
}

43 
	gquadfig©ŒibutiÚ
::
	$g‘S‹p
(){

44  
	`pow
(2.0, ()
this
->
š‹½Ş©iÚLev–
);

45 
	}
}

47 
	gquadfig©ŒibutiÚ
::
	$g‘SubQuadNum
(){

48  
	`pow
(()
	`g‘S‹p
(), 2.0);

49 
	}
}

51 
	gquadfig©ŒibutiÚ
::
	$g‘QuadNum
(){

52  (
	`g‘RowNum
()-1è* (
	`g‘CŞNum
()-1);

53 
	}
}

55 
	gquadfig©ŒibutiÚ
::
	$g‘SubQuadV”‹xNum
(){

56 
‹mp
 = 
	`g‘S‹p
() + 1;

58  
‹mp
*temp;

59 
	}
}

61 
M3DQuadFigu»
 * 
	gquadfig©ŒibutiÚ
::
	$g‘QuadFig
(){

62  
this
->
quadFig
;

63 
	}
}

65 
	gquadfig©ŒibutiÚ
::
	$g‘IÁ”pŞ©iÚLev–
(){

66  
this
->
š‹½Ş©iÚLev–
;

67 
	}
}

70 
	gquadfig©ŒibutiÚ
::
	$£tFigA‰ributiÚ
(
M3DQuadFigu»
 *
quadFig
, 
š‹½Ş©iÚLev–
){

71 
this
->
quadFig
 = quadFig;

72 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

73 
	}
}

77 
	gquadfig©ŒibutiÚ
::
	$g‘HÜEdgeNumOfSndSide
(){

78  (
	`g‘RowNum
()-1è* 
	`g‘CŞNum
();

79 
	}
}

81 
	gquadfig©ŒibutiÚ
::
	$g‘V”EdgeNumOfSndSide
(){

82  (
	`g‘CŞNum
()-1è* 
	`g‘RowNum
();

83 
	}
}

87 
	gquadfig©ŒibutiÚ
::
	$g‘BÙRigHÜPosIndex
(){

88  (
	`g‘S‹p
()+1)*getStep() - 1;

89 
	}
}

91 
	gquadfig©ŒibutiÚ
::
	$g‘BÙRigV”PosIndex
(){

92  
	`g‘SubQuadV”‹xNum
()-2;

93 
	}
}

	@quadfigattribution.h

1 #iâdeà
QUADFIGATTRIBUTION_H


2 
	#QUADFIGATTRIBUTION_H


	)

5 
	~"M3DQuadFigu».h
"

8 şas 
	cquadfig©ŒibutiÚ


10 
	mpublic
:

11 
quadfig©ŒibutiÚ
();

12 
quadfig©ŒibutiÚ
(
M3DQuadFigu»
 *
quadFig
);

13 
quadfig©ŒibutiÚ
(
M3DQuadFigu»
 *
quadFig
, 
š‹½Ş©iÚLev–
);

15 
g‘RowNum
();

16 
g‘CŞNum
();

17 
g‘Ex‹riÜAtomNum
();

18 
g‘IÁ”iÜAtomNum
();

20 
g‘S‹p
();

21 
g‘SubQuadNum
();

22 
g‘QuadNum
();

23 
g‘SubQuadV”‹xNum
();

24 
M3DQuadFigu»
 * 
g‘QuadFig
();

25 
g‘IÁ”pŞ©iÚLev–
();

28 
£tFigA‰ributiÚ
(
M3DQuadFigu»
 *
quadFig
, 
š‹½Ş©iÚLev–
);

30 
g‘HÜEdgeNumOfSndSide
();

31 
g‘V”EdgeNumOfSndSide
();

33 
g‘BÙRigHÜPosIndex
();

34 
g‘BÙRigV”PosIndex
();

38 
	m´iv©e
:

39 
M3DQuadFigu»
 *
quadFig
;

40 
	mš‹½Ş©iÚLev–
;

	@regularityentropy.cpp

9 
	~"»guÏr™y’Œİy.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

17 
	g»guÏr™y’Œİy
::
	$»guÏr™y’Œİy
()

19 
	}
}

30 
»guÏr™y’Œİy
::
	$ÿlcuÏ‹EÁrİy
(
M©rixTy³
 
ã©u»M©rix_A
, 
th»shŞd
){

32 
m
 = 
ã©u»M©rix_A
.
	`rows
();

33 
n
 = 
ã©u»M©rix_A
.
	`cŞumns
();

36 
rowM—n
[
m
];

37 
i
 =0; i< 
m
; i++){

38 
sumRow
 = 0;

39 
j
 =0; j< 
n
; j++){

40 
sumRow
 +ğ
ã©u»M©rix_A
[
i
][
j
];

42 
rowM—n
[
i
] = 
sumRow
/
n
;

46 
j
 =0; j< 
n
; j++){

47 
i
 =0; i< 
m
; i++){

48 
ã©u»M©rix_A
[
i
][
j
] -ğ
rowM—n
[i];

53 
M©rixTy³
 
covM©rix
 = (
ã©u»M©rix_A
 * f—tu»M©rix_A.
	`Œª¥o£
()è/ (
n
-1);

65 
veùÜ
<> 
sd
;

66 
sd
.
	`»size
(
m
);

67 
i
 =0; i< 
m
; i++){

68 
squ¬edSum
 =0;

69 
j
 =0; j< 
n
; j++){

70 
squ¬edSum
 +ğ
ã©u»M©rix_A
[
i
][
j
] * featureMatrix_A[i][j];

72 
sd
[
i
] = 
	`sq¹
(
squ¬edSum
 / (
n
-1));

77 
M©rixTy³
 
	`cÜM©rix
(
covM©rix
.
	`rows
(),covM©rix.
	`cŞumns
());

78 
i
 = 0; i < 
covM©rix
.
	`rows
(); i++){

79 
j
 =0; j< 
covM©rix
.
	`cŞumns
(); j++){

80 
cÜM©rix
[
i
][
j
] = 
covM©rix
[i][j]/(
sd
[i]*sd[j]);

85 
vÆ_symm‘ric_eig’sy¡em
<> 
	`eig
(
cÜM©rix
);

86 
vÆ_dŸg_m©rix
<> 
	`eig’V®ues
(
m
, m);

87 
eig’V®ues
 = 
eig
.
D
;

96 
sumEig
 = 0;

97 
i
 = 0; i< 
m
; i++){

98 
sumEig
 +ğ
	`eig’V®ues
(
i
,i);

101 
sumLogNubda
 = 0;

102 
couÁ”
 = 0;

103 
i
 = 0; i< 
m
; i++){

104 
cÚŒibu‹
 = 
	`eig’V®ues
(
i
,iè/ 
sumEig
;

105 if(
cÚŒibu‹
 > 
th»shŞd
) {

107 
sumLogNubda
 +ğ
	`log
(
	`eig’V®ues
(
i
,i));

109 
couÁ”
++;

113 
»gEÁrİy
 = 
sumLogNubda
*0.5 + 
couÁ”
 * 1.4189;

115  
»gEÁrİy
;

116 
	}
}

	@regularityentropy.h

1 #iâdeà
REGULARITYENTROPY_H


2 
	#REGULARITYENTROPY_H


	)

4 
	~<veùÜ
>

5 
	~"vÆ/®go/vÆ_symm‘ric_eig’sy¡em.h
"

6 
	~"™kM©rix.h
"

15 şas 
	c»guÏr™y’Œİy


17 
	mpublic
:

19 
vÆ_m©rix
<> 
	tM©rixTy³
;

22 
»guÏr™y’Œİy
();

24 
ÿlcuÏ‹EÁrİy
(
M©rixTy³
 
ã©u»M©rix_A
, 
th»shŞd
);

27 
	m´iv©e
:

	@samplesreppoints.cpp

1 
	~"§m¶e¤•pošts.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

5 
	g§m¶e¤•pošts
::
	$§m¶e¤•pošts
()

7 
	}
}

13 
M©rixTy³
 
§m¶e¤•pošts
::
	$§m¶ePoštsW™hR•—‹dSk–‘®
(
M3DQuadFigu»
* 
quadFig
){

15 
rowNum
 = 
quadFig
->
	`g‘RowCouÁ
();

16 
cŞNum
 = 
quadFig
->
	`g‘CŞumnCouÁ
();

17 
üe¡AtomNum
 = 
rowNum
*2 + 
cŞNum
*2 - 4;

18 
š‹riÜAtomNum
 = 
rowNum
*
cŞNum
 - 
üe¡AtomNum
;

20 
¥okeNum
 = 
š‹riÜAtomNum
*2 + 
üe¡AtomNum
*3;

21 
poštNum
 = 
¥okeNum
;

23 
M©rixTy³
 
	`pošts
(3, 
poštNum
);

25 
M3DQuadPrim™ive
* 
´im
;

26 
M3DQuadEndPrim™ive
* 
’dPrim
;

28 
VeùÜ3D
 
¥okeInfo
;

31 
poštIndex
 = 0;

32 
u
 = 0; u < 
rowNum
; u++){

33 
v
 = 0; v < 
cŞNum
; v++){

35 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
u
,
v
));

44 
¥okeInfo
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R0
()*´im->
	`g‘U0
();

45 
pošts
[0][
poštIndex
] = 
¥okeInfo
.
	`g‘X
();

46 
pošts
[1][
poštIndex
] = 
¥okeInfo
.
	`g‘Y
();

47 
pošts
[2][
poštIndex
] = 
¥okeInfo
.
	`g‘Z
();

48 
poštIndex
++;

57 
¥okeInfo
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R1
()*´im->
	`g‘U1
();

58 
pošts
[0][
poštIndex
] = 
¥okeInfo
.
	`g‘X
();

59 
pošts
[1][
poštIndex
] = 
¥okeInfo
.
	`g‘Y
();

60 
pošts
[2][
poštIndex
] = 
¥okeInfo
.
	`g‘Z
();

61 
poštIndex
++;

64 if(
u
==0 || u==
rowNum
-1 || 
v
==0 || v==
cŞNum
-1){

65 
’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
u
, 
v
));

73 
¥okeInfo
 = 
’dPrim
->
	`g‘X
(è+ƒndPrim->
	`g‘REnd
()*’dPrim->
	`g‘UEnd
();

74 
pošts
[0][
poštIndex
] = 
¥okeInfo
.
	`g‘X
();

75 
pošts
[1][
poštIndex
] = 
¥okeInfo
.
	`g‘Y
();

76 
pošts
[2][
poštIndex
] = 
¥okeInfo
.
	`g‘Z
();

77 
poštIndex
++;

82  
pošts
;

83 
	}
}

143 
	g§m¶e¤•pošts
::
§m¶eS»pPošts
(cÚ¡ * 
¤•FŞd”
, 
veùÜ
< 
¡d
::
¡ršg
 > 
f’ame
, cÚ¡ * 
ouutFŞd”
, cÚ¡ * 
cÛffFŞd”
,

144 
rowNum
, 
cŞNum
, 
ty³
, 
š‹½Ş©iÚLev–
){

145 
	güe¡AtomNum
 = 
rowNum
*2 + 
cŞNum
*2 - 4;

146 
	gš‹riÜAtomNum
 = 
rowNum
*
cŞNum
 - 
üe¡AtomNum
;

147 
	gv¬Snd
 = 
üe¡AtomNum
*1 - 4 + 
š‹riÜAtomNum
*2;

149 
	g¤•Num
 = 
f’ame
.
size
();

152 
	gveùÜ
<
	gvtkSm¬tPoš‹r
<
	gvtkPošts
> > 
	g§m¶edPošts
;

153 
	gi
 = 0; i < 
	g¤•Num
; i++){

154 
	gvtkSm¬tPoš‹r
<
	gvtkPošts
> 
	g‹mp
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

155 
	g§m¶edPošts
.
push_back
(
‹mp
);

159 
¡ršg
 
	gup_¡r_fe
, 
	gdown_¡r_fe
, 
	güe¡_¡r_fe
;

160 if(!
¡rcmp
 ( "0", 
cÛffFŞd”
)){

161 
	gup_¡r_fe
 = "0";

162 
	gdown_¡r_fe
 = "0";

163 
	güe¡_¡r_fe
 = "0";

167 
	gup_¡r_fe
 = 
¡ršg
(
cÛffFŞd”
) + "/up_str.txt";

168 
	gdown_¡r_fe
 = 
¡ršg
(
cÛffFŞd”
) + "/down_str.txt";

169 
	güe¡_¡r_fe
 = 
¡ršg
(
cÛffFŞd”
) + "/crest_str.txt";

173 
§m¶eShiáedS»p
(
¤•FŞd”
, 
f’ame
, 0, 
up_¡r_fe
, 
v¬Snd
, 
§m¶edPošts
, 
ty³
, 
š‹½Ş©iÚLev–
);

174 
§m¶eShiáedS»p
(
¤•FŞd”
, 
f’ame
, 1, 
down_¡r_fe
, 
v¬Snd
, 
§m¶edPošts
, 
ty³
, 
š‹½Ş©iÚLev–
);

175 
§m¶eShiáedS»p
(
¤•FŞd”
, 
f’ame
, 2, 
üe¡_¡r_fe
, 
üe¡AtomNum
, 
§m¶edPošts
, 
ty³
, 
š‹½Ş©iÚLev–
);

178 
	gi
 = 0; i < 
	g¤•Num
; i++){

179 
¡ršg
 
	gbâame
 = 
s
.
g‘Ba£FeName
(
f’ame
[
i
]);

180 
¡ršg
 
	gouutFe
 = 
¡d
::¡ršg(
ouutFŞd”
è+ 
bâame
 + ".vtk";

183 
§veVtkPoštsToVTK
(
§m¶edPošts
[
i
], 
ouutFe
);

184 
	gcout
<<"----Fšish savšgh"<<
	gi
<<"th s»p' o: "<<
	gouutFe
<<
	g’dl
;

197 
	g§m¶e¤•pošts
::
§m¶eShiáedS»p
(cÚ¡ * 
¤•FŞd”
, 
veùÜ
< 
¡d
::
¡ršg
 > 
f’ame
, 
side
, sŒšg 
v¬s_¡r_fe
, 
v¬Nums
,

198 
veùÜ
<
vtkSm¬tPoš‹r
<
vtkPošts
> > &
§m¶edPošts
,
ty³
, 
š‹½Ş©iÚLev–
){

200 if(!
¡rcmp
 ( "0", 
v¬s_¡r_fe
.
c_¡r
())){

201 
	gveùÜ
<> 
	gv¬s
;

203 
	gi
 =0 ; i < 
	gv¬Nums
; i++){

204 
	gv¬s
.
push_back
(0);

207 
	gq
 = 0; q < 
	gf’ame
.
size
(); q++){

209 
¡ršg
 
	gâ
 = sŒšg(
¤•FŞd”
è+ 
f’ame
[
q
];

210 
M3DQuadFigu»
* 
	gquadfig
 = 
s
.
G‘QuadFigu»
(
â
.
c_¡r
());

213 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	gsurçûPos
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

214 
g‘SurçûPošts
(
quadfig
, 
side
, 
v¬s
, 
v¬Nums
, 
surçûPos
, 
ty³
, 
š‹½Ş©iÚLev–
);

217 
	gm
 = 0; m < 
	gsurçûPos
->
G‘Numb”OfPošts
(); m++){

218 
	gp
[3];

219 
	gsurçûPos
->
G‘Pošt
(
m
, 
p
);

220 
	g§m¶edPošts
[
q
]->
In£¹NextPošt
(
p
[0],…[1],…[2]);

228 
if¡»am
 
ss
(
v¬s_¡r_fe
.
c_¡r
());

230 ià(! 
	gss
.
is_İ’
()){

231 
	g¡d
::
û¼
 << "Msg from sam¶e¤•pošts::§m¶eShiáedS»p: UÇbËØİ’ sh­li¡ \"" << 
v¬s_¡r_fe
 << "\"!" << 
¡d
::
’dl
;

232 
	gEXIT_FAILURE
;

235 
	gveùÜ
<> 
	gv¬s
;

237 
	gq
 = 0; q < 
	gf’ame
.
size
(); q++){

239 
¡ršg
 
	gâ
 = sŒšg(
¤•FŞd”
è+ 
f’ame
[
q
];

240 
M3DQuadFigu»
* 
	gquadfig
 = 
s
.
G‘QuadFigu»
(
â
.
c_¡r
());

243 
¡ršg
 
	gtok’
;

244 
	gi
 = 0;

245 
	gi
 < 
	gv¬Nums
) {

246 
	gss
 >> 
	gtok’
;

247 
	gv¬s
.
push_back
(
©of
(
tok’
.
c_¡r
()));

248 
	gi
++;

253 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	gsurçûPos
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

254 
g‘SurçûPošts
(
quadfig
, 
side
, 
v¬s
, 
v¬Nums
, 
surçûPos
, 
ty³
, 
š‹½Ş©iÚLev–
);

257 
	gv¬s
.
ş—r
();

260 
	gm
 = 0; m < 
	gsurçûPos
->
G‘Numb”OfPošts
(); m++){

261 
	gp
[3];

262 
	gsurçûPos
->
G‘Pošt
(
m
, 
p
);

263 
	g§m¶edPošts
[
q
]->
In£¹NextPošt
(
p
[0],…[1],…[2]);

273 
	g§m¶e¤•pošts
::
g‘SurçûPošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
veùÜ
<> 
v¬s
, 
v¬Nums
,

274 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
, 
ty³
, 
š‹½Ş©iÚLev–
){

275 
	growNum
 = 
quadFig
->
g‘RowCouÁ
();

276 
	gcŞNum
 = 
quadFig
->
g‘CŞumnCouÁ
();

278 *
	gcÛff
 = 
Ãw
 [
v¬Nums
];

279 
	gi
 = 0; i < 
	gv¬Nums
; i++){

280 
	gcÛff
[
i
] = 
v¬s
[i];

283 
M3DQuadFigu»
* 
	g‹mpQuadFig
 = 
dyÇmic_ÿ¡
<M3DQuadFigu»*>(
quadFig
->
şÚe
());

285 
	gside
){

289 
¦ide¡ªd¬d¥okes
 
mSnd¬dSpoke
;

291 
	gmSnd¬dSpoke
.
upd©eSpokeInfo
(
‹mpQuadFig
, 
cÛff
, 
side
);

296 
¦ideüe¡¥okes
 
mC»¡Spoke
;

298 
visu®izeüe¡
 
	gvüe¡
;

299 
	gvtkSm¬tPoš‹r
<
	gvtkSR•
> 
	g¤•Fig
 = 
vüe¡
.
g‘S»pFig
(
‹mpQuadFig
);

300 
	gmC»¡Spoke
.
upd©eC»¡SpokeInfo
(
¤•Fig
, 
‹mpQuadFig
, 
cÛff
);

305 
g‘S»pPošts
(
‹mpQuadFig
, 
side
, 
surçûPos
, 
ty³
, 
š‹½Ş©iÚLev–
);

307 
d–‘e
 
	gcÛff
;

314 
	g§m¶e¤•pošts
::
g‘S»pPošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
, 
ty³
, 
š‹½Ş©iÚLev–
){

315 if(
	gside
 == 2){

317 
g‘C»¡SidePošts
(
quadFig
, 
surçûPos
, 
š‹½Ş©iÚLev–
,
ty³
);

319 if(
	gside
 =ğ0 || 
side
==1){

321 
g‘UpOrDownSidePošts
(
quadFig
, 
surçûPos
, 
š‹½Ş©iÚLev–
, 
side
, 
ty³
);

324 
	gcout
<<"Mes§gäom sam¶e¤•pošts::g‘SurçûPošts:: Invad sidty³!!"<<
	g’dl
;

325 
ex™
(1);

332 
	g§m¶e¤•pošts
::
g‘UpOrDownSidePošts
(
M3DQuadFigu»
* 
quadFig
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pos
, 
š‹½Ş©iÚLev–
, 
side
,

333 
ty³
){

334 
	growNums
 = 
quadFig
->
g‘RowCouÁ
();

335 
	gcŞNums
 = 
quadFig
->
g‘CŞumnCouÁ
();

336 
	g¡•
 = 
pow
(()2, ()
š‹½Ş©iÚLev–
);

339 
	gveùÜ
<> 
	gš‹½Ş©edU
;

340 
	gveùÜ
<> 
	gš‹½Ş©edV
;

341 
	gs
.
g‘UVCoÜdš©e
(
š‹½Ş©edU
, 
š‹½Ş©edV
, 
rowNums
, 
cŞNums
, 
¡•
);

344 
M3DQuadIÁ”pŞ©”
 *
	gm
 = 
Ãw
 M3DQuadIÁ”pŞ©”(
quadFig
);

345 
VeùÜ3D
 
	gpošt
;

346 
	gi
 = 0; i < 
	gš‹½Ş©edU
.
size
(); i++){

347 if(
	gty³
==1 || 
ty³
==5) {

348 
pošt
 = 
m
->
š‹½Ş©eQuadSpoke
(
quadFig
,
š‹½Ş©edU
[
i
],
š‹½Ş©edV
[i], 
side
)->
g‘X
();

349 
	gpos
->
In£¹NextPošt
(
pošt
.
g‘X
(),pošt.
g‘Y
(),pošt.
g‘Z
());

351 if(
	gty³
==3 || 
ty³
==5) {

352 
pošt
 = 
m
->
š‹½Ş©eQuadSpoke
(
quadFig
,
š‹½Ş©edU
[
i
],
š‹½Ş©edV
[i], 
side
)->
g‘B
();

353 
	gpos
->
In£¹NextPošt
(
pošt
.
g‘X
(),pošt.
g‘Y
(),pošt.
g‘Z
());

357 
d–‘e
 
	gm
;

362 
	g§m¶e¤•pošts
::
g‘C»¡SidePošts
(
M3DQuadFigu»
* 
quadFig
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pos
, 
š‹½Ş©iÚLev–
, 
ty³
){

365 
	gvtkSm¬tPoš‹r
<
	gvtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
	gš‹½Ş©eüe¡¥okes
 = 
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
>::
New
();

366 
visu®izeüe¡
 
	gvisC»¡
;

367 
	gvtkSm¬tPoš‹r
<
	gvtkSR•
> 
	g¤•fig
 = 
visC»¡
.
g‘S»pFig
(
quadFig
);

368 
	gš‹½Ş©eüe¡¥okes
->
S‘IÅut
(
¤•fig
);

369 
	gš‹½Ş©eüe¡¥okes
->
S‘IÁ”pŞ©iÚLev–
(
š‹½Ş©iÚLev–
);

370 
	gš‹½Ş©eüe¡¥okes
->
Upd©e
();

372 
	growNums
 = 
quadFig
->
g‘RowCouÁ
();

373 
	gcŞNums
 = 
quadFig
->
g‘CŞumnCouÁ
();

374 
	güe¡QuadNum
 = 
rowNums
*2 + (
cŞNums
-2)*2;

375 
	g¡•
 = 
pow
(()2, ()
š‹½Ş©iÚLev–
);

377 
	gveùÜ
<> 
	gsubpošts
;

380 
	gs
.
¥l™Lše
(0,1,
¡•
, 
subpošts
);

384 
	gi
 = 0; i< 
	güe¡QuadNum
; i++){

385 
	gm
 = 0; m < 
	gsubpošts
.
size
()-1; m++){

387 
	gvtkSR•
::
VNLTy³
 
s1
 = 
š‹½Ş©eüe¡¥okes
->
G‘IÁ”pŞ©edPošt
(
i
,
subpošts
[
m
]);

390 if(
	gty³
==1 || 
ty³
==5) {

391 
pos
->
In£¹NextPošt
(
s1
[0], s1[1], s1[2]);

395 if(
	gty³
==3 || 
ty³
==5) {

396 if(
š‹½Ş©iÚLev–
==0){

398 
vtkSR•
::
VNLTy³
 
p0
 = 
š‹½Ş©eüe¡¥okes
->
G‘IÁ”pŞ©edSpoke
(
i
,
subpošts
[
m
],0.5);

399 
	gpos
->
In£¹NextPošt
(
s1
[0] + 
p0
[0], s1[1] +…0[1], s1[2] +…0[2]);

402 
	gn
 = 0;‚ < 
	gsubpošts
.
size
();‚++){

404 
	gvtkSR•
::
VNLTy³
 
p0
 = 
š‹½Ş©eüe¡¥okes
->
G‘IÁ”pŞ©edSpoke
(
i
,
subpošts
[
m
],subpošts[
n
]);

405 
	gpos
->
In£¹NextPošt
(
s1
[0] + 
p0
[0], s1[1] +…0[1], s1[2] +…0[2]);

417 
	g§m¶e¤•pošts
::
§veToText
(
veùÜ
<
M©rixTy³
> 
d©a
, cÚ¡ * 
f’ame
){

418 
	g¡d
::
of¡»am
 
fout
;

419 
	gfout
.
İ’
(
f’ame
);

421 if(
	gfout
) {

422 
	gi
 =0; i< 
	gd©a
.
size
();i++){

423 
M©rixTy³
 
	gX
 = 
d©a
[
i
];

424 
	gc
 = 0; c < 
	gX
.
cŞumns
(); c++){

425 
	gr
 = 0;„ < 3;„++){

426 
	gfout
<< 
	gX
[
r
][
c
] <<" ";

429 
	gfout
<<
	g’dl
;

432 
	gcout
<<"SucûssfuÎy saved d©¨to: "<<
	gf’ame
<<
	g’dl
;

435 
	gû¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
	g’dl
;

437 
	gfout
.
şo£
();

446 
	g§m¶e¤•pošts
::
	$§veToVTK
(
M©rixTy³
 
X
, 
¡ršg
 
ouutFe
){

449 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyD©a
 = vtkSm¬tPoš‹r<vtkPŞyD©a>::
	`New
();

450 
vtkSm¬tPoš‹r
<
vtkPošts
> 
pošts
 = vtkSm¬tPoš‹r<vtkPošts>::
	`New
();

452 
c
 = 0; c < 
X
.
	`cŞumns
(); c++){

453 
pošts
->
	`In£¹NextPošt
(
X
[0][
c
], X[1][c], X[2][c]);

456 
pŞyD©a
->
	`S‘Pošts
(
pošts
);

457 
vtkSm¬tPoš‹r
<
vtkPŞyD©aWr™”
> 
pŞyD©aWr™”
 = vtkSm¬tPoš‹r<vtkPŞyD©aWr™”>::
	`New
();

458 
pŞyD©aWr™”
->
	`S‘IÅut
(
pŞyD©a
);

460 
pŞyD©aWr™”
->
	`S‘FeName
(
ouutFe
.
	`c_¡r
());

461 
pŞyD©aWr™”
->
	`Upd©e
();

462 
	}
}

466 
	g§m¶e¤•pošts
::
§veVtkPoštsVeùÜToText
(
veùÜ
<
vtkSm¬tPoš‹r
<
vtkPošts
> > 
d©a
, cÚ¡ * 
f’ame
){

467 
	g¡d
::
of¡»am
 
fout
;

468 
	gfout
.
İ’
(
f’ame
);

470 if(
	gfout
) {

472 
	gi
 = 0; i < 
	gd©a
.
size
();i++){

473 
	gvtkSm¬tPoš‹r
<
	gvtkPošts
> 
	gpošts
 = 
d©a
[
i
];

475 
	gj
 = 0; j < 
	gpošts
->
G‘Numb”OfPošts
(); j++){

476 
	gp
[3];

477 
	gpošts
->
G‘Pošt
(
j
, 
p
);

478 
	gfout
 << 
	gp
[0] << " " <<…[1]<<" " <<…[2] << " ";

480 
	gfout
<<
	g’dl
;

483 
	gcout
<<"SucûssfuÎy saved d©¨to: "<<
	gf’ame
<<
	g’dl
;

486 
	gû¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
	g’dl
;

488 
	gfout
.
şo£
();

495 
	g§m¶e¤•pošts
::
§veVtkPoštsToVTK
(
vtkSm¬tPoš‹r
<
vtkPošts
> 
pošts
, 
¡ršg
 
ouutFe
){

498 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyD©a
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

500 
	gpŞyD©a
->
S‘Pošts
(
pošts
);

501 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aWr™”
> 
	gpŞyD©aWr™”
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aWr™”
>::
New
();

502 
	gpŞyD©aWr™”
->
S‘IÅut
(
pŞyD©a
);

504 
	gpŞyD©aWr™”
->
S‘FeName
(
ouutFe
.
c_¡r
());

505 
	gpŞyD©aWr™”
->
Upd©e
();

	@samplesreppoints.h

1 #iâdeà
SAMPLESREPPOINTS_H


2 
	#SAMPLESREPPOINTS_H


	)

5 
	~"toŞsfunc.h
"

7 
	~<vtkPŞyD©aWr™”.h
>

8 
	~<vtkPŞyD©aR—d”.h
>

9 
	~"vtkPŞyD©a.h
"

11 
	~"¦ide¡ªd¬d¥okes.h
"

12 
	~"¦ideüe¡¥okes.h
"

13 
	~"visu®izeüe¡.h
"

16 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

20 şas 
	c§m¶e¤•pošts


22 
	mpublic
:

23 
§m¶e¤•pošts
();

26 
M©rixTy³
 
§m¶ePoštsW™hR•—‹dSk–‘®
(
M3DQuadFigu»
* 
quadFig
);

28 
§veToVTK
(
M©rixTy³
 
X
, 
¡ršg
 
ouutFe
);

30 
§m¶eS»pPošts
(cÚ¡ * 
¤•FŞd”
, 
veùÜ
< 
¡d
::
¡ršg
 > 
f’ame
, cÚ¡ * 
ouutFŞd”
, cÚ¡ * 
cÛffFŞd”
, 
rowNum
,

31 
cŞNum
, 
ty³
, 
š‹½Ş©iÚLev–
);

32 
§m¶eShiáedS»p
(cÚ¡ * 
¤•FŞd”
, 
veùÜ
< 
¡d
::
¡ršg
 > 
f’ame
, 
side
, sŒšg 
v¬s_¡r_fe
, 
v¬Nums
,

33 
veùÜ
<
vtkSm¬tPoš‹r
<
vtkPošts
> > &
§m¶edPošts
,
ty³
, 
š‹½Ş©iÚLev–
);

34 
g‘SurçûPošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
veùÜ
<> 
v¬s
, 
v¬Nums
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
, 
ty³
,

35 
š‹½Ş©iÚLev–
);

36 
g‘S»pPošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
, 
ty³
, 
š‹½Ş©iÚLev–
);

38 
§veToText
(
veùÜ
<
M©rixTy³
> 
d©a
, cÚ¡ * 
f’ame
);

40 
g‘UpOrDownSidePošts
(
M3DQuadFigu»
* 
quadFig
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pos
, 
š‹½Ş©iÚLev–
, 
side
, 
ty³
);

41 
g‘C»¡SidePošts
(
M3DQuadFigu»
* 
quadFig
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pos
, 
š‹½Ş©iÚLev–
, 
ty³
);

43 
§veVtkPoštsToVTK
(
vtkSm¬tPoš‹r
<
vtkPošts
> 
pošts
, 
¡ršg
 
ouutFe
);

44 
§veVtkPoštsVeùÜToText
(
veùÜ
<
vtkSm¬tPoš‹r
<
vtkPošts
> > 
d©a
, cÚ¡ * 
f’ame
);

46 
	m´iv©e
:

47 
toŞsfunc
 
s
;

	@shiftedsrep.cpp

1 
	~"shiáed¤•.h
"

4 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

6 
	gshiáed¤•
::
	$shiáed¤•
()

8 
	}
}

10 
shiáed¤•
::shiáed¤•(cÚ¡ * 
roÙDœ
, 
veùÜ
< 
¡d
::
¡ršg
 > 
¤•Names
, 
rX
, 
rY
, 
rZ
, 
İac™y
)

12 
	gthis
->
	groÙDœ
 = 
roÙDœ
;

13 
	gthis
->
	g¤•Names
 = 
¤•Names
;

15 
	gthis
->
	güe¡AtomNum
 = 
rowNum
 * 2 + 
cŞNum
 * 2 - 4;

16 
	gthis
->
	gš‹riÜAtomNum
 = 
rowNum
 * 
cŞNum
 - 
this
->
üe¡AtomNum
;

17 
	gthis
->
	gv¬Snd
 = 
this
->
üe¡AtomNum
 * 1 - 4 +his->
š‹riÜAtomNum
 * 2;

19 
	gthis
->
	grX
 = 
rX
;

20 
	gthis
->
	grY
 = 
rY
;

21 
	gthis
->
	grZ
 = 
rZ
;

22 
	gthis
->
	gİac™y
 = 
İac™y
;

24 
	gthis
->
	g¤•Num
 = 
¤•Names
.
size
();

27 
»adT¿ššgS»ps
();

31 
	gshiáed¤•
::
	$shiáed¤•
(
rX
, 
rY
, 
rZ
, 
İac™y
){

32 
this
->
rX
 =„X;

33 
this
->
rY
 =„Y;

34 
this
->
rZ
 =„Z;

35 
this
->
İac™y
 = opacity;

36 
	}
}

41 
	gshiáed¤•
::
	$compu‹M—nFig
(
¡ršg
 
up_¡r
, sŒšg 
down_¡r
, sŒšg 
üe¡_¡r
){

44 
	`compu‹M—nSide
(
up_¡r
, 0, 
this
->
v¬Snd
);

45 
	`compu‹M—nSide
(
down_¡r
, 1, 
this
->
v¬Snd
);

46 
	`compu‹M—nSide
(
üe¡_¡r
, 2, 
this
->
üe¡AtomNum
);

47 
	}
}

53 
	gshiáed¤•
::
	$compu‹M—nSide
(
¡ršg
 
v¬s_¡r
, 
side
, 
v¬Nums
){

54 
¡ršg¡»am
 
	`ss
(
v¬s_¡r
);

57 
¤•Num
 = 
this
->
quadFigLi¡
.
	`size
();

58 
veùÜ
<
M©rixTy³
> 
bound¬yPošts
, 
sk–‘®Pošts
;

59 
veùÜ
<> 
v¬s
;

61 
q
 = 0; q < 
¤•Num
; q++){

63 
¡ršg
 
tok’
;

64 
i
 = 0;

65 
i
 < 
v¬Nums
) {

66 
ss
 >> 
tok’
;

67 
v¬s
.
	`push_back
(
	`©of
(
tok’
.
	`c_¡r
()));

69 
i
++;

72 
	`g‘Pošts
(
this
->
quadFigLi¡
[
q
], 
side
, 
v¬s
, 
v¬Nums
, 
bound¬yPošts
, 
sk–‘®Pošts
);

75 
v¬s
.
	`ş—r
();

79 
poštsNum
 = 
bound¬yPošts
[0].
	`cŞumns
();

81 
M©rixTy³
 
	`m—n_bpos
(3,
poštsNum
);

82 
M©rixTy³
 
	`m—n_¥os
(3,
poštsNum
);

83 
m—n_bpos
 = 
	`m—nSidePoštPaœ
(
bound¬yPošts
);

84 
m—n_¥os
 = 
	`m—nSidePoštPaœ
(
sk–‘®Pošts
);

87 
	`m—nSide
(
m—n_bpos
, 
m—n_¥os
, 
side
);

88 
	}
}

94 
M©rixTy³
 
	gshiáed¤•
::
m—nSidePoštPaœ
(
veùÜ
<M©rixTy³> 
pošts
){

95 
¤•Num
 = 
pošts
.
size
();

96 
	gpoštsNum
 = 
pošts
[0].
cŞumns
();

97 
M©rixTy³
 
m—n
(3,
poštsNum
);

98 
	gm—n
.
fl
(0);

101 
	gk
 = 0; k< 
	g¤•Num
; k++){

102 
M©rixTy³
 
	gX
 = 
pošts
[
k
];

105 
	gm
 = 0; m< 
	gpoštsNum
; m++){

106 
	gdim
=0; dim<3; dim++){

107 
	gm—n
[
dim
][
m
] +ğ
X
[dim][m];

113 
	gm
 = 0; m < 
	gpoštsNum
; m++){

114 
	gdim
 = 0; dim < 3; dim++){

115 
	gm—n
[
dim
][
m
] /ğ
¤•Num
;

119  
	gm—n
;

128 
	gshiáed¤•
::
	$m—nSide
(
M©rixTy³
 
m—n_bpos
, M©rixTy³ 
m—n_¥os
, 
side
){

130 
M3DQuadFigu»
* 
‹mpFig
 = 
this
->
quadFigLi¡
[0];

132 
M©rixTy³
 
¥okeVeùÜ
 = 
m—n_bpos
 - 
m—n_¥os
;

135 
side
){

140 
M3DQuadPrim™ive
* 
´im
;

142 
©omIndex
 = 0;

143 
u
 = 0; u<
rowNum
; u++){

144 
v
 = 0; v<
cŞNum
; v++){

145 
´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
‹mpFig
->
	`g‘Prim™ivePŒ
(
u
,
v
));

148 
´im
->
	`£tX
(
m—n_¥os
[0][
©omIndex
], mean_spos[1][atomIndex],mean_spos[2][atomIndex]);

151 
¥okeRadiu
=0;

152 
dim
=0; dim<3; dim++){

153 
¥okeRadiu
 +ğ
¥okeVeùÜ
[
dim
][
©omIndex
] * spokeVector[dim][atomIndex];

157 
sq¹Radiu
 = 
	`sq¹
(
¥okeRadiu
);

158 
VeùÜ3D
 
¥okeDœeùiÚ
;

159 
¥okeDœeùiÚ
.
	`£tX
(
¥okeVeùÜ
[0][
©omIndex
] / 
sq¹Radiu
);

160 
¥okeDœeùiÚ
.
	`£tY
(
¥okeVeùÜ
[1][
©omIndex
] / 
sq¹Radiu
);

161 
¥okeDœeùiÚ
.
	`£tZ
(
¥okeVeùÜ
[2][
©omIndex
] / 
sq¹Radiu
);

163 if(
side
 == 1){

164 
´im
->
	`£tR1
(
sq¹Radiu
);

165 
´im
->
	`£tU1
(
¥okeDœeùiÚ
);

168 
´im
->
	`£tR0
(
sq¹Radiu
);

169 
´im
->
	`£tU0
(
¥okeDœeùiÚ
);

172 
©omIndex
++;

176 if(
side
 == 1)

177 
this
->
downM—nQuadFig
 = 
‹mpFig
;

179 
this
->
upM—nQuadFig
 = 
‹mpFig
;

185 
©omIndex
 = 0;

186 
M3DQuadEndPrim™ive
* 
´imEnd
;

187 
u
=0; u< 
rowNum
; u++){

188 
v
=0; v< 
cŞNum
; v++){

190 if(
u
==0 || u==(
rowNum
-1è|| 
v
==0 || v==(
cŞNum
-1)){

192 
´imEnd
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
‹mpFig
->
	`g‘Prim™ivePŒ
(
u
,
v
));

194 if(!
´imEnd
){

195 
cout
<<"Mes§gäom: shiáed¤•::g‘Pošts::h´imEnd…oš‹¸pošˆi NULL!! EXIT_FAILURE!!"<<
’dl
;

196 
	`ex™
(1);

200 
´imEnd
->
	`£tX
(
m—n_¥os
[0][
©omIndex
], mean_spos[1][atomIndex],mean_spos[2][atomIndex]);

203 
¥okeRadiu
=0;

204 
dim
=0; dim<3; dim++){

205 
¥okeRadiu
 +ğ
¥okeVeùÜ
[
dim
][
©omIndex
] * spokeVector[dim][atomIndex];

209 
sq¹Radiu
 = 
	`sq¹
(
¥okeRadiu
);

210 
VeùÜ3D
 
¥okeDœeùiÚ
;

211 
¥okeDœeùiÚ
.
	`£tX
(
¥okeVeùÜ
[0][
©omIndex
] / 
sq¹Radiu
);

212 
¥okeDœeùiÚ
.
	`£tY
(
¥okeVeùÜ
[1][
©omIndex
] / 
sq¹Radiu
);

213 
¥okeDœeùiÚ
.
	`£tZ
(
¥okeVeùÜ
[2][
©omIndex
] / 
sq¹Radiu
);

215 
´imEnd
->
	`£tREnd
(
sq¹Radiu
);

216 
´imEnd
->
	`£tUEnd
(
¥okeDœeùiÚ
);

218 
©omIndex
++;

223 
this
->
üe¡M—nQuadFig
 = 
‹mpFig
;

228 
	}
}

232 
	gshiáed¤•
::
	$»adT¿ššgS»ps
(){

233 
cout
<<"-------------IÅuˆ: "<<
this
->
¤•Names
.
	`size
()<<"¤•s."<<
’dl
;

234 
q
 = 0; q < 
this
->
¤•Names
.
	`size
(); q++){

236 
¡ršg
 
f’ame
 = 
this
->
roÙDœ
 + 
	`¡ršg
("/mod–s/compu‹_m—n/"è+his->
¤•Names
[
q
];

238 
M3DQuadFigu»
* 
qFig
 = 
this
->
s
.
	`G‘QuadFigu»
(
f’ame
.
	`c_¡r
());

239 
this
->
quadFigLi¡
.
	`push_back
(
qFig
);

241 
	}
}

247 
	gshiáed¤•
::
g‘Pošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
veùÜ
<> 
v¬s
, 
v¬Nums
, veùÜ<
M©rixTy³
> &
bound¬yPos
,

248 
veùÜ
<
M©rixTy³
> &
sk–‘®Pos
){

250 *
	gcÛff
 = 
Ãw
 [
v¬Nums
];

251 
	gi
 = 0; i < 
	gv¬Nums
; i++){

252 
	gcÛff
[
i
] = 
v¬s
[i];

255 
M3DQuadFigu»
* 
	g‹mpQuadFig
 = 
dyÇmic_ÿ¡
<M3DQuadFigu»*>(
quadFig
->
şÚe
());

257 
	gside
){

261 
©omNum
 = 
this
->
üe¡AtomNum
 +his->
š‹riÜAtomNum
;

262 
M©rixTy³
 
bp
(3, 
©omNum
);

263 
M©rixTy³
 
¥
(3, 
©omNum
);

265 
¦ide¡ªd¬d¥okes
 
	gmSnd¬dSpoke
;

267 
	gmSnd¬dSpoke
.
upd©eSpokeInfo
(
‹mpQuadFig
, 
cÛff
, 
side
);

270 
M3DQuadPrim™ive
* 
	g´im
;

272 
	g©omIndex
 = 0;

273 
	gu
 = 0; u<
	growNum
; u++){

274 
	gv
 = 0; v<
	gcŞNum
; v++){

275 
	g´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
‹mpQuadFig
->
g‘Prim™ivePŒ
(
u
,
v
));

278 
VeùÜ3D
 
	gpošt
 = 
´im
->
g‘X
();

279 
	g¥
[0][
©omIndex
] = 
pošt
.
g‘X
();

280 
	g¥
[1][
©omIndex
] = 
pošt
.
g‘Y
();

281 
	g¥
[2][
©omIndex
] = 
pošt
.
g‘Z
();

284 if(
	gside
==1){

285 
pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R1
()*´im->
g‘U1
();

288 
	gpošt
 = 
´im
->
g‘X
(è+…rim->
g‘R0
()*´im->
g‘U0
();

290 
	gbp
[0][
©omIndex
] = 
pošt
.
g‘X
();

291 
	gbp
[1][
©omIndex
] = 
pošt
.
g‘Y
();

292 
	gbp
[2][
©omIndex
] = 
pošt
.
g‘Z
();

294 
	g©omIndex
++;

298 
	gbound¬yPos
.
push_back
(
bp
);

299 
	gsk–‘®Pos
.
push_back
(
¥
);

304 
M©rixTy³
 
bp
(3, 
this
->
üe¡AtomNum
);

305 
M©rixTy³
 
¥
(3, 
this
->
üe¡AtomNum
);

307 
¦ideüe¡¥okes
 
	gmC»¡Spoke
;

309 
visu®izeüe¡
 
	gvüe¡
;

310 
	gvtkSm¬tPoš‹r
<
	gvtkSR•
> 
	g¤•Fig
 = 
vüe¡
.
g‘S»pFig
(
‹mpQuadFig
);

311 
	gmC»¡Spoke
.
upd©eC»¡SpokeInfo
(
¤•Fig
, 
‹mpQuadFig
, 
cÛff
);

314 
	g©omIndex
 = 0;

315 
M3DQuadEndPrim™ive
* 
	g´imEnd
;

316 
	gu
=0; u< 
	growNum
; u++){

317 
	gv
=0; v< 
	gcŞNum
; v++){

319 if(
	gu
==0 || 
u
==(
rowNum
-1è|| 
v
==0 || v==(
cŞNum
-1)){

321 
´imEnd
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
‹mpQuadFig
->
g‘Prim™ivePŒ
(
u
,
v
));

323 if(!
	g´imEnd
){

324 
	gcout
<<"Mes§gäom: shiáed¤•::g‘Pošts::h´imEnd…oš‹¸pošˆi NULL!! EXIT_FAILURE!!"<<
	g’dl
;

325 
ex™
(1);

329 
VeùÜ3D
 
	gpošt
 = 
´imEnd
->
g‘X
(è+…rimEnd->
g‘REnd
()*´imEnd->
g‘UEnd
();

330 
	gbp
[0][
©omIndex
] = 
pošt
.
g‘X
();

331 
	gbp
[1][
©omIndex
] = 
pošt
.
g‘Y
();

332 
	gbp
[2][
©omIndex
] = 
pošt
.
g‘Z
();

335 
	gpošt
 = 
´imEnd
->
g‘X
();

336 
	g¥
[0][
©omIndex
] = 
pošt
.
g‘X
();

337 
	g¥
[1][
©omIndex
] = 
pošt
.
g‘Y
();

338 
	g¥
[2][
©omIndex
] = 
pošt
.
g‘Z
();

340 
	g©omIndex
++;

344 
	gbound¬yPos
.
push_back
(
bp
);

345 
	gsk–‘®Pos
.
push_back
(
¥
);

350 
d–‘e
 
	gcÛff
;

355 
	gshiáed¤•
::
	$d¿wM—nS»p
(){

357 
	}
}

362 
shiáed¤•
::
d¿wSpokes
(
boŞ
 
showup
, boŞ 
showdown
, boŞ 
showüe¡
, 
š‹½Ş©iÚLev–
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
){

364 
visu®ize¤•surçû
 
vss
(
this
->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

365 
	gquadNum
 = (
rowNum
-1)*(
cŞNum
-1);

366 
	g¡•
 = 
pow
(()2, ()
š‹½Ş©iÚLev–
);

367 
	gsubQuadPoštsNum
 = (
¡•
+1)*(step+1);

370 
VeùÜQuadPošt
 
	gš‹½Ş©edU
;

371 
VeùÜQuadPošt
 
	gš‹½Ş©edV
;

372 
	gvss
.
g‘IÁ”pŞ©eUVCoÜdš©e
(
š‹½Ş©edU
, 
š‹½Ş©edV
, 
rowNum
 , 
cŞNum
, 
¡•
);

374 if(
	gshowup
){

375 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos_medŸlsh“t
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

378 
M3DQuadIÁ”pŞ©”
 *
	gm
 = 
Ãw
 M3DQuadIÁ”pŞ©”(
this
->
upM—nQuadFig
);

379 
VeùÜ3D
 
	gpošt_s
, 
	gpošt_b
;

381 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ypošt¦še_up
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

382 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos_up
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

383 
	gi
 = 0; i < 
	gquadNum
; i++){

384 
	gj
 = 0; j < 
	gsubQuadPoštsNum
; j++){

385 
	gpošt_b
 = 
m
->
š‹½Ş©eQuadSpoke
(
this
->
upM—nQuadFig
,
š‹½Ş©edU
[
i
][
j
],
š‹½Ş©edV
[i][j],0)->
g‘B
();

386 
	gpošt_s
 = 
m
->
š‹½Ş©eQuadSpoke
(
this
->
upM—nQuadFig
,
š‹½Ş©edU
[
i
][
j
],
š‹½Ş©edV
[i][j],0)->
g‘X
();

388 
	ghubpos_medŸlsh“t
->
In£¹NextPošt
(
pošt_s
.
g‘X
(),pošt_s.
g‘Y
(),pošt_s.
g‘Z
());

390 
vtkIdTy³
 
	gid0
 = 
hubpos_up
->
In£¹NextPošt
(
pošt_s
.
g‘X
(),pošt_s.
g‘Y
(),pošt_s.
g‘Z
());

391 
vtkIdTy³
 
	gid1
 = 
hubpos_up
->
In£¹NextPošt
(
pošt_b
.
g‘X
(),pošt_b.
g‘Y
(),pošt_b.
g‘Z
());

393 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

395 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

396 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

398 
	gûÎ¬¿ypošt¦še_up
->
In£¹NextC–l
(
medŸlsh“še
);

402 
	gquadCŞÜ
[3] = {1,0.1,1};

403 
	gvss
.
addSpokesToR’d”_2
(
hubpos_up
, 
ûÎ¬¿ypošt¦še_up
, 
»nd””
, 
quadCŞÜ
);

406 
	gvss
.
d¿wQuads
(
hubpos_medŸlsh“t
, 
quadNum
, 
subQuadPoštsNum
, 
¡•
, 
»nd””
);

408 
d–‘e
 
	gm
;

411 if(
	gshowdown
){

412 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos_medŸlsh“t
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

415 
M3DQuadIÁ”pŞ©”
 *
	gm
 = 
Ãw
 M3DQuadIÁ”pŞ©”(
this
->
upM—nQuadFig
);

416 
VeùÜ3D
 
	gpošt_s
, 
	gpošt_b
;

419 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ypošt¦še_down
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

420 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos_down
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

421 
	gi
 = 0; i < 
	gquadNum
; i++){

422 
	gj
 = 0; j < 
	gsubQuadPoštsNum
; j++){

423 
	gpošt_b
 = 
m
->
š‹½Ş©eQuadSpoke
(
this
->
downM—nQuadFig
,
š‹½Ş©edU
[
i
][
j
],
š‹½Ş©edV
[i][j],1)->
g‘B
();

424 
	gpošt_s
 = 
m
->
š‹½Ş©eQuadSpoke
(
this
->
downM—nQuadFig
,
š‹½Ş©edU
[
i
][
j
],
š‹½Ş©edV
[i][j],1)->
g‘X
();

426 
	ghubpos_medŸlsh“t
->
In£¹NextPošt
(
pošt_s
.
g‘X
(),pošt_s.
g‘Y
(),pošt_s.
g‘Z
());

428 
vtkIdTy³
 
	gid0
 = 
hubpos_down
->
In£¹NextPošt
(
pošt_s
.
g‘X
(),pošt_s.
g‘Y
(),pošt_s.
g‘Z
());

429 
vtkIdTy³
 
	gid1
 = 
hubpos_down
->
In£¹NextPošt
(
pošt_b
.
g‘X
(),pošt_b.
g‘Y
(),pošt_b.
g‘Z
());

431 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

433 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

434 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

436 
	gûÎ¬¿ypošt¦še_down
->
In£¹NextC–l
(
medŸlsh“še
);

440 
	gquadCŞÜ
[3] = {0.3,0.3,0.3};

441 
	gvss
.
addSpokesToR’d”_2
(
hubpos_down
, 
ûÎ¬¿ypošt¦še_down
, 
»nd””
, 
quadCŞÜ
);

444 
	gvss
.
d¿wQuads
(
hubpos_medŸlsh“t
, 
quadNum
, 
subQuadPoštsNum
, 
¡•
, 
»nd””
);

446 
d–‘e
 
	gm
;

449 if(
	gshowüe¡
){

451 
	gquadCŞÜ
[3] = {0.3,0.3,0.3};

452 
visu®izeüe¡
 
visu®Objeù_üe¡
(
this
->
üe¡M—nQuadFig
, 
š‹½Ş©iÚLev–
, 
quadCŞÜ
, 
»nd””
,this->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

453 
	gvisu®Objeù_üe¡
.
d¿wC»¡Spokes
();

459 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	gshiáed¤•
::
	$g‘M—nSurçûPošts
(
š‹½Ş©iÚLev–
){

460 
visu®ize¤•surçû
 
	`vss
(
this
->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

462 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPošts
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

465 
vss
.
	`g‘UpOrDownSurçûPošts
(
this
->
upM—nQuadFig
, 
surçûPošts
, 
š‹½Ş©iÚLev–
, 0);

466 
vss
.
	`g‘UpOrDownSurçûPošts
(
this
->
downM—nQuadFig
, 
surçûPošts
, 
š‹½Ş©iÚLev–
, 1);

469 
vss
.
	`g‘C»¡SurçûPošts
(
this
->
üe¡M—nQuadFig
, 
surçûPošts
, 
š‹½Ş©iÚLev–
);

471  
surçûPošts
;

473 
	}
}

476 
	gshiáed¤•
::
d¿wPoštsS‘SurçûOfTheM—n
(
š‹½Ş©iÚLev–
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
){

477 
visu®ize¤•surçû
 
vss
(
this
->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

479 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	gsurçûPošts
 = 
g‘M—nSurçûPošts
(
š‹½Ş©iÚLev–
);

481 
	gvss
.
d¿wPoštsS‘Surçû_zcŞÜ
(
surçûPošts
, 
»nd””
);

512 
	gshiáed¤•
::
	$ÿlPoštsNum
(
š‹½Ş©iÚLev–
){

514 
¡•
 = 
	`pow
(()2, ()
š‹½Ş©iÚLev–
);

517 
¡ªdQuads
 = (
rowNum
-1)*(
cŞNum
-1);

518 
posEachSndQuad
 = 
¡•
 * step;

519 
posSndSide
 = 
¡ªdQuads
 * 
posEachSndQuad
 + (
cŞNum
-1)*
¡•
 + (
rowNum
-1)*step + 1;

521 
üe¡Quads
 = 
rowNum
*2 + (
cŞNum
-2)*2;

522 
posEachC»¡Quad
 = (
¡•
-1)*step;

523 
posC»¡Side
 = 
üe¡Quads
 * 
posEachC»¡Quad
;

525  
posSndSide
 * 2 + 
posC»¡Side
;

526 
	}
}

534 
	gshiáed¤•
::
	$g‘SSPN
(
š‹½Ş©iÚLev–
){

536 
¡•
 = 
	`pow
(()2, ()
š‹½Ş©iÚLev–
);

539 
¡ªdQuads
 = (
rowNum
-1)*(
cŞNum
-1);

540 
posEachSndQuad
 = 
¡•
 * step;

541 
posSndSide
 = 
¡ªdQuads
 * 
posEachSndQuad
 + (
cŞNum
-1)*
¡•
 + (
rowNum
-1)*step + 1;

543  
posSndSide
;

544 
	}
}

552 
	gshiáed¤•
::
	$defÜmOrigš®SurçûM—n
Ğ
š‹½Ş©iÚLev–
){

554 
visu®ize¤•surçû
 
	`vss
(
this
->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

555 
poštNum
 = 
	`ÿlPoštsNum
(
š‹½Ş©iÚLev–
);

558 
M©rixTy³
 
	`X
(3*
poštNum
, 
this
->
¤•Num
);

559 
X
.
	`fl
(0);

560 
i
 = 0; i < 
this
->
¤•Num
; i++){

562 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

563 
vss
.
	`g‘UpOrDownSurçûPošts
(
this
->
quadFigLi¡
[
i
], 
surçûPos
, 
š‹½Ş©iÚLev–
, 0);

564 
vss
.
	`g‘UpOrDownSurçûPošts
(
this
->
quadFigLi¡
[
i
], 
surçûPos
, 
š‹½Ş©iÚLev–
, 1);

565 
vss
.
	`g‘C»¡SurçûPošts
(
this
->
quadFigLi¡
[
i
], 
surçûPos
, 
š‹½Ş©iÚLev–
);

568 
j
 = 0; j < 
poštNum
; j++){

569 
p
[3];

570 
surçûPos
->
	`G‘Pošt
(
j
, 
p
);

571 
dim
 = 0; dim < 3; dim++){

572 
	`X
(
j
*3+
dim
, 
i
èğ
p
[dim];

576 
	`§veM©rix
("/NIRAL/wÜk/Éu/WÜkS·û/May15/Pablo2/lib/vtk¤•/CÜ»¥Úd’û/defÜm_m—n/X.txt", 
X
);

578 
	`defÜmAlÚgEigMode
(
X
, 
poštNum
, 
this
->
¤•Num
);

579 
	}
}

583 
	gshiáed¤•
::
	$defÜmAlÚgEigMode
(
M©rixTy³
 
X
, 
poštNum
, 
§m¶eNum
){

584 
n
 = 3*
poštNum
;

586 
M©rixTy³
 
	`XB¬
(
n
, 1);

587 
XB¬
.
	`fl
(0);

588 
r
 = 0;„ < 
n
;„++){

589 
c
 = 0; c < 
§m¶eNum
; c++){

590 
XB¬
[
r
][0] +ğ
X
[r][
c
];

593 
XB¬
[
r
][0] /ğ
§m¶eNum
;

595 
	`§veM©rix
("/NIRAL/wÜk/Éu/WÜkS·û/May15/Pablo2/lib/vtk¤•/CÜ»¥Úd’û/defÜm_m—n/XB¬.txt", 
XB¬
);

598 
r
 = 0;„ < 
n
;„++){

599 
c
 = 0; c < 
§m¶eNum
; c++){

600 
X
[
r
][
c
] -ğ
XB¬
[r][0];

603 
	`§veM©rix
("/NIRAL/wÜk/Éu/WÜkS·û/May15/Pablo2/lib/vtk¤•/CÜ»¥Úd’û/defÜm_m—n/ûÁ”ed_X.txt", 
X
);

606 
M©rixTy³
 
covM©rix
 = (
X
 * X.
	`Œª¥o£
()è/ (
§m¶eNum
-1);

610 
vÆ_symm‘ric_eig’sy¡em
<> 
	`eig
(
covM©rix
);

611 
vÆ_dŸg_m©rix
<> 
	`eig’V®ues
(
n
,‚);

612 
eig’V®ues
 = 
eig
.
D
;

618 
M©rixTy³
 
	`eig’V®s
(
n
,1);

619 
r
=0;„<
eig’V®ues
.
	`rows
();r++){

620 
eig’V®s
[
r
][0] = 
	`eig’V®ues
(r,r);

622 
	`§veM©rix
("/NIRAL/wÜk/Éu/WÜkS·û/May15/Pablo2/lib/vtk¤•/CÜ»¥Úd’û/defÜm_m—n/eig’V®ues.txt", 
eig’V®s
);

624 
M©rixTy³
 
	`eig’VeùÜ
(
n
,n);

625 
eig’VeùÜ
 = 
eig
.
V
;

636 
sigma
[3];

638 
dim
=0; dim<3; dim++){

639 
sigma
[
dim
] = 
	`sq¹
(
	`eig’V®ues
(
n
-1-dim,n-1-dim));

644 
M©rixTy³
 
	`cÜrEig’VeùÜ
(
n
, 3);

645 
i
 = 0; i<
n
; i++){

646 
dim
=0; dim<3; dim++){

647 
cÜrEig’VeùÜ
[
i
][
dim
] = 
eig’VeùÜ
[i][
n
-1-dim];

654 
M©rixTy³
 
	`ÃwSh­e
(
n
, 3);

655 
sdWeight
 = -3;

656 
mode
=0; mode<3; mode++){

657 
w
 = 
sdWeight
 * 
sigma
[
mode
];

658 
r
 = 0;„ < 
n
;„++){

659 
cÜrEig’VeùÜ
[
r
][
mode
] *ğ
w
;

663 
r
 = 0;„ < 
n
;„++){

664 
mode
=0; mode<3; mode++){

665 
ÃwSh­e
[
r
][
mode
] = 
XB¬
[r][0] + 
cÜrEig’VeùÜ
[r][mode];

670 
mode
=0; mode<3; mode++){

671 
num
[20];

672 
	`¥rštf
(
num
, "%d", 
mode
);

673 
¡d
::
¡ršg
 
ouutFe
 = std::
	`¡ršg
("/NIRAL/wÜk/Éu/WÜkS·û/May15/Pablo2/lib/vtk¤•/CÜ»¥Úd’û/defÜm_m—n/ÃwSh­e_"è+ 
num
 + ".vtk";

674 
	`§veToVTK
(
poštNum
, 
ÃwSh­e
, 
ouutFe
, 
mode
);

678 
¡ršg
 
ouutFe
 = 
	`¡ršg
("/NIRAL/work/ltu/WorkSpace/May15/Pablo2/lib/vtksrep/Correspondence/deform_mean/meanShape.vtk");

679 
	`§veToVTK
(
poštNum
, 
XB¬
, 
ouutFe
, 0);

685 
	}
}

693 
	gshiáed¤•
::
	$defÜmShiáedSurçûM—n
(
¡ršg
 
up_¡r
, sŒšg 
down_¡r
, sŒšg 
üe¡_¡r
, 
š‹½Ş©iÚLev–
){

695 
poštNum
 = 
	`ÿlPoštsNum
(
š‹½Ş©iÚLev–
);

696 
cout
<<"-----------------------------poštNum is: "<<
poštNum
<<
’dl
;

698 
M©rixTy³
 
	`X
(3*
poštNum
, 
this
->
¤•Num
);

699 
X
.
	`fl
(0);

702 
	`surçûPoštsEachSide
(
up_¡r
, 0, 
this
->
v¬Snd
, 
X
, 
š‹½Ş©iÚLev–
);

703 
	`surçûPoštsEachSide
(
down_¡r
, 1, 
this
->
v¬Snd
, 
X
, 
š‹½Ş©iÚLev–
);

704 
	`surçûPoštsEachSide
(
üe¡_¡r
, 2, 
this
->
üe¡AtomNum
, 
X
, 
š‹½Ş©iÚLev–
);

706 
	`§veM©rix
("/NIRAL/wÜk/Éu/WÜkS·û/May15/Pablo2/lib/vtk¤•/CÜ»¥Úd’û/defÜm_m—n/X.txt", 
X
);

708 
	`defÜmAlÚgEigMode
(
X
, 
poštNum
, 
this
->
¤•Num
);

709 
	}
}

719 
	gshiáed¤•
::
	$surçûPoštsEachSide
(
¡ršg
 
v¬s_¡r
, 
side
, 
v¬Nums
, 
M©rixTy³
 &
X
, 
š‹½Ş©iÚLev–
){

720 
¡ršg¡»am
 
	`ss
(
v¬s_¡r
);

723 
¤•Num
 = 
this
->
quadFigLi¡
.
	`size
();

724 
s¥n
 = 
	`g‘SSPN
(
š‹½Ş©iÚLev–
);

726 
veùÜ
<> 
v¬s
;

728 
q
 = 0; q < 
¤•Num
; q++){

730 
¡ršg
 
tok’
;

731 
i
 = 0;

732 
i
 < 
v¬Nums
) {

733 
ss
 >> 
tok’
;

734 
v¬s
.
	`push_back
(
	`©of
(
tok’
.
	`c_¡r
()));

736 
i
++;

741 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

742 
	`g‘SurçûPošts
(
this
->
quadFigLi¡
[
q
], 
side
, 
v¬s
, 
v¬Nums
, 
surçûPos
, 
š‹½Ş©iÚLev–
);

745 
pNum
 = 
surçûPos
->
	`G‘Numb”OfPošts
();

747 if(
side
==0){

748 
j
 = 0; j < 
pNum
; j++){

749 
p
[3];

750 
surçûPos
->
	`G‘Pošt
(
j
, 
p
);

751 
dim
 = 0; dim<3; dim++){

752 
X
[
j
*3+
dim
][
q
] = 
p
[dim];

756 if(
side
==1){

757 
j
 = 0; j < 
pNum
; j++){

758 
p
[3];

759 
surçûPos
->
	`G‘Pošt
(
j
, 
p
);

760 
dim
 = 0; dim<3; dim++){

761 
X
[
s¥n
*3+
j
*3+
dim
][
q
] = 
p
[dim];

765 if(
side
==2){

766 
j
 = 0; j < 
pNum
; j++){

767 
p
[3];

768 
surçûPos
->
	`G‘Pošt
(
j
, 
p
);

769 
dim
 = 0; dim<3; dim++){

770 
X
[
s¥n
*3*2+
j
*3+
dim
][
q
] = 
p
[dim];

775 
cout
<<"Mes§gäom shiáed¤•::surçûPoštsEachSide:: Invad sidty³!!"<<
’dl
;

776 
cout
<<"---"<<
side
<<
’dl
;

777 
	`ex™
(1);

781 
v¬s
.
	`ş—r
();

783 
	}
}

790 
	gshiáed¤•
::
g‘SurçûPošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
veùÜ
<> 
v¬s
, 
v¬Nums
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
,

791 
š‹½Ş©iÚLev–
){

793 *
	gcÛff
 = 
Ãw
 [
v¬Nums
];

794 
	gi
 = 0; i < 
	gv¬Nums
; i++){

795 
	gcÛff
[
i
] = 
v¬s
[i];

798 
M3DQuadFigu»
* 
	g‹mpQuadFig
 = 
dyÇmic_ÿ¡
<M3DQuadFigu»*>(
quadFig
->
şÚe
());

800 
visu®ize¤•surçû
 
vss
(
this
->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

802 
	gside
){

806 
¦ide¡ªd¬d¥okes
 
mSnd¬dSpoke
;

808 
	gmSnd¬dSpoke
.
upd©eSpokeInfo
(
‹mpQuadFig
, 
cÛff
, 
side
);

811 
	gvss
.
g‘UpOrDownSurçûPošts
(
‹mpQuadFig
, 
surçûPos
, 
š‹½Ş©iÚLev–
, 
side
);

816 
¦ideüe¡¥okes
 
mC»¡Spoke
;

818 
visu®izeüe¡
 
	gvüe¡
;

819 
	gvtkSm¬tPoš‹r
<
	gvtkSR•
> 
	g¤•Fig
 = 
vüe¡
.
g‘S»pFig
(
‹mpQuadFig
);

820 
	gmC»¡Spoke
.
upd©eC»¡SpokeInfo
(
¤•Fig
, 
‹mpQuadFig
, 
cÛff
);

823 
	gvss
.
g‘C»¡SurçûPošts
(
‹mpQuadFig
, 
surçûPos
, 
š‹½Ş©iÚLev–
);

828 
d–‘e
 
	gcÛff
;

836 
	gshiáed¤•
::
	$§veToVTK
(
poštNum
, 
M©rixTy³
 
mSh­e
, 
¡ršg
 
ouutFe
, 
mode
){

838 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyD©a
 = vtkSm¬tPoš‹r<vtkPŞyD©a>::
	`New
();

839 
vtkSm¬tPoš‹r
<
vtkPošts
> 
pošts
 = vtkSm¬tPoš‹r<vtkPošts>::
	`New
();

840 
i
 = 0; i < 
poštNum
; i++){

841 
r
 = 
i
*3;

842 
pošts
->
	`In£¹NextPošt
(
mSh­e
[
r
][
mode
], mShape[r+1][mode], mShape[r+2][mode]);

845 
pŞyD©a
->
	`S‘Pošts
(
pošts
);

846 
vtkSm¬tPoš‹r
<
vtkPŞyD©aWr™”
> 
pŞyD©aWr™”
 = vtkSm¬tPoš‹r<vtkPŞyD©aWr™”>::
	`New
();

847 
pŞyD©aWr™”
->
	`S‘IÅut
(
pŞyD©a
);

849 
pŞyD©aWr™”
->
	`S‘FeName
(
ouutFe
.
	`c_¡r
());

850 
pŞyD©aWr™”
->
	`Upd©e
();

851 
	}
}

858 
	gshiáed¤•
::
d¿wSurçûPošt
(cÚ¡ * 
f’ame
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
){

860 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyD©a
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

862 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aR—d”
> 
	g»ad”
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aR—d”
>::
New
();

863 
	g»ad”
->
S‘FeName
(
f’ame
);

864 
	g»ad”
->
Upd©e
();

865 
	gpŞyD©a
 = 
»ad”
->
G‘Ouut
();

866 
	gcout
<<"-----------------f’amis: "<<
	gf’ame
<<
	g’dl
;

868 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	gsurçûPošts
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

871 
	gi
 = 0; i < 
	gpŞyD©a
->
G‘Numb”OfPošts
(); i++){

872 
	gp
[3];

873 
	gpŞyD©a
->
G‘Pošt
(
i
,
p
);

875 
	gsurçûPošts
->
In£¹NextPošt
(
p
[0],…[1],…[2]);

879 
visu®ize¤•surçû
 
vss
(
this
->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

880 
	gvss
.
d¿wPoštsS‘Surçû_zcŞÜ
(
surçûPošts
, 
»nd””
);

887 
	gshiáed¤•
::
	$§veM©rix
(cÚ¡ * 
f’ame
, 
M©rixTy³
 
m©rix
){

889 
¡d
::
of¡»am
 
fout
;

890 
fout
.
	`İ’
(
f’ame
);

892 if(
fout
) {

893 
i
 =0; i< 
m©rix
.
	`rows
();i++){

894 
j
=0; j<
m©rix
.
	`cŞumns
(); j++){

895 
fout
<< 
m©rix
[
i
][
j
]<<" ";

897 
fout
<<
’dl
;

900 
cout
<<"SucûssfuÎy saved m©rixo: "<<
f’ame
<<
’dl
;

903 
û¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
’dl
;

905 
fout
.
	`şo£
();

906 
	}
}

	@shiftedsrep.h

1 #iâdeà
SHIFTEDSREP_H


2 
	#SHIFTEDSREP_H


	)

4 
	~"toŞsfunc.h
"

5 
	~"¦ide¡ªd¬d¥okes.h
"

6 
	~"¦ideüe¡¥okes.h
"

7 
	~"visu®izeüe¡.h
"

8 
	~"visu®ize¤•surçû.h
"

10 
	~"vÆ/®go/vÆ_symm‘ric_eig’sy¡em.h
"

11 
	~"™kM©rix.h
"

13 
	~<vtkPŞyD©aWr™”.h
>

14 
	~<vtkPŞyD©aR—d”.h
>

15 
	~"vtkPŞyD©a.h
"

19 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

22 cÚ¡ 
	growNum
 = 3;

23 cÚ¡ 
	gcŞNum
 = 13;

26 şas 
	cshiáed¤•


28 
	mpublic
:

29 
shiáed¤•
();

30 
shiáed¤•
(cÚ¡ * 
roÙDœ
, 
veùÜ
< 
¡d
::
¡ršg
 > 
¤•Names
, 
rX
, 
rY
, 
rZ
, 
İac™y
);

31 
shiáed¤•
(
rX
, 
rY
, 
rZ
, 
İac™y
);

33 
»adT¿ššgS»ps
();

34 
g‘Pošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
veùÜ
<> 
v¬s
, 
v¬Nums
, veùÜ<
M©rixTy³
> &
bound¬yPos
,

35 
veùÜ
<
M©rixTy³
> &
sk–‘®Pos
);

36 
m—nSide
(
M©rixTy³
 
m—n_bpos
, M©rixTy³ 
m—n_¥os
, 
side
);

37 
M©rixTy³
 
m—nSidePoštPaœ
(
veùÜ
<M©rixTy³> 
pošts
);

38 
compu‹M—nSide
(
¡ršg
 
v¬s_¡r
, 
side
, 
v¬Nums
);

39 
compu‹M—nFig
(
¡ršg
 
up_¡r
, sŒšg 
down_¡r
, sŒšg 
üe¡_¡r
);

41 
d¿wSpokes
(
boŞ
 
showup
, boŞ 
showdown
, boŞ 
showüe¡
, 
š‹½Ş©iÚLev–
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
);

42 
d¿wM—nS»p
();

43 
	mvtkSm¬tPoš‹r
< 
	mvtkPošts
 > 
g‘M—nSurçûPošts
(
š‹½Ş©iÚLev–
);

44 
d¿wPoštsS‘SurçûOfTheM—n
(
š‹½Ş©iÚLev–
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
);

46 
defÜmAlÚgEigMode
(
M©rixTy³
 
X
, 
poštNum
, 
§m¶eNum
);

48 
§veM©rix
(cÚ¡ * 
f’ame
, 
M©rixTy³
 
m©rix
);

49 
d¿wSurçûPošt
(cÚ¡ * 
f’ame
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
);

50 
§veToVTK
(
poštNum
, 
M©rixTy³
 
mSh­e
, 
¡ršg
 
ouutFe
, 
cŞ
);

52 
defÜmOrigš®SurçûM—n
Ğ
š‹½Ş©iÚLev–
);

53 
surçûPoštsEachSide
(
¡ršg
 
v¬s_¡r
, 
side
, 
v¬Nums
, 
M©rixTy³
 &
X
, 
š‹½Ş©iÚLev–
);

55 
ÿlPoštsNum
(
š‹½Ş©iÚLev–
);

56 
g‘SurçûPošts
(
M3DQuadFigu»
* 
quadFig
, 
side
, 
veùÜ
<> 
v¬s
, 
v¬Nums
, 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
surçûPos
,

57 
š‹½Ş©iÚLev–
);

58 
g‘SSPN
(
š‹½Ş©iÚLev–
);

59 
defÜmShiáedSurçûM—n
(
¡ršg
 
up_¡r
, sŒšg 
down_¡r
, sŒšg 
üe¡_¡r
, 
š‹½Ş©iÚLev–
);

62 
	m´iv©e
:

63 
veùÜ
<
M3DQuadFigu»
 *> 
quadFigLi¡
;

65 cÚ¡ * 
	mroÙDœ
;

66 
	mveùÜ
< 
	m¡d
::
¡ršg
 > 
¤•Names
;

68 
toŞsfunc
 
	ms
;

70 
	müe¡AtomNum
;

71 
	mš‹riÜAtomNum
;

72 
	mv¬Snd
;

74 
M3DQuadFigu»
* 
	mupM—nQuadFig
;

75 
M3DQuadFigu»
* 
	mdownM—nQuadFig
;

76 
M3DQuadFigu»
* 
	müe¡M—nQuadFig
;

78 
	mrX
;

79 
	mrY
;

80 
	mrZ
;

81 
	mİac™y
;

83 
	m¤•Num
;

	@slidecrestspokes.cpp

1 
	~"¦ideüe¡¥okes.h
"

3 
	g¦ideüe¡¥okes
::
	$¦ideüe¡¥okes
()

5 
	}
}

11 
¦ideüe¡¥okes
::
	$¦ideüe¡¥okes
(
š‹½Ş©iÚLev–
){

12 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

13 
	}
}

21 
	g¦ideüe¡¥okes
::
moveC»¡Spokes
(
M3DQuadFigu»
 *
quadFig
, 
vtkSm¬tPoš‹r
<
vtkSR•
> 
¤•fig
, *
v¬s
, 
DoubËVec
 
subTVs
){

24 
upd©eC»¡SpokeInfo
(
¤•fig
, 
quadFig
, 
v¬s
);

27 
	g’Œİy
 = 
compu‹ReguÏr™yEÁrİyOfC»¡
(
quadFig
, 
subTVs
);

29  
	g’Œİy
;

44 
	g¦ideüe¡¥okes
::
shiáC»¡SpokeAndS‘ToPrim™ive
(
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
shiáC»¡Spokes
,

45 
M3DQuadFigu»
 *
quadFig
, 
u
, 
v
, 
ûÎIndex
, 
v¬
){

50 
	g¦ide_t
 = 
v¬
;

51 
	gûÎid
 = 
ûÎIndex
;

53 if(
	gv¬
 < 0){

54 
	gûÎid
 = 
ûÎIndex
 - 1;

55 
	g¦ide_t
 = 1 + 
v¬
;

64 if(
	g¦ide_t
<0.0000001)

65 
	g¦ide_t
 = 0;

69 
	gvtkSR•
::
VNLTy³
 
¥okeHub
 = 
shiáC»¡Spokes
->
G‘IÁ”pŞ©edPošt
(
ûÎid
, 
¦ide_t
);

71 
	gvtkSR•
::
VNLTy³
 
upSpokeDœ
 = 
shiáC»¡Spokes
->
G‘IÁ”pŞ©edSpoke
(
ûÎid
, 
¦ide_t
, 0);

72 
	gvtkSR•
::
VNLTy³
 
üe¡SpokeDœ
 = 
shiáC»¡Spokes
->
G‘IÁ”pŞ©edSpoke
(
ûÎid
, 
¦ide_t
, 0.5);

73 
	gvtkSR•
::
VNLTy³
 
downSpokeDœ
 = 
shiáC»¡Spokes
->
G‘IÁ”pŞ©edSpoke
(
ûÎid
, 
¦ide_t
, 1);

76 
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
)->
£tX
(
¥okeHub
[0], spokeHub[1], spokeHub[2]);

79 
VeùÜ3D
 
	gun™SpokeDœ
;

80 
	g¥okeL’gth
;

83 
	g¥okeL’gth
 = 
sq¹
(
upSpokeDœ
[0]*upSpokeDir[0] + upSpokeDir[1]*upSpokeDir[1] + upSpokeDir[2]*upSpokeDir[2]);

84 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tR0
(
¥okeL’gth
);

87 
	gun™SpokeDœ
.
£t
(
upSpokeDœ
[0]/
¥okeL’gth
,upSpokeDir[1]/spokeLength,upSpokeDir[2]/spokeLength);

89 
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
)->
£tU0
(
un™SpokeDœ
);

93 
	g¥okeL’gth
 = 
sq¹
(
downSpokeDœ
[0]*downSpokeDir[0] + downSpokeDir[1]*downSpokeDir[1] + downSpokeDir[2]*downSpokeDir[2]);

94 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tR1
(
¥okeL’gth
);

97 
	gun™SpokeDœ
.
£t
(
downSpokeDœ
[0]/
¥okeL’gth
,downSpokeDir[1]/spokeLength,downSpokeDir[2]/spokeLength);

99 
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
)->
£tU1
(
un™SpokeDœ
);

103 
	g¥okeL’gth
 = 
sq¹
(
üe¡SpokeDœ
[0]*crestSpokeDir[0] + crestSpokeDir[1]*crestSpokeDir[1] + crestSpokeDir[2]*crestSpokeDir[2]);

104 
	gdyÇmic_ÿ¡
<
	gM3DQuadEndPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tREnd
(
¥okeL’gth
);

107 
	gun™SpokeDœ
.
£t
(
üe¡SpokeDœ
[0]/
¥okeL’gth
,crestSpokeDir[1]/spokeLength,crestSpokeDir[2]/spokeLength);

109 
	gdyÇmic_ÿ¡
<
	gM3DQuadEndPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tUEnd
(
un™SpokeDœ
);

143 
	g¦ideüe¡¥okes
::
	$ÿlcuÏ‹SpokeL’gth
(
vtkSR•
::
VNLTy³
 
ÃwSpoke
){

144 
squ¬eDis
 = 
ÃwSpoke
[0]*newSpoke[0] +‚ewSpoke[1]*newSpoke[1] +‚ewSpoke[2]*newSpoke[2];

146  
	`sq¹
(
squ¬eDis
);

147 
	}
}

151 
VeùÜ3D
 
	g¦ideüe¡¥okes
::
	$ÿlcuÏ‹Un™SpokeDœ
(
vtkSR•
::
VNLTy³
 
ÃwSpoke
){

152 
¥okeL’gth
 = 
	`ÿlcuÏ‹SpokeL’gth
(
ÃwSpoke
);

154 
VeùÜ3D
 
un™SpokeDœ
;

156 
un™SpokeDœ
.
	`£t
(
ÃwSpoke
[0]/
¥okeL’gth
,newSpoke[1]/spokeLength,newSpoke[2]/spokeLength);

158  
un™SpokeDœ
;

159 
	}
}

168 
	g¦ideüe¡¥okes
::
upd©eC»¡SpokeInfo
(
vtkSm¬tPoš‹r
<
vtkSR•
> 
¤•fig
, 
M3DQuadFigu»
 *
quadFig
, * 
v¬A¼ayS»p
){

171 
	gvtkSm¬tPoš‹r
<
	gvtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
	gshiáC»¡Spokes
 = 
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
>::
New
();

172 
	gshiáC»¡Spokes
->
S‘IÅut
(
¤•fig
);

174 
	gshiáC»¡Spokes
->
S‘IÁ”pŞ©iÚLev–
(0);

175 
	gshiáC»¡Spokes
->
Upd©e
();

177 
	growNums
 = 
quadFig
->
g‘RowCouÁ
();

178 
	gcŞNums
 = 
quadFig
->
g‘CŞumnCouÁ
();

188 
	gu
 = 0;

189 
	gv
 = 0;

191 
	gv¬Index
 = 0;

196 
	gv
 = 1; v < 
	gcŞNums
-1; v++){

199 
shiáC»¡SpokeAndS‘ToPrim™ive
(
shiáC»¡Spokes
, 
quadFig
, 
u
, 
v
, 
v¬Index
+1, 
v¬A¼ayS»p
[varIndex]);

201 
	gv¬Index
++;

206 
	gv
 = 
cŞNums
 - 1;

207 
	gu
 = 1; u < 
	growNums
-1; u++){

210 
shiáC»¡SpokeAndS‘ToPrim™ive
(
shiáC»¡Spokes
, 
quadFig
, 
u
, 
v
, 
v¬Index
+2, 
v¬A¼ayS»p
[varIndex]);

212 
	gv¬Index
++;

216 
	gu
 = 
rowNums
-1;

217 
	gv
 = 
cŞNums
-2; v > 0; v--){

220 
shiáC»¡SpokeAndS‘ToPrim™ive
(
shiáC»¡Spokes
, 
quadFig
, 
u
, 
v
, 
v¬Index
+3, 
v¬A¼ayS»p
[varIndex]);

222 
	gv¬Index
++;

227 
	gv
 = 0;

228 
	gu
 = 
rowNums
-2; u > 0; u--){

231 
shiáC»¡SpokeAndS‘ToPrim™ive
(
shiáC»¡Spokes
, 
quadFig
, 
u
, 
v
, 
v¬Index
+4, 
v¬A¼ayS»p
[varIndex]);

233 
	gv¬Index
++;

267 
	g¦ideüe¡¥okes
::
	$compu‹ReguÏr™yEÁrİyOfC»¡
(
M3DQuadFigu»
 *
quadFig
, 
DoubËVec
 
subTVs
){

269 
»gEÁrİy
 = 0;

270 
üe¡AtomNums
 = (
quadFig
->
	`g‘RowCouÁ
(è+ quadFig->
	`g‘CŞumnCouÁ
()) * 2 - 4;

273 
M©rixTy³
 
	`v”EdgeF—tu»s
(2, 
üe¡AtomNums
);

274 
M©rixTy³
 
	`hÜEdgeF—tu»s
(1, 
üe¡AtomNums
);

276 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_s
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

277 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts_b
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

279 
ÿlüe¡»guÏr™yã©u»s
 
	`»gF—tu»
(
quadFig
, 
subTVs
, 
this
->
š‹½Ş©iÚLev–
, 
üe¡AtomNums
);

281 
»gF—tu»
.
	`g‘SubQuadsPos™iÚOfC»¡RegiÚ
(
pošts_s
, 
pošts_b
);

283 
»guÏr™y’Œİy
 
»gE
;

286 
»gF—tu»
.
	`ÿlcuÏ‹C»¡Edges_2
(
pošts_s
, 
pošts_b
, 
v”EdgeF—tu»s
, 
hÜEdgeF—tu»s
);

289 
»gEÁrİy
 +ğ
»gE
.
	`ÿlcuÏ‹EÁrİy
(
hÜEdgeF—tu»s
, 0.01);

292 
»gEÁrİy
 +ğ
»gE
.
	`ÿlcuÏ‹EÁrİy
(
v”EdgeF—tu»s
, 0.01);

295 
M©rixTy³
 
	`ªgËF—tu»s
(3, 
üe¡AtomNums
);

298 
»gF—tu»
.
	`ÿlcuÏ‹C»¡AngËs_2
(
pošts_b
, 
ªgËF—tu»s
);

308 
»gEÁrİy
 +ğ
»gE
.
	`ÿlcuÏ‹EÁrİy
(
ªgËF—tu»s
, 0.01);

310  
»gEÁrİy
;

311 
	}
}

	@slidecrestspokes.h

1 #iâdeà
SLIDECRESTSPOKES_H


2 
	#SLIDECRESTSPOKES_H


	)

5 
	~"»guÏr™y’Œİy.h
"

6 
	~"ÿlüe¡»guÏr™yã©u»s.h
"

10 şas 
	c¦ideüe¡¥okes


12 
	mpublic
:

13 
¦ideüe¡¥okes
();

15 
¦ideüe¡¥okes
(
š‹½Ş©iÚLev–
);

17 
moveC»¡Spokes
(
M3DQuadFigu»
 *
quadFig
, 
vtkSm¬tPoš‹r
<
vtkSR•
> 
¤•fig
, *
v¬s
, 
DoubËVec
 
subTVs
);

18 
shiáC»¡SpokeAndS‘ToPrim™ive
(
vtkSm¬tPoš‹r
<
vtkSR•IÁ”pŞ©eC»¡SpokesQu¬tic
> 
shiáC»¡Spokes
,

19 
M3DQuadFigu»
 *
quadFig
, 
u
, 
v
, 
v¬Index
, 
v¬
);

20 
upd©eC»¡SpokeInfo
(
vtkSm¬tPoš‹r
<
vtkSR•
> 
¤•fig
, 
M3DQuadFigu»
 *
quadFig
, * 
v¬A¼ayS»p
);

22 
compu‹ReguÏr™yEÁrİyOfC»¡
(
M3DQuadFigu»
 *
quadFig
, 
DoubËVec
 
subTVs
);

25 
ÿlcuÏ‹SpokeL’gth
(
vtkSR•
::
VNLTy³
 
ÃwSpoke
);

26 
VeùÜ3D
 
ÿlcuÏ‹Un™SpokeDœ
(
vtkSR•
::
VNLTy³
 
ÃwSpoke
);

29 
	m´iv©e
:

31 
š‹½Ş©iÚLev–
;

	@slidestandardspokes.cpp

10 
	~"¦ide¡ªd¬d¥okes.h
"

14 
	g¦ide¡ªd¬d¥okes
::
	$¦ide¡ªd¬d¥okes
()

16 
	}
}

18 
¦ide¡ªd¬d¥okes
::
	$¦ide¡ªd¬d¥okes
(
side
, 
š‹½Ş©iÚLev–
){

19 
this
->
side
 = side;

20 
this
->
š‹½Ş©iÚLev–
 = interpolationLevel;

21 
	}
}

30 
	g¦ide¡ªd¬d¥okes
::
	$moveSnd¬dSpokes
(
M3DQuadFigu»
* 
quadFig
, *
v¬s
, 
DoubËVec
 
subUVs
){

32 
	`upd©eSpokeInfo
(
quadFig
, 
v¬s
, 
this
->
side
);

35 
’Œİy
 = 
	`compu‹ReguÏr™yEÁrİy
(
quadFig
, 
subUVs
);

37  
’Œİy
;

38 
	}
}

43 
	g¦ide¡ªd¬d¥okes
::
	$£tMovedSpokeInfoToPrim™ive
(
M3DQuadFigu»
 *
quadFig
, 
ÃwU
, 
ÃwV
, 
´im™iveIndexU
,

44 
´im™iveIndexV
){

48 
M3DQuadIÁ”pŞ©”
 
¡ªdsideš
;

51 
M3DSpoke
 
Ãw¥oke
 = 
¡ªdsideš
.
	`š‹½Ş©eQuadSpoke2
(
quadFig
, 
ÃwU
, 
ÃwV
, 
side
);

58 
quadFig
->
	`g‘Prim™ivePŒ
(
´im™iveIndexU
,
´im™iveIndexV
)->
	`£tX
(
Ãw¥oke
.
	`g‘X
().g‘X(),‚ew¥oke.g‘X().
	`g‘Y
(),‚ew¥oke.g‘X().
	`g‘Z
());

60 if(
side
==0){

62 
quadFig
->
	`g‘Prim™ivePŒ
(
´im™iveIndexU
,
´im™iveIndexV
)->
	`£tU0
(
Ãw¥oke
.
	`g‘U
());

65 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
´im™iveIndexU
,
´im™iveIndexV
))->
	`£tR0
(
Ãw¥oke
.
	`g‘R
());

69 
quadFig
->
	`g‘Prim™ivePŒ
(
´im™iveIndexU
,
´im™iveIndexV
)->
	`£tU1
(
Ãw¥oke
.
	`g‘U
());

72 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
´im™iveIndexU
,
´im™iveIndexV
))->
	`£tR1
(
Ãw¥oke
.
	`g‘R
());

74 
	}
}

86 
	g¦ide¡ªd¬d¥okes
::
	$upd©eSpokeInfo
(
M3DQuadFigu»
 *
quadFig
, * 
v¬A¼ayS»p
, 
side
){

92 
rowNum
 = 
quadFig
->
	`g‘RowCouÁ
();

93 
cŞNum
 = 
quadFig
->
	`g‘CŞumnCouÁ
();

95 
v¬A¼ayS»pIndex
 = 0;

97 
ÃwU
, 
ÃwV
;

99 if(
side
==0) {

102 
i
 = 1; i< 
rowNum
-1;i++){

104 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,0))->
	`£tD–U0
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

105 
ÃwU
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

106 
ÃwV
 = 0;

108 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
i
, 0);

110 
v¬A¼ayS»pIndex
++;

113 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
cŞNum
-1))->
	`£tD–U0
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

114 
ÃwU
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

115 
ÃwV
 = 
cŞNum
-1;

117 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
i
, 
cŞNum
-1);

119 
v¬A¼ayS»pIndex
++;

124 
i
=1; i< 
cŞNum
-1;i++){

126 
ÃwU
 = 0;

127 
ÃwV
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

129 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(0,
i
))->
	`£tD–V0
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

131 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 0, 
i
);

132 
v¬A¼ayS»pIndex
++;

136 
ÃwU
 = 
rowNum
-1;

137 
ÃwV
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

139 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
rowNum
-1,
i
))->
	`£tD–V0
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

141 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
rowNum
-1, 
i
);

142 
v¬A¼ayS»pIndex
++;

149 
i
 = 1; i < 
rowNum
-1;i++){

150 
j
=1; j<
cŞNum
-1;j++){

151 
ÃwU
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

152 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tD–U0
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

153 
v¬A¼ayS»pIndex
++;

155 
ÃwV
 = 
j
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

156 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tD–V0
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

157 
v¬A¼ayS»pIndex
++;

159 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
i
, 
j
);

166 
i
 = 1; i< 
rowNum
-1;i++){

168 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,0))->
	`£tD–U1
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

169 
ÃwU
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

170 
ÃwV
 = 0;

172 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
i
, 0);

174 
v¬A¼ayS»pIndex
++;

178 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
cŞNum
-1))->
	`£tD–U1
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

179 
ÃwU
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

180 
ÃwV
 = 
cŞNum
-1;

182 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
i
, 
cŞNum
-1);

184 
v¬A¼ayS»pIndex
++;

189 
i
=1; i< 
cŞNum
-1;i++){

191 
ÃwU
 = 0;

192 
ÃwV
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

194 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(0,
i
))->
	`£tD–V1
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

196 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 0, 
i
);

197 
v¬A¼ayS»pIndex
++;

201 
ÃwU
 = 
rowNum
-1;

202 
ÃwV
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

204 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
ÃwU
,
i
))->
	`£tD–V1
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

206 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
rowNum
-1, 
i
);

207 
v¬A¼ayS»pIndex
++;

213 
i
 = 1; i < 
rowNum
-1;i++){

214 
j
=1; j<
cŞNum
-1;j++){

215 
ÃwU
 = 
i
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

216 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tD–U1
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

217 
v¬A¼ayS»pIndex
++;

219 
ÃwV
 = 
j
 + 
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
];

220 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
quadFig
->
	`g‘Prim™ivePŒ
(
i
,
j
))->
	`£tD–V1
(
v¬A¼ayS»p
[
v¬A¼ayS»pIndex
]);

221 
v¬A¼ayS»pIndex
++;

223 
	`£tMovedSpokeInfoToPrim™ive
(
quadFig
, 
ÃwU
, 
ÃwV
, 
i
, 
j
);

227 
	}
}

241 
	g¦ide¡ªd¬d¥okes
::
	$compu‹ReguÏr™yEÁrİy
(
M3DQuadFigu»
* 
quadFig
, 
DoubËVec
 
subUVs
){

242 
»gEÁrİy
 = 0.0;

244 
cŞNum
 = 
quadFig
->
	`g‘CŞumnCouÁ
();

245 
rowNum
 = 
quadFig
->
	`g‘RowCouÁ
();

247 
hÜEdgeNum
 = (
rowNum
-1è* 
cŞNum
;

248 
v”EdgeNum
 = (
cŞNum
-1è* 
rowNum
;

250 
M©rixTy³
 
	`hÜEdgeF—tu»M©rix
(2, 
hÜEdgeNum
);

251 
M©rixTy³
 
	`v”EdgeF—tu»M©rix
(2, 
v”EdgeNum
);

253 
ÿÌeguÏr™yã©u»s
 
	`»gF—tu»
(
quadFig
, 
this
->
š‹½Ş©iÚLev–
,his->
side
, 
subUVs
);

255 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubPos™iÚ_b
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

256 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubPos™iÚ_s
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

257 
»gF—tu»
.
	`g‘SubQuadV”‹xesPos™iÚ
(
hubPos™iÚ_b
, 
hubPos™iÚ_s
);

260 
»guÏr™y’Œİy
 
»gE
;

263 
»gF—tu»
.
	`ÿlcuÏ‹Edges_m‘hod3
(
hubPos™iÚ_b
, 
hÜEdgeF—tu»M©rix
, 
v”EdgeF—tu»M©rix
, 0);

266 
»gF—tu»
.
	`ÿlcuÏ‹Edges_m‘hod3
(
hubPos™iÚ_s
, 
hÜEdgeF—tu»M©rix
, 
v”EdgeF—tu»M©rix
, 1);

269 
»gEÁrİy
 +ğ
»gE
.
	`ÿlcuÏ‹EÁrİy
(
hÜEdgeF—tu»M©rix
, 0.01);

272 
»gEÁrİy
 +ğ
»gE
.
	`ÿlcuÏ‹EÁrİy
(
v”EdgeF—tu»M©rix
, 0.01);

275 
quadNum
 = (
rowNum
-1è* (
cŞNum
-1);

277 
M©rixTy³
 
	`ªgËF—tu»M©rix
(6, 
quadNum
);

280 
»gF—tu»
.
	`ÿlcuÏ‹AngËsFÜSnd¬dSide
(
hubPos™iÚ_b
, 
ªgËF—tu»M©rix
, 0);

283 
»gF—tu»
.
	`ÿlcuÏ‹AngËsFÜSnd¬dSide
(
hubPos™iÚ_s
, 
ªgËF—tu»M©rix
, 1);

286 
»gEÁrİy
 +ğ
»gE
.
	`ÿlcuÏ‹EÁrİy
(
ªgËF—tu»M©rix
, 0.01);

288  
»gEÁrİy
;

289 
	}
}

	@slidestandardspokes.h

1 #iâdeà
SLIDESTANDARDSPOKES_H


2 
	#SLIDESTANDARDSPOKES_H


	)

5 
	~"toŞsfunc.h
"

6 
	~"ÿÌeguÏr™yã©u»s.h
"

7 
	~"»guÏr™y’Œİy.h
"

9 
	~"time.h
"

13 şas 
	c¦ide¡ªd¬d¥okes


15 
	mpublic
:

16 
¦ide¡ªd¬d¥okes
();

17 
¦ide¡ªd¬d¥okes
(
side
, 
š‹½Ş©iÚLev–
);

19 
compu‹ReguÏr™yEÁrİy
(
M3DQuadFigu»
* 
quadFig
, 
DoubËVec
 
subUVs
);

22 
upd©eSpokeInfo
(
M3DQuadFigu»
 *
quadFig
, * 
v¬A¼ayS»p
, 
side
);

24 
£tMovedSpokeInfoToPrim™ive
(
M3DQuadFigu»
 *
quadFig
, 
ÃwU
, 
ÃwV
, 
´im™iveIndexU
, 
´im™iveIndexV
);

27 
moveSnd¬dSpokes
(
M3DQuadFigu»
* 
quadFig
, *
v¬s
, 
DoubËVec
 
subUVs
);

31 
	m´iv©e
:

33 
side
;

34 
	mš‹½Ş©iÚLev–
;

	@srepCorrespondenceEvaluator.h

1 #iâdeà
_¤•CÜ»¥Úd’ûEv®u©Ü_h


2 
	#_¤•CÜ»¥Úd’ûEv®u©Ü_h


	)

4 
	~"™kObjeù.h
"

5 
	~"vÆ/vÆ_m©rix.h
"

7 
Çme¥aû
 
	g™k


9 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

10 şas 
	c¤•CÜ»¥Úd’ûEv®u©Ü
 : 
public
 
Objeù


13 
public
:

16 
¤•CÜ»¥Úd’ûEv®u©Ü
 
	tS–f
;

17 
Objeù
 
	tSu³rşass
;

18 
	gSm¬tPoš‹r
<
	tS–f
> 
	tPoš‹r
;

19 
	gSm¬tPoš‹r
<cÚ¡ 
	tS–f
> 
	tCÚ¡Poš‹r
;

22 
TOuutMeshTy³
 
	tMeshTy³
;

23 
ty³Çme
 
	tMeshTy³
::
	tPoš‹r
 
	tMeshPoš‹r
;

24 
	g¡d
::
	tveùÜ
 < 
	tMeshPoš‹r
 > 
	tMeshPoš‹rA¼ay
;

25 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

28 
™kNewMaüo
(
S–f
);

31 
™kTy³Maüo
(
¤•CÜ»¥Úd’ûEv®u©Ü
, 
Objeù
);

33 
G‘G’”®iz©iÚ
(
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
) ;

34 
G‘S³cific™y
(
N
, 
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
) ;

37 
S‘Numb”OfIÅuts
Ğ
numb”
 );

40 
™kG‘CÚ¡Maüo
Ğ
Numb”OfIÅuts
, );

43 
™kG‘CÚ¡Maüo
Ğ
MaxModes
, );

46 
S‘IÅut
Ğ
M©rixTy³
 
ã©u»M©rix
 );

51 
S‘Di¡ributiÚ
 ( 
boŞ
 
gaussŸn
 )

53 
	ggaussŸnDi¡ributiÚ
 = 
gaussŸn
 ;

56 
	g´Ùeùed
:

58 
¤•CÜ»¥Úd’ûEv®u©Ü
();

59 ~
¤•CÜ»¥Úd’ûEv®u©Ü
();

61 
MeshPoš‹rA¼ay
 
	gm_Meshes
 ;

62 
	gm_Numb”OfIÅuts
 ;

63 
	gm_MaxModes
 ;

64 
boŞ
 
	ggaussŸnDi¡ributiÚ
 ;

66 
Compu‹G’”®iz©iÚE¼Ü
 ( 
i
, 
M
 ) ;

67 
G’”©eUnifÜmRªdomNumb”
 () ;

68 
G’”©eGaussŸnRªdomNumb”
 () ;

70 
SurçûDi¡ªû
 ( 
M©rixTy³
 
äom
, M©rixTy³ 
to
, 
nPošts
 ) ;

71 
Wr™eSurçûFÜDebug
 (
M©rixTy³
 *
surçû
, 
nPošts
, 
¡d
::
¡ršg
 
f’ame
) ;

72 
BršgIÅutToOrigš
 () ;

74 
M©rixTy³
 
	gã©u»M©rix
;

78 #iâdeà
ITK_MANUAL_INSTANTIATION


79 
	~"¤•CÜ»¥Úd’ûEv®u©Ü.txx
"

	@srepprocrustes.cpp

1 
	~"¤•´oüu¡es.h
"

3 
	g¤•´oüu¡es
::
	$¤•´oüu¡es
()

5 
	}
}

8 
¤•´oüu¡es
::
	$¤•´oüu¡es
(cÚ¡ * 
¤•FŞd”
)

10 
this
->
¤•FŞd”
 = 
	`¡ršg
(srepFolder);

11 
	}
}

17 
	g¤•´oüu¡es
::
	$´oüu¡esAlignm’t
( ){

18 
cout
<<"+++++++++++ P»·»ØdØProüu¡e ®ignm’ˆtØ¤• und”: "<<
this
->
¤•FŞd”
<<" ++++++++++++"<<
’dl
;

19 
veùÜ
<
¡ršg
> 
¤•P©hNames
 = 
s
.
	`g‘Mod–Çme
(
this
->
¤•FŞd”
);

20 
š‹½Ş©iÚLev–
 = 2;

22 
Proüu¡esF‹rTy³
::
Poš‹r
 
´oüu¡esF‹r
 = Proüu¡esF‹rTy³::
	`New
();

23 
´oüu¡esF‹r
->
	`S‘Numb”OfIÅuts
(
¤•P©hNames
.
	`size
());

24 
´oüu¡esF‹r
->
	`S‘U£In™ŸlAv”ageOn
();

25 
´oüu¡esF‹r
->
	`S‘U£SÿlšgOn
();

26 
´oüu¡esF‹r
->
	`S‘U£SšgËI‹¿tiÚOff
();

27 
´oüu¡esF‹r
->
	`S‘U£NÜm®iz©iÚOn
();

28 
´oüu¡esF‹r
->
	`S‘AlignRÙ©iÚOn
();

30 if(!
¤•P©hNames
.
	`em±y
()){

31 
cout
<<"-------------th”¬e: "<<
¤•P©hNames
.
	`size
()<<"¤• šhi fŞd”."<<
’dl
;

32 
q
 =0; q<
¤•P©hNames
.
	`size
();q++){

34 
®ign¤•
 
	`as
(
¤•P©hNames
[
q
].
	`c_¡r
(), 
š‹½Ş©iÚLev–
);

37 
as
.
	`weightA»aToBound¬yPošts
();

39 
veùÜ
<
VeùÜ3D
> 
bPošts
 = 
as
.
	`g‘Bound¬yPošts
();

40 
veùÜ
<
VeùÜ3D
> 
sPošts
 = 
as
.
	`g‘PoštsOnSk–‘®
();

44 
mesh_b_šdex
 = 0;

45 
mesh_s_šdex
 =0;

48 
this
->
mesh_b
 = 
MeshTy³
::
	`New
();

51 
PoštTy³
 
pošt
;

52 
this
->
mesh_s
 = 
MeshTy³
::
	`New
();

56 
i
 = 0; i< 
bPošts
.
	`size
(); i++){

57 
pošt
[0]ğ
bPošts
[
i
].
	`g‘X
();

58 
pošt
[1]ğ
bPošts
[
i
].
	`g‘Y
();

59 
pošt
[2]ğ
bPošts
[
i
].
	`g‘Z
();

60 
this
->
mesh_b
->
	`S‘Pošt
(
mesh_b_šdex
, 
pošt
);

61 
mesh_b_šdex
++;

65 
i
 = 0; i< 
sPošts
.
	`size
(); i++){

66 
pošt
[0]ğ
sPošts
[
i
].
	`g‘X
();

67 
pošt
[1]ğ
sPošts
[
i
].
	`g‘Y
();

68 
pošt
[2]ğ
sPošts
[
i
].
	`g‘Z
();

69 
this
->
mesh_s
->
	`S‘Pošt
(
mesh_s_šdex
, 
pošt
);

70 
mesh_s_šdex
++;

114 
´oüu¡esF‹r
->
	`S‘IÅut
(
q
, 
this
->
mesh_s
);

117 
this
->
mesh_s_li¡
.
	`push_back
Ñhis->
mesh_s
);

121 
´oüu¡esF‹r
->
	`Upd©e
();

136 
i
 =0; i<
¤•P©hNames
.
	`size
();i++){

144 
F‹rTy³
::
Poš‹r
 
f‹r
 = F‹rTy³::
	`New
();

147 
this
->
affšeT¿nsfÜm
 = 
´oüu¡esF‹r
->
	`G‘T¿nsfÜm
(
i
);

150 
f‹r
->
	`S‘IÅut
(
this
->
mesh_s_li¡
[
i
]);

151 
f‹r
->
	`S‘T¿nsfÜm
(
this
->
affšeT¿nsfÜm
);

154 
f‹r
->
	`Upd©e
();

156 
¡d
::
cout
 << "F‹r: " << 
f‹r
;

159 
MeshTy³
::
Poš‹r
 
ouutMesh
 = 
f‹r
->
	`G‘Ouut
();

161 
cout
 << "Ouuˆmesh_ ha " << 
ouutMesh
->
	`G‘Numb”OfPošts
()<< "…ošts." <<
’dl
;

164 
MeshTy³
::
PoštsCÚš”Poš‹r
 
ŒªsfÜmedPošts
 = 
ouutMesh
->
	`G‘Pošts
();

165 
PoštsCÚš”Ty³
::
CÚ¡I‹¿tÜ
 
™
 = 
ŒªsfÜmedPošts
->
	`Begš
();

166  
™
 !ğ
ŒªsfÜmedPošts
->
	`End
() ) {

167 
PoštTy³
 
p
 = 
™
.
	`V®ue
();

168 
¡d
::
cout
.
	`width
Ğ5 ); std::couˆ<< 
p
[0] << ", ";

169 
¡d
::
cout
.
	`width
Ğ5 ); std::couˆ<< 
p
[1] << ", ";

170 
¡d
::
cout
.
	`width
Ğ5 ); std::couˆ<< 
p
[2] << std::
’dl
;

171 ++
™
;

175 
	`wr™eAlignToSk–‘®
(
¤•P©hNames
[
i
], 
ouutMesh
);

178  
EXIT_SUCCESS
;

181 
cout
<<"You iÅuˆ¨šv®id s»°fe,…Ëa£ checkh·th o¸Çmoàthi ¤•!"<<
’dl
;

182  
EXIT_FAILURE
;

184 
	}
}

192 
	g¤•´oüu¡es
::
	$wr™eAlignToSk–‘®
(
¡ršg
 
feP©hName
, 
MeshTy³
::
Poš‹r
 
ouutMesh
){

193 
cout
<<"----------wr™e....."<<
feP©hName
<<"Ø/mod–s/®ignm’t/"<<
’dl
;

195 
Regi¡ry
 
»gi¡ry
;

196 
»gi¡ry
.
	`»adFromFe
(
feP©hName
.
	`c_¡r
(), 
çl£
);

198 
M3DQuadFigu»
* 
quadFig
 = 
s
.
	`G‘QuadFigu»
(
feP©hName
.
	`c_¡r
());

201 
MeshTy³
::
PoštsCÚš”Poš‹r
 
ŒªsfÜmedPošts
 = 
ouutMesh
->
	`G‘Pošts
();

202 
PoštsCÚš”Ty³
::
CÚ¡I‹¿tÜ
 
™
 = 
ŒªsfÜmedPošts
->
	`Begš
();

206 
u
 =0; u<
quadFig
->
	`g‘RowCouÁ
(); u++){

207 
v
 =0; v<
quadFig
->
	`g‘CŞumnCouÁ
(); v++){

208 ifĞ
™
 !ğ
ŒªsfÜmedPošts
->
	`End
() ) {

209 
PoštTy³
 
p
 = 
™
.
	`V®ue
();

211 
quadFig
->
	`g‘Prim™ivePŒ
(
u
,
v
)->
	`£tX
(
p
[0],p[1],p[2]);

212 ++
™
;

220 
figu»SŒ
[1024];

222 
	`¥rštf
(
figu»SŒ
, "model.figure[%d]", 0);

224 
quadFig
->
	`wr™eFigu»
(
figu»SŒ
,
»gi¡ry
);

226 
¡ršg
 
f’ame
 = 
s
.
	`g‘P©hName
(
feP©hName
è+ 
	`¡ršg
("/ouut/")+ls.
	`g‘FeNameW™hEx‹nsiÚ
(filePathName);

230 
»gi¡ry
.
	`wr™eToFe
(
f’ame
.
	`c_¡r
());

232 
	}
}

	@srepprocrustes.h

1 #iâdeà
SREPPROCRUSTES_H


2 
	#SREPPROCRUSTES_H


	)

4 
	~"®ign¤•.h
"

8 şas 
	c¤•´oüu¡es


10 
	mpublic
:

11 
¤•´oüu¡es
();

12 
¤•´oüu¡es
(cÚ¡ * 
¤•FŞd”
);

15 
	m™k
::
	tDeçuÉDyÇmicMeshT¿™s
<, 3, 3, , > 
	tMeshT¿™sTy³
;

16 
	m™k
::
	tMesh
<, 3, 
	tMeshT¿™sTy³
> 
	tMeshTy³
;

19 
	mMeshTy³
::
	tPoštsCÚš”
::
	tI‹¿tÜ
 
	tPoštsI‹¿tÜ
;

22 
	m™k
::
	tMesh3DProüu¡esAlignF‹r
<
	tMeshTy³
, MeshTy³> 
	tProüu¡esF‹rTy³
;

28 
	m™k
::
	tAffšeT¿nsfÜm
<,3> 
	tT¿nsfÜmTy³
;

30 
	m™k
::
	tT¿nsfÜmMeshF‹r
<
	tMeshTy³
, MeshTy³, 
	tT¿nsfÜmTy³
> 
	tF‹rTy³
;

33 
	mMeshTy³
::
	tPoštsCÚš”
 
	tPoštsCÚš”Ty³
;

36 
	mMeshTy³
::
	tPoštsCÚš”Poš‹r
 PointsContainerPointer;

39 
	mMeshTy³
::
	tPoštTy³
 PointType;

43 
´oüu¡esAlignm’t
( );

44 
wr™eAlignToSk–‘®
(
¡ršg
 
feP©hName
, 
MeshTy³
::
Poš‹r
 
ouutMesh
);

47 
	m´iv©e
:

48 
MeshTy³
::
Poš‹r
 
mesh_b
;

49 
	mMeshTy³
::
Poš‹r
 
mesh_s
;

50 
	mveùÜ
<
	mMeshTy³
::
Poš‹r
> 
mesh_s_li¡
;

51 
¡ršg
 
	m¤•FŞd”
;

54 
toŞsfunc
 
	ms
;

56 
	mT¿nsfÜmTy³
::
Poš‹r
 
affšeT¿nsfÜm
;

	@thinplatesplinepdmtosrep.cpp

10 
	~"thš¶©e¥lš•dmto¤•.h
"

12 
	gthš¶©e¥lš•dmto¤•
::
	$thš¶©e¥lš•dmto¤•
()

14 
	}
}

20 
thš¶©e¥lš•dmto¤•
::
T¿nsfÜmTy³
::
Poš‹r
hš¶©e¥lš•dmto¤•::
	$g‘_s
(cÚ¡ * 
sourûf’ame
, cÚ¡ * 
rg‘f’ame
){

25 
PoštS‘Ty³
::
Poš‹r
 
sourûLªdM¬ks
 = PoštS‘Ty³::
	`New
();

26 
PoštS‘Ty³
::
Poš‹r
 
rg‘LªdM¬ks
 = PoštS‘Ty³::
	`New
();

27 
PoštTy³
 
p1
; PoštTy³ 
p2
;

28 
PoštS‘Ty³
::
PoštsCÚš”
::
Poš‹r
 
sourûLªdM¬kCÚš”
 = 
sourûLªdM¬ks
->
	`G‘Pošts
();

29 
PoštS‘Ty³
::
PoštsCÚš”
::
Poš‹r
 
rg‘LªdM¬kCÚš”
 = 
rg‘LªdM¬ks
->
	`G‘Pošts
();

31 
PoštIdTy³
 
id_s
 = 
™k
::
Num”icT¿™s
< PoštIdTy³ >::
Z”o
;

32 
PoštIdTy³
 
id_t
 = 
™k
::
Num”icT¿™s
< PoštIdTy³ >::
Z”o
;

35 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyD©a_sourû
;

36 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyD©a_rg‘
;

38 
vtkSm¬tPoš‹r
<
vtkPŞyD©aR—d”
> 
»ad”_sourû
 = vtkSm¬tPoš‹r<vtkPŞyD©aR—d”>::
	`New
();

39 
vtkSm¬tPoš‹r
<
vtkPŞyD©aR—d”
> 
»ad”_rg‘
 = vtkSm¬tPoš‹r<vtkPŞyD©aR—d”>::
	`New
();

41 
»ad”_sourû
->
	`S‘FeName
(
sourûf’ame
);

42 
»ad”_sourû
->
	`Upd©e
();

43 
pŞyD©a_sourû
 = 
»ad”_sourû
->
	`G‘Ouut
();

44 
cout
<<"----sourûf’ame: "<<
sourûf’ame
<<
’dl
;

46 
»ad”_rg‘
->
	`S‘FeName
(
rg‘f’ame
);

47 
»ad”_rg‘
->
	`Upd©e
();

48 
pŞyD©a_rg‘
 = 
»ad”_rg‘
->
	`G‘Ouut
();

49 
cout
<<"----rg‘f’ame: "<<
rg‘f’ame
<<
’dl
;

52 
i
 = 0; i < 
pŞyD©a_sourû
->
	`G‘Numb”OfPošts
(); i++){

53 
p
[3];

54 
pŞyD©a_sourû
->
	`G‘Pošt
(
i
,
p
);

57 
p1
[0] = 
p
[0];

58 
p1
[1] = 
p
[1];

59 
p1
[2] = 
p
[2];

61 
sourûLªdM¬kCÚš”
->
	`In£¹EËm’t
(
id_s
, 
p1
);

62 
id_s
++;

66 
i
 = 0; i < 
pŞyD©a_rg‘
->
	`G‘Numb”OfPošts
(); i++){

67 
p
[3];

68 
pŞyD©a_rg‘
->
	`G‘Pošt
(
i
,
p
);

69 
p2
[0] = 
p
[0];

70 
p2
[1] = 
p
[1];

71 
p2
[2] = 
p
[2];

73 
rg‘LªdM¬kCÚš”
->
	`In£¹EËm’t
(
id_t
, 
p2
);

74 
id_t
++;

77 
T¿nsfÜmTy³
::
Poš‹r
 
s
 = T¿nsfÜmTy³::
	`New
();

78 
s
->
	`S‘SourûLªdm¬ks
(
sourûLªdM¬ks
);

79 
s
->
	`S‘T¬g‘Lªdm¬ks
(
rg‘LªdM¬ks
);

81 
cout
<<"Computšg W M©rix... "<<
’dl
;

82 
s
->
	`Compu‹WM©rix
();

83 
cout
<<"Compu‹ W M©rix fšished!"<<
’dl
;

106  
s
;

107 
	}
}

111 
	gthš¶©e¥lš•dmto¤•
::
PoštTy³
 
thš¶©e¥lš•dmto¤•
::
	$VeùÜ3DtoPoštTy³
(
VeùÜ3D
 
pošt
){

112 
PoštTy³
 
pos
;

113 
pos
[0] = 
pošt
.
	`g‘X
();

114 
pos
[1] = 
pošt
.
	`g‘Y
();

115 
pos
[2] = 
pošt
.
	`g‘Z
();

117  
pos
;

118 
	}
}

121 
	gthš¶©e¥lš•dmto¤•
::
	$ÿlcuÏ‹SpokeL’gth
(
PoštTy³
 

, PoštTy³ 
t
){

122 
PoštTy³
 
¥okeVeùÜ
;

123 
dim
 = 0; dim < 3; dim++){

124 
¥okeVeùÜ
[
dim
] = 
t
[dim] - 

[dim];

128 
¥okeRadiu
=0;

129 
dim
=0; dim<3; dim++){

130 
¥okeRadiu
 +ğ
¥okeVeùÜ
[
dim
] * spokeVector[dim];

133  
	`sq¹
(
¥okeRadiu
);

134 
	}
}

136 
VeùÜ3D
 
	gthš¶©e¥lš•dmto¤•
::
	$ÿlcuÏ‹SpokeDœeùiÚ
(
PoštTy³
 

, PoštTy³ 
t
){

137 
VeùÜ3D
 
¥okeVeùÜ
;

140 
¥okeRadiu
 = 
	`ÿlcuÏ‹SpokeL’gth
(

, 
t
);

143 
¥okeVeùÜ
.
	`£tX
((
t
[0] - 

[0]è/ 
¥okeRadiu
);

144 
¥okeVeùÜ
.
	`£tY
((
t
[1] - 

[1]è/ 
¥okeRadiu
);

145 
¥okeVeùÜ
.
	`£tZ
((
t
[2] - 

[2]è/ 
¥okeRadiu
);

147  
¥okeVeùÜ
;

148 
	}
}

155 
	gthš¶©e¥lš•dmto¤•
::
	$s_to_¤•
(cÚ¡ * 
sourûf’ame
, cÚ¡ * 
rg‘f’ame
, cÚ¡ * 
sourû¤•f’ame
,

156 cÚ¡ * 
rg‘¤•FŞd”
){

159 
T¿nsfÜmTy³
::
Poš‹r
 
s
 = 
	`g‘_s
(
sourûf’ame
, 
rg‘f’ame
);

162 
M3DQuadFigu»
* 
quadFig
 = 
s
.
	`G‘QuadFigu»
(
sourû¤•f’ame
);

163 
rowNums
 = 
quadFig
->
	`g‘RowCouÁ
();

164 
cŞNums
 = 
quadFig
->
	`g‘CŞumnCouÁ
();

167 
u
 = 0; u < 
rowNums
; u++){

168 
v
 = 0; v < 
cŞNums
; v++){

170 
M3DQuadPrim™ive
* 
´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadFig
->
	`g‘Prim™ivePŒ
(
u
,
v
));

172 
VeùÜ3D
 

 = 
´im
->
	`g‘X
();

174 
VeùÜ3D
 
up_t
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R0
()*´im->
	`g‘U0
();

176 
VeùÜ3D
 
down_t
 = 
´im
->
	`g‘X
(è+…rim->
	`g‘R1
()*´im->
	`g‘U1
();

179 
PoštTy³
 
ŒªsfÜmed_
 = 
s
->
	`T¿nsfÜmPošt
(
	`VeùÜ3DtoPoštTy³
(

));

180 
PoštTy³
 
ŒªsfÜmed_up_t
 = 
s
->
	`T¿nsfÜmPošt
(
	`VeùÜ3DtoPoštTy³
(
up_t
));

181 
PoštTy³
 
ŒªsfÜmed_down_t
 = 
s
->
	`T¿nsfÜmPošt
(
	`VeùÜ3DtoPoštTy³
(
down_t
));

184 
upSpokeRadiu
 = 
	`ÿlcuÏ‹SpokeL’gth
(
ŒªsfÜmed_
, 
ŒªsfÜmed_up_t
);

185 
downSpokeRadiu
 = 
	`ÿlcuÏ‹SpokeL’gth
(
ŒªsfÜmed_
, 
ŒªsfÜmed_down_t
);

187 
VeùÜ3D
 
upSpokeDœ
 = 
	`ÿlcuÏ‹SpokeDœeùiÚ
(
ŒªsfÜmed_
, 
ŒªsfÜmed_up_t
);

188 
VeùÜ3D
 
downSpokeDœ
 = 
	`ÿlcuÏ‹SpokeDœeùiÚ
(
ŒªsfÜmed_
, 
ŒªsfÜmed_down_t
);

191 
´im
->
	`£tR0
(
upSpokeRadiu
);

192 
´im
->
	`£tR1
(
downSpokeRadiu
);

193 
´im
->
	`£tU0
(
upSpokeDœ
);

194 
´im
->
	`£tU1
(
downSpokeDœ
);

197 if(
u
==0 || u==
rowNums
-1 || 
v
==0 || v==
cŞNums
-1) {

198 
M3DQuadEndPrim™ive
* 
’dPrim
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
quadFig
->
	`g‘Prim™ivePŒ
(
u
, 
v
));

199 
VeùÜ3D
 
üe¡_t
 = 
’dPrim
->
	`g‘X
(è+ƒndPrim->
	`g‘REnd
()*’dPrim->
	`g‘UEnd
();

201 
PoštTy³
 
ŒªsfÜm_üe¡_t
 = 
s
->
	`T¿nsfÜmPošt
(
	`VeùÜ3DtoPoštTy³
(
üe¡_t
));

204 
üe¡SpokeRadiu
 = 
	`ÿlcuÏ‹SpokeL’gth
(
ŒªsfÜmed_
, 
ŒªsfÜm_üe¡_t
);

205 
VeùÜ3D
 
üe¡SpokeDœ
 = 
	`ÿlcuÏ‹SpokeDœeùiÚ
(
ŒªsfÜmed_
, 
ŒªsfÜm_üe¡_t
);

208 
’dPrim
->
	`£tREnd
(
üe¡SpokeRadiu
);

209 
’dPrim
->
	`£tUEnd
(
üe¡SpokeDœ
);

212 
´im
->
	`£tX
(
ŒªsfÜmed_
[0],ransformed_tail[1],ransformed_tail[2]);

217 
	`§veMod–
(
quadFig
, 
rg‘f’ame
, 
sourû¤•f’ame
, 
rg‘¤•FŞd”
);

219  
EXIT_SUCCESS
;

220 
	}
}

224 
	gthš¶©e¥lš•dmto¤•
::
	$§veMod–
(
M3DQuadFigu»
* 
quadFig
, cÚ¡ * 
rg‘f’ame
, cÚ¡ * 
sourû¤•f’ame
,

225 cÚ¡ * 
rg‘¤•FŞd”
){

226 
Regi¡ry
 
»gi¡ry
;

227 
»gi¡ry
.
	`»adFromFe
(
sourû¤•f’ame
, 
çl£
);

230 
figu»SŒ
[1024];

232 
	`¥rštf
(
figu»SŒ
, "model.figure[%d]", 0);

234 
quadFig
->
	`wr™eFigu»
(
figu»SŒ
,
»gi¡ry
);

236 
¡ršg
 
f’ame
 = 
	`¡ršg
(
rg‘¤•FŞd”
è+ 
s
.
	`g‘Ba£FeName
(
rg‘f’ame
) + ".m3d";

238 
cout
<<"----Wr™¤•o: "<< 
f’ame
 << 
’dl
;

240 
»gi¡ry
.
	`wr™eToFe
(
f’ame
.
	`c_¡r
());

242 
cout
<<"----Fšished!" << 
’dl
;

243 
	}
}

251 
	gthš¶©e¥lš•dmto¤•
::
	$muÉË_‹m¶©e_s
(cÚ¡ * 
m¶©ePDMFeLi¡
, cÚ¡ * 
rg‘PDM
, cÚ¡ * 
m¶©eS»pFeLi¡
,

252 cÚ¡ * 
rg‘S»pFŞd”
){

254 
veùÜ
< 
¡d
::
¡ršg
 > 
‹m¶©ePDMs
 = 
	`»adTem·Ée
(
m¶©ePDMFeLi¡
);

257 
veùÜ
< 
¡d
::
¡ršg
 > 
‹m¶©eS»ps
 = 
	`»adTem·Ée
(
m¶©eS»pFeLi¡
);

259 
‹m¶©eNum
 = 
‹m¶©ePDMs
.
	`size
();

260 if(
‹m¶©eNum
 !ğ
‹m¶©eS»ps
.
	`size
()){

261 
¡d
::
û¼
 << "Msg fromhš¶©e¥lš•dmto¤•::muÉË_‹m¶©e_s: som‘hšg wrÚg w™hhšpuˆ‹m¶©es!!!" << std::
’dl
;

262  
EXIT_FAILURE
;

266 
veùÜ
<
T¿nsfÜmTy³
::
Poš‹r
 > 
sLi¡
;

267 
i
 = 0; i < 
‹m¶©eNum
; i++){

269 
T¿nsfÜmTy³
::
Poš‹r
 
s
 = 
	`g‘_s
(
‹m¶©ePDMs
[
i
].
	`c_¡r
(), 
rg‘PDM
);

271 
sLi¡
.
	`push_back
(
s
);

275 
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
;

276 
i
 = 0; i < 
‹m¶©eNum
; i++){

278 
M3DQuadFigu»
* 
quadFig
 = 
s
.
	`G‘QuadFigu»
(
‹m¶©eS»ps
[
i
].
	`c_¡r
());

280 
quadFigLi¡
.
	`push_back
(
quadFig
);

284 
M3DQuadFigu»
* 
quadFig
 = 
	`compu‹M—nS»p
(
sLi¡
, 
Œue
, 
quadFigLi¡
);

287 
¡ršg
 
rg‘f’ame
 = 
	`¡ršg
(
rg‘S»pFŞd”
è+ "\/" + 
s
.
	`g‘Ba£FeName
(
rg‘PDM
) + ".m3d";

288 
¡ršg
 
ªy¤•f’ame
 = 
‹m¶©eS»ps
[0];

289 
	`§veMod–
(
quadFig
, 
rg‘f’ame
.
	`c_¡r
(), 
ªy¤•f’ame
.c_¡r(), 
rg‘S»pFŞd”
);

291  
EXIT_SUCCESS
;

292 
	}
}

295 
M3DQuadFigu»
* 
	gthš¶©e¥lš•dmto¤•
::
compu‹M—nS»p
(
veùÜ
<
T¿nsfÜmTy³
::
Poš‹r
 > 
sLi¡
, 
boŞ
 
u£TPS
, veùÜ<M3DQuadFigu»* > 
quadFigLi¡
){

297 
M3DQuadFigu»
* 
	gm—nQuadFig
 = 
quadFigLi¡
[0];

299 
	growNums
 = 
m—nQuadFig
->
g‘RowCouÁ
();

300 
	gcŞNums
 = 
m—nQuadFig
->
g‘CŞumnCouÁ
();

303 
	gu
 = 0; u < 
	growNums
; u++){

304 
	gv
 = 0; v < 
	gcŞNums
; v++){

306 
PoštTy³
 
	g
 = 
m—nPošt
(
sLi¡
, 
u£TPS
, 
quadFigLi¡
, 
u
, 
v
, 1);

309 
PoštTy³
 
	gup_t
 = 
m—nPošt
(
sLi¡
, 
u£TPS
, 
quadFigLi¡
, 
u
, 
v
, 3);

312 
PoštTy³
 
	gdown_t
 = 
m—nPošt
(
sLi¡
, 
u£TPS
, 
quadFigLi¡
, 
u
, 
v
, 5);

315 
	gupSpokeRadiu
 = 
ÿlcuÏ‹SpokeL’gth
(

, 
up_t
);

316 
	gdownSpokeRadiu
 = 
ÿlcuÏ‹SpokeL’gth
(

, 
down_t
);

318 
VeùÜ3D
 
	gupSpokeDœ
 = 
ÿlcuÏ‹SpokeDœeùiÚ
(

, 
up_t
);

319 
VeùÜ3D
 
	gdownSpokeDœ
 = 
ÿlcuÏ‹SpokeDœeùiÚ
(

, 
down_t
);

321 
M3DQuadPrim™ive
* 
	g´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
m—nQuadFig
->
g‘Prim™ivePŒ
(
u
,
v
));

324 
	g´im
->
£tR0
(
upSpokeRadiu
);

325 
	g´im
->
£tR1
(
downSpokeRadiu
);

326 
	g´im
->
£tU0
(
upSpokeDœ
);

327 
	g´im
->
£tU1
(
downSpokeDœ
);

330 if(
	gu
==0 || 
u
==
rowNums
-1 || 
v
==0 || v==
cŞNums
-1) {

332 
PoštTy³
 
üe¡_t
 = 
m—nPošt
(
sLi¡
, 
u£TPS
, 
quadFigLi¡
, 
u
, 
v
, 7);

334 
M3DQuadEndPrim™ive
* 
	g’dPrim
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
m—nQuadFig
->
g‘Prim™ivePŒ
(
u
, 
v
));

337 
	güe¡SpokeRadiu
 = 
ÿlcuÏ‹SpokeL’gth
(

, 
üe¡_t
);

338 
VeùÜ3D
 
	güe¡SpokeDœ
 = 
ÿlcuÏ‹SpokeDœeùiÚ
(

, 
üe¡_t
);

341 
	g’dPrim
->
£tREnd
(
üe¡SpokeRadiu
);

342 
	g’dPrim
->
£tUEnd
(
üe¡SpokeDœ
);

348 
	g´im
->
£tX
(

[0],ail[1],ail[2]);

352  
	gm—nQuadFig
;

357 
M3DQuadFigu»
* 
	gthš¶©e¥lš•dmto¤•
::
compu‹_m—n_¤•_Ãw
(
veùÜ
<M3DQuadFigu»* > 
quadFigLi¡
){

359 
M3DQuadFigu»
* 
m—nQuadFig
 = 
quadFigLi¡
[0];

361 
	growNums
 = 
m—nQuadFig
->
g‘RowCouÁ
();

362 
	gcŞNums
 = 
m—nQuadFig
->
g‘CŞumnCouÁ
();

365 
	gu
 = 0; u < 
	growNums
; u++){

366 
	gv
 = 0; v < 
	gcŞNums
; v++){

368 
VeùÜ3D
 
	gup_¥oke_dœ
 = 
m—n_dœeùiÚ
(
quadFigLi¡
, 
u
, 
v
, 0);

369 
VeùÜ3D
 
	gdown_¥oke_dœ
 = 
m—n_dœeùiÚ
(
quadFigLi¡
, 
u
, 
v
, 1);

371 
	gup_¥oke_¿dius
 = 
m—n_¿dius
(
quadFigLi¡
, 
u
, 
v
, 0);

372 
	gdown_¥oke_¿dius
 = 
m—n_¿dius
(
quadFigLi¡
, 
u
, 
v
, 1);

374 
M3DQuadPrim™ive
* 
	g´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
m—nQuadFig
->
g‘Prim™ivePŒ
(
u
,
v
));

377 
	g´im
->
£tR0
(
up_¥oke_¿dius
);

378 
	g´im
->
£tR1
(
down_¥oke_¿dius
);

379 
	g´im
->
£tU0
(
up_¥oke_dœ
);

380 
	g´im
->
£tU1
(
down_¥oke_dœ
);

383 if(
	gu
==0 || 
u
==
rowNums
-1 || 
v
==0 || v==
cŞNums
-1) {

385 
VeùÜ3D
 
üe¡_¥oke_dœ
 = 
m—n_dœeùiÚ
(
quadFigLi¡
, 
u
, 
v
, 2);

386 
	güe¡_¥oke_¿dius
 = 
m—n_¿dius
(
quadFigLi¡
, 
u
, 
v
, 2);

388 
M3DQuadEndPrim™ive
* 
	g’dPrim
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
m—nQuadFig
->
g‘Prim™ivePŒ
(
u
, 
v
));

391 
	g’dPrim
->
£tREnd
(
üe¡_¥oke_¿dius
);

392 
	g’dPrim
->
£tUEnd
(
üe¡_¥oke_dœ
);

396 
PoštTy³
 
	gsk–‘®_pos™iÚ
 = 
m—n_pošt
(
quadFigLi¡
, 
u
, 
v
);

397 
	g´im
->
£tX
(
sk–‘®_pos™iÚ
[0], skeletal_position[1], skeletal_position[2]);

401  
	gm—nQuadFig
;

409 
VeùÜ3D
 
	gthš¶©e¥lš•dmto¤•
::
m—n_dœeùiÚ
(
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
, 
side
){

410 
PoštTy³
 
	gm—n_dœ
;

411 
	gm—n_dœ
[0] = 0.0;

412 
	gm—n_dœ
[1] = 0.0;

413 
	gm—n_dœ
[2] = 0.0;

415 
	g‹m¶©eNum
 = 
quadFigLi¡
.
size
();

418 
	gi
 = 0; i < 
	g‹m¶©eNum
; i++){

419 
M3DQuadFigu»
* 
	gquadFig_i
 = 
quadFigLi¡
[
i
];

420 
M3DQuadPrim™ive
* 
	g´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadFig_i
->
g‘Prim™ivePŒ
(
u
,
v
));

422 
	gside
){

426 
VeùÜ3D
 
¥oke_dœ
 = 
´im
->
g‘U0
();

428 
	gm—n_dœ
 = 
sumPošt
(
m—n_dœ
, 
VeùÜ3DtoPoštTy³
(
¥oke_dœ
));

434 
VeùÜ3D
 
¥oke_dœ
 = 
´im
->
g‘U1
();

436 
	gm—n_dœ
 = 
sumPošt
(
m—n_dœ
, 
VeùÜ3DtoPoštTy³
(
¥oke_dœ
));

442 
M3DQuadEndPrim™ive
* 
’dPrim
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
quadFig_i
->
g‘Prim™ivePŒ
(
u
, 
v
));

443 
VeùÜ3D
 
	g¥oke_dœ
 = 
’dPrim
->
g‘UEnd
();

445 
	gm—n_dœ
 = 
sumPošt
(
m—n_dœ
, 
VeùÜ3DtoPoštTy³
(
¥oke_dœ
));

452 
	gm—n_dœ
[0] /ğ
‹m¶©eNum
;

453 
	gm—n_dœ
[1] /ğ
‹m¶©eNum
;

454 
	gm—n_dœ
[2] /ğ
‹m¶©eNum
;

457 
	gdi¡ªû
 = 0.0;

458 
	gdim
 = 0; dim < 3; dim++){

459 
	gdi¡ªû
 +ğ
pow
(
m—n_dœ
[
dim
], 2);

462 
	g¥ok–’gth
 = 
sq¹
(
di¡ªû
);

464 
VeùÜ3D
 
	gnÜM—nDœ
;

465 
	gnÜM—nDœ
.
£tX
(
m—n_dœ
[0] / 
¥ok–’gth
);

466 
	gnÜM—nDœ
.
£tY
(
m—n_dœ
[1] / 
¥ok–’gth
);

467 
	gnÜM—nDœ
.
£tZ
(
m—n_dœ
[2] / 
¥ok–’gth
);

469  
	gnÜM—nDœ
;

475 
	gthš¶©e¥lš•dmto¤•
::
m—n_¿dius
(
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
, 
side
){

476 
	gm—n_¿dius
 = 0.0;

478 
	g‹m¶©eNum
 = 
quadFigLi¡
.
size
();

481 
	gi
 = 0; i < 
	g‹m¶©eNum
; i++){

482 
M3DQuadFigu»
* 
	gquadFig_i
 = 
quadFigLi¡
[
i
];

483 
M3DQuadPrim™ive
* 
	g´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadFig_i
->
g‘Prim™ivePŒ
(
u
,
v
));

485 
	gside
){

487 
m—n_¿dius
 +ğ
´im
->
g‘R0
();

490 
m—n_¿dius
 +ğ
´im
->
g‘R1
();

493 
M3DQuadEndPrim™ive
* 
’dPrim
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
quadFig_i
->
g‘Prim™ivePŒ
(
u
, 
v
));

495 
	gm—n_¿dius
 +ğ
’dPrim
->
g‘REnd
();

501 
	gm—n_¿dius
 /ğ
‹m¶©eNum
;

503  
	gm—n_¿dius
;

511 
	gthš¶©e¥lš•dmto¤•
::
PoštTy³
 
thš¶©e¥lš•dmto¤•
::
m—n_pošt
(
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
){

512 
PoštTy³
 
	gm—nPošt
;

513 
	gm—nPošt
[0] = 0.0;

514 
	gm—nPošt
[1] = 0.0;

515 
	gm—nPošt
[2] = 0.0;

517 
	g‹m¶©eNum
 = 
quadFigLi¡
.
size
();

520 
	gi
 = 0; i < 
	g‹m¶©eNum
; i++){

521 
M3DQuadFigu»
* 
	gquadFig_i
 = 
quadFigLi¡
[
i
];

522 
M3DQuadPrim™ive
* 
	g´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadFig_i
->
g‘Prim™ivePŒ
(
u
,
v
));

525 
VeùÜ3D
 
	g
 = 
´im
->
g‘X
();

527 
	gm—nPošt
 = 
sumPošt
(
m—nPošt
, 
VeùÜ3DtoPoštTy³
(

));

531 
	gdim
 = 0; dim < 3; dim++){

532 
	gm—nPošt
[
dim
] /ğ
‹m¶©eNum
;

535  
	gm—nPošt
;

543 
	gthš¶©e¥lš•dmto¤•
::
PoštTy³
 
thš¶©e¥lš•dmto¤•
::
m—nPošt
(
veùÜ
<
T¿nsfÜmTy³
::
Poš‹r
 > 
sLi¡
, 
boŞ
 
u£TPS
,

544 
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
, 
poštSide
){

545 
PoštTy³
 
	gpošt
;

546 
	gpošt
[0] = 0.0;

547 
	gpošt
[1] = 0.0;

548 
	gpošt
[2] = 0.0;

550 
	g‹m¶©eNum
 = 
quadFigLi¡
.
size
();

553 
	gi
 = 0; i < 
	g‹m¶©eNum
; i++){

554 
M3DQuadFigu»
* 
	gquadFig_i
 = 
quadFigLi¡
[
i
];

555 
M3DQuadPrim™ive
* 
	g´im
 = 
dyÇmic_ÿ¡
<M3DQuadPrim™ive*>(
quadFig_i
->
g‘Prim™ivePŒ
(
u
,
v
));

558 
VeùÜ3D
 
	g
 = 
´im
->
g‘X
();

560 
	gpoštSide
){

564 if(
u£TPS
) {

565 
PoštTy³
 
ŒªsfÜmed_
 = 
sLi¡
[
i
]->
T¿nsfÜmPošt
(
VeùÜ3DtoPoštTy³
(

));

566 
	gpošt
 = 
sumPošt
(
pošt
, 
ŒªsfÜmed_
);

569 
	gpošt
 = 
sumPošt
(
pošt
, 
VeùÜ3DtoPoštTy³
(

));

576 
VeùÜ3D
 
up_t
 = 
´im
->
g‘X
(è+…rim->
g‘R0
()*´im->
g‘U0
();

578 if(
	gu£TPS
) {

579 
PoštTy³
 
	gŒªsfÜmed_up_t
 = 
sLi¡
[
i
]->
T¿nsfÜmPošt
(
VeùÜ3DtoPoštTy³
(
up_t
));

580 
	gpošt
 = 
sumPošt
(
pošt
, 
ŒªsfÜmed_up_t
);

583 
	gpošt
 = 
sumPošt
(
pošt
, 
VeùÜ3DtoPoštTy³
(
up_t
));

590 
VeùÜ3D
 
down_t
 = 
´im
->
g‘X
(è+…rim->
g‘R1
()*´im->
g‘U1
();

592 if(
	gu£TPS
){

593 
PoštTy³
 
	gŒªsfÜmed_down_t
 = 
sLi¡
[
i
]->
T¿nsfÜmPošt
(
VeùÜ3DtoPoštTy³
(
down_t
));

594 
	gpošt
 = 
sumPošt
(
pošt
, 
ŒªsfÜmed_down_t
);

597 
	gpošt
 = 
sumPošt
(
pošt
, 
VeùÜ3DtoPoštTy³
(
down_t
));

603 
M3DQuadEndPrim™ive
* 
’dPrim
 = 
dyÇmic_ÿ¡
<M3DQuadEndPrim™ive*>(
quadFig_i
->
g‘Prim™ivePŒ
(
u
, 
v
));

604 
VeùÜ3D
 
	güe¡_t
 = 
’dPrim
->
g‘X
(è+ƒndPrim->
g‘REnd
()*’dPrim->
g‘UEnd
();

607 if(
	gu£TPS
){

608 
PoštTy³
 
	gŒªsfÜmed_üe¡_t
 = 
sLi¡
[
i
]->
T¿nsfÜmPošt
(
VeùÜ3DtoPoštTy³
(
üe¡_t
));

609 
	gpošt
 = 
sumPošt
(
pošt
, 
ŒªsfÜmed_üe¡_t
);

612 
	gpošt
 = 
sumPošt
(
pošt
, 
VeùÜ3DtoPoštTy³
(
üe¡_t
));

620 
PoštTy³
 
	gm—nPošt
;

621 
	gm—nPošt
[0] = 
pošt
[0] / 
‹m¶©eNum
;

622 
	gm—nPošt
[1] = 
pošt
[1] / 
‹m¶©eNum
;

623 
	gm—nPošt
[2] = 
pošt
[2] / 
‹m¶©eNum
;

625  
	gm—nPošt
;

632 
	gveùÜ
< 
	g¡d
::
¡ršg
 > 
thš¶©e¥lš•dmto¤•
::
	$»adTem·Ée
ĞcÚ¡ * 
li¡Name
) {

633 
veùÜ
< 
¡d
::
¡ršg
 > 
feP©hNames
;

635 
¡d
::
if¡»am
 
li¡Fe
;

636 
li¡Fe
.
	`İ’
Ğ
li¡Name
, 
¡d
::
ios_ba£
::
š
 );

637 ià(!
li¡Fe
) {

638 
¡d
::
û¼
 << "UÇbËØİ’ sh­li¡ \"" << 
li¡Name
 << "\"!" << std::
’dl
;

639 
EXIT_FAILURE
;

643 
¡d
::
¡ršg
 
cu¼’tFeName
;

644 !
li¡Fe
.
	`eof
()) {

645 
¡d
::
	`g‘lše
Ğ
li¡Fe
, 
cu¼’tFeName
 );

646 ià(
cu¼’tFeName
.
	`em±y
() || currentFileName[0]=='#') { ; }

648 
feP©hNames
.
	`push_back
(
cu¼’tFeName
);

651 
li¡Fe
.
	`şo£
();

653  
feP©hNames
;

654 
	}
}

657 
	gthš¶©e¥lš•dmto¤•
::
PoštTy³
 
thš¶©e¥lš•dmto¤•
::
	$sumPošt
(
PoštTy³
 
pošt1
, PoštTy³ 
pošt2
){

658 
PoštTy³
 
pošt
;

659 
dim
 = 0; dim < 3; dim++){

660 
pošt
[
dim
] = 
pošt1
[dim] + 
pošt2
[dim];

663  
pošt
;

664 
	}
}

673 
	gthš¶©e¥lš•dmto¤•
::
av¬age_¤•
(
veùÜ
< 
¡d
::
¡ršg
 > 
¤•P©hNames
, cÚ¡ * 
outFeName
) {

674 
	g¤•Num
 = 
¤•P©hNames
.
size
();

677 
	gveùÜ
<
	gM3DQuadFigu»
* > 
	gquadFigLi¡
;

678 
	gi
 = 0; i < 
	g¤•Num
; i++){

680 
M3DQuadFigu»
* 
	gquadFig
 = 
s
.
G‘QuadFigu»
(
¤•P©hNames
[
i
].
c_¡r
());

682 
	gquadFigLi¡
.
push_back
(
quadFig
);

685 
	gveùÜ
<
	gT¿nsfÜmTy³
::
Poš‹r
 > 
nuÎV®
;

686 
M3DQuadFigu»
* 
	gav¬ageQuadFig
 = 
compu‹M—nS»p
(
nuÎV®
, 
çl£
, 
quadFigLi¡
);

689 
Regi¡ry
 
	g»gi¡ry
;

690 
	g»gi¡ry
.
»adFromFe
(
¤•P©hNames
[0].
c_¡r
(), 
çl£
);

693 
	gfigu»SŒ
[1024];

694 
¥rštf
(
figu»SŒ
, "model.figure[%d]", 0);

695 
	gav¬ageQuadFig
->
wr™eFigu»
(
figu»SŒ
,
»gi¡ry
);

697 
	gcout
<<"----Wr™¤•o: "<< 
	goutFeName
 << 
	g’dl
;

698 
	g»gi¡ry
.
wr™eToFe
(
outFeName
);

699 
	gcout
<<"----Fšished!" << 
	g’dl
;

707 
	gthš¶©e¥lš•dmto¤•
::
av¬age_¤•_Ãw
(
veùÜ
< 
¡d
::
¡ršg
 > 
¤•P©hNames
, cÚ¡ * 
outFeName
) {

708 
	g¤•Num
 = 
¤•P©hNames
.
size
();

711 
	gveùÜ
<
	gM3DQuadFigu»
* > 
	gquadFigLi¡
;

712 
	gi
 = 0; i < 
	g¤•Num
; i++){

714 
M3DQuadFigu»
* 
	gquadFig
 = 
s
.
G‘QuadFigu»
(
¤•P©hNames
[
i
].
c_¡r
());

716 
	gquadFigLi¡
.
push_back
(
quadFig
);

719 
M3DQuadFigu»
* 
	gav¬ageQuadFig
 = 
compu‹_m—n_¤•_Ãw
(
quadFigLi¡
);

722 
Regi¡ry
 
	g»gi¡ry
;

723 
	g»gi¡ry
.
»adFromFe
(
¤•P©hNames
[0].
c_¡r
(), 
çl£
);

726 
	gfigu»SŒ
[1024];

727 
¥rštf
(
figu»SŒ
, "model.figure[%d]", 0);

728 
	gav¬ageQuadFig
->
wr™eFigu»
(
figu»SŒ
,
»gi¡ry
);

730 
	gcout
<<"----Wr™¤•o: "<< 
	goutFeName
 << 
	g’dl
;

731 
	g»gi¡ry
.
wr™eToFe
(
outFeName
);

732 
	gcout
<<"----Fšished!" << 
	g’dl
;

739 
	gthš¶©e¥lš•dmto¤•
::
ıns_av¬age_¤•
(
veùÜ
< 
¡d
::
¡ršg
 > 
¤•P©hNames
, cÚ¡ * 
outFeName
) {

740 
	g¤•Num
 = 
¤•P©hNames
.
size
();

743 
	gveùÜ
<
	gM3DQuadFigu»
* > 
	gquadFigLi¡
;

744 
	gi
 = 0; i < 
	g¤•Num
; i++){

746 
M3DQuadFigu»
* 
	gquadFig
 = 
s
.
G‘QuadFigu»
(
¤•P©hNames
[
i
].
c_¡r
());

748 
	gquadFigLi¡
.
push_back
(
quadFig
);

751 
M3DQuadFigu»
* 
	gav¬ageQuadFig
 = 
compu‹_m—n_¤•_Ãw
(
quadFigLi¡
);

754 
Regi¡ry
 
	g»gi¡ry
;

755 
	g»gi¡ry
.
»adFromFe
(
¤•P©hNames
[0].
c_¡r
(), 
çl£
);

758 
	gfigu»SŒ
[1024];

759 
¥rštf
(
figu»SŒ
, "model.figure[%d]", 0);

760 
	gav¬ageQuadFig
->
wr™eFigu»
(
figu»SŒ
,
»gi¡ry
);

762 
	gcout
<<"----Wr™¤•o: "<< 
	goutFeName
 << 
	g’dl
;

763 
	g»gi¡ry
.
wr™eToFe
(
outFeName
);

764 
	gcout
<<"----Fšished!" << 
	g’dl
;

	@thinplatesplinepdmtosrep.h

1 #iâdeà
THINPLATESPLINEPDMTOSREP_H


2 
	#THINPLATESPLINEPDMTOSREP_H


	)

4 
	~"™kThšPÏ‹S¶šeK”ÃlT¿nsfÜm.h
"

5 
	~"™kPoštS‘.h
"

6 
	~<vtkPŞyD©aR—d”.h
>

7 
	~"vtkPŞyD©a.h
"

8 
	~"toŞsfunc.h
"

10 
	~<vtkPŞyD©aWr™”.h
>

13 şas 
	cthš¶©e¥lš•dmto¤•


15 
	mpublic
:

16 
thš¶©e¥lš•dmto¤•
();

18 
	tCoÜdš©eR•Ty³
;

19 
	m™k
::
	tThšPÏ‹S¶šeK”ÃlT¿nsfÜm
< 
	tCoÜdš©eR•Ty³
,3> 
	tT¿nsfÜmTy³
;

20 
	m™k
::
	tPošt
< 
	tCoÜdš©eR•Ty³
, 3 > 
	tPoštTy³
;

21 
	m¡d
::
	tveùÜ
< 
	tPoštTy³
 > 
	tPoštA¼ayTy³
;

22 
	mT¿nsfÜmTy³
::
	tPoštS‘Ty³
 PointSetType;

23 
	mPoštS‘Ty³
::
	tPoš‹r
 
	tPoštS‘Poš‹r
;

24 
	mPoštS‘Ty³
::
	tPoštId’tif›r
 
	tPoštIdTy³
;

29 
	mvÆ_m©rix
<> 
	tM©rixTy³
;

32 
	mT¿nsfÜmTy³
::
Poš‹r
 
g‘_s
(cÚ¡ * 
sourûf’ame
, cÚ¡ * 
rg‘f’ame
);

33 
PoštTy³
 
VeùÜ3DtoPoštTy³
(
VeùÜ3D
 
pošt
);

34 
ÿlcuÏ‹SpokeL’gth
(
PoštTy³
 

, PoštTy³ 
t
);

35 
VeùÜ3D
 
ÿlcuÏ‹SpokeDœeùiÚ
(
PoštTy³
 

, PoštTy³ 
t
);

36 
s_to_¤•
(cÚ¡ * 
sourûf’ame
, cÚ¡ * 
rg‘f’ame
, cÚ¡ * 
sourû¤•f’ame
, cÚ¡ * 
rg‘¤•FŞd”
);

37 
§veMod–
(
M3DQuadFigu»
* 
quadFig
, cÚ¡ * 
rg‘f’ame
, cÚ¡ * 
sourû¤•f’ame
, cÚ¡ * 
rg‘¤•FŞd”
);

39 
muÉË_‹m¶©e_s
(cÚ¡ * 
m¶©ePDMFeLi¡
, cÚ¡ * 
rg‘PDM
, cÚ¡ * 
m¶©eS»pFeLi¡
, cÚ¡ * 
rg‘S»pFŞd”
);

40 
	mveùÜ
< 
	m¡d
::
¡ršg
 > 
»adTem·Ée
ĞcÚ¡ * 
li¡Name
);

42 
PoštTy³
 
sumPošt
(PoštTy³ 
pošt1
, PoštTy³ 
pošt2
);

43 
M3DQuadFigu»
* 
compu‹M—nS»p
(
veùÜ
<
T¿nsfÜmTy³
::
Poš‹r
 > 
sLi¡
, 
boŞ
 
u£TPS
, veùÜ<M3DQuadFigu»* > 
quadFigLi¡
);

44 
PoštTy³
 
m—nPošt
(
veùÜ
<
T¿nsfÜmTy³
::
Poš‹r
 > 
sLi¡
, 
boŞ
 
u£TPS
, veùÜ<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
, 
poštSide
);

46 
av¬age_¤•
(
veùÜ
< 
¡d
::
¡ršg
 > 
¤•P©hNames
, cÚ¡ * 
outFeName
);

48 
av¬age_¤•_Ãw
(
veùÜ
< 
¡d
::
¡ršg
 > 
¤•P©hNames
, cÚ¡ * 
outFeName
);

49 
PoštTy³
 
m—n_pošt
(
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
);

50 
VeùÜ3D
 
m—n_dœeùiÚ
(
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
, 
side
);

51 
m—n_¿dius
(
veùÜ
<
M3DQuadFigu»
* > 
quadFigLi¡
, 
u
, 
v
, 
side
);

52 
M3DQuadFigu»
* 
compu‹_m—n_¤•_Ãw
(
veùÜ
<M3DQuadFigu»* > 
quadFigLi¡
);

53 
ıns_av¬age_¤•
(
veùÜ
< 
¡d
::
¡ršg
 > 
¤•P©hNames
, cÚ¡ * 
outFeName
);

57 
	m´iv©e
:

58 
toŞsfunc
 
s
;

	@thinplatesplinesrep.cpp

1 
	~"thš¶©e¥lše¤•.h
"

3 
	gthš¶©e¥lše¤•
::
	$thš¶©e¥lše¤•
()

5 
	}
}

8 
thš¶©e¥lše¤•
::
MeshTy³
::
Poš‹r
hš¶©e¥lše¤•::
	$¤•PoštsS‘
(cÚ¡ * 
sourû¤•f’ame
){

11 
š‹½Ş©iÚLev–
 = 2;

12 
®ign¤•
 
	`as
(
sourû¤•f’ame
, 
š‹½Ş©iÚLev–
);

13 
as
.
	`weightA»aToBound¬yPošts
();

15 
cŞNums
 = 
as
.
	`g‘CŞs
();

16 
rowNums
 = 
as
.
	`g‘Rows
();

17 
üe¡AtomNums
 = 
rowNums
*2 + 
cŞNums
*2 - 4;

18 
tÙ®AtomNums
 = 
rowNums
*
cŞNums
;

19 
š‹riÜAtomNums
 = 
tÙ®AtomNums
 - 
üe¡AtomNums
;

20 
¥okeNum
 = 2*
š‹riÜAtomNums
 + 3*
üe¡AtomNums
;

22 
veùÜ
<
VeùÜ3D
> 
sPošts
 = 
as
.
	`g‘PoštsOnSk–‘®
();

23 
veùÜ
<
VeùÜ3D
> 
bPošts
 = 
as
.
	`g‘Bound¬yPošts
();

26 
PoštTy³
 
pošt
;

27 
MeshTy³
::
Poš‹r
 
mesh_b
 = MeshTy³::
	`New
();

28 
M©rixTy³
 
	`s_m©rix
(3, 
sPošts
.
	`size
());

29 
s_m©rix
.
	`fl
(0);

32 
i
 = 0; i< 
bPošts
.
	`size
(); i++){

33 
pošt
[0]ğ
bPošts
[
i
].
	`g‘X
();

34 
pošt
[1]ğ
bPošts
[
i
].
	`g‘Y
();

35 
pošt
[2]ğ
bPošts
[
i
].
	`g‘Z
();

36 
mesh_b
->
	`S‘Pošt
(
i
, 
pošt
);

39 
cŞÜ
[3] = {0,1,0};

43 
i
 = 0; i< 
sPošts
.
	`size
(); i++){

44 
s_m©rix
[0][
i
] = 
sPošts
[i].
	`g‘X
();

45 
s_m©rix
[1][
i
] = 
sPošts
[i].
	`g‘Y
();

46 
s_m©rix
[2][
i
] = 
sPošts
[i].
	`g‘Z
();

49 
cŞÜ
[0] =1;

50 
cŞÜ
[1] =1;

51 
cŞÜ
[2] =1;

55 
M©rixTy³
 
¥okeTas
 = 
	`cÜ»¥Úd’ûSpokeTaAndT
(
s_m©rix
, 
rowNums
, 
cŞNums
, 
tÙ®AtomNums
, 
¥okeNum
);

58 
MeshTy³
::
Poš‹r
 
mesh_bs
 = MeshTy³::
	`New
();

61 
PoštsCÚš”Poš‹r
 
²t
 = 
mesh_b
->
	`G‘Pošts
();

62 
PoštsI‹¿tÜ
 
²tIt
;

63 
PoštTy³
 
pos
;

64 
pIndex
 =0;

65  
²tIt
 = 
²t
->
	`Begš
();…ÁIˆ!ğ²t->
	`End
(); ++pntIt ) {

66  
dim
 = 0; dim < 3; dim++ ) {

67 
pos
[
dim
] = 
²tIt
.
	`V®ue
()[dim];

69 
mesh_bs
->
	`S‘Pošt
(
pIndex
, 
pos
);

70 
pIndex
++;

75 
m
 =0; m< 
¥okeTas
.
	`cŞumns
(); m++){

76  
dim
 = 0; dim < 3; dim++ ) {

77 
pos
[
dim
] = 
¥okeTas
[dim][
m
];

79 
mesh_bs
->
	`S‘Pošt
(
pIndex
, 
pos
);

80 
pIndex
++;

86 
cout
<<"-------------------------------mesh_bs->G‘Pošts(èis: "<<
’dl
;

87  
²tIt
 = 
mesh_bs
->
	`G‘Pošts
()->
	`Begš
();…ÁIˆ!ğmesh_bs->G‘Pošts()->
	`End
(); ++pntIt ) {

88 
cout
<<
²tIt
.
	`V®ue
()<<
’dl
;

91  
mesh_bs
;

92 
	}
}

98 
	gthš¶©e¥lše¤•
::
	$s_¤•
(cÚ¡ * 
sourûf’ame
, cÚ¡ * 
rg‘f’ame
, cÚ¡ * 
sourû¤•f’ame
){

103 
PoštS‘Ty³
::
Poš‹r
 
sourûLªdM¬ks
 = PoštS‘Ty³::
	`New
();

104 
PoštS‘Ty³
::
Poš‹r
 
rg‘LªdM¬ks
 = PoštS‘Ty³::
	`New
();

105 
PoštTy³
 
p1
; PoštTy³ 
p2
;

106 
PoštS‘Ty³
::
PoštsCÚš”
::
Poš‹r
 
sourûLªdM¬kCÚš”
 = 
sourûLªdM¬ks
->
	`G‘Pošts
();

107 
PoštS‘Ty³
::
PoštsCÚš”
::
Poš‹r
 
rg‘LªdM¬kCÚš”
 = 
rg‘LªdM¬ks
->
	`G‘Pošts
();

110 
PoštIdTy³
 
id_s
 = 
™k
::
Num”icT¿™s
< PoštIdTy³ >::
Z”o
;

111 
PoštIdTy³
 
id_t
 = 
™k
::
Num”icT¿™s
< PoštIdTy³ >::
Z”o
;

114 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyD©a_sourû
;

115 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞyD©a_rg‘
;

117 
vtkSm¬tPoš‹r
<
vtkPŞyD©aR—d”
> 
»ad”_sourû
 = vtkSm¬tPoš‹r<vtkPŞyD©aR—d”>::
	`New
();

118 
vtkSm¬tPoš‹r
<
vtkPŞyD©aR—d”
> 
»ad”_rg‘
 = vtkSm¬tPoš‹r<vtkPŞyD©aR—d”>::
	`New
();

120 
»ad”_sourû
->
	`S‘FeName
(
sourûf’ame
);

121 
»ad”_sourû
->
	`Upd©e
();

122 
pŞyD©a_sourû
 = 
»ad”_sourû
->
	`G‘Ouut
();

123 
cout
<<"-----------------sourûf’amis: "<<
sourûf’ame
<<
’dl
;

125 
»ad”_rg‘
->
	`S‘FeName
(
rg‘f’ame
);

126 
»ad”_rg‘
->
	`Upd©e
();

127 
pŞyD©a_rg‘
 = 
»ad”_rg‘
->
	`G‘Ouut
();

128 
cout
<<"-----------------rg‘f’amis: "<<
rg‘f’ame
<<
’dl
;

131 
i
 = 0; i < 
pŞyD©a_sourû
->
	`G‘Numb”OfPošts
(); i++){

132 
p
[3];

133 
pŞyD©a_sourû
->
	`G‘Pošt
(
i
,
p
);

137 
p1
[0] = 
p
[0];

138 
p1
[1] = 
p
[1];

139 
p1
[2] = 
p
[2];

140 
¡d
::
cout
 << "Pošˆ" << 
i
 << " : (" << 
p1
[0] << " " <<…1[1] << " " <<…1[2] << ")" << std::
’dl
;

141 
sourûLªdM¬kCÚš”
->
	`In£¹EËm’t
(
id_s
++, 
p1
);

145 
i
 = 0; i < 
pŞyD©a_rg‘
->
	`G‘Numb”OfPošts
(); i++){

146 
p
[3];

147 
pŞyD©a_rg‘
->
	`G‘Pošt
(
i
,
p
);

149 
p2
[0] = 
p
[0];

150 
p2
[1] = 
p
[1];

151 
p2
[2] = 
p
[2];

152 
¡d
::
cout
 << "Pošˆ" << 
i
 << " : (" << 
p2
[0] << " " <<…2[1] << " " <<…2[2] << ")" << std::
’dl
;

153 
rg‘LªdM¬kCÚš”
->
	`In£¹EËm’t
(
id_t
++, 
p2
);

158 
T¿nsfÜmTy³
::
Poš‹r
 
s
 = T¿nsfÜmTy³::
	`New
();

159 
s
->
	`S‘SourûLªdm¬ks
(
sourûLªdM¬ks
);

160 
s
->
	`S‘T¬g‘Lªdm¬ks
(
rg‘LªdM¬ks
);

167 
cout
<<"Compu‹WM©rix... "<<
’dl
;

168 
s
->
	`Compu‹WM©rix
();

170 
cout
<<"Compu‹WM©rix fšished!"<<
’dl
;

183 
MeshTy³
::
Poš‹r
 
poštsS‘
 = 
	`¤•PoštsS‘
(
sourû¤•f’ame
);

186 
PoštS‘Ty³
::
Poš‹r
 
ŒªsfÜmed_pošts
 = PoštS‘Ty³::
	`New
();

187 
PoštS‘Ty³
::
PoštsCÚš”
::
Poš‹r
 
ŒªsfÜmed_pošts_cÚš”
 = 
ŒªsfÜmed_pošts
->
	`G‘Pošts
();

188 
T¿nsfÜmTy³
::
OuutPoštTy³
 
Œack”PoštNewPos™iÚ
;

190 
PoštsCÚš”Poš‹r
 
²t
 = 
poštsS‘
->
	`G‘Pošts
();

191 
PoštsI‹¿tÜ
 
²tIt
;

192 
PoštTy³
 
pos
;

193 
poštIndex
 = 0;

194  
²tIt
 = 
²t
->
	`Begš
();…ÁIˆ!ğ²t->
	`End
(); ++pntIt ) {

195  
dim
 = 0; dim < 3; dim++ ) {

196 
pos
[
dim
] = 
²tIt
.
	`V®ue
()[dim];

198 
Œack”PoštNewPos™iÚ
 = 
s
->
	`T¿nsfÜmPošt
(
pos
);

199 
ŒªsfÜmed_pošts_cÚš”
->
	`In£¹EËm’t
(
poštIndex
++,
Œack”PoštNewPos™iÚ
);

203 
cout
<<"---------------------thŒªsfÜmed…ošt is:"<<
’dl
;

204 
PoštS‘Ty³
::
	tPoštsCÚš”
::
	tI‹¿tÜ
 
	tPoštsI‹¿tÜ
;

205 
PoštsI‹¿tÜ
 
poštI‹¿tÜ
 = 
ŒªsfÜmed_pošts_cÚš”
->
	`Begš
();

206 
PoštsI‹¿tÜ
 
’d
 = 
ŒªsfÜmed_pošts_cÚš”
->
	`End
();

207  
poštI‹¿tÜ
 !ğ
’d
 ) {

208 
PoštTy³
 
p
 = 
poštI‹¿tÜ
.
	`V®ue
();

209 
¡d
::
cout
 << 
p
 << std::
’dl
;

210 ++
poštI‹¿tÜ
;

214 
	`g’”©eS»p
(
ŒªsfÜmed_pošts
, 
sourû¤•f’ame
);

216  
EXIT_SUCCESS
;

217 
	}
}

223 
	gthš¶©e¥lše¤•
::
	$g’”©eS»p
(
PoštS‘Ty³
::
Poš‹r
 
poštS‘
, cÚ¡ * 
¤•f’ame
){

224 
¥okeNum
 = 
poštS‘
->
	`G‘Numb”OfPošts
()/2;

225 
cout
<<"----------------------¥okeNum is: "<<
¥okeNum
<<
’dl
;

227 
M©rixTy³
 
	`tM©rix
(3,
¥okeNum
);

228 
tM©rix
.
	`fl
(0);

229 
M©rixTy³
 
	`M©rix
(3,
¥okeNum
);

230 
M©rix
.
	`fl
(0);

233 
PoštS‘Ty³
::
	tPoštsCÚš”
::
	tI‹¿tÜ
 
	tPoštsI‹¿tÜ
;

234 
PoštsI‹¿tÜ
 
poštI‹¿tÜ
 = 
poštS‘
->
	`G‘Pošts
()->
	`Begš
();

235 
PoštsI‹¿tÜ
 
’d
 = 
poštS‘
->
	`G‘Pošts
()->
	`End
();

236 
tIndex
 = 0;

237 
Index
 = 0;

238 
pIndex
 = 0;

239  
poštI‹¿tÜ
 !ğ
’d
 ) {

240 if(
pIndex
 < 
¥okeNum
){

241  
dim
 = 0; dim < 3; dim++ ) {

242 
tM©rix
[
dim
][
tIndex
] = 
poštI‹¿tÜ
.
	`V®ue
()[dim];

244 
tIndex
++;

247  
dim
 = 0; dim < 3; dim++ ) {

248 
M©rix
[
dim
][
Index
] = 
poštI‹¿tÜ
.
	`V®ue
()[dim];

250 
Index
++;

252 
pIndex
++;

256 ++
poštI‹¿tÜ
;

259 
cout
<<"--------------------ThtM©rix is: "<<
’dl
;

260 
o
=0; o<
tM©rix
.
	`rows
(); o++){

261 
m
=0; m<
tM©rix
.
	`cŞumns
();m++){

262 
cout
<<
tM©rix
[
o
][
m
]<<" ";

264 
cout
<<
’dl
;

267 
cout
<<"--------------------ThM©rix is: "<<
’dl
;

268 
o
=0; o<
M©rix
.
	`rows
(); o++){

269 
m
=0; m<
M©rix
.
	`cŞumns
();m++){

270 
cout
<<
M©rix
[
o
][
m
]<<" ";

272 
cout
<<
’dl
;

276 
M©rixTy³
 
ÃwSpokeDœeùiÚs
 = 
	`g‘NewSpokesDœeùiÚ
(
tM©rix
, 
M©rix
);

277 
veùÜ
<> 
ÃwSpokeRadius
 = 
	`g‘NewSpokesRadius
(
tM©rix
, 
M©rix
);

280 
poštNum
 = 
M©rix
.
	`cŞumns
();

281 
ûÁ”
[3] = {0,0,0};

282 
m
 = 0; m< 
poštNum
; m++){

283 
dim
=0; dim<3; dim++){

284 
ûÁ”
[
dim
] +ğ
M©rix
[dim][
m
];

289 
m
 = 0; m< 
poštNum
; m++){

290 
dim
=0; dim<3; dim++){

291 
M©rix
[
dim
][
m
] =aM©rix[dim][m] - 
ûÁ”
[dim]/
poštNum
 + 0.5;

294 
cout
<<"--------------------Aá” c’‹ršg,hM©rix is: "<<
’dl
;

295 
o
=0; o<
M©rix
.
	`rows
(); o++){

296 
m
=0; m<
M©rix
.
	`cŞumns
();m++){

297 
cout
<<
M©rix
[
o
][
m
]<<" ";

299 
cout
<<
’dl
;

316 
	`§veG’”©edS»ps
(
¤•f’ame
, 
ÃwSpokeDœeùiÚs
, 
ÃwSpokeRadius
, 
M©rix
);

317 
	}
}

324 
	gthš¶©e¥lše¤•
::
§veG’”©edS»ps
(cÚ¡ * 
feP©hName
, 
M©rixTy³
 
ÃwSpokeDœeùiÚ
, 
veùÜ
<> 
ÃwSpokeRadius
,

325 
M©rixTy³
 
ŒªsfÜmedTas
){

326 
Regi¡ry
 
	g»gi¡ry
;

327 
	g»gi¡ry
.
»adFromFe
(
feP©hName
, 
çl£
);

328 
toŞsfunc
 
	gs
;

329 
M3DQuadFigu»
* 
	gquadFig
 = 
s
.
G‘QuadFigu»
(
feP©hName
);

330 
	growNums
 = 
quadFig
->
g‘RowCouÁ
();

331 
	gcŞNums
 = 
quadFig
->
g‘CŞumnCouÁ
();

332 
	gtÙ®AtomNums
 = 
rowNums
*
cŞNums
;

333 
VeùÜ3D
 
	g¥okeDœ
;

334 
	g¥okeRadiu
;

336 
	gpšdex
 =0;

337 
	güe¡Index
=0;

338 
	gu
=1; u<
	growNums
-1;u++){

339 
	gv
=1; v<
	gcŞNums
-1; v++){

341 
	g¥okeDœ
.
£tX
(
ÃwSpokeDœeùiÚ
[0][
pšdex
]);

342 
	g¥okeDœ
.
£tY
(
ÃwSpokeDœeùiÚ
[1][
pšdex
]);

343 
	g¥okeDœ
.
£tZ
(
ÃwSpokeDœeùiÚ
[2][
pšdex
]);

344 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tU0
(
¥okeDœ
);

346 
	g¥okeRadiu
 = 
ÃwSpokeRadius
[
pšdex
];

347 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tR0
(
¥okeRadiu
);

350 
	g¥okeDœ
.
£tX
(
ÃwSpokeDœeùiÚ
[0][
pšdex
+
tÙ®AtomNums
]);

351 
	g¥okeDœ
.
£tY
(
ÃwSpokeDœeùiÚ
[1][
pšdex
+
tÙ®AtomNums
]);

352 
	g¥okeDœ
.
£tZ
(
ÃwSpokeDœeùiÚ
[2][
pšdex
+
tÙ®AtomNums
]);

353 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tU1
(
¥okeDœ
);

355 
	g¥okeRadiu
 = 
ÃwSpokeRadius
[
pšdex
+
tÙ®AtomNums
];

356 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tR1
(
¥okeRadiu
);

359 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
u
,
v
))->
£tX
(
ŒªsfÜmedTas
[0][
pšdex
],transformedTails[1][pindex],transformedTails[2][pindex]);

361 
	gpšdex
++;

368 
	gv
 =0; v<
	gcŞNums
; v++){

369 
£tC»¡Spoke
(0,
v
, 
ÃwSpokeDœeùiÚ
, 
ÃwSpokeRadius
, 
pšdex
, 
üe¡Index
, 
quadFig
, 
ŒªsfÜmedTas
);

370 
	gpšdex
++;

371 
	güe¡Index
++;

374 
	gu
 =1; u<
	growNums
; u++){

375 
£tC»¡Spoke
(
u
, 
cŞNums
-1, 
ÃwSpokeDœeùiÚ
, 
ÃwSpokeRadius
, 
pšdex
, 
üe¡Index
, 
quadFig
, 
ŒªsfÜmedTas
);

376 
	gpšdex
++;

377 
	güe¡Index
++;

380 
	gv
 =
cŞNums
-2; v>0; v--){

381 
£tC»¡Spoke
(
rowNums
-1, 
v
, 
ÃwSpokeDœeùiÚ
, 
ÃwSpokeRadius
, 
pšdex
, 
üe¡Index
, 
quadFig
, 
ŒªsfÜmedTas
);

382 
	gpšdex
++;

383 
	güe¡Index
++;

386 
	gu
 =
rowNums
-1; u>0; u--){

387 
£tC»¡Spoke
(
u
,0, 
ÃwSpokeDœeùiÚ
, 
ÃwSpokeRadius
, 
pšdex
, 
üe¡Index
, 
quadFig
, 
ŒªsfÜmedTas
);

388 
	gpšdex
++;

389 
	güe¡Index
++;

393 
	gfigu»SŒ
[1024];

395 
¥rštf
(
figu»SŒ
, "model.figure[%d]", 0);

397 
	gquadFig
->
wr™eFigu»
(
figu»SŒ
,
»gi¡ry
);

399 
¡ršg
 
	gf’ame
 = 
s
.
g‘P©hName
(
feP©hName
è+ sŒšg("/ouut/")+ls.
g‘FeNameW™hEx‹nsiÚ
(filePathName);

400 
	gcout
<<"-------------Wr™¤•o: "<< 
	gf’ame
 << 
	g’dl
;

402 
	g»gi¡ry
.
wr™eToFe
(
f’ame
.
c_¡r
());

404 
	gcout
<<"-------------Fšished wr™e!" << 
	g’dl
;

410 
	gthš¶©e¥lše¤•
::
£tC»¡Spoke
(
rowIndex
, 
cŞIndex
, 
M©rixTy³
 
ÃwSpokeDœeùiÚ
,

411 
veùÜ
<> 
ÃwSpokeRadius
, 
pIndex
, 
üe¡Index
, 
M3DQuadFigu»
* 
quadFig
, 
M©rixTy³
 
ŒªsfÜmedTas
){

412 
	gtÙ®AtomNums
 = 
quadFig
->
g‘RowCouÁ
(è* quadFig->
g‘CŞumnCouÁ
();

413 
VeùÜ3D
 
	g¥okeDœ
;

414 
	g¥okeRadiu
;

417 
	g¥okeDœ
.
£tX
(
ÃwSpokeDœeùiÚ
[0][
pIndex
]);

418 
	g¥okeDœ
.
£tY
(
ÃwSpokeDœeùiÚ
[1][
pIndex
]);

419 
	g¥okeDœ
.
£tZ
(
ÃwSpokeDœeùiÚ
[2][
pIndex
]);

420 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
rowIndex
,
cŞIndex
))->
£tU0
(
¥okeDœ
);

422 
	g¥okeRadiu
 = 
ÃwSpokeRadius
[
pIndex
];

423 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
rowIndex
,
cŞIndex
))->
£tR0
(
¥okeRadiu
);

426 
	g¥okeDœ
.
£tX
(
ÃwSpokeDœeùiÚ
[0][
pIndex
+
tÙ®AtomNums
]);

427 
	g¥okeDœ
.
£tY
(
ÃwSpokeDœeùiÚ
[1][
pIndex
+
tÙ®AtomNums
]);

428 
	g¥okeDœ
.
£tZ
(
ÃwSpokeDœeùiÚ
[2][
pIndex
+
tÙ®AtomNums
]);

429 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
rowIndex
,
cŞIndex
))->
£tU1
(
¥okeDœ
);

431 
	g¥okeRadiu
 = 
ÃwSpokeRadius
[
pIndex
+
tÙ®AtomNums
];

432 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
rowIndex
,
cŞIndex
))->
£tR1
(
¥okeRadiu
);

435 
	g¥okeDœ
.
£tX
(
ÃwSpokeDœeùiÚ
[0][
üe¡Index
+2*
tÙ®AtomNums
]);

436 
	g¥okeDœ
.
£tY
(
ÃwSpokeDœeùiÚ
[1][
üe¡Index
+2*
tÙ®AtomNums
]);

437 
	g¥okeDœ
.
£tZ
(
ÃwSpokeDœeùiÚ
[2][
üe¡Index
+2*
tÙ®AtomNums
]);

438 
	gdyÇmic_ÿ¡
<
	gM3DQuadEndPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
rowIndex
,
cŞIndex
))->
£tUEnd
(
¥okeDœ
);

440 
	g¥okeRadiu
 = 
ÃwSpokeRadius
[
üe¡Index
+2*
tÙ®AtomNums
];

441 
	gdyÇmic_ÿ¡
<
	gM3DQuadEndPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
rowIndex
,
cŞIndex
))->
£tREnd
(
¥okeRadiu
);

444 
	gdyÇmic_ÿ¡
<
	gM3DQuadPrim™ive
*>(
	gquadFig
->
g‘Prim™ivePŒ
(
rowIndex
,
cŞIndex
))->
£tX
(
ŒªsfÜmedTas
[0][
pIndex
],transformedTails[1][pIndex],transformedTails[2][pIndex]);

453 
	gthš¶©e¥lše¤•
::
M©rixTy³
 
thš¶©e¥lše¤•
::
	$cÜ»¥Úd’ûSpokeTaAndT
(
M©rixTy³
 
sPošts
, 
rowNums
, 
cŞNums
,

454 
tÙ®AtomNums
, 
¥okeNum
){

456 
M©rixTy³
 
	`
(3, 
¥okeNum
);

457 

.
	`fl
(0);

460 
pšdex
 =0;

461 
üe¡Index
=0;

462 
m
=1; m<
rowNums
-1;m++){

463 
n
=1;‚<
cŞNums
-1;‚++){

464 
dim
=0; dim<3; dim++){

465 

[
dim
][
pšdex
] = 
sPošts
[dim][
m
*
cŞNums
+
n
];

468 

[
dim
][
pšdex
+
tÙ®AtomNums
] = 
sPošts
[dim][
m
*
cŞNums
+
n
];

470 
pšdex
++;

477 
v
 =0; v<
cŞNums
; v++){

478 
dim
=0; dim<3; dim++){

479 

[
dim
][
pšdex
] = 
sPošts
[dim][
v
];

482 

[
dim
][
pšdex
+
tÙ®AtomNums
] = 
sPošts
[dim][
v
];

485 

[
dim
][
üe¡Index
+2*
tÙ®AtomNums
] = 
sPošts
[dim][
v
];

487 
pšdex
++;

488 
üe¡Index
++;

492 
u
 =1; u<
rowNums
; u++){

493 
dim
=0; dim<3; dim++){

494 

[
dim
][
pšdex
] = 
sPošts
[dim][
u
 * 
cŞNums
 + colNums - 1];

497 

[
dim
][
pšdex
+
tÙ®AtomNums
] = 
sPošts
[dim][
u
 * 
cŞNums
 + colNums - 1];

500 

[
dim
][
üe¡Index
+2*
tÙ®AtomNums
] = 
sPošts
[dim][
u
 * 
cŞNums
 + colNums - 1];

502 
pšdex
++;

503 
üe¡Index
++;

507 
v
 =
cŞNums
-2; v>0; v--){

508 
dim
=0; dim<3; dim++){

509 

[
dim
][
pšdex
] = 
sPošts
[dim][(
rowNums
-1è* 
cŞNums
 + 
v
];

512 

[
dim
][
pšdex
+
tÙ®AtomNums
] = 
sPošts
[dim][(
rowNums
-1è* 
cŞNums
 + 
v
];

515 

[
dim
][
üe¡Index
+2*
tÙ®AtomNums
] = 
sPošts
[dim][(
rowNums
-1è* 
cŞNums
 + 
v
];

517 
pšdex
++;

518 
üe¡Index
++;

522 
u
 =
rowNums
-1; u>0; u--){

523 
dim
=0; dim<3; dim++){

524 

[
dim
][
pšdex
] = 
sPošts
[dim][
u
 * 
cŞNums
];

527 

[
dim
][
pšdex
+
tÙ®AtomNums
] = 
sPošts
[dim][
u
 * 
cŞNums
];

530 

[
dim
][
üe¡Index
+2*
tÙ®AtomNums
] = 
sPošts
[dim][
u
 * 
cŞNums
];

532 
pšdex
++;

533 
üe¡Index
++;

545  

;

546 
	}
}

556 
	gthš¶©e¥lše¤•
::
M©rixTy³
 
thš¶©e¥lše¤•
::
	$g‘NewSpokesDœeùiÚ
(
M©rixTy³
 
bPošts
, M©rixTy³ 
sPošts
){

559 
M©rixTy³
 
¥okeVeùÜ
 = 
bPošts
 - 
sPošts
;

560 
cout
<<"--------------------th¥okeVeùÜ is: "<<
’dl
;

561 
o
=0; o<
¥okeVeùÜ
.
	`rows
(); o++){

562 
m
=0; m<
¥okeVeùÜ
.
	`cŞumns
();m++){

563 
cout
<<
¥okeVeùÜ
[
o
][
m
]<<" ";

565 
cout
<<
’dl
;

569 
m
=0; m< 
¥okeVeùÜ
.
	`cŞumns
(); m++){

570 
¥okeRadiu
=0;

571 
dim
=0; dim<3; dim++){

572 
¥okeRadiu
 +ğ
¥okeVeùÜ
[
dim
][
m
] * spokeVector[dim][m];

574 
dim
=0; dim<3; dim++){

575 
¥okeVeùÜ
[
dim
][
m
] /ğ
	`sq¹
(
¥okeRadiu
);

579  
¥okeVeùÜ
;

580 
	}
}

585 
	gveùÜ
<> 
	gthš¶©e¥lše¤•
::
	$g‘NewSpokesRadius
(
M©rixTy³
 
bPošts
, M©rixTy³ 
sPošts
){

588 
M©rixTy³
 
¥okeVeùÜ
 = 
bPošts
 - 
sPošts
;

590 
veùÜ
<> 
¥okeRadius
;

592 
m
=0; m< 
¥okeVeùÜ
.
	`cŞumns
(); m++){

593 
¥okeRadiu
=0;

594 
dim
=0; dim<3; dim++){

595 
¥okeRadiu
 +ğ
¥okeVeùÜ
[
dim
][
m
] * spokeVector[dim][m];

597 
¥okeRadius
.
	`push_back
(
	`sq¹
(
¥okeRadiu
));

600  
¥okeRadius
;

601 
	}
}

	@thinplatesplinesrep.h

1 #iâdeà
THINPLATESPLINESREP_H


2 
	#THINPLATESPLINESREP_H


	)

5 
	~"™kThšPÏ‹S¶šeK”ÃlT¿nsfÜm.h
"

6 
	~"™kPoštS‘.h
"

7 
	~<f¡»am
>

8 
	~"®ign¤•.h
"

9 
	~"™kM©rix.h
"

11 
	~<vtkPŞyD©aR—d”.h
>

12 
	~"vtkPŞyD©a.h
"

15 şas 
	cthš¶©e¥lše¤•


17 
	mpublic
:

18 
thš¶©e¥lše¤•
();

20 
	tCoÜdš©eR•Ty³
;

21 
	m™k
::
	tThšPÏ‹S¶šeK”ÃlT¿nsfÜm
< 
	tCoÜdš©eR•Ty³
,3> 
	tT¿nsfÜmTy³
;

22 
	m™k
::
	tPošt
< 
	tCoÜdš©eR•Ty³
, 3 > 
	tPoštTy³
;

23 
	m¡d
::
	tveùÜ
< 
	tPoštTy³
 > 
	tPoštA¼ayTy³
;

24 
	mT¿nsfÜmTy³
::
	tPoštS‘Ty³
 PointSetType;

25 
	mPoštS‘Ty³
::
	tPoš‹r
 
	tPoštS‘Poš‹r
;

26 
	mPoštS‘Ty³
::
	tPoštId’tif›r
 
	tPoštIdTy³
;

31 
	mvÆ_m©rix
<> 
	tM©rixTy³
;

34 
	m™k
::
	tDeçuÉDyÇmicMeshT¿™s
<, 3, 3, , > 
	tMeshT¿™sTy³
;

35 
	m™k
::
	tMesh
<, 3, 
	tMeshT¿™sTy³
> 
	tMeshTy³
;

38 
	mMeshTy³
::
	tPoštsCÚš”
::
	tI‹¿tÜ
 
	tPoštsI‹¿tÜ
;

41 
	mMeshTy³
::
	tPoštsCÚš”
 
	tPoštsCÚš”Ty³
;

44 
	mMeshTy³
::
	tPoštsCÚš”Poš‹r
 PointsContainerPointer;

47 
	m™k
::
	tT¿nsfÜmMeshF‹r
<
	tMeshTy³
, MeshTy³, 
	tT¿nsfÜmTy³
> 
	tF‹rTy³
;

49 
	mMeshTy³
::
Poš‹r
 
¤•PoštsS‘
(cÚ¡ * 
sourû¤•f’ame
);

50 
s_¤•
(cÚ¡ * 
sourûf’ame
, cÚ¡ * 
rg‘f’ame
, cÚ¡ * 
sourû¤•f’ame
);

51 
g’”©eS»p
(
PoštS‘Ty³
::
Poš‹r
 
ouutMesh
, cÚ¡ * 
¤•f’ame
);

52 
§veG’”©edS»ps
(cÚ¡ * 
feP©hName
, 
M©rixTy³
 
ÃwSpokeDœeùiÚ
, 
veùÜ
<> 
ÃwSpokeRadius
, M©rixTy³ 
ŒªsfÜmedTas
);

53 
£tC»¡Spoke
(
rowIndex
, 
cŞIndex
, 
M©rixTy³
 
ÃwSpokeDœeùiÚ
,

54 
veùÜ
<> 
ÃwSpokeRadius
, 
pIndex
, 
üe¡Index
, 
M3DQuadFigu»
* 
quadFig
, 
M©rixTy³
 
ŒªsfÜmedTas
);

55 
M©rixTy³
 
cÜ»¥Úd’ûSpokeTaAndT
(M©rixTy³ 
sPošts
, 
rowNums
, 
cŞNums
,
tÙ®AtomNums
, 
¥okeNum
);

56 
M©rixTy³
 
g‘NewSpokesDœeùiÚ
(M©rixTy³ 
bPošts
, M©rixTy³ 
sPošts
);

57 
	mveùÜ
<> 
g‘NewSpokesRadius
(
M©rixTy³
 
bPošts
, M©rixTy³ 
sPošts
);

	@toolsfunc.cpp

1 
	~"toŞsfunc.h
"

3 
	~<sys/ty³s.h
>

4 
	~<dœ’t.h
>

6 
CÚŒŞP¬ms
 * 
	gglob®CÚŒŞ
;

7 
	gglob®V”bos™y
;

10 
	gtoŞsfunc
::
	$toŞsfunc
()

12 
	}
}

16 
M3DQuadFigu»
* 
toŞsfunc
::
	$G‘QuadFigu»
(cÚ¡ * 
figf’ame
){

17 
glob®CÚŒŞ
 = 
Ãw
 
	`CÚŒŞP¬ms
(
NULL
, -1, 
çl£
);

18 
glob®V”bos™y
 = 0;

19 
glob®CÚŒŞ
->
	`£tDeçuÉ
(
OuutV”bos™y
, 
glob®V”bos™y
);

20 
glob®CÚŒŞ
->
	`£tDeçuÉ
(
ReÜd”Mod–s
, 0);

21 
glob®CÚŒŞ
->
	`£tDeçuÉ
(
SmoÙhImages
, 
çl£
);

22 
glob®CÚŒŞ
->
	`£tDeçuÉ
(
CÚv”tImages
, 
çl£
);

23 
glob®CÚŒŞ
->
	`£tDeçuÉ
(
By‹Ord”
, 1);

24 
glob®CÚŒŞ
->
	`£tDeçuÉ
(
Com´essImages
, 
Œue
);

25 
glob®CÚŒŞ
->
	`£tDeçuÉ
(
ShowLªdm¬ks
, 
Œue
);

27 
P3DCÚŒŞ
* 
p3d
 = 
Ãw
 
	`P3DCÚŒŞ
(10);

30 
p3d
->
	`»ad
(
figf’ame
, 
çl£
);

32 
M3DObjeù
* 
m3dobjeù
 = 
p3d
->
	`g‘ObjeùPŒ
();

33 
M3DFigu»
 * 
figu»
 = 
m3dobjeù
->
	`g‘Figu»PŒ
( 0 ) ;

35  
dyÇmic_ÿ¡
<
M3DQuadFigu»
*>Ğ
figu»
 );

36 
	}
}

40 
¡ršg
 
	gtoŞsfunc
::
	$cÚÃùFeP©h
(
¡ršg
 
roÙDœ
, cÚ¡ * 
¥ecificDœ
, 
chªgšgIndex
, cÚ¡ * 
ex‹nsiÚ
){

42 
num
[20];

43 
	`¥rštf
(
num
, "%d", 
chªgšgIndex
);

45 
¡ršg
 
·th
 = 
roÙDœ
 + 
	`¡ršg
(
¥ecificDœ
è+ 
num
 + sŒšg(
ex‹nsiÚ
);

47  
·th
;

48 
	}
}

53 
¡ršg
 
	gtoŞsfunc
::
	$cÚSŒ
(
¡ršg
 
roÙDœ
, cÚ¡ * 
¥ecificDœ
, sŒšg 
feName
, cÚ¡ * 
ex‹nsiÚ
) const{

55  
roÙDœ
 + 
	`¡ršg
(
¥ecificDœ
è+ 
feName
 + sŒšg(
ex‹nsiÚ
);

56 
	}
}

61 
¡ršg
 
	gtoŞsfunc
::
	$cÚÃùSŒ
(
¡ršg
 
¡r1
, cÚ¡ * 
¡r2
) const{

62  
¡r1
 + 
	`¡ršg
(
¡r2
);

63 
	}
}

67 
	gtoŞsfunc
::
	$d–‘eFes
(
¡ršg
 
·th
){

70 
¡ršg
 
cmd
 = "fšd " + 
·th
 + " -type f | xargs„m -rf";

72 
»tuºV®ue1
;

74 
Œy
 {

75 
»tuºV®ue1
 = 
	`sy¡em
(
cmd
.
	`c_¡r
());

77 
	`ÿtch
(
exû±iÚ
 
e
){

78 
cout
<<"Thš™ŸÈã©u» fŞd” i nuÎ,‚ØÃedØd–‘e!"<<
’dl
;

82 ià(
»tuºV®ue1
 != 0 ){

83 
cout
 << "E¼Ü wh’ d–‘»guÏr™y f—tu» fe äom fŞd”: " << 
cmd
 << 
’dl
;

85 
	}
}

91 
	gveùÜ
< 
	g¡d
::
¡ršg
 > 
toŞsfunc
::
	$g‘Mod–Çme
(
¡ršg
 
fefŞd”
){

92 
veùÜ
< 
¡d
::
¡ršg
 > 
mod–ÇmeveùÜ
;

93 
DIR
* 
dœ
 = 
	`İ’dœ
(
fefŞd”
.
	`c_¡r
());

94 ià(!
dœ
) {

95 
	`³¼Ü
("opendir");

96 
	`ex™
(1);

100 
dœ’t
* 
’Œy
;

105  (
’Œy
 = 
	`»addœ
(
dœ
)è!ğ
NULL
) {

107 * 
·‰”n1
 = ".m3d";

108 * 
·‰”n2
 = "~";

113 ià(
’Œy
->
d_Çme
 && !
	`¡r¡r
ÓÁry->d_Çme, 
·‰”n2
è&& sŒ¡rÓÁry->d_Çme, 
·‰”n1
)) {

115 
¡ršg
 
·th
 = 
fefŞd”
 + 
’Œy
->
d_Çme
;

116 
mod–ÇmeveùÜ
.
	`push_back
(
·th
);

121 ià(
	`şo£dœ
(
dœ
) == -1) {

122 
	`³¼Ü
("closedir");

123 
	`ex™
(1);

126  
mod–ÇmeveùÜ
;

127 
	}
}

136 
	gtoŞsfunc
::
	$§veã©u»s
(
¡ršg
 
·th
, 
VeùÜT¿ššgS‘F—tu»sTy³
 
ã©u»m©rix
){

138 cÚ¡ * 
f’ame
 = 
cÚ¡_ÿ¡
<*>(
·th
.
	`c_¡r
());

140 
¡d
::
of¡»am
 
fout
;

141 
fout
.
	`İ’
(
f’ame
);

143 ià(
fout
) {

144 
i
=0;i< 
ã©u»m©rix
.
	`size
();i++){

145 
j
=0;j< 
ã©u»m©rix
[
i
].
	`size
();j++)

146 
fout
<< 
ã©u»m©rix
[
i
][
j
]<<" ";

147 
fout
<<
’dl
;

152 
û¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
’dl
;

154 
fout
.
	`şo£
();

155 
	}
}

160 
	gtoŞsfunc
::
§veM©rix3
(
¡ršg
 
·th
, 
veùÜ
<> 
A
, veùÜ<> 
B
, veùÜ<> 
C
){

162 cÚ¡ * 
	gf’ame
 = 
cÚ¡_ÿ¡
<*>(
·th
.
c_¡r
());

164 
	g¡d
::
of¡»am
 
fout
;

165 
	gfout
.
İ’
(
f’ame
);

167 ià(
	gfout
) {

168 
	gi
=0;i< 
	gA
.
size
();i++){

169 
	gfout
<< 
	gA
[
i
]<<" ";

171 
	gfout
<<
	g’dl
;

172 
	gi
=0;i< 
	gB
.
size
();i++){

173 
	gfout
<< 
	gB
[
i
]<<" ";

175 
	gfout
<<
	g’dl
;

176 
	gi
=0;i< 
	gC
.
size
();i++){

177 
	gfout
<< 
	gC
[
i
]<<" ";

179 
	gfout
<<
	g’dl
;

183 
	gû¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
	g’dl
;

185 
	gfout
.
şo£
();

191 
	gtoŞsfunc
::
§veM©rix2
(
¡ršg
 
·th
, 
veùÜ
<> 
A
, veùÜ<> 
B
){

193 cÚ¡ * 
	gf’ame
 = 
cÚ¡_ÿ¡
<*>(
·th
.
c_¡r
());

195 
	g¡d
::
of¡»am
 
fout
;

196 
	gfout
.
İ’
(
f’ame
);

198 ià(
	gfout
) {

199 if(
	gA
.
size
()!=
B
.size()){

200 
cout
<<"G‘ wrÚg f—tu»s!! Msg fromoŞsfunc:htwØveùÜ ha difã»Á cŞumns!"<<
’dl
;

203 
	gi
=0;i< 
	gA
.
size
();i++){

204 
	gfout
<< 
	gA
[
i
]<<" ";

206 
	gfout
<<
	g’dl
;

207 
	gi
=0;i< 
	gB
.
size
();i++){

208 
	gfout
<< 
	gB
[
i
]<<" ";

210 
	gfout
<<
	g’dl
;

215 
	gû¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
	g’dl
;

217 
	gfout
.
şo£
();

227 
	gtoŞsfunc
::
¥l™Lše
(
pošt1
, 
pošt2
, 
¡•
, 
veùÜ
<> &
»suÉpošts
){

229 
	g»suÉpošts
.
ş—r
();

231 
	g¡•di¡ªû
 = (
pošt2
 - 
pošt1
)/
¡•
;

234 
	gi
 =0; i<
	g¡•
+1; i++){

235 
	g»suÉpošts
.
push_back
(
pošt1
 + 
i
*
¡•di¡ªû
);

251 
	gveùÜ
<> 
	gtoŞsfunc
::
	$¥l™Quad
(
p0
, 
p1
, 
p2
, 
p3
, 
¡•
){

255 
veùÜ
<> 
fœ¡row
, 
£cÚdrow
;

256 
	`¥l™Lše
(
p0
, 
p3
, 
¡•
, 
fœ¡row
);

259 
	`¥l™Lše
(
p1
, 
p2
, 
¡•
, 
£cÚdrow
);

262 
veùÜ
<> 
cŞumÁemp
;

263 
veùÜ
<> 
quadpošts
;

266 
i
 =0; i<
fœ¡row
.
	`size
(); i++){

268 
	`¥l™Lše
(
fœ¡row
[
i
], 
£cÚdrow
[i], 
¡•
, 
cŞumÁemp
);

271 
j
=0; j<
cŞumÁemp
.
	`size
(); j++){

273 
quadpošts
.
	`push_back
(
cŞumÁemp
[
j
]);

277 
cŞumÁemp
.
	`ş—r
();

280 
fœ¡row
.
	`ş—r
();

281 
£cÚdrow
.
	`ş—r
();

283  
quadpošts
;

284 
	}
}

288 
	gveùÜ
<> 
	gtoŞsfunc
::
	$¥l™Quad_2
(
p0
, 
p1
, 
p2
, 
p3
, 
¡•
){

291 
veùÜ
<> 
fœ¡row
, 
£cÚdrow
;

292 
	`¥l™Lše
(
p0
, 
p3
, 
¡•
, 
fœ¡row
);

295 
	`¥l™Lše
(
p1
, 
p2
, 
¡•
, 
£cÚdrow
);

298 
veùÜ
<> 
cŞumÁemp
;

299 
veùÜ
<> 
quadpošts
;

302 
i
 =0; i<
fœ¡row
.
	`size
()-1; i++){

304 
	`¥l™Lše
(
fœ¡row
[
i
], 
£cÚdrow
[i], 
¡•
, 
cŞumÁemp
);

307 
j
=0; j< 
cŞumÁemp
.
	`size
()-1; j++){

309 
quadpošts
.
	`push_back
(
cŞumÁemp
[
j
]);

313 
cŞumÁemp
.
	`ş—r
();

316 
fœ¡row
.
	`ş—r
();

317 
£cÚdrow
.
	`ş—r
();

319  
quadpošts
;

320 
	}
}

324 
¡ršg
 
	gtoŞsfunc
::
	$g‘FeNameW™hEx‹nsiÚ
(
¡ršg
 
·th
){

326 
¡ršg
 
feName
;

328 
ch¬Index
 = 
·th
.
	`fšd_Ï¡_of
('/');

329 if(
ch¬Index
 !ğ
¡ršg
::
Åos
)

330 
feName
 = 
·th
.
	`sub¡r
(
ch¬Index
+1);

332 if(
feName
.
	`em±y
()){

333 
cout
<<"Message fromoolsfunc::getFileNameWithExtension: Not‡ valid srep file.";

334 
EXIT_FAILURE
;

337  
feName
;

338 
	}
}

343 
¡ršg
 
	gtoŞsfunc
::
	$g‘P©hName
(
¡ršg
 
·th
){

345 
¡ršg
 
·thName
;

347 
ch¬Index
 = 
·th
.
	`fšd_Ï¡_of
('/');

348 if(
ch¬Index
 !ğ
¡ršg
::
Åos
)

349 
·thName
 = 
·th
.
	`sub¡r
(0, 
ch¬Index
);

351 if(
·thName
.
	`em±y
()){

352 
cout
<<"Message fromoolsfunc::getFileNameWithExtension: Not‡ valid srep file.";

353 
EXIT_FAILURE
;

356  
·thName
;

357 
	}
}

362 
¡ršg
 
	gtoŞsfunc
::
	$¥l™Ex‹nsiÚ
(
¡ršg
 
feName
){

364 
ch¬Index
 = 
feName
.
	`fšd_Ï¡_of
('.');

366 
feName
 = feName.
	`sub¡r
(0, 
ch¬Index
);

368 if(
feName
.
	`em±y
()){

369 
cout
<<"Message fromoolsfunc::getFileNameWithExtension: Not‡ valid srep file.";

370 
EXIT_FAILURE
;

373  
feName
;

374 
	}
}

379 
¡ršg
 
	gtoŞsfunc
::
	$g‘Ba£FeName
(
¡ršg
 
·th
){

381 
ch¬Index
 = 
·th
.
	`fšd_Ï¡_of
('/');

383 
Ï¡DÙIndex
 = 
·th
.
	`fšd_Ï¡_of
(".");

384 
Ëngth
 = 
Ï¡DÙIndex
 - 
ch¬Index
;

386 
¡ršg
 
f’ame
 = 
·th
.
	`sub¡r
(
ch¬Index
+1, 
Ëngth
-1);

388 if(
f’ame
.
	`em±y
()){

389 
cout
<<"Message fromoolsfunc::getFileNameWithExtension: Not‡ valid srep file.";

390 
EXIT_FAILURE
;

393  
f’ame
;

394 
	}
}

397 
boŞ
 
	gtoŞsfunc
::
	$quadA»aMš
(
VeùÜ3D
 *
pošt
){

399 
dŸgÚ®p0p2
 = 
	`sq¹
(
	`pow
(
pošt
[0].
	`g‘X
()-pošt[2].g‘X(), 2è+…owÕošt[0].
	`g‘Y
()-pošt[2].g‘Y(), 2è+…owÕošt[0].
	`g‘Z
()-point[2].getZ(), 2));

401 
dŸgÚ®p1p3
 = 
	`sq¹
(
	`pow
(
pošt
[1].
	`g‘X
()-pošt[3].g‘X(), 2è+…owÕošt[1].
	`g‘Y
()-pošt[3].g‘Y(), 2è+…owÕošt[1].
	`g‘Z
()-point[3].getZ(), 2));

405 
p0p1
 = 
	`sq¹
(
	`pow
(
pošt
[0].
	`g‘X
()-pošt[1].g‘X(), 2è+…owÕošt[0].
	`g‘Y
()-pošt[1].g‘Y(), 2è+…owÕošt[0].
	`g‘Z
()-point[1].getZ(), 2));

407 
p1p2
 = 
	`sq¹
(
	`pow
(
pošt
[1].
	`g‘X
()-pošt[2].g‘X(), 2è+…owÕošt[1].
	`g‘Y
()-pošt[2].g‘Y(), 2è+…owÕošt[1].
	`g‘Z
()-point[2].getZ(), 2));

409 
p2p3
 = 
	`sq¹
(
	`pow
(
pošt
[2].
	`g‘X
()-pošt[3].g‘X(), 2è+…owÕošt[2].
	`g‘Y
()-pošt[3].g‘Y(), 2è+…owÕošt[2].
	`g‘Z
()-point[3].getZ(), 2));

411 
p0p3
 = 
	`sq¹
(
	`pow
(
pošt
[0].
	`g‘X
()-pošt[3].g‘X(), 2è+…owÕošt[0].
	`g‘Y
()-pošt[3].g‘Y(), 2è+…owÕošt[0].
	`g‘Z
()-point[3].getZ(), 2));

414 
s1
 = (
dŸgÚ®p0p2
 + 
p0p1
 + 
p1p2
)/2;

415 
s2
 = (
dŸgÚ®p0p2
 + 
p0p3
 + 
p2p3
)/2;

416 
s3
 = (
dŸgÚ®p1p3
 + 
p0p1
 + 
p0p3
)/2;

417 
s4
 = (
dŸgÚ®p1p3
 + 
p1p2
 + 
p2p3
)/2;

420 
size1
 = 
	`sq¹
(
	`çbs
(
s1
*(s1-
p0p1
)*(s1-
p1p2
)*(s1-
dŸgÚ®p0p2
)));

421 
size2
 = 
	`sq¹
(
	`çbs
(
s2
*(s2-
p0p3
)*(s2-
p2p3
)*(s2-
dŸgÚ®p0p2
)));

424 
size3
 = 
	`sq¹
(
	`çbs
(
s3
*(s3-
p0p1
)*(s3-
p0p3
)*(s3-
dŸgÚ®p1p3
)));

425 
size4
 = 
	`sq¹
(
	`çbs
(
s4
*(s4-
p1p2
)*(s4-
p2p3
)*(s4-
dŸgÚ®p1p3
)));

428 if(
size1
+
size2
 < 
size3
+
size4
)

429  
Œue
;

431  
çl£
;

432 
	}
}

437 
	gtoŞsfunc
::
§ve_veùÜ_to_txt
(cÚ¡ * 
f’ame
, 
veùÜ
<> 
d©a
){

439 
	g¡d
::
of¡»am
 
fout
;

440 
	gfout
.
İ’
(
f’ame
);

442 if(
	gfout
) {

443 
	gi
 =0; i< 
	gd©a
.
size
();i++){

444 
	gfout
<< 
	gd©a
[
i
]<<" ";

446 
	gfout
<<
	g’dl
;

447 
	gcout
<<"SucûssfuÎy saved d©¨to: "<<
	gf’ame
<<
	g’dl
;

450 
	gû¼
<<"Wr™ouˆçed, cªnÙ o³Àthfe!"<<
	g’dl
;

452 
	gfout
.
şo£
();

459 
	gtoŞsfunc
::
	$RuÂšgTime
(
şock_t
 
time1
, clock_ˆ
time2
){

460 
¡d
::
cout
 << "------------------CLOCKS_PER_SEC: " << 
CLOCKS_PER_SEC
 << " ms";

461 
t
=
time1
 - 
time2
;

462 
time
 = (
t
*1000)/
CLOCKS_PER_SEC
;

463  
time
;

464 
	}
}

472 
	gtoŞsfunc
::
g‘UVCoÜdš©e
(
veùÜ
<> &
š‹½Ş©edU
, veùÜ<> &
š‹½Ş©edV
, 
rowNum
, 
cŞNum
, 
¡•
){

473 
	gveùÜ
<> 
	gsubquadpošt_v
, 
	gsubquadpošt_u
;

474 
	gš‹½Ş©edU
.
ş—r
();

475 
	gš‹½Ş©edV
.
ş—r
();

478 
	gi
 = 0; i < 
	growNum
 -1; i++){

479 
	gj
 = 0; j < 
	gcŞNum
 -1; j++){

481 
	gquadpoštsu
[4], 
	gquadpoštsv
[4];

483 
	gquadpoštsu
[0] = 
i
;

484 
	gquadpoštsv
[0] = 
j
;

486 
	gquadpoštsu
[1] = 
i
 + 1;

487 
	gquadpoštsv
[1] = 
j
;

489 
	gquadpoštsu
[2] = 
i
 + 1;

490 
	gquadpoštsv
[2] = 
j
 + 1;

492 
	gquadpoštsu
[3] = 
i
;

493 
	gquadpoštsv
[3] = 
j
 + 1;

497 
	gsubquadpošt_u
 = 
¥l™Quad_2
(
quadpoštsu
[0],quadpoštsu[1],quadpoštsu[2],quadpoštsu[3], 
¡•
);

500 
	gsubquadpošt_v
 = 
¥l™Quad_2
(
quadpoštsv
[0],quadpoštsv[1],quadpoštsv[2],quadpoštsv[3], 
¡•
);

502 
	gm
 = 0; m < 
	gsubquadpošt_u
.
size
(); m++){

503 
	gš‹½Ş©edU
.
push_back
(
subquadpošt_u
[
m
]);

504 
	gš‹½Ş©edV
.
push_back
(
subquadpošt_v
[
m
]);

507 
	gsubquadpošt_v
.
ş—r
();

508 
	gsubquadpošt_u
.
ş—r
();

513 
	gj
 = 0; j < 
	gcŞNum
 -1; j++){

514 
	gveùÜ
<> 
	gsubp›ûs
;

515 
¥l™Lše
(
j
, j+1, 
¡•
, 
subp›ûs
);

517 
	gm
 = 0; m < 
	gsubp›ûs
.
size
()-1; m++){

518 
	gš‹½Ş©edU
.
push_back
(
rowNum
 -1);

519 
	gš‹½Ş©edV
.
push_back
(
subp›ûs
[
m
]);

524 
	gi
 = 0; i < 
	growNum
 -1; i++){

525 
	gveùÜ
<> 
	gsubp›ûs
;

526 
¥l™Lše
(
i
, i+1, 
¡•
, 
subp›ûs
);

528 
	gm
 = 0; m < 
	gsubp›ûs
.
size
()-1; m++){

529 
	gš‹½Ş©edU
.
push_back
(
subp›ûs
[
m
]);

530 
	gš‹½Ş©edV
.
push_back
(
cŞNum
 -1);

535 
	gš‹½Ş©edU
.
push_back
(
rowNum
 -1);

536 
	gš‹½Ş©edV
.
push_back
(
cŞNum
 -1);

547 
	gtoŞsfunc
::
	$g‘SSSN
(
š‹½Ş©iÚLev–
, 
rowNum
, 
cŞNum
){

549 
¡•
 = 
	`pow
(()2, ()
š‹½Ş©iÚLev–
);

552 
¡ªdQuads
 = (
rowNum
-1)*(
cŞNum
-1);

553 
¥okeEachQuad
 = 
¡•
 * step;

554 
¥okeSndSide
 = 
¡ªdQuads
 * 
¥okeEachQuad
 + (
cŞNum
-1)*
¡•
 + (
rowNum
-1)*step + 1;

556  
¥okeSndSide
;

557 
	}
}

565 
	gtoŞsfunc
::
	$g‘CSSN
(
š‹½Ş©iÚLev–
, 
rowNum
, 
cŞNum
){

567 
üe¡Quads
 = 
rowNum
*2 + 
cŞNum
*2 - 4;

570 if(
š‹½Ş©iÚLev–
==0)

571  
üe¡Quads
;

573 
¡•
 = 
	`pow
(()2, ()
š‹½Ş©iÚLev–
);

576 
¥okeEachQuad
 = (
¡•
+1)*step;

577 
¥okeC»¡Side
 = 
üe¡Quads
 * 
¥okeEachQuad
;

579  
¥okeC»¡Side
;

581 
	}
}

588 
	gtoŞsfunc
::
§veVtkPoštsToVTKFe
(
vtkSm¬tPoš‹r
<
vtkPošts
> 
pošts
, 
¡ršg
 
ouutFe
){

591 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyD©a
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

593 
	gpŞyD©a
->
S‘Pošts
(
pošts
);

594 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aWr™”
> 
	gpŞyD©aWr™”
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aWr™”
>::
New
();

595 
	gpŞyD©aWr™”
->
S‘IÅut
(
pŞyD©a
);

597 
	gpŞyD©aWr™”
->
S‘FeName
(
ouutFe
.
c_¡r
());

598 
	gpŞyD©aWr™”
->
Upd©e
();

611 
	gtoŞsfunc
::
	$dÙProduùAngË
(* 
pošt_c
, * 
pošt_h
, * 
pošt_v
){

614 
VeùÜ3D
 
a
 = 
	`g‘VeùÜ
(
pošt_c
, 
pošt_v
);

617 
VeùÜ3D
 
b
 = 
	`g‘VeùÜ
(
pošt_c
, 
pošt_h
);

620 
a
.
	`nÜm®ize
();

621 
b
.
	`nÜm®ize
();

624  
a
 * 
b
;

625 
	}
}

629 
	gtoŞsfunc
::
	$dÙProduùAngË_2
(
VeùÜ3D
 
pošt_c
, VeùÜ3D 
pošt_h
, VeùÜ3D 
pošt_v
){

632 
VeùÜ3D
 
a
 = 
pošt_h
 - 
pošt_c
;

635 
VeùÜ3D
 
b
 = 
pošt_v
 - 
pošt_c
;

638 
a
.
	`nÜm®ize
();

639 
b
.
	`nÜm®ize
();

642  
a
 * 
b
;

643 
	}
}

648 
VeùÜ3D
 
	gtoŞsfunc
::
	$ŒªguÏrNÜm®_vec3D
(
VeùÜ3D
 
pošt_c
, VeùÜ3D 
pošt_h
, VeùÜ3D 
pošt_v
){

651 
VeùÜ3D
 
a
 = 
pošt_h
 - 
pošt_c
;

654 
VeùÜ3D
 
b
 = 
pošt_v
 - 
pošt_c
;

656  
	`üossProduù
(
a
, 
b
);

657 
	}
}

660 
VeùÜ3D
 
	gtoŞsfunc
::
	$ŒªguÏrNÜm®_doubËPÙ
(* 
pošt_c
, * 
pošt_h
, * 
pošt_v
){

663 
VeùÜ3D
 
a
 = 
	`g‘VeùÜ
(
pošt_c
, 
pošt_v
);

666 
VeùÜ3D
 
b
 = 
	`g‘VeùÜ
(
pošt_c
, 
pošt_h
);

668  
	`üossProduù
(
a
, 
b
);

669 
	}
}

673 
VeùÜ3D
 
	gtoŞsfunc
::
	$üossProduù
(
VeùÜ3D
 
a
, VeùÜ3D 
b
){

674 
VeùÜ3D
 
nÜm®EndPošt
;

676 
nÜm®EndPošt
.
	`£tX
(
a
.
	`g‘Y
()*
b
.
	`g‘Z
() -‡.getZ()*b.getY());

677 
nÜm®EndPošt
.
	`£tY
(
a
.
	`g‘Z
()*
b
.
	`g‘X
() -‡.getX()*b.getZ());

678 
nÜm®EndPošt
.
	`£tZ
(
a
.
	`g‘X
()*
b
.
	`g‘Y
() -‡.getY()*b.getX());

681  
nÜm®EndPošt
;

682 
	}
}

694 
VeùÜ3D
 
	gtoŞsfunc
::
	$g‘VeùÜ
(* 
pošt1
, * 
pošt2
){

695 
VeùÜ3D
 
vec
;

697 
vec
.
	`£t
(
pošt2
[0] - 
pošt1
[0],…oint2[1] -…oint1[1],…oint2[2] -…oint1[2]);

699  
vec
;

700 
	}
}

704 
	gtoŞsfunc
::
	$Ëngthoãdges
(
VeùÜ3D
 
pošt
[2]){

705 
x0
 = 
pošt
[0].
	`g‘X
();

706 
y0
 = 
pošt
[0].
	`g‘Y
();

707 
z0
 = 
pošt
[0].
	`g‘Z
();

710 
x1
 = 
pošt
[1].
	`g‘X
();

711 
y1
 = 
pošt
[1].
	`g‘Y
();

712 
z1
 = 
pošt
[1].
	`g‘Z
();

715 
di¡ªû
 = 
	`sq¹
(
	`pow
(
x1
-
x0
, 2è+…ow(
y1
-
y0
, 2è+…ow(
z1
-
z0
, 2));

719  
di¡ªû
;

720 
	}
}

	@toolsfunc.h

1 #iâdeà
TOOLSFUNC_H


2 
	#TOOLSFUNC_H


	)

4 
	~<veùÜ
>

5 
	~"M3DQuadFigu».h
"

6 
	~"P3DCÚŒŞ.h
"

7 
	~"CÚŒŞP¬ms.h
"

8 
	~"M3DQuadIÁ”pŞ©”.h
"

9 
	~<io¡»am
>

10 
	~<f¡»am
>

11 
	~"time.h
"

13 
	~<vtkPŞyD©aWr™”.h
>

14 
	~<vtkPŞyD©aR—d”.h
>

15 
	~"vtkPŞyD©a.h
"

18 
	gveùÜ
< > 
	tVeùÜSR•F—tu»sTy³
;

19 
	gveùÜ
< 
	tVeùÜSR•F—tu»sTy³
 > 
	tVeùÜT¿ššgS‘F—tu»sTy³
;

21 
	gveùÜ
<> 
	tVeùÜDoubËPošts
;

22 
	gveùÜ
<
	tVeùÜDoubËPošts
> 
	tVeùÜQuadPošt
;

24 
	gveùÜ
<
	tVeùÜ3D
> 
	tVeùÜ3DPos™iÚ
;

25 
	gveùÜ
<
	tVeùÜ3DPos™iÚ
> 
	tQuadPošt
;

39 şas 
	ctoŞsfunc


41 
	mpublic
:

42 
toŞsfunc
();

45 
M3DQuadFigu»
* 
G‘QuadFigu»
(cÚ¡ * 
figf’ame
);

47 
¡ršg
 
cÚÃùFeP©h
(¡ršg 
roÙDœ
, cÚ¡ * 
¥ecificDœ
, 
chªgšgIndex
, cÚ¡ * 
ex‹nsiÚ
);

48 
¡ršg
 
	$cÚSŒ
(
¡ršg
 
roÙDœ
, cÚ¡ * 
¥ecificDœ
, sŒšg 
feName
, cÚ¡ * 
ex‹nsiÚ
) const;

49 
¡ršg
 
	$cÚÃùSŒ
(
¡ršg
 
roÙDœ
, cÚ¡ * 
¥ecificDœ
) const;

53 
	`d–‘eFes
(
¡ršg
 
·th
);

55 
veùÜ
< 
¡d
::
¡ršg
 > 
	`g‘Mod–Çme
(¡ršg 
fefŞd”
);

57 
	`§veã©u»s
(
¡ršg
 
·th
, 
VeùÜT¿ššgS‘F—tu»sTy³
 
ã©u»m©rix
);

59 
	`¥l™Lše
(
pošt1
, 
pošt2
, 
¡•
, 
veùÜ
<> &
»suÉpošts
);

60 
veùÜ
<> 
	`¥l™Quad
(
p0
, 
p1
, 
p2
, 
p3
, 
¡•
);

62 
¡ršg
 
	`g‘FeNameW™hEx‹nsiÚ
(¡ršg 
·th
);

63 
¡ršg
 
	`¥l™Ex‹nsiÚ
(¡ršg 
feName
);

64 
¡ršg
 
	`g‘P©hName
(¡ršg 
·th
);

66 
	`§veM©rix3
(
¡ršg
 
·th
, 
veùÜ
<> 
A
, veùÜ<> 
B
,veùÜ<> 
C
);

67 
	`§veM©rix2
(
¡ršg
 
·th
, 
veùÜ
<> 
A
, veùÜ<> 
B
);

69 
	`quadA»a
(
VeùÜ3D
 *
pošt
);

71 
¡ršg
 
	`g‘Ba£FeName
(¡ršg 
·th
);

72 
boŞ
 
	`quadA»aMš
(
VeùÜ3D
 *
pošt
);

74 
	`RuÂšgTime
(
şock_t
 
time1
, clock_ˆ
time2
);

75 
	`§ve_veùÜ_to_txt
(cÚ¡ * 
f’ame
, 
veùÜ
<> 
d©a
);

77 
veùÜ
<> 
	`¥l™Quad_2
(
p0
, 
p1
, 
p2
, 
p3
, 
¡•
);

79 
	`g‘UVCoÜdš©e
(
veùÜ
<> &
š‹½Ş©edU
, veùÜ<> &
š‹½Ş©edV
, 
rowNum
, 
cŞNum
, 
¡•
);

80 
	`g‘SSSN
(
š‹½Ş©iÚLev–
, 
rowNum
, 
cŞNum
);

81 
	`g‘CSSN
(
š‹½Ş©iÚLev–
, 
rowNum
, 
cŞNum
);

83 
	`§veVtkPoštsToVTKFe
(
vtkSm¬tPoš‹r
<
vtkPošts
> 
pošts
, 
¡ršg
 
ouutFe
);

85 
	`dÙProduùAngË
(* 
pošt_c
, * 
pošt_h
, * 
pošt_v
);

86 
	`dÙProduùAngË_2
(
VeùÜ3D
 
pošt_c
, VeùÜ3D 
pošt_h
, VeùÜ3D 
pošt_v
);

88 
VeùÜ3D
 
	`g‘VeùÜ
(* 
pošt1
, * 
pošt2
);

90 
VeùÜ3D
 
	`ŒªguÏrNÜm®_vec3D
(VeùÜ3D 
pošt_c
, VeùÜ3D 
pošt_h
, VeùÜ3D 
pošt_v
);

91 
VeùÜ3D
 
	`ŒªguÏrNÜm®_doubËPÙ
(* 
pošt_c
, * 
pošt_h
, * 
pošt_v
);

92 
VeùÜ3D
 
	`üossProduù
(VeùÜ3D 
a
, VeùÜ3D 
b
);

94 
	`Ëngthoãdges
(
VeùÜ3D
 
pošt
[2]);

	@uvmap.cpp

1 
	~"uvm­.h
"

3 
	guvm­
::
	$uvm­
()

5 
	}
}

12 
uvm­
::
	$g‘SubUVCoÜdš©eFÜSndSide
(
DoubËVecVec
 &
subUs
, DoubËVecVeø&
subVs
, 
rowNum
, 
cŞNum
, 
¡•
){

14 
quadIndex
 = 0;

16 
i
 = 0; i < 
rowNum
 -1; i++){

17 
j
 = 0; j < 
cŞNum
 -1; j++){

18 
subUs
.
	`push_back
(
	`DoubËVec
());

19 
subVs
.
	`push_back
(
	`DoubËVec
());

23 
DoubËVec
 
quadpoštsu
, 
quadpoštsv
;

24 
quadpoštsv
.
	`»size
(4);

25 
quadpoštsu
.
	`»size
(4);

27 
quadpoštsu
[0] = 
i
;

28 
quadpoštsv
[0] = 
j
;

30 
quadpoštsu
[1] = 
i
 + 1;

31 
quadpoštsv
[1] = 
j
;

33 
quadpoštsu
[2] = 
i
 + 1;

34 
quadpoštsv
[2] = 
j
 + 1;

36 
quadpoštsu
[3] = 
i
;

37 
quadpoštsv
[3] = 
j
 + 1;

41 
DoubËVec
 
subquadpošt_u
 = 
	`¥l™Quad
(
quadpoštsu
[0],quadpoštsu[1],quadpoštsu[2],quadpoštsu[3], 
¡•
);

44 
DoubËVec
 
subquadpošt_v
 = 
	`¥l™Quad
(
quadpoštsv
[0],quadpoštsv[1],quadpoštsv[2],quadpoštsv[3], 
¡•
);

46 
m
 =0; m<
subquadpošt_u
.
	`size
();m++){

47 
subUs
[
quadIndex
].
	`push_back
(
subquadpošt_u
[
m
]);

48 
subVs
[
quadIndex
].
	`push_back
(
subquadpošt_v
[
m
]);

51 
quadIndex
++;

54 
	}
}

62 
DoubËVecVec
 
	guvm­
::
	$g‘SubUVCoÜdš©eFÜC»¡Side
(
¡•
){

63 
DoubËVecVec
 
subUVs
;

64 
subUVs
.
	`push_back
(
	`DoubËVec
());

67 
	`¥l™Lše
(0, 1, 
¡•
, 
subUVs
[0]);

69  
subUVs
;

70 
	}
}

73 
DoubËVec
 
	guvm­
::
	$g‘UVSubdivisiÚ
(
š‹½Ş©iÚLev–
){

74 
¡•
 = 
	`pow
(2.0, ()
š‹½Ş©iÚLev–
);

76 
DoubËVec
 
subUVs
;

79 
	`¥l™Lše
(0, 1, 
¡•
, 
subUVs
);

81  
subUVs
;

82 
	}
}

94 
DoubËVec
 
	guvm­
::
	$¥l™Quad
(
p0
, 
p1
, 
p2
, 
p3
, 
¡•
){

98 
DoubËVec
 
fœ¡row
, 
£cÚdrow
;

99 
	`¥l™Lše
(
p0
, 
p3
, 
¡•
, 
fœ¡row
);

102 
	`¥l™Lše
(
p1
, 
p2
, 
¡•
, 
£cÚdrow
);

105 
DoubËVec
 
cŞumÁemp
;

106 
DoubËVec
 
quadpošts
;

109 
i
 =0; i<
fœ¡row
.
	`size
(); i++){

111 
	`¥l™Lše
(
fœ¡row
[
i
], 
£cÚdrow
[i], 
¡•
, 
cŞumÁemp
);

114 
j
=0; j<
cŞumÁemp
.
	`size
(); j++){

116 
quadpošts
.
	`push_back
(
cŞumÁemp
[
j
]);

120 
cŞumÁemp
.
	`ş—r
();

123 
fœ¡row
.
	`ş—r
();

124 
£cÚdrow
.
	`ş—r
();

126  
quadpošts
;

127 
	}
}

136 
	guvm­
::
	$¥l™Lše
(
pošt1
, 
pošt2
, 
¡•
, 
DoubËVec
 &
»suÉpošts
){

138 
»suÉpošts
.
	`ş—r
();

140 
¡•di¡ªû
 = (
pošt2
 - 
pošt1
)/
¡•
;

143 
i
 =0; i<
¡•
+1; i++){

144 
»suÉpošts
.
	`push_back
(
pošt1
 + 
i
*
¡•di¡ªû
);

146 
	}
}

	@uvmap.h

1 #iâdeà
UVMAP_H


2 
	#UVMAP_H


	)

4 
	~<veùÜ
>

5 
	~"m©h.h
"

7 
	g¡d
::
	tveùÜ
<> 
	tDoubËVec
;

8 
	g¡d
::
	tveùÜ
<
	tDoubËVec
> 
	tDoubËVecVec
;

11 şas 
	cuvm­


13 
	mpublic
:

14 
uvm­
();

16 
DoubËVec
 
¥l™Quad
(
p0
, 
p1
, 
p2
, 
p3
, 
¡•
);

17 
¥l™Lše
(
pošt1
, 
pošt2
, 
¡•
, 
DoubËVec
 &
»suÉpošts
);

18 
g‘SubUVCoÜdš©eFÜSndSide
(
DoubËVecVec
 &
subUs
, DoubËVecVeø&
subVs
, 
rowNum
, 
cŞNum
, 
¡•
);

19 
DoubËVecVec
 
g‘SubUVCoÜdš©eFÜC»¡Side
(
¡•
);

21 
DoubËVec
 
g‘UVSubdivisiÚ
(
¡•
);

	@visualization.cpp

1 
	~"visu®iz©iÚ.h
"

5 
	gvisu®iz©iÚ
::
	$visu®iz©iÚ
()

7 
	}
}

14 
visu®iz©iÚ
::
	$d¿wEdgeOfQuads
(
boŞ
 
moved
){

17 
M3DQuadPrim™ive
* 
´im0
;

18 
M3DQuadIÁ”pŞ©”
 *
m
 = 
Ãw
 
	`M3DQuadIÁ”pŞ©”
(
curQuadFig
);

20 
veùÜ
<> 
hÜizÚ®edg•oštsu
, 
hÜizÚ®edg•oštsv
, 
v”tiÿËdg•oštsu
, 
v”tiÿËdg•oštsv
;

23 
i
 = 0; i < 
rowNum
; i++){

24 
j
 = 0; j < 
cŞNum
; j++){

28 
d–u
[3]={0,0,0};

29 
d–v
[3]={0,0,0};

31 if(!
moved
){

32 
side
){

37 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
));

38 
d–u
[0] = 
´im0
->
	`g‘D–U0
();

39 
d–v
[0] = 
´im0
->
	`g‘D–V0
();

41 if(
j
!=
cŞNum
-1){

42 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
+1));

43 
d–u
[1] = 
´im0
->
	`g‘D–U0
();

44 
d–v
[1] = 
´im0
->
	`g‘D–V0
();

47 if(
i
!=
rowNum
-1){

48 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
+1, 
j
));

49 
d–u
[2] = 
´im0
->
	`g‘D–U0
();

50 
d–v
[2] = 
´im0
->
	`g‘D–V0
();

56 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
));

57 
d–u
[0] = 
´im0
->
	`g‘D–U1
();

58 
d–v
[0] = 
´im0
->
	`g‘D–V1
();

60 if(
j
!=
cŞNum
-1){

61 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
+1));

62 
d–u
[1] = 
´im0
->
	`g‘D–U1
();

63 
d–v
[1] = 
´im0
->
	`g‘D–V1
();

66 if(
i
!=
rowNum
-1){

67 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
+1, 
j
));

68 
d–u
[2] = 
´im0
->
	`g‘D–U1
();

69 
d–v
[2] = 
´im0
->
	`g‘D–V1
();

78 
quadpoštsu
[3], 
quadpoštsv
[3];

80 
quadpoštsu
[0] = 
i
 + 
d–u
[0];

81 
quadpoštsv
[0] = 
j
 + 
d–v
[0];

84 
quadpoštsu
[1] = 
i
 + 
d–u
[1];

85 
quadpoštsv
[1] = 
j
 + 1 + 
d–v
[1];

88 
quadpoštsu
[2] = 
i
 + 1 + 
d–u
[2];

89 
quadpoštsv
[2] = 
j
 + 
d–v
[2];

91 
cout
<<"MSG from d¿wEdgeOfQuads: FÜ…œm™ve["<<
i
<<"]["<<
j
<<"],hsub-lše-pošt ¬e: "<<
’dl
;

92 if(
j
!=
cŞNum
-1){

94 
toŞs
.
	`¥l™Lše
(
quadpoštsu
[0], quadpoštsu[1],
¡•
, 
hÜizÚ®edg•oštsu
);

95 
toŞs
.
	`¥l™Lše
(
quadpoštsv
[0], quadpoštsv[1],
¡•
, 
hÜizÚ®edg•oštsv
);

97 
m
 =0;m<
hÜizÚ®edg•oštsu
.
	`size
();m++){

98 
cout
<<"MSG from d¿wEdgeOfQuads: hÜizÚ®edg•oštsu["<<
m
<<"] is: "<<
hÜizÚ®edg•oštsu
[m]<<
’dl
;

99 
cout
<<"MSG from d¿wEdgeOfQuads: hÜizÚ®edg•oštsv["<<
m
<<"] is: "<<
hÜizÚ®edg•oštsv
[m]<<
’dl
;

103 if(
i
!=
rowNum
-1){

105 
toŞs
.
	`¥l™Lše
(
quadpoštsu
[0], quadpoštsu[2],
¡•
, 
v”tiÿËdg•oštsu
);

106 
toŞs
.
	`¥l™Lše
(
quadpoštsv
[0], quadpoštsv[2],
¡•
, 
v”tiÿËdg•oštsv
);

107 
m
 =0;m<
v”tiÿËdg•oštsu
.
	`size
();m++){

108 
cout
<<"MSG from d¿wEdgeOfQuads: v”tiÿËdg•oštsu["<<
m
<<"] is: "<<
v”tiÿËdg•oštsu
[m]<<
’dl
;

109 
cout
<<"MSG from d¿wEdgeOfQuads: v”tiÿËdg•oštsv["<<
m
<<"] is: "<<
v”tiÿËdg•oštsv
[m]<<
’dl
;

114 
VeùÜ3D
 
hÜizÚ®pošt
[2];

116 
VeùÜ3D
 
v”tiÿÍošt
[2];

118 
vtkSm¬tPoš‹r
<
vtkPošts
> 
hubpošts
 = vtkSm¬tPoš‹r<vtkPošts>::
	`New
();

119 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿ypošt¦še
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
	`New
();

120 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pŞypošt¦še
 = vtkSm¬tPoš‹r<vtkPŞyD©a>::
	`New
();

123 
quadty³
){

126 if(
j
!=
cŞNum
-1){

127 
cout
<<"MSG from d¿wEdgeOfQuads: FÜ…œm™ve["<<
i
<<"]["<<
j
<<"], ha hÜizÚ®ƒdges: "<<
’dl
;

128 
v
 = 0; v < 
¡•
; v++){

129 
hÜizÚ®pošt
[0] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
hÜizÚ®edg•oštsu
[
v
],
hÜizÚ®edg•oštsv
[v],
side
)->
	`g‘B
();

130 
hÜizÚ®pošt
[1] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
hÜizÚ®edg•oštsu
[
v
+1],
hÜizÚ®edg•oštsv
[v+1],
side
)->
	`g‘B
();

131 
cout
<<"hÜizÚ®edg•oštsu["<<
v
<<"] is: "<<
hÜizÚ®edg•oštsu
[v]<<" hÜizÚ®edg•oštsv["<<v<<"] is: "<<
hÜizÚ®edg•oštsv
[v]<<
’dl
;

132 
cout
<<"hÜizÚ®pošt[0].g‘X(èis: "<<
hÜizÚ®pošt
[0].
	`g‘X
()<<" hÜizÚ®pošt[0].g‘Y(èis: "<<hÜizÚ®pošt[0].
	`g‘Y
()<<" hÜizÚ®pošt[0].g‘Z(èis: "<<hÜizÚ®pošt[0].
	`g‘Z
()<<
’dl
;

135 
vtkIdTy³
 
id0
 = 
hubpošts
->
	`In£¹NextPošt
(
hÜizÚ®pošt
[0].
	`g‘X
(), hÜizÚ®pošt[0].
	`g‘Y
(), hÜizÚ®pošt[0].
	`g‘Z
());

136 
vtkIdTy³
 
id1
 = 
hubpošts
->
	`In£¹NextPošt
(
hÜizÚ®pošt
[1].
	`g‘X
(), hÜizÚ®pošt[1].
	`g‘Y
(), hÜizÚ®pošt[1].
	`g‘Z
());

138 
vtkSm¬tPoš‹r
<
vtkLše
> 
medŸlsh“še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

139 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
id0
);

140 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
id1
);

142 
ûÎ¬¿ypošt¦še
->
	`In£¹NextC–l
(
medŸlsh“še
);

145 if(
i
!=
rowNum
-1){

146 
cout
<<"MSG from d¿wEdgeOfQuads: FÜ…œm™ve["<<
i
<<"]["<<
j
<<"], ha v”tiÿÈedges: "<<
’dl
;

147 
f
 = 0; f < 
¡•
; f++){

148 
v”tiÿÍošt
[0] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
v”tiÿËdg•oštsu
[
f
],
v”tiÿËdg•oštsv
[f],
side
)->
	`g‘B
();

149 
v”tiÿÍošt
[1] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
v”tiÿËdg•oštsu
[
f
+1],
v”tiÿËdg•oštsv
[f+1],
side
)->
	`g‘B
();

154 
vtkIdTy³
 
id0
 = 
hubpošts
->
	`In£¹NextPošt
(
v”tiÿÍošt
[0].
	`g‘X
(), v”tiÿÍošt[0].
	`g‘Y
(), v”tiÿÍošt[0].
	`g‘Z
());

155 
vtkIdTy³
 
id1
 = 
hubpošts
->
	`In£¹NextPošt
(
v”tiÿÍošt
[1].
	`g‘X
(), v”tiÿÍošt[1].
	`g‘Y
(), v”tiÿÍošt[1].
	`g‘Z
());

157 
vtkSm¬tPoš‹r
<
vtkLše
> 
medŸlsh“še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

158 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
id0
);

159 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
id1
);

161 
ûÎ¬¿ypošt¦še
->
	`In£¹NextC–l
(
medŸlsh“še
);

167 if(
j
!=
cŞNum
-1){

168 
v
 = 0; v < 
¡•
; v++){

169 
hÜizÚ®pošt
[0] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
hÜizÚ®edg•oštsu
[
v
],
hÜizÚ®edg•oštsv
[v],
side
)->
	`g‘X
();

170 
hÜizÚ®pošt
[1] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
hÜizÚ®edg•oštsu
[
v
+1],
hÜizÚ®edg•oštsv
[v+1],
side
)->
	`g‘X
();

173 
vtkIdTy³
 
id0
 = 
hubpošts
->
	`In£¹NextPošt
(
hÜizÚ®pošt
[0].
	`g‘X
(), hÜizÚ®pošt[0].
	`g‘Y
(), hÜizÚ®pošt[0].
	`g‘Z
());

174 
vtkIdTy³
 
id1
 = 
hubpošts
->
	`In£¹NextPošt
(
hÜizÚ®pošt
[1].
	`g‘X
(), hÜizÚ®pošt[1].
	`g‘Y
(), hÜizÚ®pošt[1].
	`g‘Z
());

176 
vtkSm¬tPoš‹r
<
vtkLše
> 
medŸlsh“še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

177 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
id0
);

178 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
id1
);

180 
ûÎ¬¿ypošt¦še
->
	`In£¹NextC–l
(
medŸlsh“še
);

183 if(
i
!=
rowNum
-1){

184 
f
 = 0; f < 
¡•
; f++){

185 
v”tiÿÍošt
[0] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
v”tiÿËdg•oštsu
[
f
],
v”tiÿËdg•oštsv
[f],
side
)->
	`g‘X
();

186 
v”tiÿÍošt
[1] = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
v”tiÿËdg•oštsu
[
f
+1],
v”tiÿËdg•oštsv
[f+1],
side
)->
	`g‘X
();

189 
vtkIdTy³
 
id0
 = 
hubpošts
->
	`In£¹NextPošt
(
v”tiÿÍošt
[0].
	`g‘X
(), v”tiÿÍošt[0].
	`g‘Y
(), v”tiÿÍošt[0].
	`g‘Z
());

190 
vtkIdTy³
 
id1
 = 
hubpošts
->
	`In£¹NextPošt
(
v”tiÿÍošt
[1].
	`g‘X
(), v”tiÿÍošt[1].
	`g‘Y
(), v”tiÿÍošt[1].
	`g‘Z
());

192 
vtkSm¬tPoš‹r
<
vtkLše
> 
medŸlsh“še
 = vtkSm¬tPoš‹r<vtkLše>::
	`New
();

193 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(0, 
id0
);

194 
medŸlsh“še
->
	`G‘PoštIds
()->
	`S‘Id
(1, 
id1
);

196 
ûÎ¬¿ypošt¦še
->
	`In£¹NextC–l
(
medŸlsh“še
);

204 
pŞypošt¦še
->
	`S‘Pošts
(
hubpošts
);

205 
pŞypošt¦še
->
	`S‘Lšes
(
ûÎ¬¿ypošt¦še
);

207 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
> 
poššem­³r
 = vtkSm¬tPoš‹r<vtkPŞyD©aM­³r>::
	`New
();

208 
poššem­³r
->
	`S‘IÅut
(
pŞypošt¦še
);

209 
vtkSm¬tPoš‹r
<
vtkAùÜ
> 
lš—ùÜ
 = vtkAùÜ::
	`New
();

210 
lš—ùÜ
->
	`S‘M­³r
(
poššem­³r
);

211 
lš—ùÜ
->
	`G‘Prİ”ty
()->
	`S‘LšeWidth
(1);

212 
lš—ùÜ
->
	`G‘Prİ”ty
()->
	`S‘CŞÜ
(
quadCŞÜ
);

216 
»nd””
->
	`AddAùÜ
(
lš—ùÜ
);

218 
hÜizÚ®edg•oštsu
.
	`ş—r
();

219 
hÜizÚ®edg•oštsv
.
	`ş—r
();

220 
v”tiÿËdg•oštsu
.
	`ş—r
();

221 
v”tiÿËdg•oštsv
.
	`ş—r
();

226 
d–‘e
 
m
;

227 
	}
}

234 
	gvisu®iz©iÚ
::
cÚÃùDŸgnßl
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
){

236 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿ypošt¦še
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
New
();

237 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

239 
	gp0
[3];

240 
	gp1
[3];

241 
	gp2
[3];

242 
	gp3
[3];

244 
	gi
=0; i<
	gquadNum
;i++){

245 
	gj
=0; j<
	gsubQuadPoštsNum
-(
	g¡•
+1);j++){

246 if((
	gj
+1)%(
	g¡•
+1)!=0){

248 
hubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
j
, 
p0
);

249 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
j
+1, 
p1
);

250 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
j
+
¡•
+2, 
p2
);

251 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
j
+
¡•
+1, 
p3
);

254 
VeùÜ3D
 
	gpošt
[4];

255 
	gpošt
[0].
£t
(
p0
[0],p0[1],p0[2]);

256 
	gpošt
[1].
£t
(
p1
[0],p1[1],p1[2]);

257 
	gpošt
[2].
£t
(
p2
[0],p2[1],p2[2]);

258 
	gpošt
[3].
£t
(
p3
[0],p3[1],p3[2]);

261 
boŞ
 
	gp0p2
 = 
toŞs
.
quadA»aMš
(
pošt
);

262 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

263 
vtkIdTy³
 
	gid0
, 
	gid1
;

264 if(
	gp0p2
){

265 
	gid0
 = 
i
*
subQuadPoštsNum
+
j
;

266 
	gid1
 = 
i
*
subQuadPoštsNum
+
j
+
¡•
+2;

269 
	gid0
 = 
i
*
subQuadPoštsNum
+
j
+1;

270 
	gid1
 = 
i
*
subQuadPoštsNum
+
j
+
¡•
+1;

273 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

274 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

276 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

281 
	gpŞypošt¦še
->
S‘Pošts
(
hubpos
);

282 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

284 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

285 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

286 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

287 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

288 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

289 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
this
->
quadCŞÜ
);

290 
	glš—ùÜ
->
RÙ©eY
(
this
->
rY
);

291 
	glš—ùÜ
->
RÙ©eX
(
this
->
rX
);

292 
	glš—ùÜ
->
RÙ©eZ
(
this
->
rZ
);

293 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘O·c™y
(
this
->
İac™y
);

294 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

306 
	gvisu®iz©iÚ
::
d¿wQuads
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
){

308 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
quads
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
New
();

310 
	gi
=0; i<
	gquadNum
;i++){

311 
	gj
=0; j<
	gsubQuadPoštsNum
-(
	g¡•
+1);j++){

312 if((
	gj
+1)%(
	g¡•
+1)!=0){

315 
vtkSm¬tPoš‹r
<
vtkQuad
> 
quad
 = vtkSm¬tPoš‹r<vtkQuad>::
New
();

316 
	gquad
->
G‘PoštIds
()->
S‘Id
(0, 
i
*
subQuadPoštsNum
+
j
);

317 
	gquad
->
G‘PoštIds
()->
S‘Id
(1, 
i
*
subQuadPoštsNum
+
j
+1);

318 
	gquad
->
G‘PoštIds
()->
S‘Id
(2, 
i
*
subQuadPoštsNum
+
j
+
¡•
+2);

319 
	gquad
->
G‘PoštIds
()->
S‘Id
(3, 
i
*
subQuadPoštsNum
+
j
+
¡•
+1);

321 
	gquads
->
In£¹NextC–l
(
quad
);

327 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyd©aQuad
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

330 
	gpŞyd©aQuad
->
S‘Pošts
(
hubpos
);

331 
	gpŞyd©aQuad
->
S‘PŞys
(
quads
);

334 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gquadM­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

335 #ià
VTK_MAJOR_VERSION
 <= 5

336 
	gquadM­³r
->
S‘IÅut
(
pŞyd©aQuad
);

338 
	gquadM­³r
->
S‘IÅutD©a
(
pŞyd©aQuad
);

341 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	gquadAùÜ
 = 
vtkSm¬tPoš‹r
<
vtkAùÜ
>::
New
();

342 
	gquadAùÜ
->
S‘M­³r
(
quadM­³r
);

343 
	gquadAùÜ
->
RÙ©eX
(
rX
);

344 
	gquadAùÜ
->
RÙ©eY
(
rY
);

345 
	gquadAùÜ
->
RÙ©eZ
(
rZ
);

346 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘O·c™y
(
this
->
İac™y
);

348 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

349 
	g»nd””
->
AddAùÜ
(
quadAùÜ
);

359 
	gvisu®iz©iÚ
::
d¿wQuadByIndex
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
quadIndex
){

361 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gquads
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

363 
	gj
=0; j<
	gsubQuadPoštsNum
-(
	g¡•
+1);j++){

364 if((
	gj
+1)%(
	g¡•
+1)!=0){

367 
vtkSm¬tPoš‹r
<
vtkQuad
> 
quad
 = vtkSm¬tPoš‹r<vtkQuad>::
New
();

368 
	gquad
->
G‘PoštIds
()->
S‘Id
(0, 
quadIndex
*
subQuadPoštsNum
+
j
);

369 
	gquad
->
G‘PoštIds
()->
S‘Id
(1, 
quadIndex
*
subQuadPoštsNum
+
j
+1);

370 
	gquad
->
G‘PoštIds
()->
S‘Id
(2, 
quadIndex
*
subQuadPoštsNum
+
j
+
¡•
+2);

371 
	gquad
->
G‘PoštIds
()->
S‘Id
(3, 
quadIndex
*
subQuadPoštsNum
+
j
+
¡•
+1);

373 
	gquads
->
In£¹NextC–l
(
quad
);

378 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyd©aQuad
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

381 
	gpŞyd©aQuad
->
S‘Pošts
(
hubpos
);

382 
	gpŞyd©aQuad
->
S‘PŞys
(
quads
);

385 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gquadM­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

386 #ià
VTK_MAJOR_VERSION
 <= 5

387 
	gquadM­³r
->
S‘IÅut
(
pŞyd©aQuad
);

389 
	gquadM­³r
->
S‘IÅutD©a
(
pŞyd©aQuad
);

392 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	gquadAùÜ
 = 
vtkSm¬tPoš‹r
<
vtkAùÜ
>::
New
();

393 
	gquadAùÜ
->
S‘M­³r
(
quadM­³r
);

395 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

396 
	g»nd””
->
AddAùÜ
(
quadAùÜ
);

404 
	gvisu®iz©iÚ
::
d¿wQuadByIndexAndHubpos
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
quadIndex
){

406 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gquads
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

408 
	gj
=0; j<
	gsubQuadPoštsNum
-(
	g¡•
+1);j++){

409 if((
	gj
+1)%(
	g¡•
+1)!=0){

412 
vtkSm¬tPoš‹r
<
vtkQuad
> 
quad
 = vtkSm¬tPoš‹r<vtkQuad>::
New
();

413 
	gquad
->
G‘PoštIds
()->
S‘Id
(0, 
quadIndex
*
subQuadPoštsNum
+
j
);

414 
	gquad
->
G‘PoštIds
()->
S‘Id
(1, 
quadIndex
*
subQuadPoštsNum
+
j
+1);

415 
	gquad
->
G‘PoštIds
()->
S‘Id
(2, 
quadIndex
*
subQuadPoštsNum
+
j
+
¡•
+2);

416 
	gquad
->
G‘PoštIds
()->
S‘Id
(3, 
quadIndex
*
subQuadPoštsNum
+
j
+
¡•
+1);

418 
	gquads
->
In£¹NextC–l
(
quad
);

423 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyd©aQuad
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

426 
	gpŞyd©aQuad
->
S‘Pošts
(
hubpos
);

427 
	gpŞyd©aQuad
->
S‘PŞys
(
quads
);

430 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gquadM­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

431 #ià
VTK_MAJOR_VERSION
 <= 5

432 
	gquadM­³r
->
S‘IÅut
(
pŞyd©aQuad
);

434 
	gquadM­³r
->
S‘IÅutD©a
(
pŞyd©aQuad
);

437 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	gquadAùÜ
 = 
vtkSm¬tPoš‹r
<
vtkAùÜ
>::
New
();

438 
	gquadAùÜ
->
S‘M­³r
(
quadM­³r
);

439 
	gquadAùÜ
->
RÙ©eX
(
rX
);

440 
	gquadAùÜ
->
RÙ©eY
(
rY
);

441 
	gquadAùÜ
->
RÙ©eZ
(
rZ
);

442 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

443 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘O·c™y
(0.5);

444 
	g»nd””
->
AddAùÜ
(
quadAùÜ
);

452 
	gvisu®iz©iÚ
::
d¿wVŞume
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadIndex
){

455 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

456 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gquads
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

459 
	gn
=0;‚<
	g¡•
;n++){

460 
	gcout
<<"Àis: "<<
	gn
<<
	g’dl
;

462 
	gp
[3];

463 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

465 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
,
p
);

466 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

467 
	gquad
->
G‘PoštIds
()->
S‘Id
(0, 0+4*
n
);

469 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
,
p
);

470 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

471 
	gquad
->
G‘PoštIds
()->
S‘Id
(1, 1+4*
n
);

473 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
+1,
p
);

474 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

475 
	gquad
->
G‘PoštIds
()->
S‘Id
(2, 2+4*
n
);

477 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
+1,
p
);

478 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

479 
	gquad
->
G‘PoštIds
()->
S‘Id
(3, 3+4*
n
);

481 
	gquads
->
In£¹NextC–l
(
quad
);

485 
	gpoštIndex
 = 0;

486 
	gn
=
subQuadPoštsNum
-(
¡•
+1);‚<
	gsubQuadPoštsNum
-1;n++){

487 
	gcout
<<"Àis: "<<
	gn
<<
	g’dl
;

488 
	gp
[3];

489 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

491 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
,
p
);

492 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

493 
	gquad
->
G‘PoštIds
()->
S‘Id
(0, 0+4*(
¡•
+
poštIndex
));

495 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
,
p
);

496 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

497 
	gquad
->
G‘PoštIds
()->
S‘Id
(1, 1+4*(
¡•
+
poštIndex
));

499 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
+1,
p
);

500 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

501 
	gquad
->
G‘PoštIds
()->
S‘Id
(2, 2+4*(
¡•
+
poštIndex
));

503 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
+1,
p
);

504 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

505 
	gquad
->
G‘PoštIds
()->
S‘Id
(3, 3+4*(
¡•
+
poštIndex
));

507 
	gquads
->
In£¹NextC–l
(
quad
);

508 
	gpoštIndex
++;

512 
	gÂ
 =0;

513 
	gpoštIndex
 = 0;…oštIndex<
	g¡•
&&
	gÂ
<
	gsubQuadPoštsNum
-1;pointIndex++){

514 
	gÂ
=
¡•
+(¡•+1)*
poštIndex
;

515 
	gcout
<<"Àis: "<<
	gÂ
<<
	g’dl
;

516 
	gp
[3];

517 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

519 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
,
p
);

520 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

521 
	gquad
->
G‘PoštIds
()->
S‘Id
(0, 0+4*(2*
¡•
+
poštIndex
));

523 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
,
p
);

524 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

525 
	gquad
->
G‘PoštIds
()->
S‘Id
(1, 1+4*(2*
¡•
+
poštIndex
));

527 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
+(
¡•
+1),
p
);

528 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

529 
	gquad
->
G‘PoštIds
()->
S‘Id
(2, 2+4*(2*
¡•
+
poštIndex
));

531 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
+(
¡•
+1),
p
);

532 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

533 
	gquad
->
G‘PoštIds
()->
S‘Id
(3, 3+4*(2*
¡•
+
poštIndex
));

535 
	gquads
->
In£¹NextC–l
(
quad
);

539 
	gÂ
 =0;

540 
	gpoštIndex
 = 0;…oštIndex<
	g¡•
&&
	gÂ
<
	gsubQuadPoštsNum
-(step+1);pointIndex++){

541 
	gÂ
=0+(
¡•
+1)*
poštIndex
;

542 
	gcout
<<"Àis: "<<
	gÂ
<<
	g’dl
;

543 
	gp
[3];

544 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

546 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
,
p
);

547 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

548 
	gquad
->
G‘PoštIds
()->
S‘Id
(0, 0+4*(3*
¡•
+
poštIndex
));

550 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
,
p
);

551 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

552 
	gquad
->
G‘PoštIds
()->
S‘Id
(1, 1+4*(3*
¡•
+
poštIndex
));

554 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
+(
¡•
+1),
p
);

555 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

556 
	gquad
->
G‘PoštIds
()->
S‘Id
(2, 2+4*(3*
¡•
+
poštIndex
));

558 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
Â
+(
¡•
+1),
p
);

559 
	ghubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

560 
	gquad
->
G‘PoštIds
()->
S‘Id
(3, 3+4*(3*
¡•
+
poštIndex
));

562 
	gquads
->
In£¹NextC–l
(
quad
);

566 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyd©aQuad
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

569 
	gpŞyd©aQuad
->
S‘Pošts
(
hubpos
);

570 
	gpŞyd©aQuad
->
S‘PŞys
(
quads
);

573 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gquadM­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

574 #ià
VTK_MAJOR_VERSION
 <= 5

575 
	gquadM­³r
->
S‘IÅut
(
pŞyd©aQuad
);

577 
	gquadM­³r
->
S‘IÅutD©a
(
pŞyd©aQuad
);

580 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	gquadAùÜ
 = 
vtkSm¬tPoš‹r
<
vtkAùÜ
>::
New
();

581 
	gquadAùÜ
->
S‘M­³r
(
quadM­³r
);

582 
	gquadAùÜ
->
RÙ©eX
(
rX
);

583 
	gquadAùÜ
->
RÙ©eY
(
rY
);

584 
	gquadAùÜ
->
RÙ©eZ
(
rZ
);

585 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

586 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘O·c™y
(0.5);

587 
	g»nd””
->
AddAùÜ
(
quadAùÜ
);

591 
d¿wQuadByIndexAndHubpos
(
bound¬yHubpos
, 
quadIndex
);

594 
d¿wQuadByIndexAndHubpos
(
sk–‘®Hubpos
, 
quadIndex
);

602 
	gvisu®iz©iÚ
::
d¿wSubQuadVŞume
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadIndex
,

603 
subQuadIndex
){

605 
	gm
 = 
subQuadIndex
 % 
¡•
;

608 
	gn
 = (
subQuadIndex
-
m
)/
¡•
;

610 
	gpšdex
 = 
n
*(
¡•
+1è+ 
m
;

612 
	gp
[3];

615 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

616 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gquads
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

619 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
,
p
);

620 
vtkIdTy³
 
	gid1_b
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

622 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
,
p
);

623 
vtkIdTy³
 
	gid1_s
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

625 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
 + 
¡•
+1,
p
);

626 
vtkIdTy³
 
	gid2_b
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

628 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
 + 
¡•
+1,
p
);

629 
vtkIdTy³
 
	gid2_s
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

631 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
+1,
p
);

632 
vtkIdTy³
 
	gid3_b
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

634 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
+1,
p
);

635 
vtkIdTy³
 
	gid3_s
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

637 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
+1 + 
¡•
+1,
p
);

638 
vtkIdTy³
 
	gid4_b
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

640 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
pšdex
+1 + 
¡•
+1,
p
);

641 
vtkIdTy³
 
	gid4_s
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

645 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad_Ëá
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

646 
	gquad_Ëá
->
G‘PoštIds
()->
S‘Id
(0, 
id1_b
);

647 
	gquad_Ëá
->
G‘PoštIds
()->
S‘Id
(1, 
id1_s
);

648 
	gquad_Ëá
->
G‘PoštIds
()->
S‘Id
(2, 
id3_s
);

649 
	gquad_Ëá
->
G‘PoštIds
()->
S‘Id
(3, 
id3_b
);

651 
	gquads
->
In£¹NextC–l
(
quad_Ëá
);

655 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad_right
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

656 
	gquad_right
->
G‘PoštIds
()->
S‘Id
(0, 
id2_b
);

657 
	gquad_right
->
G‘PoštIds
()->
S‘Id
(1, 
id2_s
);

658 
	gquad_right
->
G‘PoštIds
()->
S‘Id
(2, 
id4_s
);

659 
	gquad_right
->
G‘PoštIds
()->
S‘Id
(3, 
id4_b
);

661 
	gquads
->
In£¹NextC–l
(
quad_right
);

665 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad_tİ
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

666 
	gquad_tİ
->
G‘PoštIds
()->
S‘Id
(0, 
id2_b
);

667 
	gquad_tİ
->
G‘PoštIds
()->
S‘Id
(1, 
id2_s
);

668 
	gquad_tİ
->
G‘PoštIds
()->
S‘Id
(2, 
id1_s
);

669 
	gquad_tİ
->
G‘PoštIds
()->
S‘Id
(3, 
id1_b
);

671 
	gquads
->
In£¹NextC–l
(
quad_tİ
);

675 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gquad_bÙtom
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

676 
	gquad_bÙtom
->
G‘PoštIds
()->
S‘Id
(0, 
id4_b
);

677 
	gquad_bÙtom
->
G‘PoštIds
()->
S‘Id
(1, 
id4_s
);

678 
	gquad_bÙtom
->
G‘PoštIds
()->
S‘Id
(2, 
id3_s
);

679 
	gquad_bÙtom
->
G‘PoštIds
()->
S‘Id
(3, 
id3_b
);

681 
	gquads
->
In£¹NextC–l
(
quad_bÙtom
);

685 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gtİ
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

686 
	gtİ
->
G‘PoštIds
()->
S‘Id
(0, 
id4_b
);

687 
	gtİ
->
G‘PoštIds
()->
S‘Id
(1, 
id2_b
);

688 
	gtİ
->
G‘PoštIds
()->
S‘Id
(2, 
id1_b
);

689 
	gtİ
->
G‘PoštIds
()->
S‘Id
(3, 
id3_b
);

691 
	gquads
->
In£¹NextC–l
(
tİ
);

695 
	gvtkSm¬tPoš‹r
<
	gvtkQuad
> 
	gbÙtom
 = 
vtkSm¬tPoš‹r
<
vtkQuad
>::
New
();

696 
	gbÙtom
->
G‘PoštIds
()->
S‘Id
(0, 
id4_s
);

697 
	gbÙtom
->
G‘PoštIds
()->
S‘Id
(1, 
id2_s
);

698 
	gbÙtom
->
G‘PoštIds
()->
S‘Id
(2, 
id1_s
);

699 
	gbÙtom
->
G‘PoštIds
()->
S‘Id
(3, 
id3_s
);

701 
	gquads
->
In£¹NextC–l
(
bÙtom
);

705 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyd©aQuad
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

708 
	gpŞyd©aQuad
->
S‘Pošts
(
hubpos
);

709 
	gpŞyd©aQuad
->
S‘PŞys
(
quads
);

712 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gquadM­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

713 #ià
VTK_MAJOR_VERSION
 <= 5

714 
	gquadM­³r
->
S‘IÅut
(
pŞyd©aQuad
);

716 
	gquadM­³r
->
S‘IÅutD©a
(
pŞyd©aQuad
);

719 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	gquadAùÜ
 = 
vtkSm¬tPoš‹r
<
vtkAùÜ
>::
New
();

720 
	gquadAùÜ
->
S‘M­³r
(
quadM­³r
);

721 
	gquadAùÜ
->
RÙ©eX
(
rX
);

722 
	gquadAùÜ
->
RÙ©eY
(
rY
);

723 
	gquadAùÜ
->
RÙ©eZ
(
rZ
);

724 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

725 
	gquadAùÜ
->
G‘Prİ”ty
()->
S‘O·c™y
(0.5);

726 
	g»nd””
->
AddAùÜ
(
quadAùÜ
);

734 
	gvisu®iz©iÚ
::
d¿wEdgeOfQuads_m‘hod2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
){

736 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿ypošt¦še
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
New
();

737 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

739 
	gi
=0; i<
	gquadNum
;i++){

741 
	gk
=0; k<
	g¡•
;k++){

742 
	gp
[3];

743 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

745 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
k
,
p
);

746 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

748 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
k
+1,
p
);

749 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

751 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

752 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

754 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

758 
	gk
=
subQuadPoštsNum
-(
¡•
+1); k<
	gsubQuadPoštsNum
-1;k++){

759 
	gp
[3];

760 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

762 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
k
,
p
);

763 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

765 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
k
+1,
p
);

766 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

768 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

769 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

771 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

775 
	gpoštIndex
 =0;

776 
	gk
 = 0; k<
	g¡•
&&
	gpoštIndex
<
	gsubQuadPoštsNum
-1;k++){

777 
	gpoštIndex
 = 
¡•
 + 
k
*(step+1);

778 
	gp
[3];

779 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

781 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
poštIndex
,
p
);

782 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

784 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
poštIndex
+
¡•
+1,
p
);

785 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

787 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

788 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

790 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

794 
	gpoštIndex
 =0;

795 
	gk
 = 0; k<
	g¡•
&&
	gpoštIndex
<
	gsubQuadPoštsNum
-1;k++){

796 
	gpoštIndex
 = 0 + 
k
*(
¡•
+1);

797 
	gp
[3];

798 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

800 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
poštIndex
,
p
);

801 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

803 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
poštIndex
+
¡•
+1,
p
);

804 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

806 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

807 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

809 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

813 
	gpŞypošt¦še
->
S‘Pošts
(
hubpos
);

814 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

816 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

817 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

818 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

819 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

820 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

821 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

822 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

832 
	gvisu®iz©iÚ
::
d¿wF¿meOfQuads
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
){

834 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿ypošt¦še
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
New
();

835 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

837 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubPosNewSequ’û
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

840 
	gi
=0; i<
	gquadNum
;i++){

843 
	gn
=0;‚<
	g¡•
+1;n++){

844 
	gpoštIndex
 =0;

845 
	gk
 = 0; k<
	g¡•
&&
	gpoštIndex
<
	gsubQuadPoštsNum
-1;k++){

846 
	gpoštIndex
 = 
n
 + 
k
*(
¡•
+1);

847 
	gp
[3];

848 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

850 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
poštIndex
,
p
);

851 
vtkIdTy³
 
	gid0
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

854 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
poštIndex
+
¡•
+1,
p
);

855 
vtkIdTy³
 
	gid1
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

858 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

859 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

861 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

866 
	gn
=0;‚<
	g¡•
+1;n++){

867 
	gk
 = 0; k<
	g¡•
;k++){

868 
	gcu¼’ošt
 = 
k
 + 
n
*(
¡•
+1);

869 
	gp
[3];

870 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

872 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
cu¼’ošt
,
p
);

873 
vtkIdTy³
 
	gid0
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

875 
	ghubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
cu¼’ošt
+1,
p
);

876 
vtkIdTy³
 
	gid1
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

878 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

879 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

881 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

886 
	gpŞypošt¦še
->
S‘Pošts
(
hubPosNewSequ’û
);

887 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

889 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

890 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

891 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

892 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

893 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

894 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
this
->
quadCŞÜ
);

895 
	glš—ùÜ
->
RÙ©eX
(
rX
);

896 
	glš—ùÜ
->
RÙ©eY
(
rY
);

897 
	glš—ùÜ
->
RÙ©eZ
(
rZ
);

898 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘O·c™y
(
this
->
İac™y
);

899 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

909 
	gvisu®iz©iÚ
::
d¿wF¿meOfQuadByIndex
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
quadIndex
){

911 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

912 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

914 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubPosNewSequ’û
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

917 
	gn
=0;‚<
	g¡•
+1;n++){

918 
	gpoštIndex
 =0;

919 
	gk
 = 0; k<
	g¡•
&&
	gpoštIndex
<
	gsubQuadPoštsNum
-1;k++){

920 
	gpoštIndex
 = 
n
 + 
k
*(
¡•
+1);

921 
	gp
[3];

922 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

924 
	ghubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
poštIndex
,
p
);

925 
vtkIdTy³
 
	gid0
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

926 
	gcout
<<"----v”tiÿÈlšes-----p1: "<<
	gp
[0]<<" "<<p[1]<<" "<<p[2]<<
	g’dl
;

928 
	ghubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
poštIndex
+
¡•
+1,
p
);

929 
vtkIdTy³
 
	gid1
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

930 
	gcout
<<"----v”tiÿÈlšes-----p2: "<<
	gp
[0]<<" "<<p[1]<<" "<<p[2]<<
	g’dl
;

932 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

933 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

935 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

940 
	gn
=0;‚<
	g¡•
+1;n++){

941 
	gk
 = 0; k<
	g¡•
;k++){

942 
	gcu¼’ošt
 = 
k
 + 
n
*(
¡•
+1);

943 
	gp
[3];

944 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

946 
	ghubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
cu¼’ošt
,
p
);

947 
vtkIdTy³
 
	gid0
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

948 
	gcout
<<"----hÜizÚ®†šes-----p1: "<<
	gp
[0]<<" "<<p[1]<<" "<<p[2]<<
	g’dl
;

950 
	ghubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
cu¼’ošt
+1,
p
);

951 
vtkIdTy³
 
	gid1
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

952 
	gcout
<<"----hÜizÚ®†šes-----p1: "<<
	gp
[0]<<" "<<p[1]<<" "<<p[2]<<
	g’dl
;

954 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

955 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

957 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

961 
	gpŞypošt¦še
->
S‘Pošts
(
hubPosNewSequ’û
);

962 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

964 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

965 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

966 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

967 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

968 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

969 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

970 
	glš—ùÜ
->
RÙ©eX
(
rX
);

971 
	glš—ùÜ
->
RÙ©eY
(
rY
);

972 
	glš—ùÜ
->
RÙ©eZ
(
rZ
);

974 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

984 
	gvisu®iz©iÚ
::
d¿wSpoke
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadIndex
){

986 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

987 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

988 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

990 
	gn
=0;‚<
	gsubQuadPoštsNum
;n++){

991 
	gp
[3];

992 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

994 
	gsk–‘®Hubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
,
p
);

995 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

997 
	gbound¬yHubpos
->
G‘Pošt
(
quadIndex
*
subQuadPoštsNum
+
n
,
p
);

998 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1000 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

1001 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

1003 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

1006 
	gpŞypošt¦še
->
S‘Pošts
(
hubpos
);

1007 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

1009 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

1010 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

1011 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

1012 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

1013 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(2);

1014 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

1015 
	glš—ùÜ
->
RÙ©eX
(
rX
);

1016 
	glš—ùÜ
->
RÙ©eY
(
rY
);

1017 
	glš—ùÜ
->
RÙ©eZ
(
rZ
);

1019 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

1028 
	gvisu®iz©iÚ
::
d¿wSpoke_2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadNums
,

1029 
lšew™h
, 
boŞ
 
show¥ok‘a
){

1031 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

1032 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

1033 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

1035 
	gi
 = 0; i < 
	gquadNums
; i++){

1036 
	gn
=0;‚<
	gsubQuadPoštsNum
;n++){

1037 
	gp
[3];

1038 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1040 
	gsk–‘®Hubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
n
,
p
);

1041 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1043 
	gbound¬yHubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
n
,
p
);

1044 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1046 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

1047 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

1049 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

1053 
	gpŞypošt¦še
->
S‘Pošts
(
hubpos
);

1054 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

1105 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

1106 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

1107 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

1108 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

1109 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(
lšew™h
);

1110 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

1111 
	glš—ùÜ
->
RÙ©eX
(
rX
);

1112 
	glš—ùÜ
->
RÙ©eY
(
rY
);

1113 
	glš—ùÜ
->
RÙ©eZ
(
rZ
);

1116 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

1120 if(
	gshow¥ok‘a
) {

1121 
showPoštB®l
(
sk–‘®Hubpos
, 
quadCŞÜ
, 0.0016, 
this
->
»nd””
,his->
rX
,his->
rY
,his->
rZ
,his->
İac™y
);

1126 
	gvisu®iz©iÚ
::
showPoštB®l
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts
, * 
cŞÜ
, 
poštSize
, vtkSm¬tPoš‹r<
vtkR’d””
> 
»nd””
,

1127 
rX
, 
rY
, 
rZ
, 
İac™y
){

1129 
	gp
[3] = {0.0, 0.0, 0.0};

1131 
	gi
 = 0; i < 
	gpošts
->
G‘Numb”OfPošts
(); i++){

1132 
	gpošts
->
G‘Pošt
(
i
, 
p
);

1135 
	gvtkSm¬tPoš‹r
<
	gvtkSph”eSourû
> 
	g¥h”eSourû
 = 
vtkSm¬tPoš‹r
<
vtkSph”eSourû
>::
New
();

1136 
	g¥h”eSourû
->
S‘C’‹r
(
p
[0],…[1],…[2]);

1137 
	g¥h”eSourû
->
S‘Radius
(
poštSize
);

1139 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gm­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

1140 
	gm­³r
->
S‘IÅutCÚÃùiÚ
(
¥h”eSourû
->
G‘OuutPÜt
());

1142 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	gaùÜ
 = 
vtkSm¬tPoš‹r
<
vtkAùÜ
>::
New
();

1143 
	gaùÜ
->
S‘M­³r
(
m­³r
);

1144 
	gaùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
cŞÜ
);

1145 
	gaùÜ
->
RÙ©eX
(
rX
);

1146 
	gaùÜ
->
RÙ©eY
(
rY
);

1147 
	gaùÜ
->
RÙ©eZ
(
rZ
);

1148 
	gaùÜ
->
G‘Prİ”ty
()->
S‘O·c™y
(
İac™y
);

1149 
	g»nd””
->
AddAùÜ
(
aùÜ
);

1163 
	gvisu®iz©iÚ
::
d¿wSpoke_3
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadNums
){

1165 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubpos
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

1166 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

1167 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	glš•Şyd©a
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

1169 
	glšeNum
 = 0;

1170 
	gi
 = 0; i < 
	gquadNums
; i++){

1171 
	gn
=0;‚<
	gsubQuadPoštsNum
;n++){

1172 
	gp
[3];

1173 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1175 
	gsk–‘®Hubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
n
,
p
);

1176 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1178 
	gbound¬yHubpos
->
G‘Pošt
(
i
*
subQuadPoštsNum
+
n
,
p
);

1179 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1181 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

1182 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

1184 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

1185 
	glšeNum
++;

1188 
	gcout
<<"-----lšeNum: "<<
	glšeNum
<<
	g’dl
;

1190 
	glš•Şyd©a
->
S‘Pošts
(
hubpos
);

1191 
	glš•Şyd©a
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

1193 
	gcout
<<"----lšnumb”s---"<<
	glš•Şyd©a
->
G‘Numb”OfPošts
()<<
	g’dl
;

1196 
	gvtkSm¬tPoš‹r
<
	gvtkLookupTabË
> 
	glut
 = 
vtkSm¬tPoš‹r
<
vtkLookupTabË
>::
New
();

1197 
	gbËSize
 = 39;

1198 
	glut
->
S‘Numb”OfTabËV®ues
(
bËSize
);

1199 
	glut
->
Bud
();

1202 
	glut
->
S‘TabËV®ue
(0 , 0 , 0 , 0, 1);

1203 
	glut
->
S‘TabËV®ue
(1, 0.8900, 0.8100, 0.3400, 1);

1204 
	glut
->
S‘TabËV®ue
(2, 1.0000, 0.3882, 0.2784, 1);

1205 
	glut
->
S‘TabËV®ue
(3, 0.9608, 0.8706, 0.7020, 1);

1206 
	glut
->
S‘TabËV®ue
(4, 0.9020, 0.9020, 0.9804, 1);

1207 
	glut
->
S‘TabËV®ue
(5, 1.0000, 0.4900, 0.2500, 1);

1208 
	glut
->
S‘TabËV®ue
(6, 0.5300, 0.1500, 0.3400, 1);

1209 
	glut
->
S‘TabËV®ue
(7, 0.9804, 0.5020, 0.4471, 1);

1210 
	glut
->
S‘TabËV®ue
(8, 0.7400, 0.9900, 0.7900, 1);

1211 
	glut
->
S‘TabËV®ue
(9, 0.2000, 0.6300, 0.7900, 1);

1212 
	glut
->
S‘TabËV®ue
(10 , 0 , 0 , 0, 1);

1213 
	glut
->
S‘TabËV®ue
(11, 0.8900, 0.8100, 0.3400, 1);

1214 
	glut
->
S‘TabËV®ue
(12, 1.0000, 0.3882, 0.2784, 1);

1215 
	glut
->
S‘TabËV®ue
(13, 0.9608, 0.8706, 0.7020, 1);

1216 
	glut
->
S‘TabËV®ue
(14, 0.9020, 0.9020, 0.9804, 1);

1217 
	glut
->
S‘TabËV®ue
(15, 1.0000, 0.4900, 0.2500, 1);

1218 
	glut
->
S‘TabËV®ue
(16, 0.5300, 0.1500, 0.3400, 1);

1219 
	glut
->
S‘TabËV®ue
(17, 0.9804, 0.5020, 0.4471, 1);

1220 
	glut
->
S‘TabËV®ue
(18, 0.7400, 0.9900, 0.7900, 1);

1221 
	glut
->
S‘TabËV®ue
(19, 0.2000, 0.6300, 0.7900, 1);

1222 
	glut
->
S‘TabËV®ue
(20 , 0 , 0 , 0, 1);

1223 
	glut
->
S‘TabËV®ue
(21, 0.8900, 0.8100, 0.3400, 1);

1224 
	glut
->
S‘TabËV®ue
(22, 1.0000, 0.3882, 0.2784, 1);

1225 
	glut
->
S‘TabËV®ue
(23, 0.9608, 0.8706, 0.7020, 1);

1226 
	glut
->
S‘TabËV®ue
(24, 0.9020, 0.9020, 0.9804, 1);

1227 
	glut
->
S‘TabËV®ue
(25, 1.0000, 0.4900, 0.2500, 1);

1228 
	glut
->
S‘TabËV®ue
(26, 0.5300, 0.1500, 0.3400, 1);

1229 
	glut
->
S‘TabËV®ue
(27, 0.9804, 0.5020, 0.4471, 1);

1230 
	glut
->
S‘TabËV®ue
(28, 0.7400, 0.9900, 0.7900, 1);

1231 
	glut
->
S‘TabËV®ue
(29, 0.2000, 0.6300, 0.7900, 1);

1232 
	glut
->
S‘TabËV®ue
(30 , 0 , 0 , 0, 1);

1233 
	glut
->
S‘TabËV®ue
(31, 0.8900, 0.8100, 0.3400, 1);

1234 
	glut
->
S‘TabËV®ue
(32, 1.0000, 0.3882, 0.2784, 1);

1235 
	glut
->
S‘TabËV®ue
(33, 0.9608, 0.8706, 0.7020, 1);

1236 
	glut
->
S‘TabËV®ue
(34, 0.9020, 0.9020, 0.9804, 1);

1237 
	glut
->
S‘TabËV®ue
(35, 1.0000, 0.4900, 0.2500, 1);

1238 
	glut
->
S‘TabËV®ue
(36, 0.5300, 0.1500, 0.3400, 1);

1239 
	glut
->
S‘TabËV®ue
(37, 0.9804, 0.5020, 0.4471, 1);

1240 
	glut
->
S‘TabËV®ue
(38, 0.7400, 0.9900, 0.7900, 1);

1247 
	gvtkSm¬tPoš‹r
<
	gvtkUnsigÃdCh¬A¼ay
> 
	gcŞÜs
 = 
vtkSm¬tPoš‹r
<
vtkUnsigÃdCh¬A¼ay
>::
New
();

1248 
	gcŞÜs
->
S‘Numb”OfCompÚ’ts
(3);

1249 
	gcŞÜs
->
S‘Name
("Colors");

1252 
	gi
 = 1; i < 
	gbËSize
; i++) {

1253 
	grgb
[3];

1254 
	glut
->
G‘CŞÜ
(
¡©ic_ÿ¡
<>(
i
)/(
bËSize
-1), 
rgb
);

1256 
	guügb
[3];

1257 
	gj
 = 0; j < 3; j++) {

1258 
	guügb
[
j
] = 
¡©ic_ÿ¡
<>(255.0 * 
rgb
[j]);

1261 
	gcŞÜs
->
In£¹NextTu¶e3
(
uügb
[0], ucrgb[1], ucrgb[2]);

1272 
	glš•Şyd©a
->
G‘C–lD©a
()->
S‘SÿÏrs
(
cŞÜs
);

1274 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

1275 #ià
VTK_MAJOR_VERSION
 <= 5

1276 
	gpoššem­³r
->
S‘IÅut
(
lš•Şyd©a
);

1278 
	gpoššem­³r
->
S‘IÅutD©a
(
lš•Şyd©a
);

1283 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

1284 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

1285 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(4);

1287 
	glš—ùÜ
->
RÙ©eX
(
rX
);

1288 
	glš—ùÜ
->
RÙ©eY
(
rY
);

1289 
	glš—ùÜ
->
RÙ©eZ
(
rZ
);

1296 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

1303 
	gvisu®iz©iÚ
::
	$MakeLUT
(
size_t
 cÚ¡ & 
bËSize
, 
vtkLookupTabË
 *
lut
) {

1361 
	}
}

1370 
	gvisu®iz©iÚ
::
	$d¿wPoštsOfTheUVCoÜdš©e
(
VeùÜQuadPošt
 
quadpošts_u
, VeùÜQuadPošˆ
quadpošts_v
){

1372 
quadNums
 = 
quadpošts_u
.
	`size
();

1373 
poštNums
 = 
quadpošts_u
[0].
	`size
();

1375 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
v”tiûs
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
	`New
();

1377 
vtkSm¬tPoš‹r
<
vtkPošts
> 
pošts
 = vtkSm¬tPoš‹r<vtkPošts>::
	`New
();

1378 
quad
=0; quad<
quadNums
; quad++){

1379 
poštNum
=0;…oštNum<
poštNums
;…ointNum++){

1381 
vtkIdTy³
 
pid
[1];

1382 
pid
[0] = 
pošts
->
	`In£¹NextPošt
(
quadpošts_u
[
quad
][
poštNum
], 
quadpošts_v
[quad][pointNum], 0);

1384 
v”tiûs
->
	`In£¹NextC–l
(1,
pid
);

1389 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
> 
pošt
 = vtkSm¬tPoš‹r<vtkPŞyD©a>::
	`New
();

1392 
pošt
->
	`S‘Pošts
(
pošts
);

1393 
pošt
->
	`S‘V”ts
(
v”tiûs
);

1396 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
> 
m­³r
 = vtkSm¬tPoš‹r<vtkPŞyD©aM­³r>::
	`New
();

1397 #ià
VTK_MAJOR_VERSION
 <= 5

1398 
m­³r
->
	`S‘IÅut
(
pošt
);

1400 
m­³r
->
	`S‘IÅutD©a
(
pošt
);

1403 
vtkSm¬tPoš‹r
<
vtkAùÜ
> 
pošùÜ
 = vtkSm¬tPoš‹r<vtkAùÜ>::
	`New
();

1404 
pošùÜ
->
	`S‘M­³r
(
m­³r
);

1405 
pošùÜ
->
	`G‘Prİ”ty
()->
	`S‘PoštSize
(5);

1406 
pošùÜ
->
	`G‘Prİ”ty
()->
	`S‘CŞÜ
(
quadCŞÜ
);

1407 
pošùÜ
->
	`RÙ©eZ
(100);

1408 
pošùÜ
->
	`RÙ©eX
(-115);

1409 
»nd””
->
	`AddAùÜ
(
pošùÜ
);

1410 
	}
}

1414 
	gvisu®iz©iÚ
::
	$Ëngthoãdges
(
VeùÜ3D
 
pošt
[2]){

1415 
x0
 = 
pošt
[0].
	`g‘X
();

1416 
y0
 = 
pošt
[0].
	`g‘Y
();

1417 
z0
 = 
pošt
[0].
	`g‘Z
();

1420 
x1
 = 
pošt
[1].
	`g‘X
();

1421 
y1
 = 
pošt
[1].
	`g‘Y
();

1422 
z1
 = 
pošt
[1].
	`g‘Z
();

1425 
di¡ªû
 = 
	`sq¹
(
	`pow
(
x1
-
x0
, 2è+…ow(
y1
-
y0
, 2è+…ow(
z1
-
z0
, 2));

1429  
di¡ªû
;

1430 
	}
}

1435 
	gvisu®iz©iÚ
::
d¿wEdgeOfQuads_m‘hod3
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
){

1437 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
> 
ûÎ¬¿ypošt¦še
 = vtkSm¬tPoš‹r<vtkC–lA¼ay>::
New
();

1438 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

1440 
	gp
[3];

1442 
VeùÜ3D
 
	gpošt
[2];

1443 
	gveùÜ
<> 
	ghÜizÚ®edges
;

1446 
	gm
=0; m<
	gquadNum
;m++){

1447 
	gcout
<<"H"<<
	gm
+1<< " sublšpo¡iÚ is:"<<
	g’dl
;

1448 
	gsumOfSubLšes
 = 0;

1450 
	gn
=0;‚<
	g¡•
;n++){

1451 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1452 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+
n
,
p
);

1453 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1454 
	gpošt
[0].
£tX
(
p
[0]);

1455 
	gpošt
[0].
£tY
(
p
[1]);

1456 
	gpošt
[0].
£tZ
(
p
[2]);

1458 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+
n
+1,
p
);

1459 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1460 
	gpošt
[1].
£tX
(
p
[0]);

1461 
	gpošt
[1].
£tY
(
p
[1]);

1462 
	gpošt
[1].
£tZ
(
p
[2]);

1464 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

1465 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

1467 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

1469 
	gsumOfSubLšes
 +ğ
Ëngthoãdges
(
pošt
);

1471 
	ghÜizÚ®edges
.
push_back
(
sumOfSubLšes
);

1475 
	gm
=0; m<
	gquadNum
;m++){

1476 
	gsumOfSubLšes
 = 0;

1477 if((
	gm
+1)%(
	gcŞNum
-1)==0){

1478 
cout
<<"H"<<
quadNum
+(
m
+1)/(
cŞNum
-1)<< " sublšpos™iÚ is:"<<
’dl
;

1479 
	gn
=
subQuadPoštsNum
-(
¡•
+1);‚<
	gsubQuadPoštsNum
-1;n++){

1480 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1481 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+
n
,
p
);

1482 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1483 
	gpošt
[0].
£tX
(
p
[0]);

1484 
	gpošt
[0].
£tY
(
p
[1]);

1485 
	gpošt
[0].
£tZ
(
p
[2]);

1487 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+
n
+1,
p
);

1488 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1489 
	gpošt
[1].
£tX
(
p
[0]);

1490 
	gpošt
[1].
£tY
(
p
[1]);

1491 
	gpošt
[1].
£tZ
(
p
[2]);

1493 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

1494 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

1496 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

1497 
	gsumOfSubLšes
 +ğ
Ëngthoãdges
(
pošt
);

1499 
	ghÜizÚ®edges
.
push_back
(
sumOfSubLšes
);

1504 
	go
 =0; o<
	ghÜizÚ®edges
.
size
();o++){

1505 
	gcout
<<"------------------lšËngth is: "<<
	ghÜizÚ®edges
[
o
]<< " ";

1507 
	gcout
<<
	g’dl
;

1511 
	gm
=0; m<
	gquadNum
;m++){

1512 
	gk
 = 0; k<
	g¡•
;k++){

1513 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1514 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+0+
k
*(
¡•
+1),
p
);

1515 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1517 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+(
k
+1)*(
¡•
+1),
p
);

1518 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1520 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

1521 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

1523 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

1528 
	gm
=
quadNum
-(
cŞNum
-1); m<
	gquadNum
;m++){

1529 
	gk
 = 0; k<
	g¡•
;k++){

1530 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1531 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+
¡•
 + 
k
*(¡•+1),
p
);

1532 
vtkIdTy³
 
	gid0
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1534 
	ghubpos
->
G‘Pošt
(
m
*
subQuadPoštsNum
+
¡•
 + (
k
+1)*(¡•+1),
p
);

1535 
vtkIdTy³
 
	gid1
 = 
hubpos
->
In£¹NextPošt
(
p
[0],p[1],p[2]);

1537 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

1538 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

1540 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

1544 
	gpŞypošt¦še
->
S‘Pošts
(
hubpos
);

1545 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

1547 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

1548 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

1549 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

1550 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

1551 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

1552 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

1556 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

1561 
	gvisu®iz©iÚ
::
£tR’d””
(
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
){

1562 
this
->
»nd””
 =„enderer;

1572 
	gvisu®iz©iÚ
::
	$g‘SubQuadsUVCoÜdš©eUsšgD–UV
(){

1574 
quadIndex
 = 0;

1576 
M3DQuadPrim™ive
* 
´im0
;

1577 
veùÜ
<> 
subquadpošt_v
, 
subquadpošt_u
;

1579 
i
 = 0; i < 
rowNum
 -1; i++){

1580 
j
 = 0; j < 
cŞNum
 -1; j++){

1581 
quadpošts_u
.
	`push_back
(
	`VeùÜDoubËPošts
());

1582 
quadpošts_v
.
	`push_back
(
	`VeùÜDoubËPošts
());

1585 
d–u
[4], 
d–v
[4];

1587 
side
){

1591 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
));

1592 
d–u
[0] = 
´im0
->
	`g‘D–U0
();

1593 
d–v
[0] = 
´im0
->
	`g‘D–V0
();

1596 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
+1, 
j
));

1597 
d–u
[1] = 
´im0
->
	`g‘D–U0
();

1598 
d–v
[1] = 
´im0
->
	`g‘D–V0
();

1601 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
+1, 
j
+1));

1602 
d–u
[2] = 
´im0
->
	`g‘D–U0
();

1603 
d–v
[2] = 
´im0
->
	`g‘D–V0
();

1606 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
+1));

1607 
d–u
[3] = 
´im0
->
	`g‘D–U0
();

1608 
d–v
[3] = 
´im0
->
	`g‘D–V0
();

1614 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
));

1615 
d–u
[0] = 
´im0
->
	`g‘D–U1
();

1616 
d–v
[0] = 
´im0
->
	`g‘D–V1
();

1619 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
+1, 
j
));

1620 
d–u
[1] = 
´im0
->
	`g‘D–U1
();

1621 
d–v
[1] = 
´im0
->
	`g‘D–V1
();

1624 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
+1, 
j
+1));

1625 
d–u
[2] = 
´im0
->
	`g‘D–U1
();

1626 
d–v
[2] = 
´im0
->
	`g‘D–V1
();

1629 
´im0
ğ
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
curQuadFig
->
	`g‘Prim™ivePŒ
(
i
, 
j
+1));

1630 
d–u
[3] = 
´im0
->
	`g‘D–U1
();

1631 
d–v
[3] = 
´im0
->
	`g‘D–V1
();

1639 
quadpoštsu
[4], 
quadpoštsv
[4];

1641 
quadpoštsu
[0] = 
i
 + 
d–u
[0];

1642 
quadpoštsv
[0] = 
j
 + 
d–v
[0];

1644 
quadpoštsu
[1] = 
i
 + 1 + 
d–u
[1];

1645 
quadpoštsv
[1] = 
j
 + 
d–v
[1];

1647 
quadpoštsu
[2] = 
i
 + 1 + 
d–u
[2];

1648 
quadpoštsv
[2] = 
j
 + 1 + 
d–v
[2];

1650 
quadpoštsu
[3] = 
i
 + 
d–u
[3];

1651 
quadpoštsv
[3] = 
j
 + 1 + 
d–v
[3];

1655 
subquadpošt_u
 = 
toŞs
.
	`¥l™Quad
(
quadpoštsu
[0],quadpoštsu[1],quadpoštsu[2],quadpoštsu[3],
¡•
);

1658 
subquadpošt_v
 = 
toŞs
.
	`¥l™Quad
(
quadpoštsv
[0],quadpoštsv[1],quadpoštsv[2],quadpoštsv[3],
¡•
);

1660 
m
 =0; m<
subquadpošt_u
.
	`size
();m++){

1661 
quadpošts_u
[
quadIndex
].
	`push_back
(
subquadpošt_u
[
m
]);

1662 
quadpošts_v
[
quadIndex
].
	`push_back
(
subquadpošt_v
[
m
]);

1667 
quadIndex
++;

1669 
subquadpošt_v
.
	`ş—r
();

1670 
subquadpošt_u
.
	`ş—r
();

1673 
	}
}

1684 
	gvisu®iz©iÚ
::
	$g‘SubQuadsUVCoÜdš©eNÙUsšgD–UV
(){

1686 
quadIndex
 = 0;

1688 
veùÜ
<> 
subquadpošt_v
, 
subquadpošt_u
;

1690 
i
 = 0; i < 
rowNum
 -1; i++){

1691 
j
 = 0; j < 
cŞNum
 -1; j++){

1692 
quadpošts_u
.
	`push_back
(
	`VeùÜDoubËPošts
());

1693 
quadpošts_v
.
	`push_back
(
	`VeùÜDoubËPošts
());

1696 
quadpoštsu
[4], 
quadpoštsv
[4];

1698 
quadpoštsu
[0] = 
i
;

1699 
quadpoštsv
[0] = 
j
;

1701 
quadpoštsu
[1] = 
i
 + 1;

1702 
quadpoštsv
[1] = 
j
;

1704 
quadpoštsu
[2] = 
i
 + 1;

1705 
quadpoštsv
[2] = 
j
 + 1;

1707 
quadpoštsu
[3] = 
i
;

1708 
quadpoštsv
[3] = 
j
 + 1;

1712 
subquadpošt_u
 = 
toŞs
.
	`¥l™Quad
(
quadpoštsu
[0],quadpoštsu[1],quadpoštsu[2],quadpoštsu[3], 
¡•
);

1715 
subquadpošt_v
 = 
toŞs
.
	`¥l™Quad
(
quadpoštsv
[0],quadpoštsv[1],quadpoštsv[2],quadpoštsv[3], 
¡•
);

1717 
m
 =0; m<
subquadpošt_u
.
	`size
();m++){

1718 
quadpošts_u
[
quadIndex
].
	`push_back
(
subquadpošt_u
[
m
]);

1719 
quadpošts_v
[
quadIndex
].
	`push_back
(
subquadpošt_v
[
m
]);

1725 
quadIndex
++;

1727 
subquadpošt_v
.
	`ş—r
();

1728 
subquadpošt_u
.
	`ş—r
();

1731 
	}
}

1741 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	gvisu®iz©iÚ
::
	$g‘SubQuadsPos™iÚ
(
quadty³
){

1743 
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
 = vtkSm¬tPoš‹r< vtkPošt >::
	`New
();

1745 
M3DQuadIÁ”pŞ©”
 *
m
 = 
Ãw
 
	`M3DQuadIÁ”pŞ©”
(
curQuadFig
);

1748 
VeùÜ3D
 
pošt
;

1750 
i
 =0; i<
quadNum
; i++){

1752 
j
 =0; j<
subQuadPoštsNum
;j++){

1754 
quadty³
){

1758 
pošt
 = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
quadpošts_u
[
i
][
j
],
quadpošts_v
[i][j],
side
)->
	`g‘B
();

1761 
hubpos
->
	`In£¹NextPošt
(
pošt
.
	`g‘X
(),pošt.
	`g‘Y
(),pošt.
	`g‘Z
());

1766 
pošt
 = 
m
->
	`š‹½Ş©eQuadSpoke
(
curQuadFig
,
quadpošts_u
[
i
][
j
],
quadpošts_v
[i][j],
side
)->
	`g‘X
();

1768 
hubpos
->
	`In£¹NextPošt
(
pošt
.
	`g‘X
(),pošt.
	`g‘Y
(),pošt.
	`g‘Z
());

1776 
d–‘e
 
m
;

1778  
hubpos
;

1779 
	}
}

1784 
	gvisu®iz©iÚ
::
	$£tCŞÜ
(*
quadCŞÜ
){

1785 
this
->
quadCŞÜ
 = quadColor;

1786 
	}
}

1792 
	gvisu®iz©iÚ
::
visu®iz©iÚ
(
M3DQuadFigu»
* 
quadfig
, 
š‹½Ş©iÚLev–
, 
side
, 
boŞ
 
moved
, *
quadCŞÜ
,

1793 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
, 
rX
, 
rY
, 
rZ
, 
İac™y
){

1794 
	gthis
->
	gcurQuadFig
 = 
quadfig
;

1795 
	gthis
->
	growNum
 = 
quadfig
->
g‘RowCouÁ
();

1796 
	gthis
->
	gcŞNum
 = 
quadfig
->
g‘CŞumnCouÁ
();

1797 
	gthis
->
	gquadNum
 = (
rowNum
-1)*(
cŞNum
-1);

1798 
	gthis
->
	gš‹½Ş©iÚLev–
 = 
š‹½Ş©iÚLev–
;

1799 
	gthis
->
	gside
 = 
side
;

1800 
	gthis
->
	g¡•
 = 
pow
(()2, ()
š‹½Ş©iÚLev–
);

1801 
	gthis
->
	gsubQuadPoštsNum
 = (
¡•
+1)*(step+1);

1804 if(
	gmoved
){

1805 
g‘SubQuadsUVCoÜdš©eNÙUsšgD–UV
();

1808 
g‘SubQuadsUVCoÜdš©eUsšgD–UV
();

1811 
	gthis
->
	gquadCŞÜ
 = 
quadCŞÜ
;

1812 
	gthis
->
	g»nd””
 = 
»nd””
;

1814 
	gthis
->
	grX
 = 
rX
;

1815 
	gthis
->
	grY
 = 
rY
;

1816 
	gthis
->
	grZ
 = 
rZ
;

1817 
	gthis
->
	gİac™y
 = 
İac™y
;

1824 
	gvisu®iz©iÚ
::
visu®iz©iÚ
(
M3DQuadFigu»
* 
quadfig
, 
š‹½Ş©iÚLev–
, 
side
, *
quadCŞÜ
,

1825 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
, 
rX
, 
rY
, 
rZ
, 
İac™y
){

1826 
	gthis
->
	gcurQuadFig
 = 
quadfig
;

1827 
	gthis
->
	growNum
 = 
quadfig
->
g‘RowCouÁ
();

1828 
	gthis
->
	gcŞNum
 = 
quadfig
->
g‘CŞumnCouÁ
();

1829 
	gthis
->
	gquadNum
 = (
rowNum
-1)*(
cŞNum
-1);

1830 
	gthis
->
	gš‹½Ş©iÚLev–
 = 
š‹½Ş©iÚLev–
;

1831 
	gthis
->
	gside
 = 
side
;

1832 
	gthis
->
	g¡•
 = 
pow
(()2, ()
š‹½Ş©iÚLev–
);

1833 
	gthis
->
	gsubQuadPoštsNum
 = (
¡•
+1)*(step+1);

1835 
	gthis
->
	grX
 = 
rX
;

1836 
	gthis
->
	grY
 = 
rY
;

1837 
	gthis
->
	grZ
 = 
rZ
;

1838 
	gthis
->
	gİac™y
 = 
İac™y
;

1840 
M3DQuadPrim™ive
* 
	g´im
;

1841 
M3DQuadEndPrim™ive
* 
	g’dPrim
;

1842 
VeùÜ3D
 
	gup_b_mid_pošt
, 
	gdown_b_mid_pošt
, 
	gup_b_üe¡_pošt
, 
	gdown_b_üe¡_pošt
, 
	güe¡_b_pošt
;

1845 
	gu
 =0; u<
	gthis
->
	growNum
; u++){

1846 
	gv
 =0; v<
	gthis
->
	gcŞNum
; v++){

1847 
	g´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
(
u
,
v
));

1849 
	gup_b_mid_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R0
()*´im->
g‘U0
();

1850 
	gthis
->
	gup_b_pošts
.
push_back
(
up_b_mid_pošt
);

1853 
	gdown_b_mid_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R1
()*´im->
g‘U1
();

1854 
	gthis
->
	gdown_b_pošts
.
push_back
(
down_b_mid_pošt
);

1859 
	gv
 =0; v<
	gthis
->
	gcŞNum
; v++){

1861 
	g´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
(0,
v
));

1862 
	gup_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R0
()*´im->
g‘U0
();

1863 
	gthis
->
	gup_b_üe¡_pošts
.
push_back
(
up_b_üe¡_pošt
);

1866 
	gdown_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R1
()*´im->
g‘U1
();

1867 
	gthis
->
	gdown_b_üe¡_pošts
.
push_back
(
down_b_üe¡_pošt
);

1870 
	g’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
(0, 
v
));

1871 
	güe¡_b_pošt
 = 
’dPrim
->
g‘X
(è+ƒndPrim->
g‘REnd
()*’dPrim->
g‘UEnd
();

1872 
	gthis
->
	güe¡_b_pošts
.
push_back
(
üe¡_b_pošt
);

1874 
	gu
 =1; u<
	gthis
->
	growNum
; u++){

1876 
	g´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
(
u
,his->
cŞNum
 - 1));

1877 
	gup_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R0
()*´im->
g‘U0
();

1878 
	gthis
->
	gup_b_üe¡_pošts
.
push_back
(
up_b_üe¡_pošt
);

1881 
	gdown_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R1
()*´im->
g‘U1
();

1882 
	gthis
->
	gdown_b_üe¡_pošts
.
push_back
(
down_b_üe¡_pošt
);

1885 
	g’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
(
u
,his->
cŞNum
 - 1));

1886 
	güe¡_b_pošt
 = 
’dPrim
->
g‘X
(è+ƒndPrim->
g‘REnd
()*’dPrim->
g‘UEnd
();

1887 
	gthis
->
	güe¡_b_pošts
.
push_back
(
üe¡_b_pošt
);

1889 
	gv
 =
this
->
cŞNum
-2; v>0; v--){

1891 
	g´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
Ñhis->
rowNum
-1, 
v
));

1892 
	gup_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R0
()*´im->
g‘U0
();

1893 
	gthis
->
	gup_b_üe¡_pošts
.
push_back
(
up_b_üe¡_pošt
);

1896 
	gdown_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R1
()*´im->
g‘U1
();

1897 
	gthis
->
	gdown_b_üe¡_pošts
.
push_back
(
down_b_üe¡_pošt
);

1900 
	g’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
Ñhis->
rowNum
-1, 
v
));

1901 
	güe¡_b_pošt
 = 
’dPrim
->
g‘X
(è+ƒndPrim->
g‘REnd
()*’dPrim->
g‘UEnd
();

1902 
	gthis
->
	güe¡_b_pošts
.
push_back
(
üe¡_b_pošt
);

1904 
	gu
 =
this
->
rowNum
-1; u>0; u--){

1906 
	g´im
 = 
dyÇmic_ÿ¡
<
M3DQuadPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
(
u
, 0));

1907 
	gup_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R0
()*´im->
g‘U0
();

1908 
	gthis
->
	gup_b_üe¡_pošts
.
push_back
(
up_b_üe¡_pošt
);

1911 
	gdown_b_üe¡_pošt
 = 
´im
->
g‘X
(è+…rim->
g‘R1
()*´im->
g‘U1
();

1912 
	gthis
->
	gdown_b_üe¡_pošts
.
push_back
(
down_b_üe¡_pošt
);

1915 
	g’dPrim
 = 
dyÇmic_ÿ¡
<
M3DQuadEndPrim™ive
*>(
this
->
curQuadFig
->
g‘Prim™ivePŒ
(
u
, 0));

1916 
	güe¡_b_pošt
 = 
’dPrim
->
g‘X
(è+ƒndPrim->
g‘REnd
()*’dPrim->
g‘UEnd
();

1917 
	gthis
->
	güe¡_b_pošts
.
push_back
(
üe¡_b_pošt
);

1920 
	gthis
->
	gquadCŞÜ
 = 
quadCŞÜ
;

1921 
	gthis
->
	g»nd””
 = 
»nd””
;

1932 
	gvisu®iz©iÚ
::
d¿wCurveAlÚgDisü—tPošts
(
veùÜ
<
VeùÜ3D
> 
pošts
, *
quadCŞÜ
){

1933 
	gvtkSm¬tPoš‹r
<
	gvtkPošts
> 
	gpoštsüe¡¥okes
 = 
vtkSm¬tPoš‹r
<
vtkPošts
>::
New
();

1934 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ylšes
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

1935 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyüe¡¥okes
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

1937 
	gn
 = 
pošts
.
size
();

1939 
	gi
 = 0; i < 
	gn
-1; i++){

1940 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	glše
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1941 
	glše
->
G‘PoštIds
()->
S‘Id
(0, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[
i
].
g‘X
(),pošts[i].
g‘Y
(),pošts[i].
g‘Z
()));

1942 
	glše
->
G‘PoštIds
()->
S‘Id
(1, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[
i
+1].
g‘X
(),pošts[i+1].
g‘Y
(),pošts[i+1].
g‘Z
()));

1943 
	gûÎ¬¿ylšes
->
In£¹NextC–l
(
lše
);

1947 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	glše
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

1948 
	glše
->
G‘PoštIds
()->
S‘Id
(0, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[0].
g‘X
(),pošts[0].
g‘Y
(),pošts[0].
g‘Z
()));

1949 
	glše
->
G‘PoštIds
()->
S‘Id
(1, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[
n
-1].
g‘X
(),pošts[n-1].
g‘Y
(),pošts[n-1].
g‘Z
()));

1950 
	gûÎ¬¿ylšes
->
In£¹NextC–l
(
lše
);

1953 
	gpŞyüe¡¥okes
->
S‘Pošts
(
poštsüe¡¥okes
);

1954 
	gpŞyüe¡¥okes
->
S‘Lšes
(
ûÎ¬¿ylšes
);

1956 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	güe¡¥okesm­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

1957 
	güe¡¥okesm­³r
->
S‘IÅut
(
pŞyüe¡¥okes
);

1958 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	g¥oke§ùÜ
 = 
vtkAùÜ
::
New
();

1959 
	g¥oke§ùÜ
->
S‘M­³r
(
üe¡¥okesm­³r
);

1960 
	g¥oke§ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

1961 
	g¥oke§ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

1962 
	g¥oke§ùÜ
->
RÙ©eZ
(90);

1963 
	g¥oke§ùÜ
->
RÙ©eX
(-115);

1964 
	g»nd””
->
AddAùÜ
(
¥oke§ùÜ
);

1972 
	gvisu®iz©iÚ
::
	$d¿wC»¡
(
boŞ
 
up
, boŞ 
down
, boŞ 
medŸl
){

1974 
quadCŞÜ
[3] = {1,0.5,0};

1975 if(
medŸl
)

1976 
	`d¿wCurveAlÚgDisü—tPošts
(
this
->
üe¡_b_pošts
, 
quadCŞÜ
);

1977 if(
up
){

1978 
quadCŞÜ
[0] = 1;

1979 
quadCŞÜ
[1] = 0;

1980 
quadCŞÜ
[2] = 0;

1981 
	`d¿wCurveAlÚgDisü—tPošts
(
this
->
up_b_üe¡_pošts
, 
quadCŞÜ
);

1984 if(
down
){

1985 
quadCŞÜ
[0] = 0;

1986 
quadCŞÜ
[1] = 1;

1987 
quadCŞÜ
[2] = 0;

1988 
	`d¿wCurveAlÚgDisü—tPošts
(
this
->
down_b_üe¡_pošts
, 
quadCŞÜ
);

1990 
	}
}

1999 
	gvisu®iz©iÚ
::
cÚÃùC»¡CÜ»¥Úd’ûLšes
(
veùÜ
<
VeùÜ3D
> 
pošts_A
, veùÜ<VeùÜ3D> 
pošts_a
){

2000 
	gvtkSm¬tPoš‹r
<
	gvtkPošts
> 
	gpoštsüe¡¥okes
 = 
vtkSm¬tPoš‹r
<
vtkPošts
>::
New
();

2001 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ylšes
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

2002 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyüe¡¥okes
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

2005 
	gi
 = 0; i < 
	gpošts_A
.
size
(); i++){

2006 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	glše
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

2007 
	glše
->
G‘PoštIds
()->
S‘Id
(0, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts_A
[
i
].
g‘X
(),pošts_A[i].
g‘Y
(),pošts_A[i].
g‘Z
()));

2008 
	glše
->
G‘PoštIds
()->
S‘Id
(1, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts_a
[
i
].
g‘X
(),pošts_a[i].
g‘Y
(),pošts_a[i].
g‘Z
()));

2009 
	gûÎ¬¿ylšes
->
In£¹NextC–l
(
lše
);

2012 
	gpŞyüe¡¥okes
->
S‘Pošts
(
poštsüe¡¥okes
);

2013 
	gpŞyüe¡¥okes
->
S‘Lšes
(
ûÎ¬¿ylšes
);

2015 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	güe¡¥okesm­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

2016 
	güe¡¥okesm­³r
->
S‘IÅut
(
pŞyüe¡¥okes
);

2017 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	g¥oke§ùÜ
 = 
vtkAùÜ
::
New
();

2018 
	g¥oke§ùÜ
->
S‘M­³r
(
üe¡¥okesm­³r
);

2019 
	g¥oke§ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

2020 
	g¥oke§ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

2021 
	g¥oke§ùÜ
->
RÙ©eZ
(90);

2022 
	g¥oke§ùÜ
->
RÙ©eX
(-115);

2023 
	g»nd””
->
AddAùÜ
(
¥oke§ùÜ
);

2032 
	gvisu®iz©iÚ
::
	$d¿wC»¡CÜ»¥Úd’ûLšes
(
boŞ
 
üe¡_up
, boŞ 
üe¡_down
){

2033 
boŞ
 
c_up
 = 
çl£
;

2034 
boŞ
 
c_down
 = 
çl£
;

2036 
c_up
 = 
üe¡_up
;

2037 
c_down
 = 
üe¡_down
;

2040 if(
c_up
){

2041 
this
->
quadCŞÜ
[0]=0.8;his->quadColor[1]=0.5;his->quadColor[2]=0.5;

2042 
	`cÚÃùC»¡CÜ»¥Úd’ûLšes
(
this
->
üe¡_b_pošts
,his->
up_b_üe¡_pošts
);

2044 if(
c_down
){

2045 
this
->
quadCŞÜ
[0]=0;his->quadColor[1]=0.5;his->quadColor[2]=0.5;

2046 
	`cÚÃùC»¡CÜ»¥Úd’ûLšes
(
this
->
üe¡_b_pošts
,his->
down_b_üe¡_pošts
);

2048 
	}
}

2057 
	gvisu®iz©iÚ
::
cÚÃùIÁ”iÜToC»¡Lšes
(
veùÜ
<
VeùÜ3D
> 
pošts
){

2058 
vtkSm¬tPoš‹r
<
vtkPošts
> 
poštsüe¡¥okes
 = vtkSm¬tPoš‹r<vtkPošts>::
New
();

2059 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ylšes
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

2060 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞyüe¡¥okes
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

2064 
	growNum
 = (
this
->
rowNum
-1)*Ñhis->
¡•
-1) +his->rowNum;

2065 
	gcŞNum
 = (
this
->
cŞNum
-1)*Ñhis->
¡•
-1) +his->colNum;

2069 
	gm
=0; m<
	growNum
; m++){

2070 
	gi
 =0; i<
	gcŞNum
-1; i++){

2071 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	glše
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

2072 
	glše
->
G‘PoštIds
()->
S‘Id
(0, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[
m
*
cŞNum
+
i
].
g‘X
(),pošts[m*cŞNum+i].
g‘Y
(),pošts[m*cŞNum+i].
g‘Z
()));

2073 
	glše
->
G‘PoštIds
()->
S‘Id
(1, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[
m
*
cŞNum
+
i
+1].
g‘X
(),pošts[m*cŞNum+i+1].
g‘Y
(),pošts[m*cŞNum+i+1].
g‘Z
()));

2074 
	gûÎ¬¿ylšes
->
In£¹NextC–l
(
lše
);

2078 
	gm
 =0; m<
	growNum
-1; m++){

2079 
	gn
=0;‚<
	gcŞNum
;n++){

2080 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	glše
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

2081 
	glše
->
G‘PoštIds
()->
S‘Id
(0, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[
m
*
cŞNum
+
n
].
g‘X
(),pošts[m*cŞNum+n].
g‘Y
(),pošts[m*cŞNum+n].
g‘Z
()));

2082 
	glše
->
G‘PoštIds
()->
S‘Id
(1, 
poštsüe¡¥okes
->
In£¹NextPošt
(
pošts
[
m
*
cŞNum
+
n
+cŞNum].
g‘X
(),pošts[m*cŞNum+n+cŞNum].
g‘Y
(),pošts[m*cŞNum+n+cŞNum].
g‘Z
()));

2083 
	gûÎ¬¿ylšes
->
In£¹NextC–l
(
lše
);

2087 
	gpŞyüe¡¥okes
->
S‘Pošts
(
poštsüe¡¥okes
);

2088 
	gpŞyüe¡¥okes
->
S‘Lšes
(
ûÎ¬¿ylšes
);

2090 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	güe¡¥okesm­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

2091 
	güe¡¥okesm­³r
->
S‘IÅut
(
pŞyüe¡¥okes
);

2092 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	g¥oke§ùÜ
 = 
vtkAùÜ
::
New
();

2093 
	g¥oke§ùÜ
->
S‘M­³r
(
üe¡¥okesm­³r
);

2094 
	g¥oke§ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

2095 
	g¥oke§ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

2096 
	g¥oke§ùÜ
->
RÙ©eZ
(90);

2097 
	g¥oke§ùÜ
->
RÙ©eX
(-115);

2098 
	g»nd””
->
AddAùÜ
(
¥oke§ùÜ
);

2107 
	gvisu®iz©iÚ
::
	$d¿wUpOrDownBound¬yQuadLše_m‘hod1
(
boŞ
 
up
, boŞ 
down
){

2108 if(
up
){

2109 
	`cÚÃùIÁ”iÜToC»¡Lšes
(
this
->
up_b_pošts
);

2111 if(
down
){

2112 
	`cÚÃùIÁ”iÜToC»¡Lšes
(
this
->
down_b_pošts
);

2115 
	}
}

2123 
	gvisu®iz©iÚ
::
	$g‘AÎSubQuadsV”‹xesOnBound¬y
(){

2125 
quadIndex
 = 0;

2127 
veùÜ
<> 
subquadpošt_v
, 
subquadpošt_u
;

2128 
VeùÜQuadPošt
 
quadpošts_u
;

2129 
VeùÜQuadPošt
 
quadpošts_v
;

2132 
i
 = 0; i < 
this
->
rowNum
 -1; i++){

2133 
j
 = 0; j < 
this
->
cŞNum
 -1; j++){

2134 
quadpošts_u
.
	`push_back
(
	`VeùÜDoubËPošts
());

2135 
quadpošts_v
.
	`push_back
(
	`VeùÜDoubËPošts
());

2138 
quadpoštsu
[4], 
quadpoštsv
[4];

2140 
quadpoštsu
[0] = 
i
;

2141 
quadpoštsv
[0] = 
j
;

2143 
quadpoštsu
[1] = 
i
 + 1;

2144 
quadpoštsv
[1] = 
j
;

2146 
quadpoštsu
[2] = 
i
 + 1;

2147 
quadpoštsv
[2] = 
j
 + 1;

2149 
quadpoštsu
[3] = 
i
;

2150 
quadpoštsv
[3] = 
j
 + 1;

2154 
subquadpošt_u
 = 
toŞs
.
	`¥l™Quad
(
quadpoštsu
[0],quadpoštsu[1],quadpoštsu[2],quadpoštsu[3], 
this
->
¡•
);

2157 
subquadpošt_v
 = 
toŞs
.
	`¥l™Quad
(
quadpoštsv
[0],quadpoštsv[1],quadpoštsv[2],quadpoštsv[3], 
this
->
¡•
);

2159 
m
 =0; m<
subquadpošt_u
.
	`size
();m++){

2160 
quadpošts_u
[
quadIndex
].
	`push_back
(
subquadpošt_u
[
m
]);

2161 
quadpošts_v
[
quadIndex
].
	`push_back
(
subquadpošt_v
[
m
]);

2167 
quadIndex
++;

2169 
subquadpošt_v
.
	`ş—r
();

2170 
subquadpošt_u
.
	`ş—r
();

2174 
M3DQuadIÁ”pŞ©”
 *
m
 = 
Ãw
 
	`M3DQuadIÁ”pŞ©”
(
this
->
curQuadFig
);

2177 
VeùÜ3D
 
pošt
;

2179 
i
 =0; i< 
this
->
quadNum
; i++){

2180 
j
 =0; j< 
this
->
subQuadPoštsNum
; j++){

2182 
pošt
 = 
m
->
	`š‹½Ş©eQuadSpoke
(
this
->
curQuadFig
,
quadpošts_u
[
i
][
j
],
quadpošts_v
[i][j],0)->
	`g‘B
();

2184 
this
->
up_BP
.
	`push_back
(
pošt
);

2187 
pošt
 = 
m
->
	`š‹½Ş©eQuadSpoke
(
this
->
curQuadFig
,
quadpošts_u
[
i
][
j
],
quadpošts_v
[i][j],1)->
	`g‘B
();

2188 
this
->
down_BP
.
	`push_back
(
pošt
);

2192 
d–‘e
 
m
;

2193 
	}
}

2202 
	gvisu®iz©iÚ
::
d¿wF¿meOfQuadByIndex_m2
(
veùÜ
<
VeùÜ3D
> 
pošts
, 
quadIndex
){

2204 
	gvtkSm¬tPoš‹r
<
	gvtkC–lA¼ay
> 
	gûÎ¬¿ypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkC–lA¼ay
>::
New
();

2205 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©a
> 
	gpŞypošt¦še
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©a
>::
New
();

2206 
	gvtkSm¬tPoš‹r
< 
	gvtkPošts
 > 
	ghubPosNewSequ’û
 = 
vtkSm¬tPoš‹r
< 
vtkPošts
 >::
New
();

2207 
VeùÜ3D
 
	gp
;

2210 
	gn
=0;‚<
	g¡•
+1;n++){

2211 
	gpoštIndex
 =0;

2212 
	gk
 = 0; k<
	g¡•
&&
	gpoštIndex
<
	gsubQuadPoštsNum
-1;k++){

2213 
	gpoštIndex
 = 
n
 + 
k
*(
¡•
+1);

2214 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

2216 
	gp
 = 
pošts
[
quadIndex
*
subQuadPoštsNum
+
poštIndex
];

2217 
vtkIdTy³
 
	gid0
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
.
g‘X
(),….
g‘Y
(),….
g‘Z
());

2219 
	gp
 = 
pošts
[
quadIndex
*
subQuadPoštsNum
+
poštIndex
+
¡•
+1];

2220 
vtkIdTy³
 
	gid1
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
.
g‘X
(),….
g‘Y
(),….
g‘Z
());

2222 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

2223 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

2225 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

2230 
	gn
=0;‚<
	g¡•
+1;n++){

2231 
	gk
 = 0; k<
	g¡•
;k++){

2232 
	gcu¼’ošt
 = 
k
 + 
n
*(
¡•
+1);

2233 
	gvtkSm¬tPoš‹r
<
	gvtkLše
> 
	gmedŸlsh“še
 = 
vtkSm¬tPoš‹r
<
vtkLše
>::
New
();

2235 
	gp
 = 
pošts
[
quadIndex
*
subQuadPoštsNum
+
cu¼’ošt
];

2236 
vtkIdTy³
 
	gid0
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
.
g‘X
(),….
g‘Y
(),….
g‘Z
());

2238 
	gp
 = 
pošts
[
quadIndex
*
subQuadPoštsNum
+
cu¼’ošt
+1];

2239 
vtkIdTy³
 
	gid1
 = 
hubPosNewSequ’û
->
In£¹NextPošt
(
p
.
g‘X
(),….
g‘Y
(),….
g‘Z
());

2241 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(0, 
id0
);

2242 
	gmedŸlsh“še
->
G‘PoštIds
()->
S‘Id
(1, 
id1
);

2244 
	gûÎ¬¿ypošt¦še
->
In£¹NextC–l
(
medŸlsh“še
);

2248 
	gpŞypošt¦še
->
S‘Pošts
(
hubPosNewSequ’û
);

2249 
	gpŞypošt¦še
->
S‘Lšes
(
ûÎ¬¿ypošt¦še
);

2251 
	gvtkSm¬tPoš‹r
<
	gvtkPŞyD©aM­³r
> 
	gpoššem­³r
 = 
vtkSm¬tPoš‹r
<
vtkPŞyD©aM­³r
>::
New
();

2252 
	gpoššem­³r
->
S‘IÅut
(
pŞypošt¦še
);

2253 
	gvtkSm¬tPoš‹r
<
	gvtkAùÜ
> 
	glš—ùÜ
 = 
vtkAùÜ
::
New
();

2254 
	glš—ùÜ
->
S‘M­³r
(
poššem­³r
);

2255 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘LšeWidth
(1);

2256 
	glš—ùÜ
->
G‘Prİ”ty
()->
S‘CŞÜ
(
quadCŞÜ
);

2257 
	glš—ùÜ
->
RÙ©eY
(95);

2258 
	glš—ùÜ
->
RÙ©eX
(30);

2260 
	g»nd””
->
AddAùÜ
(
lš—ùÜ
);

2273 
	gvisu®iz©iÚ
::
	$d¿wUpOrDownBound¬yQuadLše_m‘hod2
(
boŞ
 
up
, 
šdex1
, boŞ 
down
, 
šdex2
){

2274 if(
up
){

2275 if(
šdex1
>=0&&šdex1<
this
->
quadNum
)

2276 
	`d¿wF¿meOfQuadByIndex_m2
(
this
->
up_BP
, 
šdex1
);

2278 
i
=0; i<
this
->
quadNum
; i++){

2279 
	`d¿wF¿meOfQuadByIndex_m2
(
this
->
up_BP
, 
i
);

2283 if(
down
){

2284 if(
šdex2
>=0&&šdex2<
this
->
quadNum
)

2285 
	`d¿wF¿meOfQuadByIndex_m2
(
this
->
down_BP
, 
šdex2
);

2287 
i
=0; i<
this
->
quadNum
; i++){

2288 
	`d¿wF¿meOfQuadByIndex_m2
(
this
->
down_BP
, 
i
);

2292 
	}
}

	@visualization.h

1 #iâdeà
VISUALIZATION_H


2 
	#VISUALIZATION_H


	)

4 
	~<io¡»am
>

6 
	~<vtkSm¬tPoš‹r.h
>

8 
	~<vtkC–lA¼ay.h
>

9 
	~<vtkQuad.h
>

10 
	~<vtkLše.h
>

12 
	~<vtkPŞyD©aM­³r.h
>

13 
	~<vtkAùÜ.h
>

14 
	~<vtkPrİ”ty.h
>

16 
	~<vtkR’d””.h
>

17 
	~<vtkR’d”WšdowIÁ”aùÜ.h
>

18 
	~<vtkR’d”Wšdow.h
>

20 
	~<vtkV”siÚ.h
>

21 
	~<vtkPošts.h
>

22 
	~<vtkPŞyD©a.h
>

23 
	~<vtkPoštD©a.h
>

24 
	~<vtkUnsigÃdCh¬A¼ay.h
>

25 
	~<vtkV”‹xGlyphF‹r.h
>

26 
	~<vtkLookupTabË.h
>

29 
	~<vtkC–lD©a.h
>

30 
	~<vtkDoubËA¼ay.h
>

32 
	~<vtkSph”eSourû.h
>

37 
	~"VeùÜ3D.h
"

39 
	~"toŞsfunc.h
"

43 şas 
	cvisu®iz©iÚ


45 
	mpublic
:

46 
visu®iz©iÚ
();

50 
visu®iz©iÚ
(
M3DQuadFigu»
* 
quadfig
, 
š‹½Ş©iÚLev–
, 
side
, 
boŞ
 
moved
, *
quadCŞÜ
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
,

51 
rX
, 
rY
, 
rZ
, 
İac™y
);

53 
visu®iz©iÚ
(
M3DQuadFigu»
* 
quadfig
, 
š‹½Ş©iÚLev–
, 
side
, *
quadCŞÜ
, 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
,

54 
rX
, 
rY
, 
rZ
, 
İac™y
);

56 
d¿wEdgeOfQuads
(
boŞ
 
moved
);

59 
d¿wQuads
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
);

60 
d¿wQuadByIndex
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
quadIndex
);

61 
d¿wQuadByIndexAndHubpos
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
quadIndex
);

62 
d¿wVŞume
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadIndex
);

64 
d¿wEdgeOfQuads_m‘hod2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
);

65 
d¿wF¿meOfQuads
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
);

66 
d¿wF¿meOfQuadByIndex
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
, 
quadIndex
);

67 
d¿wSpoke
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadIndex
);

68 
d¿wPoštsOfTheUVCoÜdš©e
(
VeùÜQuadPošt
 
quadpošts_u
, VeùÜQuadPošˆ
quadpošts_v
);

70 
d¿wEdgeOfQuads_m‘hod3
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
);

72 
£tCŞÜ
(*
quadCŞÜ
);

73 
£tR’d””
(
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
);

76 
	mvtkSm¬tPoš‹r
< 
	mvtkPošts
 > 
g‘SubQuadsPos™iÚ
(
quadty³
);

77 
g‘SubQuadsUVCoÜdš©eUsšgD–UV
();

78 
g‘SubQuadsUVCoÜdš©eNÙUsšgD–UV
();

80 
Ëngthoãdges
(
VeùÜ3D
 
pošt
[2]);

84 
d¿wCurveAlÚgDisü—tPošts
(
veùÜ
<
VeùÜ3D
> 
pošts
, *
quadCŞÜ
);

86 
d¿wC»¡
(
boŞ
 
up
, boŞ 
down
, boŞ 
medŸl
);

87 
cÚÃùC»¡CÜ»¥Úd’ûLšes
(
veùÜ
<
VeùÜ3D
> 
pošts_A
, veùÜ<VeùÜ3D> 
pošts_a
);

88 
d¿wC»¡CÜ»¥Úd’ûLšes
(
boŞ
 
üe¡_up
, boŞ 
üe¡_down
);

89 
cÚÃùIÁ”iÜToC»¡Lšes
(
veùÜ
<
VeùÜ3D
> 
pošts
);

90 
d¿wUpOrDownBound¬yQuadLše_m‘hod1
(
boŞ
 
up
, boŞ 
down
);

91 
g‘AÎSubQuadsV”‹xesOnBound¬y
();

92 
d¿wF¿meOfQuadByIndex_m2
(
veùÜ
<
VeùÜ3D
> 
pošts
, 
quadIndex
);

93 
d¿wUpOrDownBound¬yQuadLše_m‘hod2
(
boŞ
 
up
, 
šdex1
, boŞ 
down
, 
šdex2
);

96 
cÚÃùDŸgnßl
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
hubpos
);

98 
d¿wSubQuadVŞume
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadIndex
,

99 
subQuadIndex
);

101 
d¿wSpoke_2
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadNums
, 
lšew™h
,

102 
boŞ
 
show¥ok‘a
);

103 
d¿wSpoke_3
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
bound¬yHubpos
, vtkSm¬tPoš‹r< vtkPošt > 
sk–‘®Hubpos
, 
quadNums
);

104 
showPoštB®l
(
vtkSm¬tPoš‹r
< 
vtkPošts
 > 
pošts
, * 
cŞÜ
, 
poštSize
, vtkSm¬tPoš‹r<
vtkR’d””
> 
»nd””
,

105 
rX
, 
rY
, 
rZ
, 
İac™y
);

107 
MakeLUT
(
size_t
 cÚ¡ & 
bËSize
, 
vtkLookupTabË
 *
lut
);

109 
	m´iv©e
:

110 
vtkSm¬tPoš‹r
<
vtkR’d””
> 
»nd””
;

111 *
	mquadCŞÜ
;

113 
	mquadty³
;

114 
	mside
;

115 
	mš‹½Ş©iÚLev–
;

116 
	mrowNum
;

117 
	mcŞNum
;

118 
	mquadNum
;

119 
	msubQuadPoštsNum
;

120 
	m¡•
;

122 
M3DQuadFigu»
* 
	mcurQuadFig
;

123 
toŞsfunc
 
	mtoŞs
;

125 
VeùÜQuadPošt
 
	mquadpošts_u
;

126 
VeùÜQuadPošt
 
	mquadpošts_v
;

128 
	mvtkSm¬tPoš‹r
< 
	mvtkPošts
 > 
	mhubPos™iÚ_b
;

129 
	mvtkSm¬tPoš‹r
< 
	mvtkPošts
 > 
	mhubPos™iÚ_s
;

132 
	mveùÜ
<
	mVeùÜ3D
> 
	müe¡_b_pošts
;

133 
	mveùÜ
<
	mVeùÜ3D
> 
	mup_b_üe¡_pošts
;

134 
	mveùÜ
<
	mVeùÜ3D
> 
	mdown_b_üe¡_pošts
;

135 
	mveùÜ
<
	mVeùÜ3D
> 
	mup_b_pošts
;

136 
	mveùÜ
<
	mVeùÜ3D
> 
	mdown_b_pošts
;

139 
	mveùÜ
<
	mVeùÜ3D
> 
	mup_BP
;

140 
	mveùÜ
<
	mVeùÜ3D
> 
	mdown_BP
;

142 
	mrX
;

143 
	mrY
;

144 
	mrZ
;

145 
	mİac™y
;

	@weightedprocrustes.cpp

15 
	~"weigh‹d´oüu¡es.h
"

19 
usšg
 
Çme¥aû
 
	g¡d
;

22 
	gweigh‹d´oüu¡es
::
	$weigh‹d´oüu¡es
()

24 
	}
}

27 
weigh‹d´oüu¡es
::
	$weigh‹d´oüu¡es
(
boŞ
 
»®Weight
)

29 
this
->
»®Weight
 =„ealWeight;

30 
	}
}

40 
	gveùÜ
<
	gM©rixTy³
> 
	gweigh‹d´oüu¡es
::
weigh‹dGPA
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
X
, 
VeùÜPošts
 
W
){

42 
	gveùÜ
<
	gM©rixTy³
> 
	gŒªsfÜmed_X
;

45 
	gveùÜ
<> 
	g¤•A»as
;

46 
PoštTy³
 
	gpošt
;

47 
	gi
=0; i<
	gW
.
size
(); i++){

48 
	g¤•A»a
 = 0;

49 
	gj
=0; j<
	gW
[0].
size
(); j++){

50 
	g¤•A»a
 +ğ
W
[
i
][
j
];

52 
	g¤•A»as
.
push_back
(
¤•A»a
);

55 
PoštsCÚš”Poš‹r
 
	g²t
;

56 
PoštsI‹¿tÜ
 
	g²tIt
;

58 
	gMeshTy³
::
Poš‹r
 
Xb¬
 = 
MeshTy³
::
New
();

59 
	gi
=0; i<
	gX
.
size
(); i++){

61  
	gdim
 = 0; dim < 3; dim++ ) {

62 
	gpošt
[
dim
] = 0;

64 
	g²t
 = 
X
[
i
]->
G‘Pošts
();

65 
	gj
 =0;

66 
	gcout
<<"----Import waring: Currently set‡ll‡rea weighto 1,‡nd use 1/(n-1) instead of 1/n. If use„eal‡rea weight,\n"

67 <<" you should uncomm’ˆth63th†šW[i][j]/¤•A»as[i] iÀweigh‹d´oüu¡es::weigh‹dGPA(): "<<
	g’dl
;

68  
	g²tIt
 = 
²t
->
Begš
();…ÁIˆ!ğ²t->
End
(); ++pntIt ) {

69  
	gdim
 = 0; dim < 3; dim++ ) {

70 if(
	gthis
->
	g»®Weight
)

71 
	gpošt
[
dim
] +ğ
²tIt
.
V®ue
()[dim]*
W
[
i
][
j
]/
¤•A»as
[i];

73 
	gpošt
[
dim
] +ğ
²tIt
.
V®ue
()[dim]*
W
[
i
][
j
]/(
¤•A»as
[i]-1);

75 
	gj
++;

77 
	gcout
<<
	g’dl
;

78 
	gXb¬
->
S‘Pošt
(
i
, 
pošt
);

80 
	gthis
->
	gûÁroid
 = 
Xb¬
;

84 
	gveùÜ
<
	gMeshTy³
::
Poš‹r
> 
Xp
;

85 
PoštsI‹¿tÜ
 
	gXb¬PosIt
 = 
Xb¬
->
G‘Pošts
()->
Begš
();

86 
	gi
=0; i<
	gX
.
size
(); i++){

87 
	gMeshTy³
::
Poš‹r
 
ûÁ”Pos
 = 
MeshTy³
::
New
();

88 
	g²t
 = 
X
[
i
]->
G‘Pošts
();

89 
	gj
 =0;

90  
	g²tIt
 = 
²t
->
Begš
();…ÁIˆ!ğ²t->
End
(); ++pntIt ) {

91  
	gdim
 = 0; dim < 3; dim++ ) {

92 
	gpošt
[
dim
] = 
²tIt
.
V®ue
()[dim] - 
Xb¬PosIt
.Value()[dim];

94 
	gûÁ”Pos
->
S‘Pošt
(
j
, 
pošt
);

95 
	gj
++;

97 
	gXp
.
push_back
(
ûÁ”Pos
);

98 
	gthis
->
	gmesh_Xp
.
push_back
(
ûÁ”Pos
);

99 
	gXb¬PosIt
++;

112 
	gveùÜ
<> 
	gth‘a
;

113 
	gi
 = 0; i< 
	gXp
.
size
(); i++){

114 
	gth‘a_i
 = 0;

115 
	g²t
 = 
Xp
[
i
]->
G‘Pošts
();

116 
	gj
 =0;

117  
	g²tIt
 = 
²t
->
Begš
();…ÁIˆ!ğ²t->
End
(); ++pntIt ) {

118 
	gp
 = 0;

119  
	gdim
 = 0; dim < 3; dim++ ) {

120 
	gp
 +ğ
²tIt
.
V®ue
()[
dim
] *…ntIt.Value()[dim];

122 if(
	gthis
->
	g»®Weight
)

123 
	gp
 = 
p
 * 
W
[
i
][
j
] / 
¤•A»as
[i];

125 
	gp
 = 
p
 * 
W
[
i
][
j
] / (
¤•A»as
[i]-1);

127 
	gth‘a_i
 +ğ
p
;

128 
	gj
++;

131 
	gth‘a
.
push_back
(
sq¹
(
th‘a_i
));

133 
	gthis
->
	gsÿËVeùÜ
 = 
th‘a
;

143 
	gveùÜ
<
	gMeshTy³
::
Poš‹r
> 
Q
;

144 
	gi
 = 0; i< 
	gXp
.
size
(); i++){

145 
	g²t
 = 
Xp
[
i
]->
G‘Pošts
();

146 
	gMeshTy³
::
Poš‹r
 
sÿËPos
 = 
MeshTy³
::
New
();

147 
	gj
 =0;

148  
	g²tIt
 = 
²t
->
Begš
();…ÁIˆ!ğ²t->
End
(); ++pntIt ) {

149  
	gdim
 = 0; dim < 3; dim++ ) {

150 
	gpošt
[
dim
] = 
²tIt
.
V®ue
()[dim]/
th‘a
[
i
];

152 
	gsÿËPos
->
S‘Pošt
(
j
, 
pošt
);

153 
	gj
++;

155 
	gQ
.
push_back
(
sÿËPos
);

156 
	gthis
->
	gmesh_Q
.
push_back
(
sÿËPos
);

169 
	gavgTh‘a
 =0;

170 
	gi
=0; i<
	gth‘a
.
size
();i++){

171 
	gavgTh‘a
 +ğ
log
(
th‘a
[
i
]);

173 
	gavgTh‘a
 /ğ
th‘a
.
size
();

174 
	gth‘aB¬
 = 
exp
(
avgTh‘a
);

179 
	gj
 = 0; j< 
	gQ
.
size
(); j++){

182 
	gpoštsNum
 = 
Q
[0]->
G‘Numb”OfPošts
();

184 
M©rixTy³
 
	gQj
;

185 
	gQj
.
£t_size
(3, 
poštsNum
);

186 
	g²t
 = 
Q
[
j
]->
G‘Pošts
();

187 
	gk
 =0;

188  
	g²tIt
 = 
²t
->
Begš
();…ÁIˆ!ğ²t->
End
(); ++pntIt ) {

189  
	gdim
 = 0; dim < 3; dim++ ) {

190 
	gQj
[
dim
][
k
] = 
²tIt
.
V®ue
()[dim];

192 
	gk
++;

195 
M©rixTy³
 
	gWj
;

196 
	gWj
.
£t_size
(
poštsNum
,…ointsNum);

197 
	gr
=0;„<
	gpoštsNum
;r++){

198 
	gc
=0; c<
	gpoštsNum
;c++){

199 
	gWj
[
r
][
c
] = 0;

202 
	gi
 =0; i<
	gpoštsNum
; i++){

203 
	gWj
[
i
][i] = 
W
[
j
][i];

206 
M©rixTy³
 
	gCj
 = 
Qj
 * 
Wj
 * Qj.
Œª¥o£
();

218 
	gvÆ_symm‘ric_eig’sy¡em
<> 
eig
(
Cj
);

232 
	gvÆ_dŸg_m©rix
<> 
D
(3,3);

233 
D
(0,0èğ
eig
.D(2,2);

234 
D
(1,1èğ
eig
.D(1,1);

235 
D
(2,2èğ
eig
.D(0,0);

237 
M©rixTy³
 
V
(3,3);

238 
	gr
=0;„<3;r++){

239 
	gV
[
r
][0] = 
eig
.
V
[r][2];

240 
	gV
[
r
][1] = 
eig
.
V
[r][1];

241 
	gV
[
r
][2] = 
eig
.
V
[r][0];

246 
	gc
=0; c<3; c++){

247 
	gd‘OfCŞ
 = 0;

248 
	gr
=0;„<3;„++){

249 
	gd‘OfCŞ
 +ğ
V
[
r
][
c
];

251 if(
	gd‘OfCŞ
<0){

252 
	gr
=0;„<3;„++){

253 
	gV
[
r
][
c
] *= -1;

257 
	gcout
<<"D is: "<<
	g’dl
;

258 
	gr
=0;„<
	geig
.
	gD
.
rows
();r++){

259 
	gcout
<<
D
(
r
,r)<<
	g’dl
;

261 
	gcout
<<"V is: "<<
	g’dl
;

262 
	gr
=0;„<3;r++){

263 
	gc
=0; c<3;c++){

264 
	gcout
<<
	gV
[
r
][
c
]<<" ";

266 
	gcout
<<
	g’dl
;

269 
M©rixTy³
 
	gVTV
 = 
V
.
Œª¥o£
() * V;

270 
	gcout
<<"------------thVTV is: "<<
	g’dl
;

271 
	gj
=0; j<
	gVTV
.
rows
(); j++){

272 
	gk
=0; k<
	gVTV
.
cŞumns
(); k++){

273 
	gcout
<<
	gVTV
[
j
][
k
]<<" ";

275 
	gcout
<<
	g’dl
;

279 
M©rixTy³
 
	gRÙ
 = 
V
.
Œª¥o£
();

288 
M©rixTy³
 
	grÙPošts
 = 
RÙ
 * 
Qj
;

301 
	gi
=0; i<3; i++){

302 
	gj
=0; j<
	gpoštsNum
; j++){

303 
	grÙPošts
[
i
][
j
] *ğ
th‘aB¬
;

306 
	grÙPošts
[
i
][
j
] += 0.5;

311 
	gŒªsfÜmed_X
.
push_back
(
rÙPošts
);

314 
	gthis
->
	grÙ©iÚM©rix
.
push_back
(
RÙ
);

317  
	gŒªsfÜmed_X
;

330 
	gveùÜ
<
	gM©rixTy³
> 
	gweigh‹d´oüu¡es
::
­¶yT¿nsfÜm
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
cÜr_X
){

331 
veùÜ
<
M©rixTy³
> 
ŒªsfÜmedPošts
;

333 
PoštsCÚš”Poš‹r
 
	g²t
;

334 
PoštsI‹¿tÜ
 
	g²tIt
;

335 
PoštTy³
 
	gpošt
;

337 
PoštsI‹¿tÜ
 
	gûÁroidPÁIt
 = 
this
->
ûÁroid
->
G‘Pošts
()->
Begš
();

338 
	gi
 =0; i<
	gcÜr_X
.
size
(); i++){

339 
	gpoštsNum
 = 
cÜr_X
[0]->
G‘Numb”OfPošts
();

342 
	g²t
 = 
cÜr_X
[
i
]->
G‘Pošts
();

343 
	gMeshTy³
::
Poš‹r
 
cÜr_Xp
 = 
MeshTy³
::
New
();

344 
	gj
 =0;

345  
	g²tIt
 = 
²t
->
Begš
();…ÁIˆ!ğ²t->
End
(); ++pntIt ) {

346  
	gdim
 = 0; dim < 3; dim++ ) {

347 
	gpošt
[
dim
] = 
²tIt
.
V®ue
()[dim] - 
ûÁroidPÁIt
.Value()[dim];

349 
	gcÜr_Xp
->
S‘Pošt
(
j
, 
pošt
);

350 
	gj
++;

352 
	gûÁroidPÁIt
++;

363 
	g²t
 = 
cÜr_Xp
->
G‘Pošts
();

364 
M©rixTy³
 
cÜr_Q
(3, 
poštsNum
);

365 
	gj
 = 0;

366  
	g²tIt
 = 
²t
->
Begš
();…ÁIˆ!ğ²t->
End
(); ++pntIt ) {

367  
	gdim
 = 0; dim < 3; dim++ ) {

368 
	gcÜr_Q
[
dim
][
j
] = 
²tIt
.
V®ue
()[dim]/
this
->
sÿËVeùÜ
[
i
];

370 
	gj
++;

380 
M©rixTy³
 
	grÙPošts
 = 
this
->
rÙ©iÚM©rix
[
i
] * 
cÜr_Q
;

383 
	gavgTh‘a
 =0;

384 
	gi
=0; i<
	gthis
->
	gsÿËVeùÜ
.
size
();i++){

385 
	gavgTh‘a
 +ğ
log
(
this
->
sÿËVeùÜ
[
i
]);

387 
	gavgTh‘a
 /ğ
this
->
sÿËVeùÜ
.
size
();

388 
	gth‘aB¬
 = 
exp
(
avgTh‘a
);

390 
	gi
=0; i<3; i++){

391 
	gj
=0; j<
	gpoštsNum
; j++){

392 
	grÙPošts
[
i
][
j
] *ğ
th‘aB¬
;

395 
	grÙPošts
[
i
][
j
] += 0.5;

399 
	gŒªsfÜmedPošts
.
push_back
(
rÙPošts
);

402  
	gŒªsfÜmedPošts
;

415 
	gweigh‹d´oüu¡es
::
´oüu¡esDi¡ªû
(
veùÜ
<
M©rixTy³
> 
¤•Li¡
){

417 
G
 =0;

419 
	gi
 = 0; i < 
	g¤•Li¡
.
size
(); i++){

420 
	gj
 = 
i
+1; j < 
	g¤•Li¡
.
size
(); j++){

421 
	gG
 = 
G
 + 
g‘FroDi¡ªû
(
¤•Li¡
[
i
], s»pLi¡[
j
]);

425 
	gG
 = 
G
/
¤•Li¡
.
size
();

427  
	gG
;

436 
	gweigh‹d´oüu¡es
::
	$g‘FroDi¡ªû
(
M©rixTy³
 
A
, M©rixTy³ 
B
){

438 
diff
 = 0;

439 
squ¬edDiff
 =0;

442 
i
 =0; i< 
A
.
	`cŞumns
(); i++){

443  
dim
 = 0; dim < 3; dim++ ) {

444 
diff
 = 
A
[
dim
][
i
] - 
B
[dim][i];

445 
squ¬edDiff
 +ğ
diff
 * diff;

449  
squ¬edDiff
;

450 
	}
}

458 
	gveùÜ
<
	gM©rixTy³
> 
	gweigh‹d´oüu¡es
::
g‘NewSpokesDœeùiÚ
(
veùÜ
<
M©rixTy³
> 
bp
, veùÜ<M©rixTy³> 
¥
){

459 
	gveùÜ
<
	gM©rixTy³
> 
	gÃwSpokesDœeùiÚ
;

462 
	gi
 = 0; i < 
	gbp
.
size
(); i++){

464 
M©rixTy³
 
	gbPošts
 = 
bp
[
i
];

465 
M©rixTy³
 
	gsPošts
 = 
¥
[
i
];

468 
M©rixTy³
 
	g¥okeVeùÜ
 = 
bPošts
 - 
sPošts
;

469 
	gpoštNum
 = 
¥okeVeùÜ
.
cŞumns
();

472 
	gm
=0; m< 
	gpoštNum
; m++){

473 
	g¥okeRadiu
=0;

474 
	gdim
=0; dim<3; dim++){

475 
	g¥okeRadiu
 +ğ
¥okeVeùÜ
[
dim
][
m
] * spokeVector[dim][m];

477 
	gdim
=0; dim<3; dim++){

478 
	g¥okeVeùÜ
[
dim
][
m
] /ğ
sq¹
(
¥okeRadiu
);

483 
	gÃwSpokesDœeùiÚ
.
push_back
(
¥okeVeùÜ
);

486  
	gÃwSpokesDœeùiÚ
;

492 
VeùÜPošts
 
	gweigh‹d´oüu¡es
::
g‘NewSpokesRadius
(
veùÜ
<
M©rixTy³
> 
bp
, veùÜ<M©rixTy³> 
¥
){

493 
VeùÜPošts
 
	gÃwSpokesRadius
;

496 
	gi
 = 0; i < 
	gbp
.
size
(); i++){

497 
M©rixTy³
 
	gbPošts
 = 
bp
[
i
];

498 
M©rixTy³
 
	gsPošts
 = 
¥
[
i
];

514 
M©rixTy³
 
	g¥okeVeùÜ
 = 
bPošts
 - 
sPošts
;

522 
	gveùÜ
<> 
	g¥okeRadius
;

524 
	gm
=0; m< 
	g¥okeVeùÜ
.
cŞumns
(); m++){

525 
	g¥okeRadiu
=0;

526 
	gdim
=0; dim<3; dim++){

527 
	g¥okeRadiu
 +ğ
¥okeVeùÜ
[
dim
][
m
] * spokeVector[dim][m];

529 
	g¥okeRadius
.
push_back
(
sq¹
(
¥okeRadiu
));

533 
	gÃwSpokesRadius
.
push_back
(
¥okeRadius
);

536  
	gÃwSpokesRadius
;

541 
	gveùÜ
<
	gM©rixTy³
> 
	gweigh‹d´oüu¡es
::
	$g‘Xp
(){

542 
veùÜ
<
M©rixTy³
> 
m©rix_Xp
;

544 
j
 = 0; j< 
this
->
mesh_Xp
.
	`size
(); j++){

546 
poštsNum
 = 
this
->
mesh_Xp
[0]->
	`G‘Numb”OfPošts
();

548 
M©rixTy³
 
‹mp
;

549 
‹mp
.
	`£t_size
(3, 
poštsNum
);

550 
PoštsCÚš”Poš‹r
 
²t
;

551 
PoštsI‹¿tÜ
 
²tIt
;

552 
²t
 = 
this
->
mesh_Xp
[
j
]->
	`G‘Pošts
();

553 
k
 =0;

554  
²tIt
 = 
²t
->
	`Begš
();…ÁIˆ!ğ²t->
	`End
(); ++pntIt ) {

555  
dim
 = 0; dim < 3; dim++ ) {

556 
‹mp
[
dim
][
k
] = 
²tIt
.
	`V®ue
()[dim];

558 
k
++;

560 
m©rix_Xp
.
	`push_back
(
‹mp
);

563  
m©rix_Xp
;

564 
	}
}

568 
	gveùÜ
<
	gM©rixTy³
> 
	gweigh‹d´oüu¡es
::
	$g‘Q
(){

569 
veùÜ
<
M©rixTy³
> 
m©rix_Q
;

571 
j
 = 0; j< 
this
->
mesh_Q
.
	`size
(); j++){

573 
poštsNum
 = 
this
->
mesh_Q
[0]->
	`G‘Numb”OfPošts
();

575 
M©rixTy³
 
‹mp
;

576 
‹mp
.
	`£t_size
(3, 
poštsNum
);

577 
PoštsCÚš”Poš‹r
 
²t
;

578 
PoštsI‹¿tÜ
 
²tIt
;

579 
²t
 = 
this
->
mesh_Q
[
j
]->
	`G‘Pošts
();

580 
k
 =0;

581  
²tIt
 = 
²t
->
	`Begš
();…ÁIˆ!ğ²t->
	`End
(); ++pntIt ) {

582  
dim
 = 0; dim < 3; dim++ ) {

583 
‹mp
[
dim
][
k
] = 
²tIt
.
	`V®ue
()[dim];

585 
k
++;

587 
m©rix_Q
.
	`push_back
(
‹mp
);

590  
m©rix_Q
;

591 
	}
}

	@weightedprocrustes.h

1 #iâdeà
WEIGHTEDPROCRUSTES_H


2 
	#WEIGHTEDPROCRUSTES_H


	)

4 
	~<veùÜ
>

5 
	~"®ign¤•.h
"

6 
	~"vÆ/®go/vÆ_symm‘ric_eig’sy¡em.h
"

7 
	~"™kM©rix.h
"

11 
	gveùÜ
<> 
	tVeùÜDoubËPošts
;

12 
	gveùÜ
<
	tVeùÜDoubËPošts
> 
	tVeùÜPošts
;

16 
	g™k
::
	tDeçuÉDyÇmicMeshT¿™s
<, 3, 3, , > 
	tMeshT¿™sTy³
;

17 
	g™k
::
	tMesh
<, 3, 
	tMeshT¿™sTy³
> 
	tMeshTy³
;

20 
	gMeshTy³
::
	tPoštsCÚš”
::
	tI‹¿tÜ
 
	tPoštsI‹¿tÜ
;

23 
	gMeshTy³
::
	tPoštsCÚš”
 
	tPoštsCÚš”Ty³
;

26 
	gMeshTy³
::
	tPoštsCÚš”Poš‹r
 PointsContainerPointer;

29 
	gMeshTy³
::
	tPoštTy³
 PointType;

32 
	gvÆ_m©rix
<> 
	tM©rixTy³
;

36 şas 
	cweigh‹d´oüu¡es


38 
	mpublic
:

39 
weigh‹d´oüu¡es
();

40 
weigh‹d´oüu¡es
(
boŞ
 
»®Weight
);

42 
	mveùÜ
<
	mM©rixTy³
> 
weigh‹dGPA
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
X
, 
VeùÜPošts
 
W
);

45 
	mveùÜ
<
	mM©rixTy³
> 
­¶yT¿nsfÜm
(
veùÜ
<
MeshTy³
::
Poš‹r
> 
X
);

47 
g‘FroDi¡ªû
(
M©rixTy³
 
A
, M©rixTy³ 
B
);

48 
´oüu¡esDi¡ªû
(
veùÜ
<
M©rixTy³
> 
¤•Li¡
);

51 
	mveùÜ
<
	mM©rixTy³
> 
g‘NewSpokesDœeùiÚ
(
veùÜ
<
M©rixTy³
> 
bp
, veùÜ<M©rixTy³> 
¥
);

54 
VeùÜPošts
 
g‘NewSpokesRadius
(
veùÜ
<
M©rixTy³
> 
bp
, veùÜ<M©rixTy³> 
¥
);

56 
	mveùÜ
<
	mM©rixTy³
> 
g‘Xp
();

57 
	mveùÜ
<
	mM©rixTy³
> 
g‘Q
();

60 
	m´iv©e
:

61 
veùÜ
<
M©rixTy³
> 
rÙ©iÚM©rix
;

62 
	mveùÜ
<> 
	msÿËVeùÜ
;

63 
	mMeshTy³
::
Poš‹r
 
ûÁroid
;

65 
	mveùÜ
<
	mMeshTy³
::
Poš‹r
> 
mesh_Xp
;

66 
	mveùÜ
<
	mMeshTy³
::
Poš‹r
> 
mesh_Q
;

68 
boŞ
 
	m»®Weight
;

	@/usr/include/dirent.h

22 #iâdef 
_DIRENT_H


23 
	#_DIRENT_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdeà
__USE_XOPEN


32 #iâdeà
__šo_t_defšed


33 #iâdeà
__USE_FILE_OFFSET64


34 
__šo_t
 
	tšo_t
;

36 
__šo64_t
 
	tšo_t
;

38 
	#__šo_t_defšed


	)

40 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


41 
__šo64_t
 
	tšo64_t
;

42 
	#__šo64_t_defšed


	)

61 
	~<b™s/dœ’t.h
>

63 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
è&& !defšed 
d_f’o


64 
	#d_šo
 
d_f’o


	)

81 #ifdeà
_DIRENT_HAVE_D_NAMLEN


82 
	#_D_EXACT_NAMLEN
(
d
è((d)->
d_ÇmËn
)

	)

83 
	#_D_ALLOC_NAMLEN
(
d
è(
	`_D_EXACT_NAMLEN
 (dè+ 1)

	)

85 
	#_D_EXACT_NAMLEN
(
d
è(
	`¡¾’
 ((d)->
d_Çme
))

	)

86 #ifdeà
_DIRENT_HAVE_D_RECLEN


87 
	#_D_ALLOC_NAMLEN
(
d
è(((*è(dè+ (d)->
d_»ş’
è- &(d)->
d_Çme
[0])

	)

89 
	#_D_ALLOC_NAMLEN
(
d
è( (d)->
d_Çme
 > 1 ?  (d)->d_name : \

90 
	`_D_EXACT_NAMLEN
 (
d
è+ 1)

	)

95 #ifdeà
__USE_BSD


99 
	mDT_UNKNOWN
 = 0,

100 
	#DT_UNKNOWN
 
DT_UNKNOWN


	)

101 
	mDT_FIFO
 = 1,

102 
	#DT_FIFO
 
DT_FIFO


	)

103 
	mDT_CHR
 = 2,

104 
	#DT_CHR
 
DT_CHR


	)

105 
	mDT_DIR
 = 4,

106 
	#DT_DIR
 
DT_DIR


	)

107 
	mDT_BLK
 = 6,

108 
	#DT_BLK
 
DT_BLK


	)

109 
	mDT_REG
 = 8,

110 
	#DT_REG
 
DT_REG


	)

111 
	mDT_LNK
 = 10,

112 
	#DT_LNK
 
DT_LNK


	)

113 
	mDT_SOCK
 = 12,

114 
	#DT_SOCK
 
DT_SOCK


	)

115 
	mDT_WHT
 = 14

116 
	#DT_WHT
 
DT_WHT


	)

120 
	#IFTODT
(
mode
è(((modeè& 0170000è>> 12)

	)

121 
	#DTTOIF
(
dœty³
è((dœty³è<< 12)

	)

127 
__dœ¡»am
 
	tDIR
;

134 
DIR
 *
	$İ’dœ
 (cÚ¡ *
__Çme
è
	`__nÚnuÎ
 ((1));

136 #ifdeà
__USE_XOPEN2K8


141 
DIR
 *
	`fdİ’dœ
 (
__fd
);

149 
	$şo£dœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

161 #iâdeà
__USE_FILE_OFFSET64


162 
dœ’t
 *
	$»addœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

164 #ifdeà
__REDIRECT


165 
dœ’t
 *
	`__REDIRECT
 (
»addœ
, (
DIR
 *
__dœp
), 
»addœ64
)

166 
	`__nÚnuÎ
 ((1));

168 
	#»addœ
 
»addœ64


	)

172 #ifdeà
__USE_LARGEFILE64


173 
dœ’t64
 *
	$»addœ64
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

176 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


182 #iâdeà
__USE_FILE_OFFSET64


183 
	$»addœ_r
 (
DIR
 *
__»¡riù
 
__dœp
,

184 
dœ’t
 *
__»¡riù
 
__’Œy
,

185 
dœ’t
 **
__»¡riù
 
__»suÉ
)

186 
	`__nÚnuÎ
 ((1, 2, 3));

188 #ifdeà
__REDIRECT


189 
	`__REDIRECT
 (
»addœ_r
,

190 (
DIR
 *
__»¡riù
 
__dœp
,

191 
dœ’t
 *
__»¡riù
 
__’Œy
,

192 
dœ’t
 **
__»¡riù
 
__»suÉ
),

193 
»addœ64_r
è
	`__nÚnuÎ
 ((1, 2, 3));

195 
	#»addœ_r
 
»addœ64_r


	)

199 #ifdeà
__USE_LARGEFILE64


200 
	$»addœ64_r
 (
DIR
 *
__»¡riù
 
__dœp
,

201 
dœ’t64
 *
__»¡riù
 
__’Œy
,

202 
dœ’t64
 **
__»¡riù
 
__»suÉ
)

203 
	`__nÚnuÎ
 ((1, 2, 3));

208 
	$»wšddœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

210 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


211 
	~<b™s/ty³s.h
>

214 
	$£ekdœ
 (
DIR
 *
__dœp
, 
__pos
è
__THROW
 
	`__nÚnuÎ
 ((1));

217 
	$‹Îdœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

220 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


223 
	$dœfd
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

225 #ià
defšed
 
__OPTIMIZE__
 && defšed 
_DIR_dœfd


226 
	#dœfd
(
dœp
è
	`_DIR_dœfd
 (dœp)

	)

229 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC


230 #iâdeà
MAXNAMLEN


232 
	~<b™s/posix1_lim.h
>

235 #ifdeà
NAME_MAX


236 
	#MAXNAMLEN
 
NAME_MAX


	)

238 
	#MAXNAMLEN
 255

	)

243 
	#__Ãed_size_t


	)

244 
	~<¡ddef.h
>

253 #iâdeà
__USE_FILE_OFFSET64


254 
	`sÿndœ
 (cÚ¡ *
__»¡riù
 
__dœ
,

255 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

256 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

257 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

258 cÚ¡ 
dœ’t
 **))

259 
	`__nÚnuÎ
 ((1, 2));

261 #ifdeà
__REDIRECT


262 
	`__REDIRECT
 (
sÿndœ
,

263 (cÚ¡ *
__»¡riù
 
__dœ
,

264 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

265 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

266 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

267 cÚ¡ 
dœ’t
 **)),

268 
sÿndœ64
è
	`__nÚnuÎ
 ((1, 2));

270 
	#sÿndœ
 
sÿndœ64


	)

274 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


277 
	`sÿndœ64
 (cÚ¡ *
__»¡riù
 
__dœ
,

278 
dœ’t64
 ***
__»¡riù
 
__Çm–i¡
,

279 (*
__£ËùÜ
è(cÚ¡ 
dœ’t64
 *),

280 (*
__cmp
è(cÚ¡ 
dœ’t64
 **,

281 cÚ¡ 
dœ’t64
 **))

282 
	`__nÚnuÎ
 ((1, 2));

285 #ifdeà
__USE_GNU


291 #iâdeà
__USE_FILE_OFFSET64


292 
	`sÿndœ©
 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

293 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

294 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

295 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

296 cÚ¡ 
dœ’t
 **))

297 
	`__nÚnuÎ
 ((2, 3));

299 #ifdeà
__REDIRECT


300 
	`__REDIRECT
 (
sÿndœ©
,

301 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

302 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

303 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

304 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

305 cÚ¡ 
dœ’t
 **)),

306 
sÿndœ©64
è
	`__nÚnuÎ
 ((2, 3));

308 
	#sÿndœ©
 
sÿndœ©64


	)

314 
	`sÿndœ©64
 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

315 
dœ’t64
 ***
__»¡riù
 
__Çm–i¡
,

316 (*
__£ËùÜ
è(cÚ¡ 
dœ’t64
 *),

317 (*
__cmp
è(cÚ¡ 
dœ’t64
 **,

318 cÚ¡ 
dœ’t64
 **))

319 
	`__nÚnuÎ
 ((2, 3));

323 #iâdeà
__USE_FILE_OFFSET64


324 
	$®phasÜt
 (cÚ¡ 
dœ’t
 **
__e1
,

325 cÚ¡ 
dœ’t
 **
__e2
)

326 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

328 #ifdeà
__REDIRECT


329 
	`__REDIRECT_NTH
 (
®phasÜt
,

330 (cÚ¡ 
dœ’t
 **
__e1
,

331 cÚ¡ 
dœ’t
 **
__e2
),

332 
®phasÜt64
è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

334 
	#®phasÜt
 
®phasÜt64


	)

338 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


339 
	$®phasÜt64
 (cÚ¡ 
dœ’t64
 **
__e1
,

340 cÚ¡ 
dœ’t64
 **
__e2
)

341 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

346 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC


351 #iâdeà
__USE_FILE_OFFSET64


352 
__ssize_t
 
	$g‘dœ’Œ›s
 (
__fd
, *
__»¡riù
 
__buf
,

353 
size_t
 
__nby‹s
,

354 
__off_t
 *
__»¡riù
 
__ba£p
)

355 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

357 #ifdeà
__REDIRECT


358 
__ssize_t
 
	`__REDIRECT_NTH
 (
g‘dœ’Œ›s
,

359 (
__fd
, *
__»¡riù
 
__buf
,

360 
size_t
 
__nby‹s
,

361 
__off64_t
 *
__»¡riù
 
__ba£p
),

362 
g‘dœ’Œ›s64
è
	`__nÚnuÎ
 ((2, 4));

364 
	#g‘dœ’Œ›s
 
g‘dœ’Œ›s64


	)

368 #ifdeà
__USE_LARGEFILE64


369 
__ssize_t
 
	$g‘dœ’Œ›s64
 (
__fd
, *
__»¡riù
 
__buf
,

370 
size_t
 
__nby‹s
,

371 
__off64_t
 *
__»¡riù
 
__ba£p
)

372 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

376 #ifdeà
__USE_GNU


378 #iâdeà
__USE_FILE_OFFSET64


379 
	$v”siÚsÜt
 (cÚ¡ 
dœ’t
 **
__e1
,

380 cÚ¡ 
dœ’t
 **
__e2
)

381 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

383 #ifdeà
__REDIRECT


384 
	`__REDIRECT_NTH
 (
v”siÚsÜt
,

385 (cÚ¡ 
dœ’t
 **
__e1
,

386 cÚ¡ 
dœ’t
 **
__e2
),

387 
v”siÚsÜt64
)

388 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

390 
	#v”siÚsÜt
 
v”siÚsÜt64


	)

394 #ifdeà
__USE_LARGEFILE64


395 
	$v”siÚsÜt64
 (cÚ¡ 
dœ’t64
 **
__e1
,

396 cÚ¡ 
dœ’t64
 **
__e2
)

397 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

401 
__END_DECLS


	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


32 
	~<b™s/huge_v®.h
>

33 #ifdeà
__USE_ISOC99


34 
	~<b™s/huge_v®f.h
>

35 
	~<b™s/huge_v®l.h
>

38 
	~<b™s/šf.h
>

41 
	~<b™s/Çn.h
>

45 
	~<b™s/m©hdef.h
>

52 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

53 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

54 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

56 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

57 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

58 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

59 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

61 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

62 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

63 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

65 
	#_MdoubË_
 

	)

66 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

67 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

68 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

69 
	~<b™s/m©hÿÎs.h
>

70 #undeà
_MdoubË_


71 #undeà
_MdoubË_BEGIN_NAMESPACE


72 #undeà
_MdoubË_END_NAMESPACE


73 #undeà
__MATH_PRECNAME


75 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


81 #iâdeà
_Mæßt_


82 
	#_Mæßt_
 

	)

84 
	#_MdoubË_
 
_Mæßt_


	)

85 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

86 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

87 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

88 
	~<b™s/m©hÿÎs.h
>

89 #undeà
_MdoubË_


90 #undeà
_MdoubË_BEGIN_NAMESPACE


91 #undeà
_MdoubË_END_NAMESPACE


92 #undeà
__MATH_PRECNAME


94 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

95 || 
defšed
 
__LDBL_COMPAT


96 #ifdeà
__LDBL_COMPAT


98 #ifdeà
__USE_ISOC99


99 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

100 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

101 #ifdeà
__REDIRECT_NTH


102 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

103 
__Ædbl_Ãx‰ow¬df
)

104 
	`__©Œibu‹__
 ((
__cÚ¡__
));

105 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

106 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

107 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

108 (
__x
, 
__y
),

109 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

113 #undeà
__MATHDECL_1


114 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

115 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

116 
¬gs
, 
®Ÿs
)

	)

117 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

118 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

124 #iâdeà
_MlÚg_doubË_


125 
	#_MlÚg_doubË_
 

	)

127 
	#_MdoubË_
 
_MlÚg_doubË_


	)

128 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

129 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

130 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

131 
	#__MATH_DECLARE_LDOUBLE
 1

	)

132 
	~<b™s/m©hÿÎs.h
>

133 #undeà
_MdoubË_


134 #undeà
_MdoubË_BEGIN_NAMESPACE


135 #undeà
_MdoubË_END_NAMESPACE


136 #undeà
__MATH_PRECNAME


141 #undeà
__MATHDECL_1


142 #undeà
__MATHDECL


143 #undeà
__MATHCALL


146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


148 
signgam
;

153 #ifdeà
__USE_ISOC99


191 
FP_NAN
 =

192 
	#FP_NAN
 0

	)

193 
FP_NAN
,

194 
FP_INFINITE
 =

195 
	#FP_INFINITE
 1

	)

196 
FP_INFINITE
,

197 
FP_ZERO
 =

198 
	#FP_ZERO
 2

	)

199 
FP_ZERO
,

200 
FP_SUBNORMAL
 =

201 
	#FP_SUBNORMAL
 3

	)

202 
FP_SUBNORMAL
,

203 
FP_NORMAL
 =

204 
	#FP_NORMAL
 4

	)

205 
FP_NORMAL


209 #ifdeà
__NO_LONG_DOUBLE_MATH


210 
	#åşassify
(
x
) \

211 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

213 
	#åşassify
(
x
) \

214 ( (
x
) ==  () \

215 ? 
	`__åşassifyf
 (
x
) \

216 :  (
x
) ==  () \

217 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

221 #ifdeà
__NO_LONG_DOUBLE_MATH


222 
	#signb™
(
x
) \

223 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

225 
	#signb™
(
x
) \

226 ( (
x
) ==  () \

227 ? 
	`__signb™f
 (
x
) \

228 :  (
x
) ==  () \

229 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

233 #ifdeà
__NO_LONG_DOUBLE_MATH


234 
	#isfš™e
(
x
) \

235 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

237 
	#isfš™e
(
x
) \

238 ( (
x
) ==  () \

239 ? 
	`__fš™ef
 (
x
) \

240 :  (
x
) ==  () \

241 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

245 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

249 #ifdeà
__NO_LONG_DOUBLE_MATH


250 
	#i¢ª
(
x
) \

251 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

253 
	#i¢ª
(
x
) \

254 ( (
x
) ==  () \

255 ? 
	`__i¢ªf
 (
x
) \

256 :  (
x
) ==  () \

257 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

261 #ifdeà
__NO_LONG_DOUBLE_MATH


262 
	#isšf
(
x
) \

263 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

265 
	#isšf
(
x
) \

266 ( (
x
) ==  () \

267 ? 
	`__isšff
 (
x
) \

268 :  (
x
) ==  () \

269 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

273 
	#MATH_ERRNO
 1

	)

274 
	#MATH_ERREXCEPT
 2

	)

279 #iâdeà
__FAST_MATH__


280 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

285 #ifdeà
__USE_GNU


287 #ifdeà
__NO_LONG_DOUBLE_MATH


288 
	#issigÇlšg
(
x
) \

289 ( (
x
è=ğ (è? 
	`__issigÇlšgf
 (xè: 
	`__issigÇlšg
 (x))

	)

291 
	#issigÇlšg
(
x
) \

292 ( (
x
) ==  () \

293 ? 
	`__issigÇlšgf
 (
x
) \

294 :  (
x
) ==  () \

295 ? 
	`__issigÇlšg
 (
x
è: 
	`__issigÇlšgl
 (x))

	)

299 #ifdef 
__USE_MISC


303 
_IEEE_
 = -1,

304 
_SVID_
,

305 
_XOPEN_
,

306 
_POSIX_
,

307 
_ISOC_


308 } 
	t_LIB_VERSION_TYPE
;

313 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

317 #ifdeà
__USE_SVID


323 #ifdeà
__ılu¥lus


324 
__exû±iÚ


326 
exû±iÚ


329 
ty³
;

330 *
Çme
;

331 
¬g1
;

332 
¬g2
;

333 
»tv®
;

334 
	}
};

336 #ifdeà
__ılu¥lus


337 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

339 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

342 
	#X_TLOSS
 1.41484755040568800000e+16

	)

345 
	#DOMAIN
 1

	)

346 
	#SING
 2

	)

347 
	#OVERFLOW
 3

	)

348 
	#UNDERFLOW
 4

	)

349 
	#TLOSS
 5

	)

350 
	#PLOSS
 6

	)

353 
	#HUGE
 3.40282347e+38F

	)

357 #ifdeà
__USE_XOPEN


359 
	#MAXFLOAT
 3.40282347e+38F

	)

366 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


367 
	#M_E
 2.7182818284590452354

	)

368 
	#M_LOG2E
 1.4426950408889634074

	)

369 
	#M_LOG10E
 0.43429448190325182765

	)

370 
	#M_LN2
 0.69314718055994530942

	)

371 
	#M_LN10
 2.30258509299404568402

	)

372 
	#M_PI
 3.14159265358979323846

	)

373 
	#M_PI_2
 1.57079632679489661923

	)

374 
	#M_PI_4
 0.78539816339744830962

	)

375 
	#M_1_PI
 0.31830988618379067154

	)

376 
	#M_2_PI
 0.63661977236758134308

	)

377 
	#M_2_SQRTPI
 1.12837916709551257390

	)

378 
	#M_SQRT2
 1.41421356237309504880

	)

379 
	#M_SQRT1_2
 0.70710678118654752440

	)

385 #ifdeà
__USE_GNU


386 
	#M_El
 2.718281828459045235360287471352662498L

	)

387 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

388 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

389 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

390 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

391 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

392 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

393 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

394 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

395 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

396 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

397 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

398 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

405 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


406 
	#__NO_MATH_INLINES
 1

	)

409 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

416 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

417 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

418 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

419 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

420 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

421 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

425 #ifdeà
__USE_EXTERN_INLINES


426 
	~<b™s/m©hšlše.h
>

431 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

432 
	~<b™s/m©h-fš™e.h
>

435 #ifdeà
__USE_ISOC99


439 #iâdeà
isg»©”


440 
	#isg»©”
(
x
, 
y
) \

441 (
__ex‹nsiÚ__
 \

442 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

443 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

447 #iâdeà
isg»©”equ®


448 
	#isg»©”equ®
(
x
, 
y
) \

449 (
__ex‹nsiÚ__
 \

450 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

451 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

455 #iâdeà
i¦ess


456 
	#i¦ess
(
x
, 
y
) \

457 (
__ex‹nsiÚ__
 \

458 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

459 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

463 #iâdeà
i¦es£qu®


464 
	#i¦es£qu®
(
x
, 
y
) \

465 (
__ex‹nsiÚ__
 \

466 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

467 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

471 #iâdeà
i¦essg»©”


472 
	#i¦essg»©”
(
x
, 
y
) \

473 (
__ex‹nsiÚ__
 \

474 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

475 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

479 #iâdeà
isunÜd”ed


480 
	#isunÜd”ed
(
u
, 
v
) \

481 (
__ex‹nsiÚ__
 \

482 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

483 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

488 
	g__END_DECLS


	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@itkCorrespondenceEvaluator.txx

1 #iâdeà
_™kCÜ»¥Úd’ûEv®u©Ü_txx


2 
	#_™kCÜ»¥Úd’ûEv®u©Ü_txx


	)

4 
	~"™kCÜ»¥Úd’ûEv®u©Ü.h
"

5 
	~<f¡»am
>

6 
	~<¡dlib.h
>

7 
	~<time.h
>

9 
Çme¥aû
 
	g™k


12 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

13 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

14 ::
CÜ»¥Úd’ûEv®u©Ü
()

16 
this
->
m_Numb”OfIÅuts
 = 0 ;

17 
¤ªd
 ( 
time
(0) ) ;

18 
	gthis
->
	ggaussŸnDi¡ributiÚ
 = 
Œue
 ;

21 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

22 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

23 ::~
CÜ»¥Úd’ûEv®u©Ü
()

28 
‹m¶©e
<
şass
 
TOuutMeshTy³
>

29 
¡d
::
veùÜ
 < > 
CÜ»¥Úd’ûEv®u©Ü
<
TOuutMeshTy³
>

30 ::
G‘Mod–V¬Ÿnû
()

33 
M©rixTy³
 
pÿM©rix
, 
	gm—n
 ;

34 
	g™k
::
Pošt
 <, 3> 
	g§m¶e
 ;

35 
	gnPošts
 = 
this
->
m_Meshes
[0]->
G‘Numb”OfPošts
() ;

36 
	gpÿM©rix
.
£t_size
Ğ3*
nPošts
, 
this
->
m_Numb”OfIÅuts
 );

37 
	gm—n
.
£t_size
 ( 3, 
nPošts
 ) ;

39 
	grow
=0, 
	gpoštId
=0;…oštId<
	gnPošts
;„ow+=3,…ointId++)

42 
	gm—n
[0][
poštId
] = 
m—n
[1][pointId] = mean[2][pointId] = 0 ;

44  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ )

46 
	gthis
->
	gm_Meshes
[
§m¶eIdx
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

48 
	gm—n
[0][
poštId
] +ğ
§m¶e
[0] ;

49 
	gm—n
[1][
poštId
] +ğ
§m¶e
[1] ;

50 
	gm—n
[2][
poštId
] +ğ
§m¶e
[2] ;

52 
	gm—n
[0][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 ) ;

53 
	gm—n
[1][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 ) ;

54 
	gm—n
[2][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 ) ;

57  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ )

59 
	gthis
->
	gm_Meshes
[
§m¶eIdx
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

61 (
	gpÿM©rix
)[
row
 ][
§m¶eIdx
] = 
§m¶e
[0] - 
m—n
[0][
poštId
];

62 (
	gpÿM©rix
)[
row
+1][
§m¶eIdx
] = 
§m¶e
[1] - 
m—n
[1][
poštId
];

63 (
	gpÿM©rix
)[
row
+2][
§m¶eIdx
] = 
§m¶e
[2] - 
m—n
[2][
poštId
];

67 
	g¡d
::
veùÜ
<> 
eigV®ues
;

68 
	geigV®ues
.
»size
 ( 
this
->
m_Numb”OfIÅuts
 ) ;

70 
	gvÆ_svd
<> 
svd
Ğ
pÿM©rix
 );

71 
	gm
=0; m<
	gthis
->
	gm_Numb”OfIÅuts
-1; m++) {

73 
	geigV®ues
[
m
] = 
svd
.
W
(m);

76  
	geigV®ues
;

80 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

81 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

82 ::
G‘Com·ùÃss
(
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
, 
¡d
::
veùÜ
 < > 
eigV®ues
) {

83 iàĞ
numb”OfSh­eP¬am‘”s
 > 
this
->
m_Numb”OfIÅuts
 - 1) {

84 
™kExû±iÚMaüo
 ("Invalid‚umber of shape…arameters for generalization computation.") ;

88 
	gcm
 = 0;

89 
	g¡dE¼Ü
 = 0;

90 
	g‹mp
 = 
sq¹
(2.0 / 
this
->
m_Numb”OfIÅuts
);

91 
	gi
 = 0; i < 
	gnumb”OfSh­eP¬am‘”s
; i++){

92 
	gcm
 +ğ
eigV®ues
[
i
];

94 
	g¡dE¼Ü
 +ğ
‹mp
 * 
eigV®ues
[
i
];

98 
	gnPošts
 = 
this
->
m_Meshes
[0]->
G‘Numb”OfPošts
() ;

99 
	gcm
 /ğ
nPošts
;

101  
	gcm
;

106 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

107 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

108 ::
G‘G’”®iz©iÚ
(
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
)

110 
	gm—n
 = 0, 
	g¡ddev
 = 0 ;

111 
	g¡d
::
veùÜ
 < > 
§m¶e
 ;

113 iàĞ
	gnumb”OfSh­eP¬am‘”s
 > 
	gthis
->
	gm_Numb”OfIÅuts
 - 2 )

115 
™kExû±iÚMaüo
 ("Invalid‚umber of shape…arameters for generalization computation.") ;

119 
	g§m¶e
.
»size
 ( 
this
->
m_Numb”OfIÅuts
 ) ;

121  
	gi
 = 0 ; i < 
	gthis
->
	gm_Numb”OfIÅuts
 ; i++ )

123 
	g§m¶e
[
i
] = 
this
->
Compu‹G’”®iz©iÚE¼Ü
 ( i, 
numb”OfSh­eP¬am‘”s
 ) ;

124 
	gm—n
 +ğ
§m¶e
[
i
] ;

128 
	gm—n
 /ğ
this
->
m_Numb”OfIÅuts
 ;

131  
	gi
 = 0 ; i < 
	gthis
->
	gm_Numb”OfIÅuts
 ; i++ )

133 
	g§m¶e
[
i
] -ğ
m—n
 ;

134 
	g¡ddev
 +ğ
§m¶e
[
i
] * sample[i] ;

136 
	g¡ddev
 = 
sq¹
 ( 
¡ddev
 / 
this
->
m_Numb”OfIÅuts
 ) ;

139 
	g¡dE¼Ü
 = 
¡ddev
 / 
sq¹
 ( 
this
->
m_Numb”OfIÅuts
 - 1 ) ;

142  
	gm—n
 ;

145 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

146 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

147 ::
G‘S³cific™y
(
N
, 
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
)

149 
	g¥ecific™y
 = 0 ;

151 iàĞ
	gnumb”OfSh­eP¬am‘”s
 > 
	gthis
->
	gm_Numb”OfIÅuts
 - 1 )

153 
™kExû±iÚMaüo
 ("Invalid‚umber of shape…arameters for generalization computation.") ;

158 
M©rixTy³
 
	gpÿM©rix
, 
	gm—n
 ;

159 
	g™k
::
Pošt
 <, 3> 
	g§m¶e
 ;

160 
	gnPošts
 = 
this
->
m_Meshes
[0]->
G‘Numb”OfPošts
() ;

161 
	gpÿM©rix
.
£t_size
Ğ3*
nPošts
, 
this
->
m_Numb”OfIÅuts
 );

162 
	gm—n
.
£t_size
 ( 3, 
nPošts
 ) ;

164 
	grow
=0, 
	gpoštId
=0;…oštId<
	gnPošts
;„ow+=3,…ointId++)

167 
	gm—n
[0][
poštId
] = 
m—n
[1][pointId] = mean[2][pointId] = 0 ;

169  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ )

171 
	gthis
->
	gm_Meshes
[
§m¶eIdx
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

173 
	gm—n
[0][
poštId
] +ğ
§m¶e
[0] ;

174 
	gm—n
[1][
poštId
] +ğ
§m¶e
[1] ;

175 
	gm—n
[2][
poštId
] +ğ
§m¶e
[2] ;

177 
	gm—n
[0][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 ) ;

178 
	gm—n
[1][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 ) ;

179 
	gm—n
[2][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 ) ;

182  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ )

184 
	gthis
->
	gm_Meshes
[
§m¶eIdx
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

186 (
	gpÿM©rix
)[
row
 ][
§m¶eIdx
] = 
§m¶e
[0] - 
m—n
[0][
poštId
];

187 (
	gpÿM©rix
)[
row
+1][
§m¶eIdx
] = 
§m¶e
[1] - 
m—n
[1][
poštId
];

188 (
	gpÿM©rix
)[
row
+2][
§m¶eIdx
] = 
§m¶e
[2] - 
m—n
[2][
poštId
];

192 
	g¡d
::
veùÜ
<> 
Sq¹Eig’V®ues
;

193 
M©rixTy³
 
	gPršc®DœeùiÚs
;

195 
	gSq¹Eig’V®ues
.
»size
 ( 
this
->
m_Numb”OfIÅuts
 ) ;

197 
	gvÆ_svd
<> 
svd
Ğ
pÿM©rix
 );

198 
	gm
=0; m<
	gthis
->
	gm_Numb”OfIÅuts
-1; m++)

200 
	gsv
 = 
svd
.
W
Ğ
m
 );

201 
	gSq¹Eig’V®ues
[
m
] = 
sq¹
 ( 
sv
 ) ;

203 
	gPršc®DœeùiÚs
 = 
svd
.
U
();

205 
	g¡d
::
veùÜ
 < > 
§m¶eE¼Üs
 ;

206 
	g§m¶eE¼Üs
.
»size
 ( 
N
 ) ;

208  
	gi
 = 0 ; i < 
	gN
 ; i++ )

211 
	g¡d
::
veùÜ
 < > 
b
 ;

212 
	gb
.
»size
 ( 
numb”OfSh­eP¬am‘”s
 ) ;

214  
	gm
 = 0 ; m < 
	gnumb”OfSh­eP¬am‘”s
 ; m++ )

217 iàĞ
	gthis
->
	ggaussŸnDi¡ributiÚ
 )

219 
	gb
[
m
] = 
this
->
G’”©eGaussŸnRªdomNumb”
(è* 
Sq¹Eig’V®ues
[m] ;

223 
	gb
[
m
] = 
this
->
G’”©eUnifÜmRªdomNumb”
(è* 3 * 
Sq¹Eig’V®ues
[m] ;

228 
M©rixTy³
 
	g»cÚ¡ruùiÚ
 ;

230 
	g»cÚ¡ruùiÚ
.
£t_size
 ( 3, 
nPošts
 ) ;

232  
	g±
 = 0 ;…t< 
	gnPošts
 ;…t++ )

234 
	g»cÚ¡ruùiÚ
[0][
±
] = 
m—n
[0][pt] ;

235 
	g»cÚ¡ruùiÚ
[1][
±
] = 
m—n
[1][pt] ;

236 
	g»cÚ¡ruùiÚ
[2][
±
] = 
m—n
[2][pt] ;

238  
	gm
 = 0 ; m < 
	gnumb”OfSh­eP¬am‘”s
 ; m++ )

241 
	g»cÚ¡ruùiÚ
[0][
±
] +ğ
Pršc®DœeùiÚs
[3*±][
m
] * 
b
[m] ;

242 
	g»cÚ¡ruùiÚ
[1][
±
] +ğ
Pršc®DœeùiÚs
[3*±+1][
m
] * 
b
[m] ;

243 
	g»cÚ¡ruùiÚ
[2][
±
] +ğ
Pršc®DœeùiÚs
[3*±+2][
m
] * 
b
[m] ;

248 
	gmšJ
 = -1 ;

249 
	gmšDi¡
 = 999999999 ;

250 
	gdi¡
 ;

251 
M©rixTy³
 
	gcu¼’tMesh
 ;

252 
	gcu¼’tMesh
.
£t_size
 ( 3, 
nPošts
 ) ;

253  
	gj
 = 0 ; j < 
	gthis
->
	gm_Numb”OfIÅuts
 ; j++ )

255  
	g±
 = 0 ;…ˆ< 
	gnPošts
 ;…t++ )

257 
	gthis
->
	gm_Meshes
[
j
]->
G‘Pošt
 ( 
±
, &
§m¶e
 ) ;

258 
	gcu¼’tMesh
[0][
±
] = 
§m¶e
[0] ;

259 
	gcu¼’tMesh
[1][
±
] = 
§m¶e
[1] ;

260 
	gcu¼’tMesh
[2][
±
] = 
§m¶e
[2] ;

264 
	gdi¡
 = 
this
->
SurçûDi¡ªû
 ( &
cu¼’tMesh
, &
»cÚ¡ruùiÚ
, 
nPošts
 ) ;

266 iàĞ
	gdi¡
 < 
	gmšDi¡
 )

268 
	gmšJ
 = 
j
 ;

269 
	gmšDi¡
 = 
di¡
 ;

273 
	g¥ecific™y
 +ğ
mšDi¡
 ;

274 
	g§m¶eE¼Üs
[
i
] = 
mšDi¡
 ;

278 
	g¥ecific™y
 /ğ
N
 ;

281 
	g¡dDev
 = 0 ;

282  
	gi
 = 0 ; i < 
	gN
 ; i++ )

284 
	g§m¶eE¼Üs
[
i
] -ğ
¥ecific™y
 ;

285 
	g¡dDev
 +ğ
§m¶eE¼Üs
[
i
] * sampleErrors[i] ;

287 
	g¡dDev
 = 
sq¹
 ( 
¡dDev
 / 
N
 ) ;

290 
	g¡dE¼Ü
 = 
¡dDev
 / 
sq¹
 ( 
N
 ) ;

292  
	g¥ecific™y
 ;

295 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

296 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

297 ::
S‘Numb”OfIÅuts
Ğ
numb”
 )

299 iàĞ
numb”
 < 0 )

301 
™kExû±iÚMaüo
( "Invalid‚umber of inputs for correspondenceƒvaluation." );

304 
	gthis
->
	gm_Numb”OfIÅuts
 = 
numb”
 ;

305 
	gthis
->
	gm_Meshes
.
»size
 ( 
numb”
 ) ;

308 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

309 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

310 ::
S‘IÅut
Ğ
idx
, 
MeshPoš‹r
 
šput
 )

312 iàĞĞ
	gidx
 < 0 ) || ( idx >ğ
this
->
m_Numb”OfIÅuts
 ) )

314 
™kExû±iÚMaüo
 ("Invalid input id for correspondenceƒvalution.") ;

318 
	gthis
->
	gm_Meshes
[
idx
] = 
šput
 ;

319 
	gthis
->
BršgIÅutToOrigš
 ( 
idx
 ) ;

322 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

323 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

324 ::
BršgIÅutToOrigš
 (
id
)

326 
nPošts
 = 
this
->
m_Meshes
[
id
]->
G‘Numb”OfPošts
() ;

327 
	gûÁ”
[3] ;

328 
	g™k
::
Pošt
 <, 3> 
	g§m¶e
 ;

330 
	gûÁ”
[0] = 
ûÁ”
[1] = center[2] = 0 ;

332 
	gpoštId
=0;…oštId < 
	gnPošts
;…ointId++)

334 
	gthis
->
	gm_Meshes
[
id
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

335 
	gûÁ”
[0] +ğ
§m¶e
[0] ;

336 
	gûÁ”
[1] +ğ
§m¶e
[1] ;

337 
	gûÁ”
[2] +ğ
§m¶e
[2] ;

339 
	gûÁ”
[0] /ğ
nPošts
 ;

340 
	gûÁ”
[1] /ğ
nPošts
 ;

341 
	gûÁ”
[2] /ğ
nPošts
 ;

342 
	g¡d
::
cout
 << 
ûÁ”
[0] << " " << c’‹r[1] << " " << c’‹r[2] << 
¡d
::
’dl
 ;

344 
	gpoštId
=0;…oštId < 
	gnPošts
;…ointId++)

346 
	gthis
->
	gm_Meshes
[
id
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

347 
	g§m¶e
[0] -ğ
ûÁ”
[0] ;

348 
	g§m¶e
[1] -ğ
ûÁ”
[1] ;

349 
	g§m¶e
[2] -ğ
ûÁ”
[2] ;

350 
	gthis
->
	gm_Meshes
[
id
]->
S‘Pošt
 ( 
poštId
, 
§m¶e
 ) ;

354 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

355 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

356 ::
Compu‹G’”®iz©iÚE¼Ü
 ( 
i
, 
M
 )

358 iàĞĞ
	gi
 < 0 ) || ( i >ğ
this
->
m_Numb”OfIÅuts
 ) )

360 
™kExû±iÚMaüo
 ("Invalid input id for correspondenceƒvalution.") ;

368 
M©rixTy³
 
	gpÿM©rix
, 
	gm—n
 ;

369 
	g™k
::
Pošt
 <, 3> 
	g§m¶e
 ;

370 
	gnPošts
 = 
this
->
m_Meshes
[0]->
G‘Numb”OfPošts
() ;

371 
	gpÿM©rix
.
£t_size
Ğ3*
nPošts
, 
this
->
m_Numb”OfIÅuts
-1 );

372 
	gm—n
.
£t_size
 ( 3, 
nPošts
 ) ;

374 
	grow
=0, 
	gpoštId
=0;…oštId<
	gnPošts
;„ow+=3,…ointId++)

377 
	gm—n
[0][
poštId
] = 
m—n
[1][pointId] = mean[2][pointId] = 0 ;

379  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ )

381 iàĞ
	g§m¶eIdx
 =ğ
i
 )

385 
	gthis
->
	gm_Meshes
[
§m¶eIdx
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

387 
	gm—n
[0][
poštId
] +ğ
§m¶e
[0] ;

388 
	gm—n
[1][
poštId
] +ğ
§m¶e
[1] ;

389 
	gm—n
[2][
poštId
] +ğ
§m¶e
[2] ;

391 
	gm—n
[0][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 - 1 ) ;

392 
	gm—n
[1][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 - 1 ) ;

393 
	gm—n
[2][
poštId
] /ğĞ
this
->
m_Numb”OfIÅuts
 - 1 ) ;

396 
	gsk
 = 0 ;

397  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ )

399 iàĞ
	g§m¶eIdx
 =ğ
i
 )

401 
sk
 = 1 ;

405 
	gthis
->
	gm_Meshes
[
§m¶eIdx
]->
G‘Pošt
 ( 
poštId
, &
§m¶e
 ) ;

407 (
	gpÿM©rix
)[
row
 ][
§m¶eIdx
-
sk
] = 
§m¶e
[0] - 
m—n
[0][
poštId
];

408 (
	gpÿM©rix
)[
row
+1][
§m¶eIdx
-
sk
] = 
§m¶e
[1] - 
m—n
[1][
poštId
];

409 (
	gpÿM©rix
)[
row
+2][
§m¶eIdx
-
sk
] = 
§m¶e
[2] - 
m—n
[2][
poštId
];

413 
	g¡d
::
veùÜ
<> 
Eig’V®ues
;

414 
M©rixTy³
 
	gPršc®DœeùiÚs
;

416 
	gEig’V®ues
.
»size
 ( 
this
->
m_Numb”OfIÅuts
 ) ;

418 
	gvÆ_svd
<> 
svd
Ğ
pÿM©rix
 );

419 
	gm
=0; m<
	gthis
->
	gm_Numb”OfIÅuts
-1; m++)

421 
	gsv
 = 
svd
.
W
Ğ
m
 );

422 
	gEig’V®ues
[
m
] = 
sv
 ;

424 
	gPršc®DœeùiÚs
 = 
svd
.
U
();

431 
	g¡d
::
veùÜ
 < > 
b
 ;

432 
	gb
.
»size
 ( 
M
 ) ;

434  
	gm
 = 0 ; m < 
	gM
 ; m++ )

436 
	gb
[
m
] = 0 ;

437  
	g±
 = 0 ;…ˆ< 
	gnPošts
 ;…t++ )

439 
	gthis
->
	gm_Meshes
[
i
]->
G‘Pošt
 ( 
±
, &
§m¶e
 ) ;

440  
	gš‹º®
 = 0 ; internal < 3 ; internal++ )

442 
	gb
[
m
] +ğ
Pršc®DœeùiÚs
[
±
*3+
š‹º®
][m] * ( 
§m¶e
[š‹º®] - 
m—n
[internal][pt] ) ;

453 
M©rixTy³
 
	g»cÚ¡ruùiÚ
 ;

455 
	g»cÚ¡ruùiÚ
.
£t_size
 ( 3, 
nPošts
 ) ;

457  
	g±
 = 0 ;…t< 
	gnPošts
 ;…t++ )

459 
	g»cÚ¡ruùiÚ
[0][
±
] = 
m—n
[0][pt] ;

460 
	g»cÚ¡ruùiÚ
[1][
±
] = 
m—n
[1][pt] ;

461 
	g»cÚ¡ruùiÚ
[2][
±
] = 
m—n
[2][pt] ;

463  
	gm
 = 0 ; m < 
	gM
 ; m++ )

466 
	g»cÚ¡ruùiÚ
[0][
±
] +ğ
Pršc®DœeùiÚs
[±*3][
m
] * 
b
[m] ;

467 
	g»cÚ¡ruùiÚ
[1][
±
] +ğ
Pršc®DœeùiÚs
[±*3+1][
m
] * 
b
[m] ;

468 
	g»cÚ¡ruùiÚ
[2][
±
] +ğ
Pršc®DœeùiÚs
[±*3+2][
m
] * 
b
[m] ;

476 
M©rixTy³
 
	gcu¼’tMesh
 ;

477 
	gcu¼’tMesh
.
£t_size
 ( 3, 
nPošts
 ) ;

478  
	g±
 = 0 ;…ˆ< 
	gnPošts
 ;…t++ )

480 
	gthis
->
	gm_Meshes
[
i
]->
G‘Pošt
 ( 
±
, &
§m¶e
 ) ;

481 
	gcu¼’tMesh
[0][
±
] = 
§m¶e
[0] ;

482 
	gcu¼’tMesh
[1][
±
] = 
§m¶e
[1] ;

483 
	gcu¼’tMesh
[2][
±
] = 
§m¶e
[2] ;

486  
	gthis
->
SurçûDi¡ªû
 ( &
cu¼’tMesh
, &
»cÚ¡ruùiÚ
, 
nPošts
 ) ;

490 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

491 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

492 ::
SurçûDi¡ªû
 (
M©rixTy³
 *
äom
, M©rixTy³ *
to
, 
nPošts
)

494 
	gdi¡ªû
[3] ;

495 
	g”rÜ
 = 0 ;

497  
	g±
 = 0 ;…ˆ< 
	gnPošts
 ;…t++ )

499 
	gdi¡ªû
[0] = (*
äom
)[0][
±
] - (*
to
)[0][pt] ;

500 
	gdi¡ªû
[1] = (*
äom
)[1][
±
] - (*
to
)[1][pt] ;

501 
	gdi¡ªû
[2] = (*
äom
)[2][
±
] - (*
to
)[2][pt] ;

502 
	g”rÜ
 +ğ
sq¹
 ( 
di¡ªû
[0] * distance[0] + distance[1] * distance[1] + distance[2] * distance[2] ) ;

504  
	g”rÜ
 / 
	gnPošts
 ;

507 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

508 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

509 ::
Wr™eSurçûFÜDebug
 (
M©rixTy³
 *
surçû
, 
nPošts
, 
¡d
::
¡ršg
 
f’ame
)

511 
¡d
::
of¡»am
 
out
 ;

512 
	gout
.
İ’
 (
f’ame
.
c_¡r
()) ;

513  
	g±
 = 0 ;…ˆ< 
	gnPošts
 ;…t++ )

515 
	gout
 << (*
	gsurçû
)[0][
±
] << " " ;

516 
	gout
 << (*
	gsurçû
)[1][
±
] << " " ;

517 
	gout
 << (*
	gsurçû
)[2][
±
] << 
	g¡d
::
’dl
 ;

519 
	gout
.
şo£
 () ;

522 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

523 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

524 ::
G’”©eUnifÜmRªdomNumb”
 ()

527 
unifÜm
 = ( 
¿nd
 (è/ (è
RAND_MAX
 ) * 2 - 1.0 ;

528  
	gunifÜm
 ;

531 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

532 
	gCÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

533 ::
G’”©eGaussŸnRªdomNumb”
 ()

540 
x1
, 
	gx2
, 
	gw
, 
	gy1
 ;

543 
	gx1
 = 
this
->
G’”©eUnifÜmRªdomNumb”
() ;

544 
	gx2
 = 
this
->
G’”©eUnifÜmRªdomNumb”
() ;

545 
	gw
 = 
x1
 * x1 + 
x2
 * x2;

546 }  
	gw
 >= 1.0 );

548 
	gw
 = 
sq¹
Ğ(-2.0 * 
log
Ğ
w
 ) ) / w );

549 
	gy1
 = 
x1
 * 
w
;

551  
	gy1
 ;

	@itkMesh3DProcrustesAlignFilter.txx

1 #iâdeà
_™kMesh3DProüu¡esAlignF‹r_txx


2 
	#_™kMesh3DProüu¡esAlignF‹r_txx


	)

4 
	~"™kMesh3DProüu¡esAlignF‹r.h
"

6 
Çme¥aû
 
	g™k


9 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

10 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>

11 ::
Mesh3DProüu¡esAlignF‹r
()

13 
m_CÚv”g’û
 = 0.0001;

14 
	gm_M—n
 = 
OuutMeshTy³
::
New
();

15 
	gm_OldM—n
 = 
OuutMeshTy³
::
New
();

17 
	gm_U£Sÿlšg
 = 
Œue
;

18 
	gm_U£In™ŸlAv”age
 = 
çl£
;

19 
	gm_U£SšgËI‹¿tiÚ
 = 
çl£
;

20 
	gm_U£NÜm®iz©iÚ
 = 
Œue
;

21 
	gm_AlignRÙ©iÚ
 = 
Œue
;

24 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

25 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>

26 ::~
Mesh3DProüu¡esAlignF‹r
()

30 
‹m¶©e
 <
şass
 
TIÅutMesh
, cÏs 
	gTOuutMesh
>

31 
ty³Çme
 
	g™k
::
ProûssObjeù
::
D©aObjeùPoš‹r


32 
Mesh3DProüu¡esAlignF‹r
<
TIÅutMesh
, 
	gTOuutMesh
>

33 ::
MakeOuut
(
™k
::
ProûssObjeù
::
D©aObjeùPoš‹rA¼aySizeTy³
 )

35  
¡©ic_ÿ¡
<
™k
::
ProûssObjeù
::
D©aObjeùPoš‹r
>(
TOuutMesh
::
New
().
G‘Poš‹r
() );

38 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

39 
ty³Çme
 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>::
OuutMeshTy³


40 * 
Mesh3DProüu¡esAlignF‹r
<
TIÅutMesh
, 
	gTOuutMesh
>

41 ::
G‘Ouut
(
idx
)

43  
m_MeshT¿nsfÜm
[
idx
]->
G‘Ouut
();

47 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

49 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>

50 ::
S‘Numb”OfIÅuts
Ğ
num
 )

52 
this
->
ProûssObjeù
::
S‘Numb”OfIÅuts
Ğ
num
 );

53 
	gthis
->
	gProûssObjeù
::
S‘Numb”OfRequœedIÅuts
Ğ
num
 );

54 
	gthis
->
	gProûssObjeù
::
S‘Numb”OfOuuts
Ğ
num
 );

55 
	gthis
->
	gProûssObjeù
::
S‘Numb”OfRequœedOuuts
Ğ
num
 );

56 
	gm_MeshT¿nsfÜm
.
»size
Ğ
num
 );

57 
	gm_C’‹r
.
»size
Ğ
num
 );

58  
	gi
 = 0; i < 
	gnum
; i++ )

60 
OuutMeshPoš‹r
 
	gouut
 = 
¡©ic_ÿ¡
<
TOuutMesh
 *>(
this
->
MakeOuut
(
i
).
G‘Poš‹r
() );

61 
	gthis
->
	gProûssObjeù
::
S‘NthOuut
Ğ
i
, 
ouut
.
G‘Poš‹r
() );

62 
	gm_MeshT¿nsfÜm
[
i
] = 
T¿nsfÜmMeshTy³
::
New
();

63 
	gm_MeshT¿nsfÜm
[
i
]->
G¿áOuut
Ğ
this
->
G‘Ouut
( i ) );

67 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

69 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>

70 ::
S‘IÅut
Ğ
idx
, 
IÅutMeshPoš‹r
 
mesh
 )

72 
	gthis
->
	gProûssObjeù
::
S‘NthIÅut
Ğ
idx
, 
mesh
 );

73 
	gm_MeshT¿nsfÜm
[
idx
]->
S‘IÅut
Ğ
this
->
G‘IÅut
( idx ) );

76 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

78 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>

79 ::
G’”©eD©a
()

82  
i
 = 0; 
	gi
 < 
	gthis
->
G‘Numb”OfIÅuts
(); i++ )

84 
	gm_C’‹r
[
i
] = 
G‘MeshC’‹r
( i );

87 
IÅutMeshPoš‹r
 
	gmesh
 = 
this
->
G‘IÅut
( 0 );

88 
	gnumPošts
 = 
mesh
->
G‘Numb”OfPošts
();

89 ifĞ
	gm_M—n
->
G‘Numb”OfPošts
(è!ğ
numPošts
 )

91 
OuutPoštsCÚš”Poš‹r
 
M—nPošts
 = 
m_M—n
->
G‘Pošts
();

92 
OuutPoštsCÚš”Poš‹r
 
	gOldM—nPošts
 = 
m_OldM—n
->
G‘Pošts
();

93 
	gM—nPošts
->
Re£rve
(
numPošts
);

94 
	gOldM—nPošts
->
Re£rve
(
numPošts
);

99 
OuutPoštsCÚš”
 *
	gm—nPošts
 = 
m_M—n
->
G‘Pošts
();

100 
OuutPoštsCÚš”
 *
	gŞdM—nPošts
 = 
m_OldM—n
->
G‘Pošts
();

101 
ty³Çme
 
	gOuutPoštsCÚš”
::
I‹¿tÜ
 
m—nIt
, 
	gŞdM—nIt
;

102 ifĞ
	gm_U£In™ŸlAv”age
 )

107 
C®cuÏ‹M—n
();

112 
ty³Çme
 
	gIÅutMeshTy³
::
PoštsCÚš”
::
CÚ¡I‹¿tÜ
 
meshIt
;

113 
	gmeshIt
 = 
mesh
->
G‘Pošts
()->
Begš
();

114  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

116  
	gdim
 = 0; dim < 3; dim++ )

118 
	gm—nIt
.
V®ue
()[
dim
] = 
meshIt
.Value()[dim];

120 ++
	gmeshIt
;

122 
	gm_M—nC’‹r
 = 
m_C’‹r
[0];

126 
OuutPoštTy³
 
	gz”oPÁ
;

127  
	gdim
 = 0; dim < 3; dim++ )

129 
	gz”oPÁ
[
dim
] = 0;

131 
CoÜdR•Ty³
 
	gdiff
, 
	gsqu¬edDiff
;

136  
	gi
 = 0; i < 
	gthis
->
G‘Numb”OfIÅuts
(); i++ )

138 
T¿nsfÜmPoš‹r
 
	gŒªsfÜm
 = 
G‘Proüu¡esM©ch
Ğ
i
, 
m_M—n
, 
m_M—nC’‹r
);

139 
	gm_MeshT¿nsfÜm
[
i
]->
S‘T¿nsfÜm
Ğ
ŒªsfÜm
 );

140 
PrštT¿nsfÜm
Ğ
ŒªsfÜm
);

143 
	gŞdM—nIt
 = 
ŞdM—nPošts
->
Begš
();

144  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

146 
	gŞdM—nIt
.
V®ue
(èğ
m—nIt
.Value();

147 
	gm—nIt
.
V®ue
(èğ
z”oPÁ
;

148 ++
	gŞdM—nIt
;

151 
C®cuÏ‹M—n
();

153 
	gsqu¬edDiff
 = 0;

154 
	gŞdM—nIt
 = 
ŞdM—nPošts
->
Begš
();

155  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

157  
	gdim
 = 0; dim < 3; dim++ )

159 
	gdiff
 = 
m—nIt
.
V®ue
()[
dim
] - 
ŞdM—nIt
.Value()[dim];

160 
	gsqu¬edDiff
 +ğ
diff
 * diff;

162 ++
	gŞdM—nIt
;

164 
	gdiff
 = 
sq¹
Ğ
squ¬edDiff
 );

166  
	gdiff
 > 
	gm_CÚv”g’û
 && !
	gm_U£SšgËI‹¿tiÚ
 );

169 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

170 
ty³Çme
 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>::
T¿n¦©iÚTy³


171 
Mesh3DProüu¡esAlignF‹r
<
TIÅutMesh
, 
	gTOuutMesh
>

172 ::
G‘MeshC’‹r
Ğ
idx
 )

174 
T¿n¦©iÚTy³
 
ûÁ”
;

176 
	gûÁ”
.
Fl
( 0 );

177 
IÅutPoštTy³
 
	g²t
;

178 
ty³Çme
 
	gIÅutMeshTy³
::
PoštsCÚš”
 * 
meshPošts
 = 
this
->
G‘IÅut
Ğ
idx
 )->
G‘Pošts
();

179 
ty³Çme
 
	gIÅutMeshTy³
::
PoštsCÚš”
::
CÚ¡I‹¿tÜ
 
²tIt
;

180  
	g²tIt
 = 
meshPošts
->
Begš
();…ÁIˆ!ğmeshPošts->
End
(); ++pntIt )

182  
	gdim
 = 0; dim < 3; dim++ )

184 
	gûÁ”
[
dim
] +ğ
²tIt
.
V®ue
()[dim];

187 
	gûÁ”
 /ğ()
meshPošts
->
Size
();

188  
	gûÁ”
;

191 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

192 
ty³Çme
 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>::
T¿nsfÜmPoš‹r


193 
Mesh3DProüu¡esAlignF‹r
<
TIÅutMesh
, 
	gTOuutMesh
>

194 ::
G‘Proüu¡esM©ch
Ğ
idx
, 
OuutMeshPoš‹r
 
rg‘Mesh
, 
T¿n¦©iÚTy³
 
rg‘C’‹r
)

196 
T¿nsfÜmPoš‹r
 
	g»suÉ
 = 
T¿nsfÜmTy³
::
New
();

198 
M©rixTy³
 
	gsourû
;

199 
IÅutMeshPoš‹r
 
	gsourûMesh
 = 
this
->
G‘IÅut
Ğ
idx
 );

201 
	gsourû
.
£t_size
Ğ
sourûMesh
->
G‘Numb”OfPošts
(), 3 );

202 
ty³Çme
 
	gIÅutMeshTy³
::
PoštsCÚš”
::
CÚ¡I‹¿tÜ
 
šputIt
;

203 
	gi
 = 0;

204  
	gšputIt
 = 
sourûMesh
->
G‘Pošts
()->
Begš
(); iÅutIˆ!ğsourûMesh->G‘Pošts()->
End
(); ++inputIt )

206  
	gdim
 = 0; dim < 3; dim++ )

208 
	gsourû
[
i
][
dim
] = 
šputIt
.
V®ue
()[dim] - 
m_C’‹r
[
idx
][dim];

210 
	gi
++;

213 
M©rixTy³
 
	grg‘
;

214 
	grg‘
.
£t_size
Ğ3, 
rg‘Mesh
->
G‘Numb”OfPošts
() );

215 
ty³Çme
 
	gOuutMeshTy³
::
PoštsCÚš”
::
CÚ¡I‹¿tÜ
 
ouutIt
;

216 
	gi
 = 0;

217  
	gouutIt
 = 
rg‘Mesh
->
G‘Pošts
()->
Begš
(); ouutIˆ!ğrg‘Mesh->G‘Pošts()->
End
(); ++outputIt )

219  
	gdim
 = 0; dim < 3; dim++ )

221 
	grg‘
[
dim
][
i
] = 
ouutIt
.
V®ue
()[dim] - 
rg‘C’‹r
[dim];

223 
	gi
++;

225 
	gcout
<<"----------------------rg‘C’‹¸is: "<<
	grg‘C’‹r
<<
	g’dl
;

227 
M©rixTy³
 
	gx1
 = 
rg‘
 * 
sourû
 / (rg‘.
äo_nÜm
() * source.fro_norm() );

228 
	gvÆ_svd
<
	gCoÜdR•Ty³
> 
svd
Ğ
x1
 );

229 
M©rixTy³
 
	gpo¡T¿ns
 = 
svd
.
V
(è* svd.
U
().
Œª¥o£
();

230 
M©rixTy³
 
	gx2
 = 
rg‘
 * 
sourû
 * 
po¡T¿ns
;

231 
CoÜdR•Ty³
 
	gx2T¿û
 = 0;

232  
	gi_
 = 0; i_ < 
	gx2
.
rows
(); i_++ )

234 
	gx2T¿û
 +ğ
x2
[
i_
][i_];

236 
M©rixTy³
 
	gx3
 = 
sourû
.
Œª¥o£
() * source;

237 
CoÜdR•Ty³
 
	gx3T¿û
 = 0;

238  
	gi_
 = 0; i_ < 
	gx3
.
rows
(); i_++ )

240 
	gx3T¿û
 +ğ
x3
[
i_
][i_];

242 
CoÜdR•Ty³
 
	gsÿË
 = 
x2T¿û
 / 
x3T¿û
;

245 
ty³Çme
 
	gT¿nsfÜmTy³
::
IÅutPoštTy³
 
ûÁ”
;

246  
	gdim
 = 0; dim < 3; dim++ ) {

247 
	gûÁ”
[
dim
] = 
m_C’‹r
[
idx
][dim];

249 
	g»suÉ
->
S‘C’‹r
Ğ
ûÁ”
 );

252 
	g»suÉ
->
S‘T¿n¦©iÚ
(- 
m_C’‹r
[
idx
]);

254 ifĞ
	gm_AlignRÙ©iÚ
 )

257 
ty³Çme
 
	gT¿nsfÜmTy³
::
M©rixTy³
 
rÙM©rix
;

258  
	gr
 = 0;„ < 3;„++ )

260  
	gc
 = 0; c < 3; c++ )

262 
	grÙM©rix
[
r
][
c
] = 
po¡T¿ns
[c][r];

265 
	g»suÉ
->
S‘M©rix
Ğ
rÙM©rix
 );

268 ifĞ
	gm_U£Sÿlšg
 ) {

270 
	g»suÉ
->
SÿË
Ğ
sÿË
, 1);

283  
	g»suÉ
;

286 
	g‹m¶©e
 <
şass
 
	gTIÅutMesh
, cÏs 
	gTOuutMesh
>

288 
	gMesh3DProüu¡esAlignF‹r
<
	gTIÅutMesh
, 
	gTOuutMesh
>

289 ::
C®cuÏ‹M—n
()

291 
ty³Çme
 
OuutMeshTy³
::
PoštsCÚš”
 * 
m—nPošts
 = 
m_M—n
->
G‘Pošts
();

292 
ty³Çme
 
	gOuutMeshTy³
::
PoštsCÚš”
::
I‹¿tÜ
 
m—nIt
;

293  
	gi
 = 0; i < 
	gthis
->
G‘Numb”OfIÅuts
(); i++ )

295 
	gm_MeshT¿nsfÜm
[
i
]->
Upd©e
();

296 
OuutMeshPoš‹r
 
	gŒªsfÜmedMesh
 = 
m_MeshT¿nsfÜm
[
i
]->
G‘Ouut
();

297 
ty³Çme
 
	gOuutMeshTy³
::
PoštsCÚš”
 * 
ŒªsfÜmedPošts
 = 
ŒªsfÜmedMesh
->
G‘Pošts
();

298 
ty³Çme
 
	gOuutMeshTy³
::
PoštsCÚš”
::
I‹¿tÜ
 
²tIt
;

307 
	g²tIt
 = 
ŒªsfÜmedPošts
->
Begš
();

308  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

310  
	gdim
 = 0; dim < 3; dim++ )

312 
	gm—nIt
.
V®ue
()[
dim
] +ğ
²tIt
.Value()[dim];

314 ++
	g²tIt
;

319  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

321  
	gdim
 = 0; dim < 3; dim++ )

323 
	gm—nIt
.
V®ue
()[
dim
] /ğ
this
->
G‘Numb”OfIÅuts
();

326 ifĞ
	gm_U£NÜm®iz©iÚ
 )

329 
	gsqu¬edNÜm
 = 0;

330  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

332 
	gsqu¬edNÜm
 +ğ
m—nIt
.
V®ue
().
G‘VeùÜFromOrigš
().
G‘Squ¬edNÜm
();

334 
	gsÿËFaùÜ
 = 1.0 / 
sq¹
Ğ
squ¬edNÜm
 );

335  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

337  
	gdim
 = 0; dim < 3; dim++ )

339 
	gm—nIt
.
V®ue
()[
dim
] *ğ
sÿËFaùÜ
;

344 
	gm_M—nC’‹r
.
Fl
( 0 );

345  
	gm—nIt
 = 
m—nPošts
->
Begš
(); m—nIˆ!ğm—nPošts->
End
(); ++meanIt )

347  
	gdim
 = 0; dim < 3; dim++ )

349 
	gm_M—nC’‹r
[
dim
] +ğ
m—nIt
.
V®ue
()[dim];

352 
	gm_M—nC’‹r
 /ğ()
m—nPošts
->
Size
();

353 
	gcout
<<"========================================================m_M—nC’‹¸is: "<<
	gm_M—nC’‹r
<<
	g’dl
;

	@srepCorrespondenceEvaluator.txx

2 #iâdeà
_¤•CÜ»¥Úd’ûEv®u©Ü_txx


3 
	#_¤•CÜ»¥Úd’ûEv®u©Ü_txx


	)

5 
	~"¤•CÜ»¥Úd’ûEv®u©Ü.h
"

6 
	~<f¡»am
>

7 
	~<¡dlib.h
>

8 
	~<time.h
>

10 
Çme¥aû
 
	g™k


13 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

14 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

15 ::
¤•CÜ»¥Úd’ûEv®u©Ü
()

17 
this
->
m_Numb”OfIÅuts
 = 0 ;

18 
¤ªd
 ( 
time
(0) ) ;

19 
	gthis
->
	ggaussŸnDi¡ributiÚ
 = 
Œue
 ;

22 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

23 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

24 ::~
¤•CÜ»¥Úd’ûEv®u©Ü
()

28 
‹m¶©e
<
şass
 
TOuutMeshTy³
>

29 
¤•CÜ»¥Úd’ûEv®u©Ü
<
TOuutMeshTy³
>

30 ::
G‘G’”®iz©iÚ
(
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
) {

31 
	gm—n
 = 0, 
	g¡ddev
 = 0 ;

32 
	g¡d
::
veùÜ
 < > 
§m¶e
 ;

34 iàĞ
	gnumb”OfSh­eP¬am‘”s
 > 
	gthis
->
	gm_Numb”OfIÅuts
 - 2 )

36 
™kExû±iÚMaüo
 ("Invalid‚umber of shape…arameters for generalization computation.") ;

40 
	g§m¶e
.
»size
 ( 
this
->
m_Numb”OfIÅuts
 ) ;

42  
	gi
 = 0 ; i < 
	gthis
->
	gm_Numb”OfIÅuts
 ; i++ )

44 
	g§m¶e
[
i
] = 
this
->
Compu‹G’”®iz©iÚE¼Ü
 ( i, 
numb”OfSh­eP¬am‘”s
 ) ;

45 
	gm—n
 +ğ
§m¶e
[
i
] ;

49 
	gm—n
 /ğ
this
->
m_Numb”OfIÅuts
 ;

52  
	gi
 = 0 ; i < 
	gthis
->
	gm_Numb”OfIÅuts
 ; i++ )

54 
	g§m¶e
[
i
] -ğ
m—n
 ;

55 
	g¡ddev
 +ğ
§m¶e
[
i
] * sample[i] ;

57 
	g¡ddev
 = 
sq¹
 ( 
¡ddev
 / 
this
->
m_Numb”OfIÅuts
 ) ;

60 
	g¡dE¼Ü
 = 
¡ddev
 / 
sq¹
 ( 
this
->
m_Numb”OfIÅuts
 - 1 ) ;

63  
	gm—n
 ;

66 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

67 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

68 ::
G‘S³cific™y
(
N
, 
numb”OfSh­eP¬am‘”s
, &
¡dE¼Ü
)

70 
	g¥ecific™y
 = 0 ;

72 iàĞ
	gnumb”OfSh­eP¬am‘”s
 > 
	gthis
->
	gm_Numb”OfIÅuts
 - 1 ) {

73 
™kExû±iÚMaüo
 ("Invalid‚umber of shape…arameters for generalization computation.") ;

78 
	g´oDim
 = 
this
->
ã©u»M©rix
.
rows
();

79 
M©rixTy³
 
rowM—n
(
´oDim
, 1);

80 
	growM—n
.
fl
(0);

81 
M©rixTy³
 
pÿM©rix
(
´oDim
, 
this
->
m_Numb”OfIÅuts
);

83 
	grow
 = 0;„ow < 
	g´oDim
;„ow++) {

85  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ ) {

86 
	growM—n
[
row
][0] +ğ
this
->
ã©u»M©rix
[row][
§m¶eIdx
];

88 
	growM—n
[
row
][0] /ğĞ
this
->
m_Numb”OfIÅuts
 );

91  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ ) {

92 (
	gpÿM©rix
)[
row
][
§m¶eIdx
] = 
this
->
ã©u»M©rix
[row][§m¶eIdx] - 
rowM—n
[row][0];

96 
	g¡d
::
veùÜ
<> 
Sq¹Eig’V®ues
;

97 
M©rixTy³
 
	gPršc®DœeùiÚs
;

99 
	gSq¹Eig’V®ues
.
»size
 ( 
this
->
m_Numb”OfIÅuts
 ) ;

101 
	gvÆ_svd
<> 
svd
Ğ
pÿM©rix
 );

102 
	gm
=0; m<
	gthis
->
	gm_Numb”OfIÅuts
-1; m++)

104 
	gsv
 = 
svd
.
W
Ğ
m
 );

105 
	gSq¹Eig’V®ues
[
m
] = 
sq¹
 ( 
sv
 ) ;

107 
	gPršc®DœeùiÚs
 = 
svd
.
U
();

109 
	g¡d
::
veùÜ
 < > 
§m¶eE¼Üs
 ;

110 
	g§m¶eE¼Üs
.
»size
 ( 
N
 ) ;

112  
	gi
 = 0 ; i < 
	gN
 ; i++ ) {

114 
M©rixTy³
 
b
(
numb”OfSh­eP¬am‘”s
,1) ;

115 
	gb
.
fl
(0);

116  
	gm
 = 0 ; m < 
	gnumb”OfSh­eP¬am‘”s
 ; m++ ) {

118 iàĞ
	gthis
->
	ggaussŸnDi¡ributiÚ
 )

120 
	gb
[
m
][0] = 
this
->
G’”©eGaussŸnRªdomNumb”
(è* 
Sq¹Eig’V®ues
[m] ;

124 
	gb
[
m
][0] = 
this
->
G’”©eUnifÜmRªdomNumb”
(è* 3 * 
Sq¹Eig’V®ues
[m] ;

129 
M©rixTy³
 
»cÚ¡ruùiÚ
(
´oDim
, 1);

131  
	gdim
 = 0 ; dim < 
	g´oDim
 ; dim++ ) {

132 
	g»cÚ¡ruùiÚ
[
dim
][0] = 
rowM—n
[dim][0];

134  
	gm
 = 0 ; m < 
	gnumb”OfSh­eP¬am‘”s
; m++ ){

136 
	g»cÚ¡ruùiÚ
[
dim
][0] +ğ
Pršc®DœeùiÚs
[dim][
m
]*
b
[m][0];

141 
	gmšJ
 = -1 ;

142 
	gmšDi¡
 = 999999999 ;

143 
	gdi¡
 ;

144 
M©rixTy³
 
	gcu¼’tM©rix
;

145 
	gcu¼’tM©rix
.
£t_size
(
´oDim
, 1);

147  
	gj
 = 0 ; j < 
	gthis
->
	gm_Numb”OfIÅuts
 ; j++ ){

148 
	gdim
 =0; dim < 
	g´oDim
; dim++){

149 
	gcu¼’tM©rix
[
dim
][0] = 
this
->
ã©u»M©rix
[dim][
j
];

152 
	gdi¡
 = 
this
->
SurçûDi¡ªû
 ( 
cu¼’tM©rix
, 
»cÚ¡ruùiÚ
, 
´oDim
 ) ;

154 iàĞ
	gdi¡
 < 
	gmšDi¡
 ){

155 
	gmšJ
 = 
j
 ;

156 
	gmšDi¡
 = 
di¡
 ;

160 
	g¥ecific™y
 +ğ
mšDi¡
 ;

161 
	g§m¶eE¼Üs
[
i
] = 
mšDi¡
 ;

165 
	g¥ecific™y
 /ğ
N
 ;

168 
	g¡dDev
 = 0 ;

169  
	gi
 = 0 ; i < 
	gN
 ; i++ )

171 
	g§m¶eE¼Üs
[
i
] -ğ
¥ecific™y
 ;

172 
	g¡dDev
 +ğ
§m¶eE¼Üs
[
i
] * sampleErrors[i] ;

174 
	g¡dDev
 = 
sq¹
 ( 
¡dDev
 / 
N
 ) ;

177 
	g¡dE¼Ü
 = 
¡dDev
 / 
sq¹
 ( 
N
 ) ;

179  
	g¥ecific™y
 ;

182 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

183 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

184 ::
S‘Numb”OfIÅuts
Ğ
numb”
 )

186 iàĞ
numb”
 < 0 )

188 
™kExû±iÚMaüo
( "Invalid‚umber of inputs for correspondenceƒvaluation." );

191 
	gthis
->
	gm_Numb”OfIÅuts
 = 
numb”
 ;

192 
	gthis
->
	gm_Meshes
.
»size
 ( 
numb”
 ) ;

195 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

196 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

197 ::
S‘IÅut
Ğ
M©rixTy³
 
ã©u»M©rix
 ) {

198 
this
->
ã©u»M©rix
 = featureMatrix;

209 
	gthis
->
BršgIÅutToOrigš
() ;

213 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

214 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

215 ::
BršgIÅutToOrigš
() {

216 
ûÁ”
 = 0;

219 
	gi
 = 0; i < 
	gthis
->
	gã©u»M©rix
.
rows
(); i++){

220 
	gj
 = 0; j < 
	gthis
->
	gã©u»M©rix
.
cŞumns
(); j++){

221 
	gûÁ”
 +ğ
this
->
ã©u»M©rix
[
i
][
j
];

224 
	gûÁ”
 /ğ
this
->
ã©u»M©rix
.
cŞumns
();

228 
	gj
 = 0; j < 
	gthis
->
	gã©u»M©rix
.
cŞumns
(); j++){

229 
	gthis
->
	gã©u»M©rix
[
i
][
j
] -ğ
ûÁ”
;

234 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

235 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

236 ::
Compu‹G’”®iz©iÚE¼Ü
 ( 
i
, 
M
 ) {

237 iàĞĞ
	gi
 < 0 ) || ( i >ğ
this
->
m_Numb”OfIÅuts
 ) ) {

238 
™kExû±iÚMaüo
 ("Invalid input id for correspondenceƒvalution.") ;

246 
	g´oDim
 = 
this
->
ã©u»M©rix
.
rows
();

248 
M©rixTy³
 
X
(
´oDim
, 1);

249 
	gdim
 =0; dim < 
	g´oDim
; dim++){

250 
	gX
[
dim
][0] = 
this
->
ã©u»M©rix
[dim][
i
];

253 
M©rixTy³
 
rowM—n
(
´oDim
, 1);

254 
	growM—n
.
fl
(0);

255 
M©rixTy³
 
pÿM©rix
(
´oDim
, 
this
->
m_Numb”OfIÅuts
-1);

257 
	grow
 = 0;„ow < 
	g´oDim
;„ow++) {

259  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ ) {

260 iàĞ
	g§m¶eIdx
 =ğ
i
 ) {

264 
	growM—n
[
row
][0] +ğ
this
->
ã©u»M©rix
[row][
§m¶eIdx
];

266 
	growM—n
[
row
][0] /ğĞ
this
->
m_Numb”OfIÅuts
 - 1 );

269 
	gsk
 = 0 ;

270  
	g§m¶eIdx
 = 0 ; sam¶eIdx < 
	gthis
->
	gm_Numb”OfIÅuts
 ; sampleIdx++ ) {

271 iàĞ
	g§m¶eIdx
 =ğ
i
 ) {

272 
sk
 = 1 ;

276 (
	gpÿM©rix
)[
row
][
§m¶eIdx
-
sk
] = 
this
->
ã©u»M©rix
[row][§m¶eIdx] - 
rowM—n
[row][0];

280 
	g¡d
::
veùÜ
<> 
Eig’V®ues
;

281 
M©rixTy³
 
	gPršc®DœeùiÚs
;

283 
	gEig’V®ues
.
»size
 ( 
this
->
m_Numb”OfIÅuts
 ) ;

285 
	gvÆ_svd
<> 
svd
Ğ
pÿM©rix
 );

286 
	gm
=0; m<
	gthis
->
	gm_Numb”OfIÅuts
-1; m++)

288 
	gsv
 = 
svd
.
W
Ğ
m
 );

289 
	gEig’V®ues
[
m
] = 
sv
 ;

291 
	gPršc®DœeùiÚs
 = 
svd
.
U
();

304 
M©rixTy³
 
b
(
M
,1) ;

305 
	gb
.
fl
(0);

307  
	gm
 = 0 ; m < 
	gM
 ; m++ ) {

308  
	gdim
 = 0 ; dim < 
	g´oDim
 ; dim++ ) {

309 
	gb
[
m
][0] +ğ
Pršc®DœeùiÚs
[
dim
][m] * ( 
X
[dim][0] - 
rowM—n
[dim][0] ) ;

318 
M©rixTy³
 
»cÚ¡ruùiÚ
(
´oDim
, 1);

320  
	gdim
 = 0 ; dim < 
	g´oDim
 ; dim++ ) {

321 
	g»cÚ¡ruùiÚ
[
dim
][0] = 
rowM—n
[dim][0];

323  
	gm
 = 0 ; m < 
	gM
 ; m++ ){

324 
	g»cÚ¡ruùiÚ
[
dim
][0] +ğ
Pršc®DœeùiÚs
[dim][
m
]*
b
[m][0];

332  
	gthis
->
SurçûDi¡ªû
Ğ
X
, 
»cÚ¡ruùiÚ
, 
´oDim
 ) ;

336 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

337 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

338 ::
SurçûDi¡ªû
 (
M©rixTy³
 
äom
, M©rixTy³ 
to
, 
nDim
){

339 
M©rixTy³
 
	gdi¡ªûVeùÜ
 = 
äom
 - 
to
;

340 
	g”rÜ
 = 0 ;

342 
	gdim
 = 0; dim < 
	gnDim
; dim++){

343 
	g”rÜ
 +ğ
sq¹
(
di¡ªûVeùÜ
[
dim
][0] * distanceVector[dim][0]);

346  
	g”rÜ
 / 
	gnDim
;

350 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

351 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

352 ::
Wr™eSurçûFÜDebug
 (
M©rixTy³
 *
surçû
, 
nPošts
, 
¡d
::
¡ršg
 
f’ame
)

354 
¡d
::
of¡»am
 
out
 ;

355 
	gout
.
İ’
 (
f’ame
.
c_¡r
()) ;

356  
	g±
 = 0 ;…ˆ< 
	gnPošts
 ;…t++ )

358 
	gout
 << (*
	gsurçû
)[0][
±
] << " " ;

359 
	gout
 << (*
	gsurçû
)[1][
±
] << " " ;

360 
	gout
 << (*
	gsurçû
)[2][
±
] << 
	g¡d
::
’dl
 ;

362 
	gout
.
şo£
 () ;

365 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

366 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

367 ::
G’”©eUnifÜmRªdomNumb”
 ()

370 
unifÜm
 = ( 
¿nd
 (è/ (è
RAND_MAX
 ) * 2 - 1.0 ;

371  
	gunifÜm
 ;

374 
	g‹m¶©e
<
şass
 
	gTOuutMeshTy³
>

375 
	g¤•CÜ»¥Úd’ûEv®u©Ü
<
	gTOuutMeshTy³
>

376 ::
G’”©eGaussŸnRªdomNumb”
 ()

383 
x1
, 
	gx2
, 
	gw
, 
	gy1
 ;

386 
	gx1
 = 
this
->
G’”©eUnifÜmRªdomNumb”
() ;

387 
	gx2
 = 
this
->
G’”©eUnifÜmRªdomNumb”
() ;

388 
	gw
 = 
x1
 * x1 + 
x2
 * x2;

389 }  
	gw
 >= 1.0 );

391 
	gw
 = 
sq¹
Ğ(-2.0 * 
log
Ğ
w
 ) ) / w );

392 
	gy1
 = 
x1
 * 
w
;

394  
	gy1
 ;

	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
74
1582
alignsrep.cpp
alignsrep.h
calcrestregularityfeatures.cpp
calcrestregularityfeatures.h
calregularityfeatures.cpp
calregularityfeatures.h
correspondenceevaluation.cpp
correspondenceevaluation.h
cost_function.cpp
cost_function.h
itkCorrespondenceEvaluator.h
itkMesh3DProcrustesAlignFilter.h
macro_const_values.h
matlabengine.cpp
matlabengine.h
movespokes.cpp
movespokes.h
newuoa.h
objectivefunction.cpp
objectivefunction.h
oneplusonecostfunction.cpp
oneplusonecostfunction.h
optimizationusingnewuoa.cpp
optimizationusingnewuoa.h
procrustes.cpp
procrustes.h
quadfigattribution.cpp
quadfigattribution.h
regularityentropy.cpp
regularityentropy.h
samplesreppoints.cpp
samplesreppoints.h
shiftedsrep.cpp
shiftedsrep.h
slidecrestspokes.cpp
slidecrestspokes.h
slidestandardspokes.cpp
slidestandardspokes.h
srepCorrespondenceEvaluator.h
srepprocrustes.cpp
srepprocrustes.h
thinplatesplinepdmtosrep.cpp
thinplatesplinepdmtosrep.h
thinplatesplinesrep.cpp
thinplatesplinesrep.h
toolsfunc.cpp
toolsfunc.h
uvmap.cpp
uvmap.h
visualization.cpp
visualization.h
weightedprocrustes.cpp
weightedprocrustes.h
/usr/include/dirent.h
/usr/include/math.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
itkCorrespondenceEvaluator.txx
itkMesh3DProcrustesAlignFilter.txx
srepCorrespondenceEvaluator.txx
/usr/include/alloca.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/ctype.h
/usr/include/stdc-predef.h
/usr/include/endian.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
